/**
 * Copyright (c) 2021 Visa, Inc.
 *
 * This source code is licensed under the MIT license
 * https://github.com/visa/visa-chart-components/blob/master/LICENSE
 *
 **/
import{r as t,c as i,h as n,g as s}from"./p-b0e13577.js";import{U as r}from"./p-01248d99.js";var e="http://www.w3.org/1999/xhtml";const h={svg:"http://www.w3.org/2000/svg",xhtml:e,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function o(t){var i=t+="",n=i.indexOf(":");return n>=0&&"xmlns"!==(i=t.slice(0,n))&&(t=t.slice(n+1)),h.hasOwnProperty(i)?{space:h[i],local:t}:t}function u(t){return function(){var i=this.ownerDocument,n=this.namespaceURI;return n===e&&i.documentElement.namespaceURI===e?i.createElement(t):i.createElementNS(n,t)}}function a(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function c(t){var i=o(t);return(i.local?a:u)(i)}function l(){}function f(t){return null==t?l:function(){return this.querySelector(t)}}function d(){return[]}function v(t){return null==t?d:function(){return this.querySelectorAll(t)}}function p(t){return function(){return this.matches(t)}}function y(t){return new Array(t.length)}function w(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function g(t,i,n,s,r,e){for(var h,o=0,u=i.length,a=e.length;o<a;++o)(h=i[o])?(h.__data__=e[o],s[o]=h):n[o]=new w(t,e[o]);for(;o<u;++o)(h=i[o])&&(r[o]=h)}function m(t,i,n,s,r,e,h){var o,u,a,c={},l=i.length,f=e.length,d=new Array(l);for(o=0;o<l;++o)(u=i[o])&&(d[o]=a="$"+h.call(u,u.__data__,o,i),a in c?r[o]=u:c[a]=u);for(o=0;o<f;++o)(u=c[a="$"+h.call(t,e[o],o,e)])?(s[o]=u,u.__data__=e[o],c[a]=null):n[o]=new w(t,e[o]);for(o=0;o<l;++o)(u=i[o])&&c[d[o]]===u&&(r[o]=u)}function b(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function M(t){return function(){this.removeAttribute(t)}}function k(t){return function(){this.removeAttributeNS(t.space,t.local)}}function A(t,i){return function(){this.setAttribute(t,i)}}function x(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function W(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function N(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function L(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function S(t){return function(){this.style.removeProperty(t)}}function T(t,i,n){return function(){this.style.setProperty(t,i,n)}}function E(t,i,n){return function(){var s=i.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function D(t,i){return t.style.getPropertyValue(i)||L(t).getComputedStyle(t,null).getPropertyValue(i)}function $(t){return function(){delete this[t]}}function C(t,i){return function(){this[t]=i}}function I(t,i){return function(){var n=i.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function O(t){return t.trim().split(/^|\s+/)}function z(t){return t.classList||new H(t)}function H(t){this._node=t,this._names=O(t.getAttribute("class")||"")}function _(t,i){for(var n=z(t),s=-1,r=i.length;++s<r;)n.add(i[s])}function q(t,i){for(var n=z(t),s=-1,r=i.length;++s<r;)n.remove(i[s])}function X(t){return function(){_(this,t)}}function R(t){return function(){q(this,t)}}function j(t,i){return function(){(i.apply(this,arguments)?_:q)(this,t)}}function P(){this.textContent=""}function F(t){return function(){this.textContent=t}}function G(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function V(){this.innerHTML=""}function Y(t){return function(){this.innerHTML=t}}function K(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function B(){this.nextSibling&&this.parentNode.appendChild(this)}function U(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Z(){return null}function J(){var t=this.parentNode;t&&t.removeChild(this)}function Q(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function tt(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}w.prototype={constructor:w,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},H.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var it={},nt=null;function st(t,i,n){return t=rt(t,i,n),function(i){var n=i.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,i)}}function rt(t,i,n){return function(s){var r=nt;nt=s;try{t.call(this,this.__data__,i,n)}finally{nt=r}}}function et(t){return t.trim().split(/^|\s+/).map((function(t){var i="",n=t.indexOf(".");return n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),{type:t,name:i}}))}function ht(t){return function(){var i=this.__on;if(i){for(var n,s=0,r=-1,e=i.length;s<e;++s)n=i[s],t.type&&n.type!==t.type||n.name!==t.name?i[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?i.length=r:delete this.__on}}}function ot(t,i,n){var s=it.hasOwnProperty(t.type)?st:rt;return function(r,e,h){var o,u=this.__on,a=s(i,e,h);if(u)for(var c=0,l=u.length;c<l;++c)if((o=u[c]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=a,o.capture=n),void(o.value=i);this.addEventListener(t.type,a,n),o={type:t.type,name:t.name,value:i,listener:a,capture:n},u?u.push(o):this.__on=[o]}}function ut(t,i,n){var s=L(t),r=s.CustomEvent;"function"==typeof r?r=new r(i,n):(r=s.document.createEvent("Event"),n?(r.initEvent(i,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function at(t,i){return function(){return ut(this,t,i)}}function ct(t,i){return function(){return ut(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(it={mouseenter:"mouseover",mouseleave:"mouseout"}));var lt=[null];function ft(t,i){this._groups=t,this._parents=i}function dt(){return new ft([[document.documentElement]],lt)}function vt(t){return"string"==typeof t?new ft([[document.querySelector(t)]],[document.documentElement]):new ft([[t]],lt)}function pt(t){return 1-Math.sqrt(1-t*t)}ft.prototype=dt.prototype={constructor:ft,select:function(t){"function"!=typeof t&&(t=f(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h,o=i[r],u=o.length,a=s[r]=new Array(u),c=0;c<u;++c)(e=o[c])&&(h=t.call(e,e.__data__,c,o))&&("__data__"in e&&(h.__data__=e.__data__),a[c]=h);return new ft(s,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=v(t));for(var i=this._groups,n=i.length,s=[],r=[],e=0;e<n;++e)for(var h,o=i[e],u=o.length,a=0;a<u;++a)(h=o[a])&&(s.push(t.call(h,h.__data__,a,o)),r.push(h));return new ft(s,r)},filter:function(t){"function"!=typeof t&&(t=p(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h=i[r],o=h.length,u=s[r]=[],a=0;a<o;++a)(e=h[a])&&t.call(e,e.__data__,a,h)&&u.push(e);return new ft(s,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),a=-1,this.each((function(t){d[++a]=t})),d;var n=i?m:g,s=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),o=new Array(e),u=new Array(e),a=0;a<e;++a){var c=s[a],l=r[a],f=l.length,d=t.call(c,c&&c.__data__,a,s),v=d.length,p=o[a]=new Array(v),y=h[a]=new Array(v);n(c,l,p,y,u[a]=new Array(f),d,i);for(var w,b,M=0,k=0;M<v;++M)if(w=p[M]){for(M>=k&&(k=M+1);!(b=y[k])&&++k<v;);w._next=b||null}}return(h=new ft(h,s))._enter=o,h._exit=u,h},enter:function(){return new ft(this._enter||this._groups.map(y),this._parents)},exit:function(){return new ft(this._exit||this._groups.map(y),this._parents)},join:function(t,i,n){var s=this.enter(),r=this,e=this.exit();return s="function"==typeof t?t(s):s.append(t+""),null!=i&&(r=i(r)),null==n?e.remove():n(e),s&&r?s.merge(r).order():r},merge:function(t){for(var i=this._groups,n=t._groups,s=i.length,r=Math.min(s,n.length),e=new Array(s),h=0;h<r;++h)for(var o,u=i[h],a=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=u[f]||a[f])&&(l[f]=o);for(;h<s;++h)e[h]=i[h];return new ft(e,this._parents)},order:function(){for(var t=this._groups,i=-1,n=t.length;++i<n;)for(var s,r=t[i],e=r.length-1,h=r[e];--e>=0;)(s=r[e])&&(h&&4^s.compareDocumentPosition(h)&&h.parentNode.insertBefore(s,h),h=s);return this},sort:function(t){function i(i,n){return i&&n?t(i.__data__,n.__data__):!i-!n}t||(t=b);for(var n=this._groups,s=n.length,r=new Array(s),e=0;e<s;++e){for(var h,o=n[e],u=o.length,a=r[e]=new Array(u),c=0;c<u;++c)(h=o[c])&&(a[c]=h);a.sort(i)}return new ft(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var s=t[i],r=0,e=s.length;r<e;++r){var h=s[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,n=0,s=i.length;n<s;++n)for(var r,e=i[n],h=0,o=e.length;h<o;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var n=o(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((null==i?n.local?k:M:"function"==typeof i?n.local?N:W:n.local?x:A)(n,i))},style:function(t,i,n){return arguments.length>1?this.each((null==i?S:"function"==typeof i?E:T)(t,i,null==n?"":n)):D(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?$:"function"==typeof i?I:C)(t,i)):this.node()[t]},classed:function(t,i){var n=O(t+"");if(arguments.length<2){for(var s=z(this.node()),r=-1,e=n.length;++r<e;)if(!s.contains(n[r]))return!1;return!0}return this.each(("function"==typeof i?j:i?X:R)(n,i))},text:function(t){return arguments.length?this.each(null==t?P:("function"==typeof t?G:F)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?V:("function"==typeof t?K:Y)(t)):this.node().innerHTML},raise:function(){return this.each(B)},lower:function(){return this.each(U)},append:function(t){var i="function"==typeof t?t:c(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var n="function"==typeof t?t:c(t),s=null==i?Z:"function"==typeof i?i:f(i);return this.select((function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)}))},remove:function(){return this.each(J)},clone:function(t){return this.select(t?tt:Q)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,n){var s,r,e=et(t+""),h=e.length;if(!(arguments.length<2)){for(o=i?ot:ht,null==n&&(n=!1),s=0;s<h;++s)this.each(o(e[s],i,n));return this}var o=this.node().__on;if(o)for(var u,a=0,c=o.length;a<c;++a)for(s=0,u=o[a];s<h;++s)if((r=e[s]).type===u.type&&r.name===u.name)return u.value},dispatch:function(t,i){return this.each(("function"==typeof i?ct:at)(t,i))}};const{propDefaultValues:yt}=r;class wt{}wt.highestHeadingLevel=yt.highestHeadingLevel,wt.mainTitle="Alluvial Diagram Title",wt.subTitle="This is the alluvial diagram's subtitle",wt.height=300,wt.width=650,wt.margin={top:3,bottom:3,right:6.5,left:6.5},wt.padding={top:20,bottom:50,right:50,left:50},wt.sourceAccessor="source",wt.targetAccessor="target",wt.valueAccessor="value",wt.groupAccessor="group",wt.labelAccessor="name",wt.nodeIDAccessor="id",wt.nodeConfig={fill:!1,width:12,padding:20,alignment:"left",compare:!1},wt.linkConfig={visible:!0,fillMode:"none",opacity:.3},wt.accessibility=yt.accessibility,wt.colorPalette=yt.colorPaletteCategorical,wt.dataLabel=yt.dataLabel,wt.annotations=yt.annotations,wt.hoverStyle=yt.hoverStyle,wt.clickStyle=yt.clickStyle,wt.hoverOpacity=yt.hoverOpacity,wt.cursor=yt.cursor,wt.tooltipLabel=yt.tooltipLabel,wt.showTooltip=yt.showTooltip,wt.suppressEvents=yt.suppressEvents,wt.clickHighlight=yt.clickHighlight;var gt="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),mt=new Uint8Array(16);function bt(){if(!gt)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return gt(mt)}for(var Mt=[],kt=0;kt<256;++kt)Mt[kt]=(kt+256).toString(16).substr(1);function At(t,i,n){var s=i&&n||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||bt)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[s+e]=r[e];return i||function(t){var i=0;return[Mt[t[i++]],Mt[t[i++]],Mt[t[i++]],Mt[t[i++]],"-",Mt[t[i++]],Mt[t[i++]],"-",Mt[t[i++]],Mt[t[i++]],"-",Mt[t[i++]],Mt[t[i++]],"-",Mt[t[i++]],Mt[t[i++]],Mt[t[i++]],Mt[t[i++]],Mt[t[i++]],Mt[t[i++]]].join("")}(r)}var xt={value:function(){}};function Wt(){for(var t,i=0,n=arguments.length,s={};i<n;++i){if(!(t=arguments[i]+"")||t in s||/[\s.]/.test(t))throw new Error("illegal type: "+t);s[t]=[]}return new Nt(s)}function Nt(t){this._=t}function Lt(t,i){return t.trim().split(/^|\s+/).map((function(t){var n="",s=t.indexOf(".");if(s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function St(t,i){for(var n,s=0,r=t.length;s<r;++s)if((n=t[s]).name===i)return n.value}function Tt(t,i,n){for(var s=0,r=t.length;s<r;++s)if(t[s].name===i){t[s]=xt,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=n&&t.push({name:i,value:n}),t}Nt.prototype=Wt.prototype={constructor:Nt,on:function(t,i){var n,s=this._,r=Lt(t+"",s),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(n=(t=r[e]).type)s[n]=Tt(s[n],t.name,i);else if(null==i)for(n in s)s[n]=Tt(s[n],t.name,null);return this}for(;++e<h;)if((n=(t=r[e]).type)&&(n=St(s[n],t.name)))return n},copy:function(){var t={},i=this._;for(var n in i)t[n]=i[n].slice();return new Nt(t)},call:function(t,i){if((n=arguments.length-2)>0)for(var n,s,r=new Array(n),e=0;e<n;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,n=(s=this._[t]).length;e<n;++e)s[e].value.apply(i,r)},apply:function(t,i,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],r=0,e=s.length;r<e;++r)s[r].value.apply(i,n)}};var Et,Dt,$t=0,Ct=0,It=0,Ot=0,zt=0,Ht=0,_t="object"==typeof performance&&performance.now?performance:Date,qt="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xt(){return zt||(qt(Rt),zt=_t.now()+Ht)}function Rt(){zt=0}function jt(){this._call=this._time=this._next=null}function Pt(t,i,n){var s=new jt;return s.restart(t,i,n),s}function Ft(){zt=(Ot=_t.now())+Ht,$t=Ct=0;try{!function(){Xt(),++$t;for(var t,i=Et;i;)(t=zt-i._time)>=0&&i._call.call(null,t),i=i._next;--$t}()}finally{$t=0,function(){for(var t,i,n=Et,s=1/0;n;)n._call?(s>n._time&&(s=n._time),t=n,n=n._next):(i=n._next,n._next=null,n=t?t._next=i:Et=i);Dt=t,Vt(s)}(),zt=0}}function Gt(){var t=_t.now(),i=t-Ot;i>1e3&&(Ht-=i,Ot=t)}function Vt(t){$t||(Ct&&(Ct=clearTimeout(Ct)),t-zt>24?(t<1/0&&(Ct=setTimeout(Ft,t-_t.now()-Ht)),It&&(It=clearInterval(It))):(It||(Ot=_t.now(),It=setInterval(Gt,1e3)),$t=1,qt(Ft)))}function Yt(t,i,n){var s=new jt;return s.restart((function(n){s.stop(),t(n+i)}),i=null==i?0:+i,n),s}jt.prototype=Pt.prototype={constructor:jt,restart:function(t,i,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Xt():+n)+(null==i?0:+i),this._next||Dt===this||(Dt?Dt._next=this:Et=this,Dt=this),this._call=t,this._time=n,Vt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vt())}};var Kt=Wt("start","end","interrupt"),Bt=[];function Ut(t,i,n,s,r,e){var h=t.__transition;if(h){if(n in h)return}else t.__transition={};!function(t,i,n){var s,r=t.__transition;function e(u){var a,c,l,f;if(1!==n.state)return o();for(a in r)if((f=r[a]).name===n.name){if(3===f.state)return Yt(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[a]):+a<i&&(f.state=6,f.timer.stop(),delete r[a])}if(Yt((function(){3===n.state&&(n.state=4,n.timer.restart(h,n.delay,n.time),h(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,s=new Array(l=n.tween.length),a=0,c=-1;a<l;++a)(f=n.tween[a].value.call(t,t.__data__,n.index,n.group))&&(s[++c]=f);s.length=c+1}}function h(i){for(var r=i<n.duration?n.ease.call(null,i/n.duration):(n.timer.restart(o),n.state=5,1),e=-1,h=s.length;++e<h;)s[e].call(null,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){for(var s in n.state=6,n.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=n,n.timer=Pt((function(t){n.state=1,n.timer.restart(e,n.delay,n.time),n.delay<=t&&e(t-n.delay)}),0,n.time)}(t,n,{name:i,index:s,group:r,on:Kt,tween:Bt,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function Zt(t,i){var n=Qt(t,i);if(n.state>0)throw new Error("too late; already scheduled");return n}function Jt(t,i){var n=Qt(t,i);if(n.state>2)throw new Error("too late; already started");return n}function Qt(t,i){var n=t.__transition;if(!n||!(n=n[i]))throw new Error("transition not found");return n}function ti(t,i,n){t.prototype=i.prototype=n,n.constructor=t}function ii(t,i){var n=Object.create(t.prototype);for(var s in i)n[s]=i[s];return n}function ni(){}var si="\\s*([+-]?\\d+)\\s*",ri="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ei="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hi=/^#([0-9a-f]{3,8})$/,oi=new RegExp("^rgb\\("+[si,si,si]+"\\)$"),ui=new RegExp("^rgb\\("+[ei,ei,ei]+"\\)$"),ai=new RegExp("^rgba\\("+[si,si,si,ri]+"\\)$"),ci=new RegExp("^rgba\\("+[ei,ei,ei,ri]+"\\)$"),li=new RegExp("^hsl\\("+[ri,ei,ei]+"\\)$"),fi=new RegExp("^hsla\\("+[ri,ei,ei,ri]+"\\)$"),di={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function vi(){return this.rgb().formatHex()}function pi(){return this.rgb().formatRgb()}function yi(t){var i,n;return t=(t+"").trim().toLowerCase(),(i=hi.exec(t))?(n=i[1].length,i=parseInt(i[1],16),6===n?wi(i):3===n?new Mi(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===n?gi(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===n?gi(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=oi.exec(t))?new Mi(i[1],i[2],i[3],1):(i=ui.exec(t))?new Mi(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=ai.exec(t))?gi(i[1],i[2],i[3],i[4]):(i=ci.exec(t))?gi(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=li.exec(t))?Wi(i[1],i[2]/100,i[3]/100,1):(i=fi.exec(t))?Wi(i[1],i[2]/100,i[3]/100,i[4]):di.hasOwnProperty(t)?wi(di[t]):"transparent"===t?new Mi(NaN,NaN,NaN,0):null}function wi(t){return new Mi(t>>16&255,t>>8&255,255&t,1)}function gi(t,i,n,s){return s<=0&&(t=i=n=NaN),new Mi(t,i,n,s)}function mi(t){return t instanceof ni||(t=yi(t)),t?new Mi((t=t.rgb()).r,t.g,t.b,t.opacity):new Mi}function bi(t,i,n,s){return 1===arguments.length?mi(t):new Mi(t,i,n,null==s?1:s)}function Mi(t,i,n,s){this.r=+t,this.g=+i,this.b=+n,this.opacity=+s}function ki(){return"#"+xi(this.r)+xi(this.g)+xi(this.b)}function Ai(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function xi(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Wi(t,i,n,s){return s<=0?t=i=n=NaN:n<=0||n>=1?t=i=NaN:i<=0&&(t=NaN),new Li(t,i,n,s)}function Ni(t){if(t instanceof Li)return new Li(t.h,t.s,t.l,t.opacity);if(t instanceof ni||(t=yi(t)),!t)return new Li;if(t instanceof Li)return t;var i=(t=t.rgb()).r/255,n=t.g/255,s=t.b/255,r=Math.min(i,n,s),e=Math.max(i,n,s),h=NaN,o=e-r,u=(e+r)/2;return o?(h=i===e?(n-s)/o+6*(n<s):n===e?(s-i)/o+2:(i-n)/o+4,o/=u<.5?e+r:2-e-r,h*=60):o=u>0&&u<1?0:h,new Li(h,o,u,t.opacity)}function Li(t,i,n,s){this.h=+t,this.s=+i,this.l=+n,this.opacity=+s}function Si(t,i,n){return 255*(t<60?i+(n-i)*t/60:t<180?n:t<240?i+(n-i)*(240-t)/60:i)}function Ti(t){return function(){return t}}function Ei(t,i){var n=i-t;return n?function(t,i){return function(n){return t+n*i}}(t,n):Ti(isNaN(t)?i:t)}ti(ni,yi,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:vi,formatHex:vi,formatHsl:function(){return Ni(this).formatHsl()},formatRgb:pi,toString:pi}),ti(Mi,bi,ii(ni,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Mi(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Mi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ki,formatHex:ki,formatRgb:Ai,toString:Ai})),ti(Li,(function(t,i,n,s){return 1===arguments.length?Ni(t):new Li(t,i,n,null==s?1:s)}),ii(ni,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Li(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Li(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*i,r=2*n-s;return new Mi(Si(t>=240?t-240:t+120,r,s),Si(t,r,s),Si(t<120?t+240:t-120,r,s),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Di=function t(i){var n=function(t){return 1==(t=+t)?Ei:function(i,n){return n-i?function(t,i,n){return t=Math.pow(t,n),i=Math.pow(i,n)-t,n=1/n,function(s){return Math.pow(t+s*i,n)}}(i,n,t):Ti(isNaN(i)?n:i)}}(i);function s(t,i){var s=n((t=bi(t)).r,(i=bi(i)).r),r=n(t.g,i.g),e=n(t.b,i.b),h=Ei(t.opacity,i.opacity);return function(i){return t.r=s(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return s.gamma=t,s}(1);function $i(t,i){return t=+t,i=+i,function(n){return t*(1-n)+i*n}}var Ci=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ii=new RegExp(Ci.source,"g");function Oi(t,i){var n,s,r,e=Ci.lastIndex=Ii.lastIndex=0,h=-1,o=[],u=[];for(t+="",i+="";(n=Ci.exec(t))&&(s=Ii.exec(i));)(r=s.index)>e&&(r=i.slice(e,r),o[h]?o[h]+=r:o[++h]=r),(n=n[0])===(s=s[0])?o[h]?o[h]+=s:o[++h]=s:(o[++h]=null,u.push({i:h,x:$i(n,s)})),e=Ii.lastIndex;return e<i.length&&(r=i.slice(e),o[h]?o[h]+=r:o[++h]=r),o.length<2?u[0]?function(t){return function(i){return t(i)+""}}(u[0].x):function(t){return function(){return t}}(i):(i=u.length,function(t){for(var n,s=0;s<i;++s)o[(n=u[s]).i]=n.x(t);return o.join("")})}var zi,Hi,_i,qi,Xi=180/Math.PI,Ri={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ji(t,i,n,s,r,e){var h,o,u;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(u=t*n+i*s)&&(n-=t*u,s-=i*u),(o=Math.sqrt(n*n+s*s))&&(n/=o,s/=o,u/=o),t*s<i*n&&(t=-t,i=-i,u=-u,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*Xi,skewX:Math.atan(u)*Xi,scaleX:h,scaleY:o}}function Pi(t,i,n,s){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var o=[],u=[];return e=t(e),h=t(h),function(t,s,r,e,h,o){if(t!==r||s!==e){var u=h.push("translate(",null,i,null,n);o.push({i:u-4,x:$i(t,r)},{i:u-2,x:$i(s,e)})}else(r||e)&&h.push("translate("+r+i+e+n)}(e.translateX,e.translateY,h.translateX,h.translateY,o,u),function(t,i,n,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:n.push(r(n)+"rotate(",null,s)-2,x:$i(t,i)})):i&&n.push(r(n)+"rotate("+i+s)}(e.rotate,h.rotate,o,u),function(t,i,n,e){t!==i?e.push({i:n.push(r(n)+"skewX(",null,s)-2,x:$i(t,i)}):i&&n.push(r(n)+"skewX("+i+s)}(e.skewX,h.skewX,o,u),function(t,i,n,s,e,h){if(t!==n||i!==s){var o=e.push(r(e)+"scale(",null,",",null,")");h.push({i:o-4,x:$i(t,n)},{i:o-2,x:$i(i,s)})}else 1===n&&1===s||e.push(r(e)+"scale("+n+","+s+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,o,u),e=h=null,function(t){for(var i,n=-1,s=u.length;++n<s;)o[(i=u[n]).i]=i.x(t);return o.join("")}}}var Fi=Pi((function(t){return"none"===t?Ri:(zi||(zi=document.createElement("DIV"),Hi=document.documentElement,_i=document.defaultView),zi.style.transform=t,t=_i.getComputedStyle(Hi.appendChild(zi),null).getPropertyValue("transform"),Hi.removeChild(zi),ji(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Gi=Pi((function(t){return null==t?Ri:(qi||(qi=document.createElementNS("http://www.w3.org/2000/svg","g")),qi.setAttribute("transform",t),(t=qi.transform.baseVal.consolidate())?ji((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ri)}),", ",")",")");function Vi(t,i){var n,s;return function(){var r=Jt(this,t),e=r.tween;if(e!==n)for(var h=0,o=(s=n=e).length;h<o;++h)if(s[h].name===i){(s=s.slice()).splice(h,1);break}r.tween=s}}function Yi(t,i,n){var s,r;if("function"!=typeof n)throw new Error;return function(){var e=Jt(this,t),h=e.tween;if(h!==s){r=(s=h).slice();for(var o={name:i,value:n},u=0,a=r.length;u<a;++u)if(r[u].name===i){r[u]=o;break}u===a&&r.push(o)}e.tween=r}}function Ki(t,i,n){var s=t._id;return t.each((function(){var t=Jt(this,s);(t.value||(t.value={}))[i]=n.apply(this,arguments)})),function(t){return Qt(t,s).value[i]}}function Bi(t,i){var n;return("number"==typeof i?$i:i instanceof yi?Di:(n=yi(i))?(i=n,Di):Oi)(t,i)}function Ui(t){return function(){this.removeAttribute(t)}}function Zi(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ji(t,i,n){var s,r;return function(){var e=this.getAttribute(t);return e===n?null:e===s?r:r=i(s=e,n)}}function Qi(t,i,n){var s,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===n?null:e===s?r:r=i(s=e,n)}}function tn(t,i,n){var s,r,e;return function(){var h,o=n(this);if(null!=o)return(h=this.getAttribute(t))===o?null:h===s&&o===r?e:e=i(s=h,r=o);this.removeAttribute(t)}}function nn(t,i,n){var s,r,e;return function(){var h,o=n(this);if(null!=o)return(h=this.getAttributeNS(t.space,t.local))===o?null:h===s&&o===r?e:e=i(s=h,r=o);this.removeAttributeNS(t.space,t.local)}}function sn(t,i){function n(){var n=this,s=i.apply(n,arguments);return s&&function(i){n.setAttributeNS(t.space,t.local,s(i))}}return n._value=i,n}function rn(t,i){function n(){var n=this,s=i.apply(n,arguments);return s&&function(i){n.setAttribute(t,s(i))}}return n._value=i,n}function en(t,i){return function(){Zt(this,t).delay=+i.apply(this,arguments)}}function hn(t,i){return i=+i,function(){Zt(this,t).delay=i}}function on(t,i){return function(){Jt(this,t).duration=+i.apply(this,arguments)}}function un(t,i){return i=+i,function(){Jt(this,t).duration=i}}function an(t,i){if("function"!=typeof i)throw new Error;return function(){Jt(this,t).ease=i}}function cn(t,i,n){var s,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?Zt:Jt;return function(){var h=e(this,t),o=h.on;o!==s&&(r=(s=o).copy()).on(i,n),h.on=r}}var ln=dt.prototype.constructor;function fn(t,i,n){function s(){var s=this,r=i.apply(s,arguments);return r&&function(i){s.style.setProperty(t,r(i),n)}}return s._value=i,s}var dn=0;function vn(t,i,n,s){this._groups=t,this._parents=i,this._name=n,this._id=s}function pn(){return++dn}var yn=dt.prototype;vn.prototype=function(t){return dt().transition(t)}.prototype={constructor:vn,select:function(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=f(t));for(var s=this._groups,r=s.length,e=new Array(r),h=0;h<r;++h)for(var o,u,a=s[h],c=a.length,l=e[h]=new Array(c),d=0;d<c;++d)(o=a[d])&&(u=t.call(o,o.__data__,d,a))&&("__data__"in o&&(u.__data__=o.__data__),l[d]=u,Ut(l[d],i,n,d,l,Qt(o,n)));return new vn(e,this._parents,i,n)},selectAll:function(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=v(t));for(var s=this._groups,r=s.length,e=[],h=[],o=0;o<r;++o)for(var u,a=s[o],c=a.length,l=0;l<c;++l)if(u=a[l]){for(var f,d=t.call(u,u.__data__,l,a),p=Qt(u,n),y=0,w=d.length;y<w;++y)(f=d[y])&&Ut(f,i,n,y,d,p);e.push(d),h.push(u)}return new vn(e,h,i,n)},filter:function(t){"function"!=typeof t&&(t=p(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h=i[r],o=h.length,u=s[r]=[],a=0;a<o;++a)(e=h[a])&&t.call(e,e.__data__,a,h)&&u.push(e);return new vn(s,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,n=t._groups,s=i.length,r=Math.min(s,n.length),e=new Array(s),h=0;h<r;++h)for(var o,u=i[h],a=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=u[f]||a[f])&&(l[f]=o);for(;h<s;++h)e[h]=i[h];return new vn(e,this._parents,this._name,this._id)},selection:function(){return new ln(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,n=pn(),s=this._groups,r=s.length,e=0;e<r;++e)for(var h,o=s[e],u=o.length,a=0;a<u;++a)if(h=o[a]){var c=Qt(h,i);Ut(h,t,n,a,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new vn(s,this._parents,t,n)},call:yn.call,nodes:yn.nodes,node:yn.node,size:yn.size,empty:yn.empty,each:yn.each,on:function(t,i){var n=this._id;return arguments.length<2?Qt(this.node(),n).on.on(t):this.each(cn(n,t,i))},attr:function(t,i){var n=o(t),s="transform"===n?Gi:Bi;return this.attrTween(t,"function"==typeof i?(n.local?nn:tn)(n,s,Ki(this,"attr."+t,i)):null==i?(n.local?Zi:Ui)(n):(n.local?Qi:Ji)(n,s,i+""))},attrTween:function(t,i){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;var s=o(t);return this.tween(n,(s.local?sn:rn)(s,i))},style:function(t,i,n){var s="transform"==(t+="")?Fi:Bi;return null==i?this.styleTween(t,function(t,i){var n,s,r;return function(){var e=D(this,t),h=(this.style.removeProperty(t),D(this,t));return e===h?null:e===n&&h===s?r:r=i(n=e,s=h)}}(t,s)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,n){var s,r,e;return function(){var h=D(this,t),o=n(this);return null==o&&(this.style.removeProperty(t),o=D(this,t)),h===o?null:h===s&&o===r?e:e=i(s=h,r=o)}}(t,s,Ki(this,"style."+t,i)):function(t,i,n){var s,r;return function(){var e=D(this,t);return e===n?null:e===s?r:r=i(s=e,n)}}(t,s,i+""),n)},styleTween:function(t,i,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;return this.tween(s,fn(t,i,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(Ki(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var n in this.__transition)if(+n!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var n=this._id;if(t+="",arguments.length<2){for(var s,r=Qt(this.node(),n).tween,e=0,h=r.length;e<h;++e)if((s=r[e]).name===t)return s.value;return null}return this.each((null==i?Vi:Yi)(n,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?en:hn)(i,t)):Qt(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?on:un)(i,t)):Qt(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(an(i,t)):Qt(this.node(),i).ease}};var wn={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function gn(t,i){for(var n;!(n=t.__transition)||!(n=n[i]);)if(!(t=t.parentNode))return wn.time=Xt(),wn;return n}dt.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var n,s,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(n=e[r]).name===i?(s=n.state>2&&n.state<5,n.state=6,n.timer.stop(),s&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},dt.prototype.transition=function(t){var i,n;t instanceof vn?(i=t._id,t=t._name):(i=pn(),(n=wn).time=Xt(),t=null==t?null:t+"");for(var s=this._groups,r=s.length,e=0;e<r;++e)for(var h,o=s[e],u=o.length,a=0;a<u;++a)(h=o[a])&&Ut(h,t,i,a,o,n||gn(h,i));return new vn(s,this._parents,t,i)};const{initializeDescriptionRoot:mn,setAccessibilityController:bn,initializeElementAccess:Mn,setElementFocusHandler:kn,setElementAccessID:An,setAccessChartCounts:xn,hideNonessentialGroups:Wn,setAccessTitle:Nn,setAccessSubtitle:Ln,setAccessLongDescription:Sn,setAccessExecutiveSummary:Tn,setAccessPurpose:En,setAccessContext:Dn,setAccessStatistics:$n,setAccessStructure:Cn,setAccessAnnotation:In,retainAccessFocus:On,checkAccessFocus:zn,setElementInteractionAccessState:Hn,setAccessibilityDescriptionWidth:_n,transitionEndAll:qn,annotate:Xn,checkClicked:Rn,checkInteraction:jn,convertVisaColor:Pn,drawTooltip:Fn,findTagLevel:Gn,getColors:Vn,getPadding:Yn,initTooltipStyle:Kn,overrideTitleTooltip:Bn,scopeDataKeys:Un,chartAccessors:Zn,sankey:Jn,sankeyCenter:Qn,sankeyJustify:ts,sankeyLeft:is,sankeyLinkHorizontal:ns,sankeyRight:ss}=r,rs=class{constructor(n){t(this,n),this.mainTitle=wt.mainTitle,this.subTitle=wt.subTitle,this.height=wt.height,this.width=wt.width,this.highestHeadingLevel=wt.highestHeadingLevel,this.margin=wt.margin,this.padding=wt.padding,this.sourceAccessor=wt.sourceAccessor,this.targetAccessor=wt.targetAccessor,this.valueAccessor=wt.valueAccessor,this.groupAccessor=wt.groupAccessor,this.nodeIDAccessor=wt.nodeIDAccessor,this.nodeConfig=wt.nodeConfig,this.linkConfig=wt.linkConfig,this.colorPalette=wt.colorPalette,this.hoverStyle=wt.hoverStyle,this.clickStyle=wt.clickStyle,this.cursor=wt.cursor,this.hoverOpacity=wt.hoverOpacity,this.dataLabel=wt.dataLabel,this.showTooltip=wt.showTooltip,this.tooltipLabel=wt.tooltipLabel,this.accessibility=wt.accessibility,this.annotations=wt.annotations,this.suppressEvents=wt.suppressEvents,this.clickHighlight=wt.clickHighlight,this.unitTest=!1,this.shouldValidateAccessibility=!0,this.innerInteractionKeys=[],this.topLevel="h2",this.bottomLevel="p",this.sourceLinksString="sourceLinks",this.targetLinksString="targetLinks",this.shouldSetDimensions=!1,this.shouldUpdateData=!1,this.shouldSetColors=!1,this.shouldSetTagLevels=!1,this.shouldRedrawWrapper=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetSelectionClass=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldSetGlobalSelections=!1,this.shouldSetTestingAttributes=!1,this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}linkDataWatcher(t,i){}nodeDataWatcher(t,i){}idWatcher(t,i){this.chartID=t||"alluvial-diagram-"+At(),this.alluvialDiagramEl.id=this.chartID}mainTitleWatcher(t,i){}subTitleWatcher(t,i){}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}dimensionWatcher(t,i){this.shouldSetDimensions=!0}sourceAccessorWatcher(t,i){}targetAccessorWatcher(t,i){}valueAccessorWatcher(t,i){}groupAccessorWatcher(t,i){}nodeIDAccessorWatcher(t,i){}nodeConfigWatcher(t,i){}linkConfigWatcher(t,i){}colorPaletteWatcher(t,i){}colorsWatcher(t,i){}clickStyleWatcher(t,i){}hoverStyleWatcher(t,i){}cursorWatcher(t,i){}hoverOpacityWatcher(t,i){}dataLabelWatcher(t,i){}tooltipLabelWatcher(t,i){}showTooltipWatcher(t,i){}accessibilityWatcher(t,i){(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const n=t&&t.includeDataKeyNames,s=i&&i.includeDataKeyNames;n===s&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(n!==s&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0)}annotationsWatcher(t,i){}clickWatcher(t,i){}hoverWatcher(t,i){}interactionWatcher(t,i){}suppressWatcher(t,i){}unitTestWatcher(t,i){this.shouldSetTestingAttributes=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.defaults=!0,this.chartID=this.uniqueID||"alluvial-diagram-"+At(),this.alluvialDiagramEl.id=this.chartID,this.setTagLevels(),this.setDimensions(),this.prepareData(),this.validateIdAccessor(),this.validateLabelText(),this.validateLinkFillMode(),this.validateNodeAlignment(),this.validateInteractionKeys(),this.validateLinkGroups(),this.setColors(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.renderRootElements(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.setTooltipInitialStyle(),this.setNodesDimensions(),this.callSankeyGenerator(),this.setGlobalSelections(),this.setTestingAttributes(),this.drawNodes(),this.drawLinks(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.setGroupAccessibilityID(),this.setChartCountAccessibility(),this.setSelectedClass(),this.drawNodeLabels(),this.drawAnnotations(),this.setAnnotationAccessibility(),Wn(this.root.node(),null),t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.reSetRoot(),this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.setNodesDimensions(),this.callSankeyGenerator(),this.setGlobalSelections(),this.shouldSetTestingAttributes&&(this.setTestingAttributes(),this.shouldSetTestingAttributes=!1),this.drawNodes(),this.drawLinks(),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.drawNodeLabels(),this.drawAnnotations(),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),t("component did update")})}setDimensions(){this.padding="string"==typeof this.padding?Yn(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}prepareData(){this.nodeList=[],this.linkList=[],this.linkData.forEach((t,i)=>{const n={source:t[this.sourceAccessor],target:t[this.targetAccessor],value:t[this.valueAccessor],data:t};n[this.groupAccessor]=t[this.groupAccessor],this.linkList[i]=n}),this.nodeData&&this.nodeData.length>1?this.nodeList=this.nodeData:this.createNodeList()}createNodeList(){this.nodeList=[],this.linkData.map(t=>{this.nodeList.some(i=>i.id===t[this.sourceAccessor])||this.nodeList.push({id:t[this.sourceAccessor]}),this.nodeList.some(i=>i.id===t[this.targetAccessor])||this.nodeList.push({id:t[this.targetAccessor]})})}validateLabelText(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.innerIDAccessor}validateIdAccessor(){this.innerIDAccessor=this.nodeData&&this.nodeData.length>1&&this.nodeList[0][this.nodeIDAccessor]?this.nodeIDAccessor:"id"}validateLinkFillMode(){this.innerLinkFillMode=this.groupAccessor&&"group"===this.linkConfig.fillMode?"group":"source"===this.linkConfig.fillMode?"source":"target"===this.linkConfig.fillMode?"target":"path"===this.linkConfig.fillMode?"path":"none"}validateNodeAlignment(){this.innerNodeAlignment="right"===this.nodeConfig.alignment?ss:"center"===this.nodeConfig.alignment?Qn:"justify"===this.nodeConfig.alignment?ts:is}validateInteractionKeys(){this.interactionKeysWithObjs=[],this.innerInteractionKeys=[],this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.sourceAccessor,this.targetAccessor]}validateLinkGroups(){this.groupKeys=[],this.groupAccessor&&(this.groupKeys=this.linkData.map(t=>t[this.groupAccessor]).filter((t,i,n)=>n.indexOf(t)===i))}setNodesDimensions(){this.alluvialProperties=Jn(this.nodeConfig.compare,this.linkConfig.visible).nodeId(t=>t[this.innerIDAccessor]).nodeWidth(this.nodeConfig.width).nodePadding(this.nodeConfig.padding).nodeAlign(this.innerNodeAlignment).nodeSort(null).size([this.innerPaddedWidth,this.innerPaddedHeight])}callSankeyGenerator(){this.preppedData=((t,i)=>this.alluvialProperties({nodes:this.nodeList.map(t=>Object.assign({},t)),links:i.map(t=>Object.assign({},t))}))(0,this.linkList)}renderRootElements(){this.svg=vt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").append("svg").attr("width",this.width).attr("height",this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.nodeG=this.rootG.append("g").attr("class","alluvial-node-group"),this.linkG=this.rootG.append("g").attr("class","alluvial-link-group"),this.labelG=this.rootG.append("g").attr("class","alluvial-dataLabel-group"),this.tooltipG=vt(this.alluvialDiagramEl).select(".alluvial-tooltip")}reSetRoot(){this.svg.transition("root_reset").duration(this.duration).ease(pt).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root.transition("root_reset").duration(this.duration).ease(pt).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),this.rootG.transition("root_reset").duration(this.duration).ease(pt).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),_n(this.chartID,this.width)}setGlobalSelections(){const t=this.nodeG.selectAll(".node-wrapper").data(this.preppedData.nodes,t=>t[this.innerIDAccessor]);if(this.enterNodes=t.enter().append("g").attr("class","node-wrapper").attr("data-offset-group","true"),this.enterNodes.append("rect").attr("class","alluvial-node"),this.exitNodes=t.exit(),this.updateNodes=t.merge(this.enterNodes),this.updateNodes.selectAll(".alluvial-node").data(t=>[t]),"source"===this.innerLinkFillMode||"target"===this.innerLinkFillMode){this.updateNodes.each((t,i,n)=>{Mn(n[i])});const t=this.preppedData.nodes,i=this.linkG.selectAll(".alluvial-link-wrapper").data(t,t=>t[this.innerIDAccessor]);this.enterLinkGroups=i.enter().append("g").attr("class","alluvial-link-wrapper"),this.exitLinkGroups=i.exit().remove(),this.updateLinkGroups=i.merge(this.enterLinkGroups);const n=this.updateLinkGroups.selectAll(".alluvial-link").data(t=>t.sourceLinks,t=>t.data[this.sourceAccessor]+t.data[this.targetAccessor]);this.enterLinks=n.enter().append("path").attr("class","alluvial-link"),this.exitLinks=n.exit(),this.updateLinks=n.merge(this.enterLinks).attr("data-offset-element",this.innerLinkFillMode)}else{this.updateNodes.attr("tabindex",null);const t=this.linkG.selectAll(".alluvial-link").data(this.preppedData.links,t=>t.data[this.sourceAccessor]+t.data[this.targetAccessor]);this.enterLinks=t.enter().append("path").attr("class","alluvial-link"),this.exitLinks=t.exit(),this.updateLinks=t.merge(this.enterLinks).attr("data-offset-element",null)}const i=this.labelG.selectAll("text").data(this.preppedData.nodes,t=>t[this.nodeIDAccessor]);this.enteringLabels=i.enter().append("text"),this.exitingLabels=i.exit(),this.updatingLabels=i.merge(this.enteringLabels)}setTestingAttributes(){this.unitTest?(vt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").attr("data-testid","chart-container"),vt(this.alluvialDiagramEl).select(".alluvial-main-title").attr("data-testid","main-title"),vt(this.alluvialDiagramEl).select(".alluvial-sub-title").attr("data-testid","sub-title"),this.svg.attr("data-testid","root-svg"),this.root.attr("data-testid","margin-container"),this.rootG.attr("data-testid","padding-container"),this.tooltipG.attr("data-testid","tooltip-container"),this.updateNodes.attr("data-testid","node").attr("data-id",t=>`node-${t[this.innerIDAccessor]}`),"source"!==this.innerLinkFillMode&&"target"!==this.innerLinkFillMode||this.updateLinkGroups.attr("data-testid","alluvial-link-group").attr("data-id",t=>`link-group-${t[this.innerIDAccessor]}`),this.updateLinks.attr("data-testid","link").attr("data-id",t=>`link-${t.source[this.innerIDAccessor]}-${t.target[this.innerIDAccessor]}`),this.updatingLabels.attr("data-testid","dataLabel").attr("data-id",t=>`dataLabel-${t[this.innerIDAccessor]}`)):(vt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").attr("data-testid",null),vt(this.alluvialDiagramEl).select(".alluvial-main-title").attr("data-testid",null),vt(this.alluvialDiagramEl).select(".alluvial-sub-title").attr("data-testid",null),this.svg.attr("data-testid",null),this.root.attr("data-testid",null),this.rootG.attr("data-testid",null),this.tooltipG.attr("data-testid",null),this.updateNodes.attr("data-testid",null).attr("data-id",null),"source"!==this.innerLinkFillMode&&"target"!==this.innerLinkFillMode||this.updateLinkGroups.attr("data-testid",null).attr("data-id",null),this.updateLinks.attr("data-testid",null).attr("data-id",null),this.updatingLabels.attr("data-testid",null).attr("data-id",null))}drawLinks(){this.removeTemporaryClickedLinks(this.svg.node());const t=this.linkConfig.visible?this.linkConfig.opacity:0;"source"!==this.innerLinkFillMode&&"target"!==this.innerLinkFillMode||this.updateLinkGroups.classed("link-group offset-target",!0),this.updateLinks.on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("cursor",this.suppressEvents?null:this.cursor).attr("fill","none").attr("stroke-opacity",i=>jn(i.data,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)).attr("d",ns()).attr("stroke",t=>"group"===this.innerLinkFillMode?this.colorArr[this.groupKeys.indexOf(t[this.groupAccessor])]:"none"===this.innerLinkFillMode?this.colorArr[0]||"#E4E4E4":"path"===this.innerLinkFillMode?this.colorArr[t.index]:"source"===this.innerLinkFillMode?this.colorArr[t.source.index]:this.colorArr[t.target.index]).attr("stroke-width",t=>Math.max(1,t.width)).each((t,i,n)=>{this.clickHighlight&&this.clickHighlight.length>0&&Rn(t.data,this.clickHighlight,this.innerInteractionKeys)&&this.drawDuplicateClickedLink(n[i])}),this.updateLinks.transition("accessibilityAfterExit").duration(this.duration).ease(pt).call(qn,()=>{const t=zn(this.rootG.node());this.exitLinks.remove(),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),On({parentGNode:this.rootG.node(),focusDidExist:t})})}drawDuplicateClickedLink(t){const i=t.parentNode,n=t.cloneNode();if(vt(n).classed("alluvial-link",!1).classed("vcl-accessibility-focus-highlight vcl-accessibility-focus-hover",!0).classed("duplicated-clicked-link",!0).attr("focusable",!1).attr("aria-label",null).attr("aria-hidden",!0).attr("role",null).style("pointer-events","none").attr("tabindex",null),"source"===this.innerLinkFillMode||"target"===this.innerLinkFillMode){const t=vt(i.parentNode).selectAll(".link-group")._groups[0];t[t.length-1].appendChild(n)}else i.appendChild(n)}removeTemporaryClickedLinks(t){vt(t).selectAll(".duplicated-clicked-link").remove()}drawNodes(){this.updateNodes.select(".alluvial-node").attr("x",t=>t.x0).attr("y",t=>t.y0).attr("height",t=>t.y1-t.y0).attr("width",t=>t.x1-t.x0).attr("opacity",1).attr("fill",(t,i)=>this.nodeConfig.fill?this.colorArr[i]||this.colorArr[0]:"#E4E4E4").attr("stroke","#717171")}drawNodeLabels(){const t=this.dataLabel.visible?1:0,i=function(t,i){let n;if(void 0===i)for(const s of t)null!=s&&(n<s||void 0===n&&s>=s)&&(n=s);else{let s=-1;for(let r of t)null!=(r=i(r,++s))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}(this.preppedData.nodes,t=>t.layer);this.widthAllNodesNoLinks=i*this.nodeConfig.width+i*this.nodeConfig.width,this.noLinksLeftPadding=(this.innerPaddedWidth-this.widthAllNodesNoLinks)/2,this.updatingLabels.attr("opacity",n=>{if(this.linkConfig.visible){let i=!0;return n[this.sourceLinksString].length&&(i=n[this.sourceLinksString].some(i=>jn(i.data,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)>=1)),n[this.targetLinksString].length&&(i=n[this.targetLinksString].some(i=>jn(i.data,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)>=1)),i?1:0}return 0===n.layer||n.layer===i?t:0}).attr("x",t=>this.linkConfig.visible?"outside"===this.dataLabel.placement?t.x0<this.innerPaddedWidth/2?t.x0:t.x1:t.x0<this.innerPaddedWidth/2?t.x1:t.x0:t.x0<this.innerPaddedWidth/2?this.noLinksLeftPadding:this.noLinksLeftPadding+this.widthAllNodesNoLinks+this.nodeConfig.width).attr("y",t=>(t.y1+t.y0)/2).attr("dx",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"0.5em":"-0.5em":t.x0<this.innerPaddedWidth/2?"-0.5em":"0.5em").attr("dy","0.4em").attr("text-anchor",t=>"outside"!==this.dataLabel.placement&&this.linkConfig.visible?t.x0<this.innerPaddedWidth/2?"start":"end":t.x0<this.innerPaddedWidth/2?"end":"start").text(t=>t[this.innerLabelAccessor])}drawAnnotations(){const t=this.preppedData,i=[];this.annotations.forEach(n=>{const s=Object.assign({},n);let r=n.data;if(t&&r)if("node"===s.positionType&&s.data.hasOwnProperty(this.nodeIDAccessor)){const i=t.nodes.findIndex(t=>t[this.nodeIDAccessor]===s.data[this.nodeIDAccessor]);r=t.nodes[i]}else if("source"===s.positionType||"target"===s.positionType&&s.data.hasOwnProperty(this.sourceAccessor)&&s.data.hasOwnProperty(this.targetAccessor)){const i=t.links.findIndex(t=>t.data[this.sourceAccessor]===s.data[this.sourceAccessor]&&t.data[this.targetAccessor]===s.data[this.targetAccessor]);r=t.links[i]}s.positionType&&r&&("target"===s.positionType&&r.target?(s.x=r.target.x0,s.y=r.y1):"source"===s.positionType&&r.source?(s.x=r.source.x1,s.y=r.y0):"node"===s.positionType&&(s.x=r.x1,s.y=(r.y1+r.y0)/2)),delete s.data,i.push(s)}),Xn({source:this.rootG.node(),data:i,ignoreScales:!0})}setColors(){this.colorArr=this.colors?Pn(this.colors):Vn(this.colorPalette,this.nodeList.length)}setTagLevels(){this.topLevel=Gn(this.highestHeadingLevel),this.bottomLevel=Gn(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){mn({rootEle:this.alluvialDiagramEl,geomType:"link",title:this.accessibility.title||this.mainTitle,chartTag:"alluvial-diagram",uniqueID:this.chartID,groupName:"node",highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){const t=Un(this,Zn,"alluvial-diagram");bn({node:this.svg.node(),chartTag:"alluvial-diagram",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"link",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupAccessor:this.innerIDAccessor,groupKeys:["value"],groupName:"node"})}setGeometryAccessibilityAttributes(){this.updateLinks.each((t,i,n)=>{Mn(n[i])})}setGeometryAriaLabels(){const t=Un(this,Zn,"alluvial-diagram");this.updateLinks.each((i,n,s)=>{kn({node:s[n],geomType:"link",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupName:"node",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),An({node:s[n],uniqueID:this.chartID})})}setGroupAccessibilityID(){this.updateNodes.each((t,i,n)=>{An({node:n[i],uniqueID:this.chartID})})}setChartCountAccessibility(){xn({rootEle:this.alluvialDiagramEl,parentGNode:this.linkG.node(),chartTag:"alluvial-diagram",geomType:"link",groupName:"node"})}setSelectedClass(){this.updateLinks.classed("highlight",t=>{const i=jn(t.data,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);return!(!this.clickHighlight||!this.clickHighlight.length)&&i}).each((t,i,n)=>{let s=jn(t.data,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);s=!(!this.clickHighlight||!this.clickHighlight.length)&&s,Hn(n[i],s,this.accessibility.elementsAreInterface)})}setChartAccessibilityTitle(){Nn(this.alluvialDiagramEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){Ln(this.alluvialDiagramEl,this.subTitle)}setChartAccessibilityLongDescription(){Sn(this.alluvialDiagramEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){Tn(this.alluvialDiagramEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){En(this.alluvialDiagramEl,this.accessibility.purpose)}setChartAccessibilityContext(){Dn(this.alluvialDiagramEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){$n(this.alluvialDiagramEl,this.accessibility.statisticalNotes)}setChartAccessibilityStructureNotes(){Cn(this.alluvialDiagramEl,this.accessibility.structureNotes)}setAnnotationAccessibility(){In(this.alluvialDiagramEl,this.annotations)}onClickHandler(t){this.clickFunc.emit(t.data)}onHoverHandler(t){Bn(this.chartID,!0),this.hoverFunc.emit(t.data),this.showTooltip&&this.eventsTooltip({data:t,evt:nt,isToShow:!0})}onMouseOutHandler(){Bn(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){Kn(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:n}){Fn({root:this.tooltipG,data:t,event:i,isToShow:n,tooltipLabel:this.tooltipLabel,groupAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,ordinalAccessor:this.innerIDAccessor,chartType:"alluvial-diagram"})}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.setDimensions(),this.prepareData(),this.validateIdAccessor(),this.validateLabelText(),this.validateLinkFillMode(),this.validateInteractionKeys(),this.validateLinkGroups(),this.setColors(),n("div",null,n("div",{class:"o-layout"},n("div",{class:"o-layout--chart"},n(this.topLevel,{class:"alluvial-main-title vcl-main-title"},this.mainTitle),n(this.bottomLevel,{class:"visa-ui-text--instructions alluvial-sub-title vcl-sub-title"},this.subTitle),n("div",{class:"visa-viz-d3-alluvial-container"}),n("div",{class:"alluvial-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}))))}init(){const t=Object.keys(wt);let i=0;const n={hoverOpacity:{exception:0},showTooltip:{exception:!1},mainTitle:{exception:""},subTitle:{exception:""},linkConfig:Object.assign({exception:!1})};for(i=0;i<t.length;i++){const s=!!n[t[i]]&&this[t[i]]===n[t[i]].exception;this[t[i]]=this[t[i]]||s?this[t[i]]:wt[t[i]]}}get alluvialDiagramEl(){return s(this)}static get watchers(){return{linkData:["linkDataWatcher"],nodeData:["nodeDataWatcher"],uniqueID:["idWatcher"],mainTitle:["mainTitleWatcher"],subTitle:["subTitleWatcher"],highestHeadingLevel:["headingWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],sourceAccessor:["sourceAccessorWatcher"],targetAccessor:["targetAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],nodeIDAccessor:["nodeIDAccessorWatcher"],nodeConfig:["nodeConfigWatcher"],linkConfig:["linkConfigWatcher"],colorPalette:["colorPaletteWatcher"],colors:["colorsWatcher"],clickStyle:["clickStyleWatcher"],hoverStyle:["hoverStyleWatcher"],cursor:["cursorWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["dataLabelWatcher"],tooltipLabel:["tooltipLabelWatcher"],showTooltip:["showTooltipWatcher"],accessibility:["accessibilityWatcher"],annotations:["annotationsWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}alluvial-diagram{cursor:default}alluvial-diagram .annotations{pointer-events:none}alluvial-diagram .annotations .handle{pointer-events:all}alluvial-diagram .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}alluvial-diagram .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}alluvial-diagram .hidden{display:none}alluvial-diagram .node rect{cursor:move}alluvial-diagram .node text{pointer-events:none;text-shadow:0 1px 0 #fff}alluvial-diagram .link{fill:none;stroke:#000;stroke-opacity:0.2}alluvial-diagram .link:hover{stroke-opacity:0.5}"}};var es="http://www.w3.org/1999/xhtml";const hs={svg:"http://www.w3.org/2000/svg",xhtml:es,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function os(t){var i=t+="",n=i.indexOf(":");return n>=0&&"xmlns"!==(i=t.slice(0,n))&&(t=t.slice(n+1)),hs.hasOwnProperty(i)?{space:hs[i],local:t}:t}function us(t){return function(){var i=this.ownerDocument,n=this.namespaceURI;return n===es&&i.documentElement.namespaceURI===es?i.createElement(t):i.createElementNS(n,t)}}function as(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function cs(t){var i=os(t);return(i.local?as:us)(i)}function ls(){}function fs(t){return null==t?ls:function(){return this.querySelector(t)}}function ds(){return[]}function vs(t){return null==t?ds:function(){return this.querySelectorAll(t)}}function ps(t){return function(){return this.matches(t)}}function ys(t){return new Array(t.length)}function ws(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function gs(t,i,n,s,r,e){for(var h,o=0,u=i.length,a=e.length;o<a;++o)(h=i[o])?(h.__data__=e[o],s[o]=h):n[o]=new ws(t,e[o]);for(;o<u;++o)(h=i[o])&&(r[o]=h)}function ms(t,i,n,s,r,e,h){var o,u,a,c={},l=i.length,f=e.length,d=new Array(l);for(o=0;o<l;++o)(u=i[o])&&(d[o]=a="$"+h.call(u,u.__data__,o,i),a in c?r[o]=u:c[a]=u);for(o=0;o<f;++o)(u=c[a="$"+h.call(t,e[o],o,e)])?(s[o]=u,u.__data__=e[o],c[a]=null):n[o]=new ws(t,e[o]);for(o=0;o<l;++o)(u=i[o])&&c[d[o]]===u&&(r[o]=u)}function bs(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function Ms(t){return function(){this.removeAttribute(t)}}function ks(t){return function(){this.removeAttributeNS(t.space,t.local)}}function As(t,i){return function(){this.setAttribute(t,i)}}function xs(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function Ws(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Ns(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Ls(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ss(t){return function(){this.style.removeProperty(t)}}function Ts(t,i,n){return function(){this.style.setProperty(t,i,n)}}function Es(t,i,n){return function(){var s=i.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function Ds(t,i){return t.style.getPropertyValue(i)||Ls(t).getComputedStyle(t,null).getPropertyValue(i)}function $s(t){return function(){delete this[t]}}function Cs(t,i){return function(){this[t]=i}}function Is(t,i){return function(){var n=i.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Os(t){return t.trim().split(/^|\s+/)}function zs(t){return t.classList||new Hs(t)}function Hs(t){this._node=t,this._names=Os(t.getAttribute("class")||"")}function _s(t,i){for(var n=zs(t),s=-1,r=i.length;++s<r;)n.add(i[s])}function qs(t,i){for(var n=zs(t),s=-1,r=i.length;++s<r;)n.remove(i[s])}function Xs(t){return function(){_s(this,t)}}function Rs(t){return function(){qs(this,t)}}function js(t,i){return function(){(i.apply(this,arguments)?_s:qs)(this,t)}}function Ps(){this.textContent=""}function Fs(t){return function(){this.textContent=t}}function Gs(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function Vs(){this.innerHTML=""}function Ys(t){return function(){this.innerHTML=t}}function Ks(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function Bs(){this.nextSibling&&this.parentNode.appendChild(this)}function Us(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zs(){return null}function Js(){var t=this.parentNode;t&&t.removeChild(this)}function Qs(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function tr(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}ws.prototype={constructor:ws,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Hs.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ir={},nr=null;function sr(t,i,n){return t=rr(t,i,n),function(i){var n=i.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,i)}}function rr(t,i,n){return function(s){var r=nr;nr=s;try{t.call(this,this.__data__,i,n)}finally{nr=r}}}function er(t){return t.trim().split(/^|\s+/).map((function(t){var i="",n=t.indexOf(".");return n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),{type:t,name:i}}))}function hr(t){return function(){var i=this.__on;if(i){for(var n,s=0,r=-1,e=i.length;s<e;++s)n=i[s],t.type&&n.type!==t.type||n.name!==t.name?i[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?i.length=r:delete this.__on}}}function or(t,i,n){var s=ir.hasOwnProperty(t.type)?sr:rr;return function(r,e,h){var o,u=this.__on,a=s(i,e,h);if(u)for(var c=0,l=u.length;c<l;++c)if((o=u[c]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=a,o.capture=n),void(o.value=i);this.addEventListener(t.type,a,n),o={type:t.type,name:t.name,value:i,listener:a,capture:n},u?u.push(o):this.__on=[o]}}function ur(t,i,n){var s=Ls(t),r=s.CustomEvent;"function"==typeof r?r=new r(i,n):(r=s.document.createEvent("Event"),n?(r.initEvent(i,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function ar(t,i){return function(){return ur(this,t,i)}}function cr(t,i){return function(){return ur(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(ir={mouseenter:"mouseover",mouseleave:"mouseout"}));var lr=[null];function fr(t,i){this._groups=t,this._parents=i}function dr(){return new fr([[document.documentElement]],lr)}function vr(t){return"string"==typeof t?new fr([[document.querySelector(t)]],[document.documentElement]):new fr([[t]],lr)}function pr(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}fr.prototype=dr.prototype={constructor:fr,select:function(t){"function"!=typeof t&&(t=fs(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h,o=i[r],u=o.length,a=s[r]=new Array(u),c=0;c<u;++c)(e=o[c])&&(h=t.call(e,e.__data__,c,o))&&("__data__"in e&&(h.__data__=e.__data__),a[c]=h);return new fr(s,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=vs(t));for(var i=this._groups,n=i.length,s=[],r=[],e=0;e<n;++e)for(var h,o=i[e],u=o.length,a=0;a<u;++a)(h=o[a])&&(s.push(t.call(h,h.__data__,a,o)),r.push(h));return new fr(s,r)},filter:function(t){"function"!=typeof t&&(t=ps(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h=i[r],o=h.length,u=s[r]=[],a=0;a<o;++a)(e=h[a])&&t.call(e,e.__data__,a,h)&&u.push(e);return new fr(s,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),a=-1,this.each((function(t){d[++a]=t})),d;var n=i?ms:gs,s=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),o=new Array(e),u=new Array(e),a=0;a<e;++a){var c=s[a],l=r[a],f=l.length,d=t.call(c,c&&c.__data__,a,s),v=d.length,p=o[a]=new Array(v),y=h[a]=new Array(v);n(c,l,p,y,u[a]=new Array(f),d,i);for(var w,g,m=0,b=0;m<v;++m)if(w=p[m]){for(m>=b&&(b=m+1);!(g=y[b])&&++b<v;);w._next=g||null}}return(h=new fr(h,s))._enter=o,h._exit=u,h},enter:function(){return new fr(this._enter||this._groups.map(ys),this._parents)},exit:function(){return new fr(this._exit||this._groups.map(ys),this._parents)},join:function(t,i,n){var s=this.enter(),r=this,e=this.exit();return s="function"==typeof t?t(s):s.append(t+""),null!=i&&(r=i(r)),null==n?e.remove():n(e),s&&r?s.merge(r).order():r},merge:function(t){for(var i=this._groups,n=t._groups,s=i.length,r=Math.min(s,n.length),e=new Array(s),h=0;h<r;++h)for(var o,u=i[h],a=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=u[f]||a[f])&&(l[f]=o);for(;h<s;++h)e[h]=i[h];return new fr(e,this._parents)},order:function(){for(var t=this._groups,i=-1,n=t.length;++i<n;)for(var s,r=t[i],e=r.length-1,h=r[e];--e>=0;)(s=r[e])&&(h&&4^s.compareDocumentPosition(h)&&h.parentNode.insertBefore(s,h),h=s);return this},sort:function(t){function i(i,n){return i&&n?t(i.__data__,n.__data__):!i-!n}t||(t=bs);for(var n=this._groups,s=n.length,r=new Array(s),e=0;e<s;++e){for(var h,o=n[e],u=o.length,a=r[e]=new Array(u),c=0;c<u;++c)(h=o[c])&&(a[c]=h);a.sort(i)}return new fr(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var s=t[i],r=0,e=s.length;r<e;++r){var h=s[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,n=0,s=i.length;n<s;++n)for(var r,e=i[n],h=0,o=e.length;h<o;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var n=os(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((null==i?n.local?ks:Ms:"function"==typeof i?n.local?Ns:Ws:n.local?xs:As)(n,i))},style:function(t,i,n){return arguments.length>1?this.each((null==i?Ss:"function"==typeof i?Es:Ts)(t,i,null==n?"":n)):Ds(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?$s:"function"==typeof i?Is:Cs)(t,i)):this.node()[t]},classed:function(t,i){var n=Os(t+"");if(arguments.length<2){for(var s=zs(this.node()),r=-1,e=n.length;++r<e;)if(!s.contains(n[r]))return!1;return!0}return this.each(("function"==typeof i?js:i?Xs:Rs)(n,i))},text:function(t){return arguments.length?this.each(null==t?Ps:("function"==typeof t?Gs:Fs)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Vs:("function"==typeof t?Ks:Ys)(t)):this.node().innerHTML},raise:function(){return this.each(Bs)},lower:function(){return this.each(Us)},append:function(t){var i="function"==typeof t?t:cs(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var n="function"==typeof t?t:cs(t),s=null==i?Zs:"function"==typeof i?i:fs(i);return this.select((function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)}))},remove:function(){return this.each(Js)},clone:function(t){return this.select(t?tr:Qs)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,n){var s,r,e=er(t+""),h=e.length;if(!(arguments.length<2)){for(o=i?or:hr,null==n&&(n=!1),s=0;s<h;++s)this.each(o(e[s],i,n));return this}var o=this.node().__on;if(o)for(var u,a=0,c=o.length;a<c;++a)for(s=0,u=o[a];s<h;++s)if((r=e[s]).type===u.type&&r.name===u.name)return u.value},dispatch:function(t,i){return this.each(("function"==typeof i?cr:ar)(t,i))}};var yr,wr,gr=(1===(yr=pr).length&&(wr=yr,yr=function(t,i){return pr(wr(t),i)}),{left:function(t,i,n,s){for(null==n&&(n=0),null==s&&(s=t.length);n<s;){var r=n+s>>>1;yr(t[r],i)<0?n=r+1:s=r}return n},right:function(t,i,n,s){for(null==n&&(n=0),null==s&&(s=t.length);n<s;){var r=n+s>>>1;yr(t[r],i)>0?s=r:n=r+1}return n}}).right;function mr(t,i,n){t=+t,i=+i,n=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+n;for(var s=-1,r=0|Math.max(0,Math.ceil((i-t)/n)),e=new Array(r);++s<r;)e[s]=t+s*n;return e}var br=Math.sqrt(50),Mr=Math.sqrt(10),kr=Math.sqrt(2);function Ar(t,i,n){var s=(i-t)/Math.max(0,n),r=Math.floor(Math.log(s)/Math.LN10),e=s/Math.pow(10,r);return r>=0?(e>=br?10:e>=Mr?5:e>=kr?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=br?10:e>=Mr?5:e>=kr?2:1)}function xr(t,i){var n,s,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(n=t[e])&&n>=n)for(s=n;++e<r;)null!=(n=t[e])&&n>s&&(s=n)}else for(;++e<r;)if(null!=(n=i(t[e],e,t))&&n>=n)for(s=n;++e<r;)null!=(n=i(t[e],e,t))&&n>s&&(s=n);return s}function Wr(t,i){var n,s,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(n=t[e])&&n>=n)for(s=n;++e<r;)null!=(n=t[e])&&s>n&&(s=n)}else for(;++e<r;)if(null!=(n=i(t[e],e,t))&&n>=n)for(s=n;++e<r;)null!=(n=i(t[e],e,t))&&s>n&&(s=n);return s}function Nr(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function Lr(){}function Sr(t,i){var n=new Lr;if(t instanceof Lr)t.each((function(t,i){n.set(i,t)}));else if(Array.isArray(t)){var s,r=-1,e=t.length;if(null==i)for(;++r<e;)n.set(r,t[r]);else for(;++r<e;)n.set(i(s=t[r],r,t),s)}else if(t)for(var h in t)n.set(h,t[h]);return n}function Tr(){return{}}function Er(t,i,n){t[i]=n}function Dr(){return Sr()}function $r(t,i,n){t.set(i,n)}Lr.prototype=Sr.prototype={constructor:Lr,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var Cr=Array.prototype,Ir=Cr.map,Or=Cr.slice,zr={name:"implicit"};function Hr(){var t=Sr(),i=[],n=[],s=zr;function r(r){var e=r+"",h=t.get(e);if(!h){if(s!==zr)return s;t.set(e,h=i.push(r))}return n[(h-1)%n.length]}return r.domain=function(n){if(!arguments.length)return i.slice();i=[],t=Sr();for(var s,e,h=-1,o=n.length;++h<o;)t.has(e=(s=n[h])+"")||t.set(e,i.push(s));return r},r.range=function(t){return arguments.length?(n=Or.call(t),r):n.slice()},r.unknown=function(t){return arguments.length?(s=t,r):s},r.copy=function(){return Hr(i,n).unknown(s)},Nr.apply(r,arguments),r}function _r(){var t,i,n=Hr().unknown(void 0),s=n.domain,r=n.range,e=[0,1],h=!1,o=0,u=0,a=.5;function c(){var n=s().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,n-o+2*u),h&&(t=Math.floor(t)),l+=(f-l-t*(n-o))*a,i=t*(1-o),h&&(l=Math.round(l),i=Math.round(i));var d=mr(n).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(s(t),c()):s()},n.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},n.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},n.bandwidth=function(){return i},n.step=function(){return t},n.round=function(t){return arguments.length?(h=!!t,c()):h},n.padding=function(t){return arguments.length?(o=Math.min(1,u=+t),c()):o},n.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),c()):o},n.paddingOuter=function(t){return arguments.length?(u=+t,c()):u},n.align=function(t){return arguments.length?(a=Math.max(0,Math.min(1,t)),c()):a},n.copy=function(){return _r(s(),e).round(h).paddingInner(o).paddingOuter(u).align(a)},Nr.apply(c(),arguments)}function qr(t,i,n){t.prototype=i.prototype=n,n.constructor=t}function Xr(t,i){var n=Object.create(t.prototype);for(var s in i)n[s]=i[s];return n}function Rr(){}var jr="\\s*([+-]?\\d+)\\s*",Pr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gr=/^#([0-9a-f]{3,8})$/,Vr=new RegExp("^rgb\\("+[jr,jr,jr]+"\\)$"),Yr=new RegExp("^rgb\\("+[Fr,Fr,Fr]+"\\)$"),Kr=new RegExp("^rgba\\("+[jr,jr,jr,Pr]+"\\)$"),Br=new RegExp("^rgba\\("+[Fr,Fr,Fr,Pr]+"\\)$"),Ur=new RegExp("^hsl\\("+[Pr,Fr,Fr]+"\\)$"),Zr=new RegExp("^hsla\\("+[Pr,Fr,Fr,Pr]+"\\)$"),Jr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Qr(){return this.rgb().formatHex()}function te(){return this.rgb().formatRgb()}function ie(t){var i,n;return t=(t+"").trim().toLowerCase(),(i=Gr.exec(t))?(n=i[1].length,i=parseInt(i[1],16),6===n?ne(i):3===n?new he(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===n?se(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===n?se(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=Vr.exec(t))?new he(i[1],i[2],i[3],1):(i=Yr.exec(t))?new he(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=Kr.exec(t))?se(i[1],i[2],i[3],i[4]):(i=Br.exec(t))?se(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=Ur.exec(t))?ce(i[1],i[2]/100,i[3]/100,1):(i=Zr.exec(t))?ce(i[1],i[2]/100,i[3]/100,i[4]):Jr.hasOwnProperty(t)?ne(Jr[t]):"transparent"===t?new he(NaN,NaN,NaN,0):null}function ne(t){return new he(t>>16&255,t>>8&255,255&t,1)}function se(t,i,n,s){return s<=0&&(t=i=n=NaN),new he(t,i,n,s)}function re(t){return t instanceof Rr||(t=ie(t)),t?new he((t=t.rgb()).r,t.g,t.b,t.opacity):new he}function ee(t,i,n,s){return 1===arguments.length?re(t):new he(t,i,n,null==s?1:s)}function he(t,i,n,s){this.r=+t,this.g=+i,this.b=+n,this.opacity=+s}function oe(){return"#"+ae(this.r)+ae(this.g)+ae(this.b)}function ue(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ae(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ce(t,i,n,s){return s<=0?t=i=n=NaN:n<=0||n>=1?t=i=NaN:i<=0&&(t=NaN),new fe(t,i,n,s)}function le(t){if(t instanceof fe)return new fe(t.h,t.s,t.l,t.opacity);if(t instanceof Rr||(t=ie(t)),!t)return new fe;if(t instanceof fe)return t;var i=(t=t.rgb()).r/255,n=t.g/255,s=t.b/255,r=Math.min(i,n,s),e=Math.max(i,n,s),h=NaN,o=e-r,u=(e+r)/2;return o?(h=i===e?(n-s)/o+6*(n<s):n===e?(s-i)/o+2:(i-n)/o+4,o/=u<.5?e+r:2-e-r,h*=60):o=u>0&&u<1?0:h,new fe(h,o,u,t.opacity)}function fe(t,i,n,s){this.h=+t,this.s=+i,this.l=+n,this.opacity=+s}function de(t,i,n){return 255*(t<60?i+(n-i)*t/60:t<180?n:t<240?i+(n-i)*(240-t)/60:i)}function ve(t){return function(){return t}}function pe(t,i){var n=i-t;return n?function(t,i){return function(n){return t+n*i}}(t,n):ve(isNaN(t)?i:t)}qr(Rr,ie,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Qr,formatHex:Qr,formatHsl:function(){return le(this).formatHsl()},formatRgb:te,toString:te}),qr(he,ee,Xr(Rr,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new he(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new he(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oe,formatHex:oe,formatRgb:ue,toString:ue})),qr(fe,(function(t,i,n,s){return 1===arguments.length?le(t):new fe(t,i,n,null==s?1:s)}),Xr(Rr,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new fe(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new fe(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*i,r=2*n-s;return new he(de(t>=240?t-240:t+120,r,s),de(t,r,s),de(t<120?t+240:t-120,r,s),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const ye=function t(i){var n=function(t){return 1==(t=+t)?pe:function(i,n){return n-i?function(t,i,n){return t=Math.pow(t,n),i=Math.pow(i,n)-t,n=1/n,function(s){return Math.pow(t+s*i,n)}}(i,n,t):ve(isNaN(i)?n:i)}}(i);function s(t,i){var s=n((t=ee(t)).r,(i=ee(i)).r),r=n(t.g,i.g),e=n(t.b,i.b),h=pe(t.opacity,i.opacity);return function(i){return t.r=s(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return s.gamma=t,s}(1);function we(t,i){i||(i=[]);var n,s=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(n=0;n<s;++n)r[n]=t[n]*(1-e)+i[n]*e;return r}}function ge(t,i){var n,s=i?i.length:0,r=t?Math.min(s,t.length):0,e=new Array(r),h=new Array(s);for(n=0;n<r;++n)e[n]=We(t[n],i[n]);for(;n<s;++n)h[n]=i[n];return function(t){for(n=0;n<r;++n)h[n]=e[n](t);return h}}function me(t,i){var n=new Date;return t=+t,i=+i,function(s){return n.setTime(t*(1-s)+i*s),n}}function be(t,i){return t=+t,i=+i,function(n){return t*(1-n)+i*n}}function Me(t,i){var n,s={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)n in t?s[n]=We(t[n],i[n]):r[n]=i[n];return function(t){for(n in s)r[n]=s[n](t);return r}}var ke=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ae=new RegExp(ke.source,"g");function xe(t,i){var n,s,r,e=ke.lastIndex=Ae.lastIndex=0,h=-1,o=[],u=[];for(t+="",i+="";(n=ke.exec(t))&&(s=Ae.exec(i));)(r=s.index)>e&&(r=i.slice(e,r),o[h]?o[h]+=r:o[++h]=r),(n=n[0])===(s=s[0])?o[h]?o[h]+=s:o[++h]=s:(o[++h]=null,u.push({i:h,x:be(n,s)})),e=Ae.lastIndex;return e<i.length&&(r=i.slice(e),o[h]?o[h]+=r:o[++h]=r),o.length<2?u[0]?function(t){return function(i){return t(i)+""}}(u[0].x):function(t){return function(){return t}}(i):(i=u.length,function(t){for(var n,s=0;s<i;++s)o[(n=u[s]).i]=n.x(t);return o.join("")})}function We(t,i){var n,s=typeof i;return null==i||"boolean"===s?ve(i):("number"===s?be:"string"===s?(n=ie(i))?(i=n,ye):xe:i instanceof ie?ye:i instanceof Date?me:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?we:Array.isArray(i)?ge:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?Me:be)(t,i)}function Ne(t,i){return t=+t,i=+i,function(n){return Math.round(t*(1-n)+i*n)}}var Le,Se,Te,Ee,De=180/Math.PI,$e={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ce(t,i,n,s,r,e){var h,o,u;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(u=t*n+i*s)&&(n-=t*u,s-=i*u),(o=Math.sqrt(n*n+s*s))&&(n/=o,s/=o,u/=o),t*s<i*n&&(t=-t,i=-i,u=-u,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*De,skewX:Math.atan(u)*De,scaleX:h,scaleY:o}}function Ie(t,i,n,s){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var o=[],u=[];return e=t(e),h=t(h),function(t,s,r,e,h,o){if(t!==r||s!==e){var u=h.push("translate(",null,i,null,n);o.push({i:u-4,x:be(t,r)},{i:u-2,x:be(s,e)})}else(r||e)&&h.push("translate("+r+i+e+n)}(e.translateX,e.translateY,h.translateX,h.translateY,o,u),function(t,i,n,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:n.push(r(n)+"rotate(",null,s)-2,x:be(t,i)})):i&&n.push(r(n)+"rotate("+i+s)}(e.rotate,h.rotate,o,u),function(t,i,n,e){t!==i?e.push({i:n.push(r(n)+"skewX(",null,s)-2,x:be(t,i)}):i&&n.push(r(n)+"skewX("+i+s)}(e.skewX,h.skewX,o,u),function(t,i,n,s,e,h){if(t!==n||i!==s){var o=e.push(r(e)+"scale(",null,",",null,")");h.push({i:o-4,x:be(t,n)},{i:o-2,x:be(i,s)})}else 1===n&&1===s||e.push(r(e)+"scale("+n+","+s+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,o,u),e=h=null,function(t){for(var i,n=-1,s=u.length;++n<s;)o[(i=u[n]).i]=i.x(t);return o.join("")}}}var Oe=Ie((function(t){return"none"===t?$e:(Le||(Le=document.createElement("DIV"),Se=document.documentElement,Te=document.defaultView),Le.style.transform=t,t=Te.getComputedStyle(Se.appendChild(Le),null).getPropertyValue("transform"),Se.removeChild(Le),Ce(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),ze=Ie((function(t){return null==t?$e:(Ee||(Ee=document.createElementNS("http://www.w3.org/2000/svg","g")),Ee.setAttribute("transform",t),(t=Ee.transform.baseVal.consolidate())?Ce((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):$e)}),", ",")",")");function He(t){return+t}var _e=[0,1];function qe(t){return t}function Xe(t,i){return(i-=t=+t)?function(n){return(n-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function Re(t){var i,n=t[0],s=t[t.length-1];return n>s&&(i=n,n=s,s=i),function(t){return Math.max(n,Math.min(s,t))}}function je(t,i,n){var s=t[0],r=t[1],e=i[0],h=i[1];return r<s?(s=Xe(r,s),e=n(h,e)):(s=Xe(s,r),e=n(e,h)),function(t){return e(s(t))}}function Pe(t,i,n){var s=Math.min(t.length,i.length)-1,r=new Array(s),e=new Array(s),h=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<s;)r[h]=Xe(t[h],t[h+1]),e[h]=n(i[h],i[h+1]);return function(i){var n=gr(t,i,1,s)-1;return e[n](r[n](i))}}function Fe(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ge(t,i){return function(){var t,i,n,s,r,e,h=_e,o=_e,u=We,a=qe;function c(){return s=Math.min(h.length,o.length)>2?Pe:je,r=e=null,l}function l(i){return isNaN(i=+i)?n:(r||(r=s(h.map(t),o,u)))(t(a(i)))}return l.invert=function(n){return a(i((e||(e=s(o,h.map(t),be)))(n)))},l.domain=function(t){return arguments.length?(h=Ir.call(t,He),a===qe||(a=Re(h)),c()):h.slice()},l.range=function(t){return arguments.length?(o=Or.call(t),c()):o.slice()},l.rangeRound=function(t){return o=Or.call(t),u=Ne,c()},l.clamp=function(t){return arguments.length?(a=t?Re(h):qe,l):a!==qe},l.interpolate=function(t){return arguments.length?(u=t,c()):u},l.unknown=function(t){return arguments.length?(n=t,l):n},function(n,s){return t=n,i=s,c()}}()(t,i)}function Ve(t,i){if((n=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var n,s=t.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+t.slice(n+1)]}function Ye(t){return(t=Ve(Math.abs(t)))?t[1]:NaN}var Ke,Be=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ue(t){if(!(i=Be.exec(t)))throw new Error("invalid format: "+t);var i;return new Ze({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function Ze(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Je(t,i){var n=Ve(t,i);if(!n)return t+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}Ue.prototype=Ze.prototype,Ze.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Qe={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return Je(100*t,i)},r:Je,s:function(t,i){var n=Ve(t,i);if(!n)return t+"";var s=n[0],r=n[1],e=r-(Ke=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=s.length;return e===h?s:e>h?s+new Array(e-h+1).join("0"):e>0?s.slice(0,e)+"."+s.slice(e):"0."+new Array(1-e).join("0")+Ve(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function th(t){return t}var ih,nh,sh,rh=Array.prototype.map,eh=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function hh(t){var i=t.domain;return t.ticks=function(t){var n=i();return function(t,i,n){var s,r,e,h,o=-1;if(n=+n,(t=+t)==(i=+i)&&n>0)return[t];if((s=i<t)&&(r=t,t=i,i=r),0===(h=Ar(t,i,n))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++o<r;)e[o]=(t+o)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++o<r;)e[o]=(t-o)/h;return s&&e.reverse(),e}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var s=i();return function(t,i,n,s){var r,e=function(t,i,n){var s=Math.abs(i-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),e=s/r;return e>=br?r*=10:e>=Mr?r*=5:e>=kr&&(r*=2),i<t?-r:r}(t,i,n);switch((s=Ue(null==s?",f":s)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=s.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ye(i)/3)))-Ye(Math.abs(t)))}(e,h))||(s.precision=r),sh(s,h);case"":case"e":case"g":case"p":case"r":null!=s.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,Ye(i)-Ye(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(s.precision=r-("e"===s.type));break;case"f":case"%":null!=s.precision||isNaN(r=function(t){return Math.max(0,-Ye(Math.abs(t)))}(e))||(s.precision=r-2*("%"===s.type))}return nh(s)}(s[0],s[s.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var s,r=i(),e=0,h=r.length-1,o=r[e],u=r[h];return u<o&&(s=o,o=u,u=s,s=e,e=h,h=s),(s=Ar(o,u,n))>0?s=Ar(o=Math.floor(o/s)*s,u=Math.ceil(u/s)*s,n):s<0&&(s=Ar(o=Math.ceil(o*s)/s,u=Math.floor(u*s)/s,n)),s>0?(r[e]=Math.floor(o/s)*s,r[h]=Math.ceil(u/s)*s,i(r)):s<0&&(r[e]=Math.ceil(o*s)/s,r[h]=Math.floor(u*s)/s,i(r)),t},t}function oh(){var t=Ge(qe,qe);return t.copy=function(){return Fe(t,oh())},Nr.apply(t,arguments),hh(t)}function uh(t){return 1-Math.sqrt(1-t*t)}ih=function(t){var i,n,s=void 0===t.grouping||void 0===t.thousands?th:(i=rh.call(t.grouping,Number),n=t.thousands+"",function(t,s){for(var r=t.length,e=[],h=0,o=i[0],u=0;r>0&&o>0&&(u+o+1>s&&(o=Math.max(1,s-u)),e.push(t.substring(r-=o,r+o)),!((u+=o+1)>s));)o=i[h=(h+1)%i.length];return e.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?th:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(rh.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",a=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=Ue(t)).fill,n=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,g=t.type;"n"===g?(p=!0,g="g"):Qe[g]||(void 0===y&&(y=12),w=!0,g="g"),(d||"0"===i&&"="===n)&&(d=!0,i="0",n="=");var m="$"===f?r:"#"===f&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===f?e:/[%p]/.test(g)?u:"",M=Qe[g],k=/[defgprs%]/.test(g);function A(t){var r,e,u,f=m,A=b;if("c"===g)A=M(t)+A,t="";else{var x=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,n=t.length,s=1,r=-1;s<n;++s)switch(t[s]){case".":r=i=s;break;case"0":0===r&&(r=s),i=s;break;default:if(!+t[s])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),x&&0==+t&&"+"!==l&&(x=!1),f=(x?"("===l?l:a:"-"===l||"("===l?"":l)+f,A=("s"===g?eh[8+Ke/3]:"")+A+(x&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(u=t.charCodeAt(r))||u>57){A=(46===u?h+t.slice(r+1):t.slice(r))+A,t=t.slice(0,r);break}}p&&!d&&(t=s(t,1/0));var W=f.length+t.length+A.length,N=W<v?new Array(v-W+1).join(i):"";switch(p&&d&&(t=s(N+t,N.length?v-A.length:1/0),N=""),n){case"<":t=f+t+A+N;break;case"=":t=f+N+t+A;break;case"^":t=N.slice(0,W=N.length>>1)+f+t+A+N.slice(W);break;default:t=N+f+t+A}return o(t)}return y=void 0===y?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),A.toString=function(){return t+""},A}return{format:l,formatPrefix:function(t,i){var n=l(((t=Ue(t)).type="f",t)),s=3*Math.max(-8,Math.min(8,Math.floor(Ye(i)/3))),r=Math.pow(10,-s),e=eh[8+s/3];return function(t){return n(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),nh=ih.format,sh=ih.formatPrefix;const{propDefaultValues:ah}=r;class ch{}ch.mainTitle="Clustered Bar Chart Title",ch.subTitle="This is the clustered bar chart's subtitle",ch.height=250,ch.width=675,ch.margin={top:4,bottom:4,right:4,left:4},ch.padding={top:20,bottom:50,right:50,left:50},ch.ordinalAccessor="label",ch.valueAccessor="value",ch.groupAccessor="category",ch.reverseOrder=!1,ch.layout=ah.layout,ch.xAxis=ah.xAxis,ch.yAxis=ah.yAxis,ch.wrapLabel=ah.wrapLabel,ch.colorPalette=ah.colorPaletteCategorical,ch.hoverStyle=ah.hoverStyle,ch.clickStyle=ah.clickStyle,ch.referenceStyle=ah.referenceStyle,ch.cursor=ah.cursor,ch.roundedCorner=ah.roundedCorner,ch.barIntervalRatio=ah.barIntervalRatio,ch.groupIntervalRatio=ah.barIntervalRatio,ch.hoverOpacity=ah.hoverOpacity,ch.dataLabel=ah.dataLabel,ch.legend=ah.categoryLegend,ch.tooltipLabel=ah.tooltipLabel,ch.showTooltip=ah.showTooltip,ch.accessibility=ah.accessibility,ch.highestHeadingLevel=ah.highestHeadingLevel,ch.referenceLines=ah.referenceLines,ch.annotations=ah.annotations,ch.clickHighlight=ah.clickHighlight,ch.suppressEvents=ah.suppressEvents;var lh={value:function(){}};function fh(){for(var t,i=0,n=arguments.length,s={};i<n;++i){if(!(t=arguments[i]+"")||t in s||/[\s.]/.test(t))throw new Error("illegal type: "+t);s[t]=[]}return new dh(s)}function dh(t){this._=t}function vh(t,i){return t.trim().split(/^|\s+/).map((function(t){var n="",s=t.indexOf(".");if(s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function ph(t,i){for(var n,s=0,r=t.length;s<r;++s)if((n=t[s]).name===i)return n.value}function yh(t,i,n){for(var s=0,r=t.length;s<r;++s)if(t[s].name===i){t[s]=lh,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=n&&t.push({name:i,value:n}),t}dh.prototype=fh.prototype={constructor:dh,on:function(t,i){var n,s=this._,r=vh(t+"",s),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(n=(t=r[e]).type)s[n]=yh(s[n],t.name,i);else if(null==i)for(n in s)s[n]=yh(s[n],t.name,null);return this}for(;++e<h;)if((n=(t=r[e]).type)&&(n=ph(s[n],t.name)))return n},copy:function(){var t={},i=this._;for(var n in i)t[n]=i[n].slice();return new dh(t)},call:function(t,i){if((n=arguments.length-2)>0)for(var n,s,r=new Array(n),e=0;e<n;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,n=(s=this._[t]).length;e<n;++e)s[e].value.apply(i,r)},apply:function(t,i,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],r=0,e=s.length;r<e;++r)s[r].value.apply(i,n)}};var wh,gh,mh=0,bh=0,Mh=0,kh=0,Ah=0,xh=0,Wh="object"==typeof performance&&performance.now?performance:Date,Nh="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Lh(){return Ah||(Nh(Sh),Ah=Wh.now()+xh)}function Sh(){Ah=0}function Th(){this._call=this._time=this._next=null}function Eh(t,i,n){var s=new Th;return s.restart(t,i,n),s}function Dh(){Ah=(kh=Wh.now())+xh,mh=bh=0;try{!function(){Lh(),++mh;for(var t,i=wh;i;)(t=Ah-i._time)>=0&&i._call.call(null,t),i=i._next;--mh}()}finally{mh=0,function(){for(var t,i,n=wh,s=1/0;n;)n._call?(s>n._time&&(s=n._time),t=n,n=n._next):(i=n._next,n._next=null,n=t?t._next=i:wh=i);gh=t,Ch(s)}(),Ah=0}}function $h(){var t=Wh.now(),i=t-kh;i>1e3&&(xh-=i,kh=t)}function Ch(t){mh||(bh&&(bh=clearTimeout(bh)),t-Ah>24?(t<1/0&&(bh=setTimeout(Dh,t-Wh.now()-xh)),Mh&&(Mh=clearInterval(Mh))):(Mh||(kh=Wh.now(),Mh=setInterval($h,1e3)),mh=1,Nh(Dh)))}function Ih(t,i,n){var s=new Th;return s.restart((function(n){s.stop(),t(n+i)}),i=null==i?0:+i,n),s}Th.prototype=Eh.prototype={constructor:Th,restart:function(t,i,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Lh():+n)+(null==i?0:+i),this._next||gh===this||(gh?gh._next=this:wh=this,gh=this),this._call=t,this._time=n,Ch()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ch())}};var Oh=fh("start","end","interrupt"),zh=[];function Hh(t,i,n,s,r,e){var h=t.__transition;if(h){if(n in h)return}else t.__transition={};!function(t,i,n){var s,r=t.__transition;function e(u){var a,c,l,f;if(1!==n.state)return o();for(a in r)if((f=r[a]).name===n.name){if(3===f.state)return Ih(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[a]):+a<i&&(f.state=6,f.timer.stop(),delete r[a])}if(Ih((function(){3===n.state&&(n.state=4,n.timer.restart(h,n.delay,n.time),h(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,s=new Array(l=n.tween.length),a=0,c=-1;a<l;++a)(f=n.tween[a].value.call(t,t.__data__,n.index,n.group))&&(s[++c]=f);s.length=c+1}}function h(i){for(var r=i<n.duration?n.ease.call(null,i/n.duration):(n.timer.restart(o),n.state=5,1),e=-1,h=s.length;++e<h;)s[e].call(null,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){for(var s in n.state=6,n.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=n,n.timer=Eh((function(t){n.state=1,n.timer.restart(e,n.delay,n.time),n.delay<=t&&e(t-n.delay)}),0,n.time)}(t,n,{name:i,index:s,group:r,on:Oh,tween:zh,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function _h(t,i){var n=Xh(t,i);if(n.state>0)throw new Error("too late; already scheduled");return n}function qh(t,i){var n=Xh(t,i);if(n.state>2)throw new Error("too late; already started");return n}function Xh(t,i){var n=t.__transition;if(!n||!(n=n[i]))throw new Error("transition not found");return n}function Rh(t,i){var n,s;return function(){var r=qh(this,t),e=r.tween;if(e!==n)for(var h=0,o=(s=n=e).length;h<o;++h)if(s[h].name===i){(s=s.slice()).splice(h,1);break}r.tween=s}}function jh(t,i,n){var s,r;if("function"!=typeof n)throw new Error;return function(){var e=qh(this,t),h=e.tween;if(h!==s){r=(s=h).slice();for(var o={name:i,value:n},u=0,a=r.length;u<a;++u)if(r[u].name===i){r[u]=o;break}u===a&&r.push(o)}e.tween=r}}function Ph(t,i,n){var s=t._id;return t.each((function(){var t=qh(this,s);(t.value||(t.value={}))[i]=n.apply(this,arguments)})),function(t){return Xh(t,s).value[i]}}function Fh(t,i){var n;return("number"==typeof i?be:i instanceof ie?ye:(n=ie(i))?(i=n,ye):xe)(t,i)}function Gh(t){return function(){this.removeAttribute(t)}}function Vh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Yh(t,i,n){var s,r;return function(){var e=this.getAttribute(t);return e===n?null:e===s?r:r=i(s=e,n)}}function Kh(t,i,n){var s,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===n?null:e===s?r:r=i(s=e,n)}}function Bh(t,i,n){var s,r,e;return function(){var h,o=n(this);if(null!=o)return(h=this.getAttribute(t))===o?null:h===s&&o===r?e:e=i(s=h,r=o);this.removeAttribute(t)}}function Uh(t,i,n){var s,r,e;return function(){var h,o=n(this);if(null!=o)return(h=this.getAttributeNS(t.space,t.local))===o?null:h===s&&o===r?e:e=i(s=h,r=o);this.removeAttributeNS(t.space,t.local)}}function Zh(t,i){function n(){var n=this,s=i.apply(n,arguments);return s&&function(i){n.setAttributeNS(t.space,t.local,s(i))}}return n._value=i,n}function Jh(t,i){function n(){var n=this,s=i.apply(n,arguments);return s&&function(i){n.setAttribute(t,s(i))}}return n._value=i,n}function Qh(t,i){return function(){_h(this,t).delay=+i.apply(this,arguments)}}function to(t,i){return i=+i,function(){_h(this,t).delay=i}}function io(t,i){return function(){qh(this,t).duration=+i.apply(this,arguments)}}function no(t,i){return i=+i,function(){qh(this,t).duration=i}}function so(t,i){if("function"!=typeof i)throw new Error;return function(){qh(this,t).ease=i}}function ro(t,i,n){var s,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?_h:qh;return function(){var h=e(this,t),o=h.on;o!==s&&(r=(s=o).copy()).on(i,n),h.on=r}}var eo=dr.prototype.constructor;function ho(t,i,n){function s(){var s=this,r=i.apply(s,arguments);return r&&function(i){s.style.setProperty(t,r(i),n)}}return s._value=i,s}var oo=0;function uo(t,i,n,s){this._groups=t,this._parents=i,this._name=n,this._id=s}function ao(){return++oo}var co=dr.prototype;uo.prototype=function(t){return dr().transition(t)}.prototype={constructor:uo,select:function(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=fs(t));for(var s=this._groups,r=s.length,e=new Array(r),h=0;h<r;++h)for(var o,u,a=s[h],c=a.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=a[f])&&(u=t.call(o,o.__data__,f,a))&&("__data__"in o&&(u.__data__=o.__data__),l[f]=u,Hh(l[f],i,n,f,l,Xh(o,n)));return new uo(e,this._parents,i,n)},selectAll:function(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=vs(t));for(var s=this._groups,r=s.length,e=[],h=[],o=0;o<r;++o)for(var u,a=s[o],c=a.length,l=0;l<c;++l)if(u=a[l]){for(var f,d=t.call(u,u.__data__,l,a),v=Xh(u,n),p=0,y=d.length;p<y;++p)(f=d[p])&&Hh(f,i,n,p,d,v);e.push(d),h.push(u)}return new uo(e,h,i,n)},filter:function(t){"function"!=typeof t&&(t=ps(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h=i[r],o=h.length,u=s[r]=[],a=0;a<o;++a)(e=h[a])&&t.call(e,e.__data__,a,h)&&u.push(e);return new uo(s,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,n=t._groups,s=i.length,r=Math.min(s,n.length),e=new Array(s),h=0;h<r;++h)for(var o,u=i[h],a=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=u[f]||a[f])&&(l[f]=o);for(;h<s;++h)e[h]=i[h];return new uo(e,this._parents,this._name,this._id)},selection:function(){return new eo(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,n=ao(),s=this._groups,r=s.length,e=0;e<r;++e)for(var h,o=s[e],u=o.length,a=0;a<u;++a)if(h=o[a]){var c=Xh(h,i);Hh(h,t,n,a,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new uo(s,this._parents,t,n)},call:co.call,nodes:co.nodes,node:co.node,size:co.size,empty:co.empty,each:co.each,on:function(t,i){var n=this._id;return arguments.length<2?Xh(this.node(),n).on.on(t):this.each(ro(n,t,i))},attr:function(t,i){var n=os(t),s="transform"===n?ze:Fh;return this.attrTween(t,"function"==typeof i?(n.local?Uh:Bh)(n,s,Ph(this,"attr."+t,i)):null==i?(n.local?Vh:Gh)(n):(n.local?Kh:Yh)(n,s,i+""))},attrTween:function(t,i){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;var s=os(t);return this.tween(n,(s.local?Zh:Jh)(s,i))},style:function(t,i,n){var s="transform"==(t+="")?Oe:Fh;return null==i?this.styleTween(t,function(t,i){var n,s,r;return function(){var e=Ds(this,t),h=(this.style.removeProperty(t),Ds(this,t));return e===h?null:e===n&&h===s?r:r=i(n=e,s=h)}}(t,s)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,n){var s,r,e;return function(){var h=Ds(this,t),o=n(this);return null==o&&(this.style.removeProperty(t),o=Ds(this,t)),h===o?null:h===s&&o===r?e:e=i(s=h,r=o)}}(t,s,Ph(this,"style."+t,i)):function(t,i,n){var s,r;return function(){var e=Ds(this,t);return e===n?null:e===s?r:r=i(s=e,n)}}(t,s,i+""),n)},styleTween:function(t,i,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;return this.tween(s,ho(t,i,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(Ph(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var n in this.__transition)if(+n!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var n=this._id;if(t+="",arguments.length<2){for(var s,r=Xh(this.node(),n).tween,e=0,h=r.length;e<h;++e)if((s=r[e]).name===t)return s.value;return null}return this.each((null==i?Rh:jh)(n,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?Qh:to)(i,t)):Xh(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?io:no)(i,t)):Xh(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(so(i,t)):Xh(this.node(),i).ease}};var lo={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function fo(t,i){for(var n;!(n=t.__transition)||!(n=n[i]);)if(!(t=t.parentNode))return lo.time=Lh(),lo;return n}dr.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var n,s,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(n=e[r]).name===i?(s=n.state>2&&n.state<5,n.state=6,n.timer.stop(),s&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},dr.prototype.transition=function(t){var i,n;t instanceof uo?(i=t._id,t=t._name):(i=ao(),(n=lo).time=Lh(),t=null==t?null:t+"");for(var s=this._groups,r=s.length,e=0;e<r;++e)for(var h,o=s[e],u=o.length,a=0;a<u;++a)(h=o[a])&&Hh(h,t,i,a,o,n||fo(h,i));return new uo(s,this._parents,t,i)};var vo="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),po=new Uint8Array(16);function yo(){if(!vo)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return vo(po)}for(var wo=[],go=0;go<256;++go)wo[go]=(go+256).toString(16).substr(1);function mo(t,i,n){var s=i&&n||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||yo)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[s+e]=r[e];return i||function(t){var i=0;return[wo[t[i++]],wo[t[i++]],wo[t[i++]],wo[t[i++]],"-",wo[t[i++]],wo[t[i++]],"-",wo[t[i++]],wo[t[i++]],"-",wo[t[i++]],wo[t[i++]],"-",wo[t[i++]],wo[t[i++]],wo[t[i++]],wo[t[i++]],wo[t[i++]],wo[t[i++]]].join("")}(r)}const{verifyTextHasSpace:bo,checkAttributeTransitions:Mo,createTextStrokeFilter:ko,drawHoverStrokes:Ao,removeHoverStrokes:xo,buildStrokes:Wo,convertColorsToTextures:No,initializeDescriptionRoot:Lo,initializeElementAccess:So,setElementFocusHandler:To,setElementAccessID:Eo,setAccessibilityController:Do,hideNonessentialGroups:$o,setAccessTitle:Co,setAccessSubtitle:Io,setAccessLongDescription:Oo,setAccessExecutiveSummary:zo,setAccessPurpose:Ho,setAccessContext:_o,setAccessStatistics:qo,setAccessChartCounts:Xo,setAccessXAxis:Ro,setAccessYAxis:jo,setAccessStructure:Po,setAccessAnnotation:Fo,retainAccessFocus:Go,checkAccessFocus:Vo,setElementInteractionAccessState:Yo,setAccessibilityDescriptionWidth:Ko,autoTextColor:Bo,annotate:Uo,chartAccessors:Zo,convertVisaColor:Jo,checkInteraction:Qo,checkClicked:tu,checkHovered:iu,drawAxis:nu,drawGrid:su,drawLegend:ru,setLegendInteractionState:eu,drawTooltip:hu,formatDataLabel:ou,formatDate:uu,getColors:au,getLicenses:cu,getPadding:lu,getScopedData:fu,initTooltipStyle:du,overrideTitleTooltip:vu,placeDataLabels:pu,scopeDataKeys:yu,transitionEndAll:wu,visaColors:gu,validateAccessibilityProps:mu,findTagLevel:bu}=r,Mu=class{constructor(n){t(this,n),this.mainTitle=ch.mainTitle,this.subTitle=ch.subTitle,this.height=ch.height,this.width=ch.width,this.layout=ch.layout,this.margin=ch.margin,this.padding=ch.padding,this.highestHeadingLevel=ch.highestHeadingLevel,this.ordinalAccessor=ch.ordinalAccessor,this.valueAccessor=ch.valueAccessor,this.groupAccessor=ch.groupAccessor,this.reverseOrder=ch.reverseOrder,this.xAxis=ch.xAxis,this.yAxis=ch.yAxis,this.wrapLabel=ch.wrapLabel,this.colorPalette=ch.colorPalette,this.hoverStyle=ch.hoverStyle,this.clickStyle=ch.clickStyle,this.referenceStyle=ch.referenceStyle,this.cursor=ch.cursor,this.roundedCorner=ch.roundedCorner,this.barIntervalRatio=ch.barIntervalRatio,this.groupIntervalRatio=ch.groupIntervalRatio,this.hoverOpacity=ch.hoverOpacity,this.dataLabel=ch.dataLabel,this.showTooltip=ch.showTooltip,this.tooltipLabel=ch.tooltipLabel,this.accessibility=ch.accessibility,this.legend=ch.legend,this.annotations=ch.annotations,this.referenceLines=ch.referenceLines,this.suppressEvents=ch.suppressEvents,this.clickHighlight=ch.clickHighlight,this.unitTest=!1,this.shouldValidateAccessibility=!0,this.nest=[],this.datakeys=[],this.legendData=[],this.updated=!0,this.shouldValidate=!1,this.shouldUpdateData=!1,this.shouldSetDimensions=!1,this.shouldUpdateScales=!1,this.shouldValidateAxes=!1,this.shouldUpdateAnnotations=!1,this.shouldResetRoot=!1,this.shouldUpdateTableData=!1,this.shouldSetColors=!1,this.shouldValidateLabelPlacement=!1,this.shouldValidateDataLabelAccessor=!1,this.shouldValidateInteractionKeys=!1,this.shouldSetSelectionClass=!1,this.shouldUpdateXAxis=!1,this.shouldUpdateYAxis=!1,this.shouldUpdateXGrid=!1,this.shouldUpdateYGrid=!1,this.shouldUpdateBaseline=!1,this.shouldCheckValueAxis=!1,this.shouldCheckLabelAxis=!1,this.shouldSetGlobalSelections=!1,this.shouldEnterUpdateExit=!1,this.shouldUpdateGeometries=!1,this.shouldUpdateCorners=!1,this.shouldUpdateLegendData=!1,this.shouldUpdateLegend=!1,this.shouldUpdateLegendInteractivity=!1,this.shouldSetLegendCursor=!1,this.shouldUpdateReferenceLines=!1,this.shouldUpdateLabels=!1,this.shouldUpdateCursor=!1,this.shouldDrawInteractionState=!1,this.shouldSetLabelOpacity=!1,this.shouldCheckLabelColor=!1,this.shouldBindInteractivity=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldSetTestingAttributes=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldSetTextures=!1,this.shouldSetStrokes=!1,this.strokes={},this.topLevel="h2",this.bottomLevel="p",this.textTreatmentHandler=(t,i,n)=>{const s=this.clickHighlight&&this.clickHighlight.length>0&&tu(t,this.clickHighlight,this.innerInteractionKeys)&&this.clickStyle.color?gu[this.clickStyle.color]||this.clickStyle.color:this.hoverHighlight&&iu(t,this.hoverHighlight,this.innerInteractionKeys)&&this.hoverStyle.color?gu[this.hoverStyle.color]||this.hoverStyle.color:this.preparedColors[i],r="bottom"===this.dataLabel.placement||"left"===this.dataLabel.placement?Bo(s):gu.dark_text,e=vr(n[i]);return e.attr("filter",e.classed("textIsMoving")?null:ko({root:this.svg.node(),id:this.chartID,color:"bottom"===this.dataLabel.placement||"left"===this.dataLabel.placement?s:"#ffffff"})),r},this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}dataWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldSetTextures=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldUpdateTableData=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateLegendData=!0,this.shouldUpdateScales=!0,this.shouldValidate=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetStrokes=!0}idWatcher(t,i){this.chartID=t||"clustered-bar-chart-"+mo(),this.clusteredBarChartEl.id=this.chartID,this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldSetStrokes=!0}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}titleWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subtitleWatcher(t,i){this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}dimensionWatcher(t,i){this.shouldSetDimensions=!0,this.shouldUpdateScales=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetLabelOpacity=!0}layoutWatcher(t,i){this.shouldValidateLabelPlacement=!0,this.shouldUpdateScales=!0,this.shouldValidateAxes=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetTestingAttributes=!0,this.shouldSetLabelOpacity=!0}ordinalAccessorWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldUpdateLegendData=!0,this.shouldUpdateScales=!0,this.shouldSetColors=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0)}valueAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldSetColors=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldCheckValueAxis=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldUpdateLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0}groupAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateLabels=!0,this.shouldCheckLabelAxis=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGroupAccessibilityLabel=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0)}reverseOrderWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,"vertical"===this.layout?(this.shouldValidateAxes=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0):"horizontal"===this.layout&&(this.shouldValidateAxes=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0)}xAxisWatcher(t,i){this.shouldValidateAxes=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateXGrid=!0)}yAxisWatcher(t,i){this.shouldValidateAxes=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateYGrid=!0)}wrapLabelWatcher(t,i){this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0}paletteWatcher(t,i){this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldCheckLabelColor=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0}colorsWatcher(t,i){this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldCheckLabelColor=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0}hoverStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0}clickStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0}referenceWatcher(t,i){this.shouldUpdateReferenceLines=!0}cursorWatcher(t,i){this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0}cornerWatcher(t,i){this.shouldUpdateCorners=!0}intervalRatioWatcher(t,i){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldSetLabelOpacity=!0,this.shouldCheckLabelAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateAnnotations=!0}groupIntervalRatioWatcher(t,i){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateAnnotations=!0}hoverOpacityWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0}labelWatcher(t,i){this.shouldUpdateLabels=!0,this.shouldUpdateTableData=!0;const n=!(!t||!t.placement)&&t.placement,s=!(!i||!i.placement)&&i.placement,r=!(!t||!t.labelAccessor)&&t.labelAccessor,e=!(!i||!i.labelAccessor)&&i.labelAccessor;(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetLabelOpacity=!0),n!==s&&(this.shouldSetLabelOpacity=!0,this.shouldValidateLabelPlacement=!0,this.shouldCheckLabelColor=!0),r!==e&&(this.shouldValidateDataLabelAccessor=!0)}tooltipLabelWatcher(t,i){this.shouldUpdateTableData=!0}accessibilityWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const n=t&&t.includeDataKeyNames,s=i&&i.includeDataKeyNames;n===s&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(n!==s&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.hideTextures)&&t.hideTextures)!==(!(!i||!i.hideTextures)&&i.hideTextures)&&(this.shouldSetTextures=!0,this.shouldUpdateLegend=!0,this.shouldDrawInteractionState=!0),(!(!t||!t.showSmallLabels)&&t.showSmallLabels)!==(!(!i||!i.showSmallLabels)&&i.showSmallLabels)&&(this.shouldSetLabelOpacity=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!i||!i.hideStrokes)&&i.hideStrokes)&&(this.shouldUpdateLegend=!0,this.shouldSetStrokes=!0,this.shouldDrawInteractionState=!0);const r=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,e=!(!i||!i.elementsAreInterface)&&i.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled)&&i.keyboardNavConfig.disabled)&&r===e||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),r!==e&&(this.shouldDrawInteractionState=!0)}legendWatcher(t,i){this.shouldUpdateLegend=!0,(t&&t.interactive)!==(i&&i.interactive)&&(this.shouldSetLegendCursor=!0,this.shouldUpdateLegendInteractivity=!0)}annotationsWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0,this.shouldSetAnnotationAccessibility=!0}valueOverrideWatcher(t,i){this.shouldUpdateScales=!0,this.shouldCheckValueAxis=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0}clickWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0}hoverWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0}interactionWatcher(t,i){this.shouldValidateInteractionKeys=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateTableData=!0,this.shouldSetGeometryAriaLabels=!0}suppressWatcher(t,i){this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0,this.shouldUpdateLegendInteractivity=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}unitTestWatcher(t,i){this.shouldSetTestingAttributes=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.defaults=!0,this.chartID=this.uniqueID||"clustered-bar-chart-"+mo(),this.clusteredBarChartEl.id=this.chartID,this.setTagLevels(),this.prepareData(),this.prepareLegendData(),this.setDimensions(),this.prepareScales(),this.validateInteractionKeys(),this.validateDataLabelAccessor(),this.validateAxes(),this.validateLabelPlacement(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.setColors(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.shouldValidateAccessibilityProps(),this.renderRootElements(),this.setTooltipInitialStyle(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.setTextures(),this.setStrokes(),this.drawXGrid(),this.drawYGrid(),this.setGlobalSelections(),this.setTestingAttributes(),this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.drawGeometries(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawLegendElements(),this.bindLegendInteractivity(),this.drawDataLabels(),this.drawReferenceLines(),this.setSelectedClass(),this.updateInteractionState(),this.setLabelOpacity(),this.checkLabelColorAgainstBackground(),this.updateCursor(),this.bindInteractivity(),this.drawAnnotations(),this.setAnnotationAccessibility(),this.drawXAxis(),this.setXAxisAccessibility(),this.drawYAxis(),this.setYAxisAccessibility(),this.drawBaseline(),this.onChangeHandler(),$o(this.root.node(),this.barG.node()),this.setGroupAccessibilityID(),this.duration=750,this.defaults=!1,t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldSetTextures&&(this.setTextures(),this.shouldSetTextures=!1),this.shouldSetStrokes&&(this.setStrokes(),this.shouldSetStrokes=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldSetTestingAttributes&&(this.setTestingAttributes(),this.shouldSetTestingAttributes=!1),this.shouldUpdateXGrid&&(this.drawXGrid(),this.shouldUpdateXGrid=!1),this.shouldUpdateYGrid&&(this.drawYGrid(),this.shouldUpdateYGrid=!1),this.shouldEnterUpdateExit&&(this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateGeometries&&(this.drawGeometries(),this.shouldUpdateGeometries=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateCorners&&(this.setRoundedCorners(),this.shouldUpdateCorners=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldUpdateLabels&&(this.drawDataLabels(),this.shouldUpdateLabels=!1),this.shouldUpdateReferenceLines&&(this.drawReferenceLines(),this.shouldUpdateReferenceLines=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldCheckLabelColor&&(this.checkLabelColorAgainstBackground(),this.shouldCheckLabelColor=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldUpdateLegendInteractivity&&(this.bindLegendInteractivity(),this.shouldUpdateLegendInteractivity=!1),this.shouldSetLegendCursor&&(this.setLegendCursor(),this.shouldSetLegendCursor=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.shouldUpdateBaseline&&(this.drawBaseline(),this.shouldUpdateBaseline=!1),this.onChangeHandler(),t("component did update")})}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,mu(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:this.suppressEvents?void 0:this.clickFunc.emit}}))}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor]}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor}validateLabelPlacement(){"vertical"===this.layout?"top"!==this.dataLabel.placement&&"bottom"!==this.dataLabel.placement&&(this.dataLabel.placement="top"):"top"!==this.dataLabel.placement&&"bottom"!==this.dataLabel.placement||(this.dataLabel.placement="right")}setDimensions(){this.padding="string"==typeof this.padding?lu(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}prepareData(){this.data.map(t=>{t[this.valueAccessor]=parseFloat(t[this.valueAccessor]),t[this.groupAccessor]=t[this.groupAccessor]instanceof Date?uu({date:t[this.groupAccessor],format:"vertical"===this.layout?this.xAxis.format:this.yAxis.format,offsetTimezone:!0}):t[this.groupAccessor]}),this.nest=function(){var t,i,n,s=[],r=[];function e(n,r,h,o){if(r>=s.length)return null!=t&&n.sort(t),null!=i?i(n):n;for(var u,a,c,l=-1,f=n.length,d=s[r++],v=Sr(),p=h();++l<f;)(c=v.get(u=d(a=n[l])+""))?c.push(a):v.set(u,[a]);return v.each((function(t,i){o(p,i,e(t,r,h,o))})),p}return n={object:function(t){return e(t,0,Tr,Er)},map:function(t){return e(t,0,Dr,$r)},entries:function(t){return function t(n,e){if(++e>s.length)return n;var h,o=r[e-1];return null!=i&&e>=s.length?h=n.entries():(h=[],n.each((function(i,n){h.push({key:n,values:t(i,e)})}))),null!=o?h.sort((function(t,i){return o(t.key,i.key)})):h}(e(t,0,Dr,$r),0)},key:function(t){return s.push(t),n},sortKeys:function(t){return r[s.length-1]=t,n},sortValues:function(i){return t=i,n},rollup:function(t){return i=t,n}}}().key(t=>t[this.groupAccessor]).entries(this.data),this.datakeys=this.nest.map(t=>t.key)}setTableData(){const t=yu(this,Zo,"clustered-bar-chart");this.tableData=fu(this.data,t),this.tableColumns=Object.keys(t)}prepareScales(){const t=this.minValueOverride&&this.minValueOverride<Wr(this.data,t=>t[this.valueAccessor])?this.minValueOverride:Wr(this.data,t=>t[this.valueAccessor]);"vertical"===this.layout?(this.y=oh().domain([Math.min(0,t),this.maxValueOverride||xr(this.data,t=>t[this.valueAccessor])]).range([this.innerPaddedHeight,0]),this.x0=_r().domain(this.datakeys).range(this.reverseOrder?[this.innerPaddedWidth,0]:[0,this.innerPaddedWidth]).padding(this.groupIntervalRatio),this.x1=_r().domain(this.nest[0].values.map(t=>t[this.ordinalAccessor])).rangeRound([0,this.x0.bandwidth()]).padding(this.barIntervalRatio)):"horizontal"===this.layout&&(this.x=oh().domain([Math.min(0,t),this.maxValueOverride||xr(this.data,t=>t[this.valueAccessor])]).range([0,this.innerPaddedWidth]),this.y0=_r().domain(this.datakeys).range(this.reverseOrder?[this.innerPaddedHeight,0]:[0,this.innerPaddedHeight]).padding(this.groupIntervalRatio),this.y1=_r().domain(this.nest[0].values.map(t=>t[this.ordinalAccessor])).rangeRound([0,this.y0.bandwidth()]).padding(this.barIntervalRatio))}validateAxes(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!("vertical"===this.layout)&&this.xAxis.gridVisible}),this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:"vertical"===this.layout&&this.yAxis.gridVisible})}setColors(){this.preparedColors=this.colors?Jo(this.colors):au(this.colorPalette,this.nest[0].values.length)}setTextures(){const t=this.preparedColors.range?this.preparedColors.range():this.preparedColors;if(this.accessibility.hideTextures||t.length>6)this.colorArr=this.preparedColors;else{const i=No({colors:t,rootSVG:this.svg.node(),id:this.chartID,scheme:"categorical"});this.colorArr=this.preparedColors.range?this.preparedColors.copy().range(i):i}}setStrokes(){this.strokes=Wo({root:this.svg.node(),id:this.chartID,colors:this.preparedColors.range?this.preparedColors.range():this.preparedColors,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle})}renderRootElements(){this.svg=vr(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.gridG=this.rootG.append("g").attr("class","grid-group"),this.barG=this.rootG.append("g").attr("class","clustered-bar-group"),this.labelG=this.rootG.append("g").attr("class","clustered-bar-dataLabel-group"),this.legendG=vr(this.clusteredBarChartEl).select(".clustered-bar-legend").append("svg"),this.tooltipG=vr(this.clusteredBarChartEl).select(".clustered-bar-tooltip"),this.references=this.rootG.append("g").attr("class","clustered-bar-reference-line-group")}setTestingAttributes(){this.unitTest?(vr(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").attr("data-testid","chart-container"),vr(this.clusteredBarChartEl).select(".clustered-bar-main-title").attr("data-testid","main-title"),vr(this.clusteredBarChartEl).select(".clustered-bar-sub-title").attr("data-testid","sub-title"),this.svg.attr("data-testid","root-svg"),this.root.attr("data-testid","margin-container"),this.rootG.attr("data-testid","padding-container"),this.legendG.attr("data-testid","legend-container"),this.tooltipG.attr("data-testid","tooltip-container"),this.barG.attr("data-testid","clustered-bar-group"),this.updateBarWrappers.attr("data-testid","clustered-bar-wrapper").attr("data-id",t=>`clustered-bar-wrapper-${t.key}`),this.update.attr("data-testid","bar").attr("data-id",t=>`bar-${t[this.groupAccessor]}-${t[this.ordinalAccessor]}`),this.labelG.attr("data-testid","clustered-bar-dataLabel-group"),this.updateLabelWrappers.attr("data-testid","clustered-bar-dataLabel-wrapper").attr("data-id",t=>`clustered-bar-dataLabel-wrapper-${t.key}`),this.updateLabels.attr("data-testid","dataLabel").attr("data-id",t=>`dataLabel-${t[this.groupAccessor]}-${t[this.ordinalAccessor]}`),this.references.attr("data-testid","reference-line-group"),this.svg.select("defs").attr("data-testid","pattern-defs"),this.references.selectAll(".clustered-bar-reference-line").attr("data-testid","reference-line"),this.references.selectAll(".clustered-bar-reference-line-label").attr("data-testid","reference-line-label")):(vr(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").attr("data-testid",null),vr(this.clusteredBarChartEl).select(".clustered-bar-main-title").attr("data-testid",null),vr(this.clusteredBarChartEl).select(".clustered-bar-sub-title").attr("data-testid",null),this.svg.attr("data-testid",null),this.root.attr("data-testid",null),this.rootG.attr("data-testid",null),this.legendG.attr("data-testid",null),this.tooltipG.attr("data-testid",null),this.barG.attr("data-testid",null),this.updateBarWrappers.attr("data-testid",null).attr("data-id",null),this.update.attr("data-testid",null).attr("data-id",null),this.labelG.attr("data-testid",null),this.updateLabelWrappers.attr("data-testid",null).attr("data-id",null),this.updateLabels.attr("data-testid",null).attr("data-id",null),this.references.attr("data-testid",null),this.svg.select("defs").attr("data-testid",null),this.references.selectAll(".clustered-bar-reference-line").attr("data-testid",null),this.references.selectAll(".clustered-bar-reference-line-label").attr("data-testid",null))}reSetRoot(){this.svg.transition("root_reset").duration(this.duration).ease(uh).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root.transition("root_reset").duration(this.duration).ease(uh).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),this.rootG.transition("root_reset").duration(this.duration).ease(uh).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),Ko(this.chartID,this.width)}drawXAxis(){nu({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:"vertical"===this.layout?this.x0:this.x,left:!1,wrapLabel:this.wrapLabel&&"vertical"===this.layout?this.x0.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible})}drawYAxis(){nu({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:"vertical"===this.layout?this.y:this.y0,left:!0,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible})}setXAxisAccessibility(){Ro({rootEle:this.clusteredBarChartEl,hasXAxis:!!this.innerXAxis&&this.innerXAxis.visible,xAxis:"vertical"===this.layout?this.x0||!1:this.x||!1,xAxisLabel:this.xAxis.label?this.xAxis.label:""})}setYAxisAccessibility(){jo({rootEle:this.clusteredBarChartEl,hasYAxis:!!this.innerYAxis&&this.innerYAxis.visible,yAxis:"vertical"===this.layout?this.y||!1:this.y0||!1,yAxisLabel:this.yAxis.label?this.yAxis.label:""})}drawBaseline(){nu({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:"vertical"===this.layout?this.x0:this.x,left:!1,padding:this.padding,markOffset:"vertical"===this.layout?this.y(0)||-1:this.y0(0)||-1,hide:!("vertical"===this.layout)}),nu({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:"vertical"===this.layout?this.y:this.y0,left:!0,padding:this.padding,markOffset:"vertical"===this.layout?this.x0(0)||-1:this.x(0)||-1,hide:"vertical"===this.layout})}drawXGrid(){su(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,"vertical"===this.layout?this.x0:this.x,!1,!this.innerXAxis.gridVisible,this.xAxis.tickInterval)}drawYGrid(){su(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,"vertical"===this.layout?this.y:this.y0,!0,!this.innerYAxis.gridVisible,this.yAxis.tickInterval)}setGlobalSelections(){const t=this.barG.selectAll(".clustered-bar-wrapper").data(this.nest,t=>t.key);this.enterBarWrappers=t.enter().append("g"),this.exitBarWrappers=t.exit(),this.updateBarWrappers=t.merge(this.enterBarWrappers);const i=this.updateBarWrappers.selectAll(".clustered-bar").data(t=>t.values,t=>t[this.ordinalAccessor]);this.enter=i.enter().append("rect"),this.exit=i.exit(),this.update=i.merge(this.enter),this.enterSize=this.enter.size(),this.exitSize=this.exit.size();const n=this.labelG.selectAll("g").data(this.nest,t=>t.key);this.enterLabelWrappers=n.enter().append("g"),this.exitLabelWrappers=n.exit(),this.updateLabelWrappers=n.merge(this.enterLabelWrappers);const s=this.updateLabelWrappers.selectAll("text").data(t=>t.values,t=>t[this.ordinalAccessor]);this.enterLabels=s.enter().append("text"),this.exitLabels=s.exit(),this.updateLabels=s.merge(this.enterLabels)}enterGeometries(){this.enter.interrupt();const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",n="vertical"===this.layout?"y":"x",s="vertical"===this.layout?"height":"width",r="vertical"===this.layout?"max":"min";this.enterBarWrappers.attr("class","clustered-bar-wrapper").classed("entering",!0).attr("transform",t=>"vertical"===this.layout?"translate("+this.x0(t.key)+",0)":"translate(0,"+this.y0(t.key)+")").each((t,i,n)=>{So(n[i])}),this.enter.attr("class","clustered-bar").attr("cursor",this.suppressEvents?null:this.cursor).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).each((t,i,n)=>{So(n[i])}).on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr(n,t=>this[n](Math[r](0,t[this.valueAccessor]))).attr(s,t=>Math.abs("vertical"===this.layout?this[n](0)-this[n](t[this.valueAccessor]):this[n](t[this.valueAccessor])-this[n](0))).attr(t,i=>this[t+"1"](i[this.ordinalAccessor])).attr(i,this[t+"1"].bandwidth()),this.defaults?this.enter.attr("opacity",t=>Qo(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)):this.enter.classed("entering",!0).attr(t,(i,n,s)=>{const r=vr(s[n].parentNode),e=r.classed("entering");let h=e?this[t+"0"](r.datum().key):this[t+"1"](i[this.ordinalAccessor]);const o=e?this[t+"0"].bandwidth()/2:this[t+"1"].bandwidth()/2,u=(h+o)/(this.innerPaddedWidth/2);return h=e?0:h,h+o*u}).attr(i,0),this.enterBarWrappers.order(),this.enter.order()}updateGeometries(){this.update.interrupt(),this.update.transition("opacity").duration((t,i,n)=>vr(n[i]).classed("entering")?(vr(n[i]).classed("entering",!1),this.duration):0).ease(uh).attr("opacity",t=>Qo(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))}exitGeometries(){this.exitBarWrappers.interrupt(),this.exit.interrupt();const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",n="innerPadded"+i[0].toUpperCase()+i.substring(1);this.exit.transition("exit").duration(this.duration).ease(uh).attr("opacity",0).attr(t,(s,r,e)=>{const h=vr(e[r]);let o=+h.attr(t)+ +h.attr(i)/2;return o=+h.attr(t)+ +h.attr(i)/2*(o/(this[n]/2)),o}).attr(i,0),this.exitSize+=this.exitBarWrappers.selectAll(".clustered-bar").size(),this.exitBarWrappers.selectAll(".clustered-bar").transition("exit_wrappers").duration(.75*this.duration).ease(uh).attr("opacity",0).attr(t,(i,s,r)=>{const e=r[s].parentNode.transform.baseVal.consolidate().matrix.e,h=this[t+"0"].bandwidth()/2;return h*((e+h)/(this[n]/2))}).attr(i,0),this.update.transition("accessibilityAfterExit").duration(this.duration).ease(uh).call(wu,()=>{const t=Vo(this.rootG.node());this.exit.remove(),this.exitBarWrappers.remove(),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),Go({parentGNode:this.rootG.node(),focusDidExist:t})})}drawGeometries(){const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",n="vertical"===this.layout?"y":"x",s="vertical"===this.layout?"height":"width",r="vertical"===this.layout?"max":"min";this.updateBarWrappers.transition("update").duration(this.duration).ease(uh).attr("transform",t=>"vertical"===this.layout?"translate("+this.x0(t.key)+",0)":"translate(0,"+this.y0(t.key)+")").call(wu,()=>{this.updateBarWrappers.classed("entering",!1)}),this.update.classed("geometryIsMoving",(e,h,o)=>Mo(vr(o[h]),[{attr:t,numeric:!0,newValue:this[t+"1"](e[this.ordinalAccessor])},{attr:i,numeric:!0,newValue:this[t+"1"].bandwidth()},{attr:n,numeric:!0,newValue:this[n](Math[r](0,e[this.valueAccessor]))},{attr:s,numeric:!0,newValue:Math.abs("vertical"===this.layout?this[n](0)-this[n](e[this.valueAccessor]):this[n](e[this.valueAccessor])-this[n](0))}])).transition("update").duration((t,i,n)=>vr(n[i]).classed("entering")?this.duration/2:this.duration).delay((t,i,n)=>vr(n[i]).classed("entering")?this.duration/2:0).ease(uh).attr(n,t=>this[n](Math[r](0,t[this.valueAccessor]))).attr(s,t=>Math.abs("vertical"===this.layout?this[n](0)-this[n](t[this.valueAccessor]):this[n](t[this.valueAccessor])-this[n](0))).attr(t,i=>this[t+"1"](i[this.ordinalAccessor])).attr(i,this[t+"1"].bandwidth()).call(wu,()=>{this.update.classed("geometryIsMoving",!1),this.updateInteractionState(),Go({parentGNode:this.rootG.node()})})}updateInteractionState(){xo(this.svg.node()),this.update.interrupt("opacity"),this.updateLabels.interrupt("opacity"),this.update.attr("opacity",t=>Qo(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)).attr("fill",(t,i)=>{const n=this.clickHighlight&&this.clickHighlight.length>0&&tu(t,this.clickHighlight,this.innerInteractionKeys),s=this.hoverHighlight&&iu(t,this.hoverHighlight,this.innerInteractionKeys),r=this.colorArr[i];return n&&this.clickStyle.color?gu[this.clickStyle.color]||this.clickStyle.color:n?r:s&&this.hoverStyle.color?gu[this.hoverStyle.color]||this.hoverStyle.color:r}).attr("filter",(t,i,n)=>{if(!this.accessibility.hideStrokes&&!vr(n[i]).classed("geometryIsMoving")){const s=this.clickHighlight&&this.clickHighlight.length>0&&tu(t,this.clickHighlight,this.innerInteractionKeys),r=this.hoverHighlight&&iu(t,this.hoverHighlight,this.innerInteractionKeys),e=this.preparedColors[i],h=s?"click":r&&!vr(n[i]).classed("geometryIsMoving")?"hover":"rest",o=s&&this.clickStyle.color?gu[this.clickStyle.color]||this.clickStyle.color:s?e:r&&this.hoverStyle.color?gu[this.hoverStyle.color]||this.hoverStyle.color:e;return"hover"===h&&Ao({inputElement:n[i],id:this.chartID,key:t[this.ordinalAccessor]+t[this.groupAccessor],strokeWidth:this.hoverStyle.strokeWidth,fill:o}),this.strokes[h+o]}return null}),Go({parentGNode:this.rootG.node()}),eu({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}setLabelOpacity(){this.processLabelOpacity(this.updateLabels)}processLabelOpacity(t){const i=this.dataLabel.visible?1:0,n="vertical"===this.layout?"x":"y",s="vertical"===this.layout?"width":"height",r="vertical"===this.layout?"y":"x",e="vertical"===this.layout?"height":"width",h=this[n+"0"].bandwidth()/this.nest[0].values.length;t.attr("opacity",t=>{const o={};return o[s]="left"===this.dataLabel.placement||"bottom"===this.dataLabel.placement?this[n+"1"].bandwidth():h,"left"!==this.dataLabel.placement&&"bottom"!==this.dataLabel.placement||(o[e]=Math.abs("vertical"===this.layout?this[r](0)-this[r](t[this.valueAccessor]):this[r](t[this.valueAccessor])-this[r](0))),this.accessibility.showSmallLabels||bo({text:ou(t,this.innerLabelAccessor,this.dataLabel.format),dimensions:o,fontSize:14})?Qo(t,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:0})}checkLabelColorAgainstBackground(){this.updateLabels.attr("fill",(t,i,n)=>this.textTreatmentHandler(t,i,n))}setRoundedCorners(){this.update.transition("corners").duration(this.duration).ease(uh).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner)}setSelectedClass(){this.update.classed("highlight",(t,i,n)=>{let s=Qo(t,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);return s=!(!this.clickHighlight||!this.clickHighlight.length)&&s,Yo(n[i],s,this.accessibility.elementsAreInterface),s})}updateCursor(){this.update.attr("cursor",this.suppressEvents?null:this.cursor),this.updateLabels.attr("cursor",this.suppressEvents?null:this.cursor)}enterDataLabels(){const t="vertical"===this.layout?"x":"y";this.enterLabelWrappers.attr("class","clustered-bar-label-wrapper").classed("entering",!0).attr("transform",t=>"vertical"===this.layout?"translate("+this.x0(t.key)+",0)":"translate(0,"+this.y0(t.key)+")"),this.enterLabels.attr("opacity",0).attr("class","clustered-bar-dataLabel entering").attr("cursor",this.suppressEvents?null:this.cursor).classed("clustered-bar-dataLabel-horizontal",!1).classed("clustered-bar-dataLabel-vertical",!1).classed("clustered-bar-dataLabel-"+this.layout,!0).attr("fill",this.textTreatmentHandler).on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),pu({root:this.enterLabels,xScale:"vertical"===this.layout?this.x1:this.x,yScale:"vertical"===this.layout?this.y:this.y1,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"bar"}),this.enterLabels.attr(t,(i,n,s)=>{const r=t+"0",e=t+"1",h="x"===t?"innerPaddedWidth":"innerPaddedHeight",o=vr(s[n].parentNode),u=o.classed("entering");let a=u?this[r](o.datum().key):this[e](i[this.ordinalAccessor]);const c=u?this[r].bandwidth()/2:this[e].bandwidth()/2,l=(a+c)/(this[h]/2);return a=u?0:a,a+c*l})}updateDataLabels(){this.updateLabels.interrupt();const t=this.dataLabel.visible?1:0;this.updateLabels.transition("opacity").duration((t,i,n)=>vr(n[i]).classed("entering")?(vr(n[i]).classed("entering",!1),this.duration/2):0).ease(uh).attr("opacity",i=>Qo(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1).call(wu,()=>{this.updateLabels.classed("entering",!1)})}exitDataLabels(){this.exitLabelWrappers.selectAll("text").transition("exit").ease(uh).duration(this.duration/3).attr("opacity",0).call(wu,()=>{this.exitLabelWrappers.remove()}),this.exitLabels.transition("exit").ease(uh).duration(this.duration/3).attr("opacity",0).remove()}drawDataLabels(){this.updateLabels.text(t=>ou(t,this.innerLabelAccessor,this.dataLabel.format)),this.updateLabelWrappers.classed("clustered-bar-dataLabel-horizontal",!1).classed("clustered-bar-dataLabel-vertical",!1).classed("clustered-bar-dataLabel-"+this.layout,!0).transition("update").duration(this.duration).ease(uh).attr("transform",t=>"vertical"===this.layout?"translate("+this.x0(t.key)+",0)":"translate(0,"+this.y0(t.key)+")").call(wu,()=>{this.updateLabelWrappers.classed("entering",!1)});const t=this.updateLabels.transition("update").ease(uh).duration(this.duration);pu({root:t,xScale:"vertical"===this.layout?this.x1:this.x,yScale:"vertical"===this.layout?this.y:this.y1,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"bar"})}drawReferenceLines(){const t=this.references.selectAll("g").data(this.referenceLines,t=>t.label),i=t.enter().append("g").attr("class","clustered-bar-reference").attr("opacity",1),n=i.append("line");n.attr("class","clustered-bar-reference-line").attr("opacity",0);const s=i.append("text");s.attr("class","clustered-bar-reference-line-label").attr("opacity",0);const r=t.merge(i),e=r.selectAll(".clustered-bar-reference-line").data(t=>[t]).transition("merge").ease(uh).duration(this.duration),h=r.selectAll(".clustered-bar-reference-line-label").data(t=>[t]).transition("merge").ease(uh).duration(this.duration).text(t=>t.label);t.exit().transition("exit").ease(uh).duration(this.duration).attr("opacity",0).remove(),"vertical"===this.layout?(i.attr("transform",t=>"translate(0,"+this.y(t.value)+")"),r.transition("merge").ease(uh).duration(this.duration).attr("transform",t=>"translate(0,"+this.y(t.value)+")"),n.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),s.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),h.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em")):"horizontal"===this.layout&&(i.attr("transform",t=>"translate("+this.x(t.value)+",0)"),r.transition("merge").ease(uh).duration(this.duration).attr("transform",t=>"translate("+this.x(t.value)+",0)"),n.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0),e.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0),s.attr("text-anchor","middle").attr("x",0).attr("y",t=>"top"===(t.labelPlacementVertical||"top")?0:this.innerPaddedHeight).attr("dx",0).attr("dy",t=>"top"===(t.labelPlacementVertical||"top")?"-0.3em":"1em"),h.attr("text-anchor","middle").attr("x",0).attr("y",t=>"top"===(t.labelPlacementVertical||"top")?0:this.innerPaddedHeight).attr("dx",0).attr("dy",t=>"top"===(t.labelPlacementVertical||"top")?"-0.3em":"1em")),e.style("stroke",gu[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity),h.style("fill",gu[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)}prepareLegendData(){this.legendData=this.nest[0].values}drawLegendElements(){ru({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:this.preparedColors,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,labelKey:this.ordinalAccessor,label:this.legend.labels,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}bindLegendInteractivity(){vr(this.clusteredBarChartEl).selectAll(".legend").style("cursor",this.legend.interactive&&!this.suppressEvents?this.cursor:"").on("click",this.legend.interactive&&!this.suppressEvents?t=>this.onClickHandler(t):null).on("mouseover",this.legend.interactive&&!this.suppressEvents?t=>this.hoverFunc.emit(t):null).on("mouseout",this.legend.interactive&&!this.suppressEvents?()=>this.onMouseOutHandler():null)}setLegendCursor(){vr(this.clusteredBarChartEl).selectAll(".legend").style("cursor",this.legend.interactive&&!this.suppressEvents?this.cursor:null)}bindInteractivity(){this.update.on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updateLabels.on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler())}drawAnnotations(){Uo({source:this.rootG.node(),data:this.annotations,xScale:"horizontal"!==this.layout?this.x0:this.x,xAccessor:"horizontal"!==this.layout?this.groupAccessor:this.valueAccessor,yScale:"horizontal"!==this.layout?this.y:this.y0,yAccessor:"horizontal"!==this.layout?this.valueAccessor:this.groupAccessor})}setAnnotationAccessibility(){Fo(this.clusteredBarChartEl,this.annotations)}setTagLevels(){this.topLevel=bu(this.highestHeadingLevel),this.bottomLevel=bu(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){Lo({rootEle:this.clusteredBarChartEl,geomType:"bar",title:this.accessibility.title||this.mainTitle,chartTag:"clustered-bar-chart",uniqueID:this.chartID,groupName:"cluster",highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){Do({node:this.svg.node(),chartTag:"clustered-bar-chart",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:yu(this,Zo,"clustered-bar-chart"),groupAccessor:this.groupAccessor,groupName:"cluster",disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.update.each((t,i,n)=>{So(n[i])})}setGeometryAriaLabels(){const t=yu(this,Zo,"clustered-bar-chart");this.update.each((i,n,s)=>{To({node:s[n],geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupName:"cluster",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),Eo({node:s[n],uniqueID:this.chartID})})}setGroupAccessibilityID(){this.updateBarWrappers.each((t,i,n)=>{Eo({node:n[i],uniqueID:this.chartID})})}setChartAccessibilityTitle(){Co(this.clusteredBarChartEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){Io(this.clusteredBarChartEl,this.subTitle)}setChartAccessibilityLongDescription(){Oo(this.clusteredBarChartEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){zo(this.clusteredBarChartEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){Ho(this.clusteredBarChartEl,this.accessibility.purpose)}setChartAccessibilityContext(){_o(this.clusteredBarChartEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){qo(this.clusteredBarChartEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){Xo({rootEle:this.clusteredBarChartEl,parentGNode:this.barG.node(),chartTag:"clustered-bar-chart",geomType:"bar",groupName:"cluster"})}setChartAccessibilityStructureNotes(){Po(this.clusteredBarChartEl,this.accessibility.structureNotes)}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){vu(this.chartID,!0),this.hoverFunc.emit(t),this.showTooltip&&t[this.ordinalAccessor]&&this.eventsTooltip({data:t,evt:nr,isToShow:!0})}onMouseOutHandler(){vu(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){du(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:n}){hu({root:this.tooltipG,data:t,event:i,isToShow:n,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.groupAccessor,groupAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"clustered"})}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldCheckValueAxis&&("horizontal"===this.layout?(this.shouldUpdateXAxis=!0,this.shouldUpdateXGrid=!0):"vertical"===this.layout&&(this.shouldUpdateYAxis=!0,this.shouldUpdateYGrid=!0),this.shouldCheckValueAxis=!1),this.shouldCheckLabelAxis&&("vertical"===this.layout?(this.shouldUpdateXAxis=!0,this.shouldUpdateXGrid=!0,this.shouldSetXAxisAccessibility=!0):"horizontal"===this.layout&&(this.shouldUpdateYAxis=!0,this.shouldUpdateYGrid=!0,this.shouldSetYAxisAccessibility=!0),this.shouldCheckLabelAxis=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldUpdateLegendData&&(this.prepareLegendData(),this.shouldUpdateLegendData=!1),this.shouldSetDimensions&&(this.setDimensions(),this.shouldSetDimensions=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldValidateDataLabelAccessor&&(this.validateDataLabelAccessor(),this.shouldValidateDataLabelAccessor=!1),this.shouldValidateAxes&&(this.validateAxes(),this.shouldValidateAxes=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidate=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),this.shouldValidateLabelPlacement&&(this.validateLabelPlacement(),this.shouldValidateLabelPlacement=!1),n("div",{class:`o-layout is--${this.layout} light`},n("div",{class:"o-layout--chart"},n(this.topLevel,{"data-testid":"main-title"},this.mainTitle),n(this.bottomLevel,{class:"visa-ui-text--instructions","data-testid":"sub-title"},this.subTitle),n("div",{class:"clustered-bar-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),n("div",{class:"visa-viz-d3-clustered-bar-container"}),n("div",{class:"clustered-bar-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),n("data-table",{uniqueID:this.chartID,isCompact:!0,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))}init(){const t=Object.keys(ch);let i=0;const n={mainTitle:{exception:""},subTitle:{exception:""},barIntervalRatio:{exception:0},groupIntervalRatio:{exception:0},showTooltip:{exception:!1},wrapLabel:{exception:!1},hoverOpacity:{exception:0}};for(i=0;i<t.length;i++){const s=!!n[t[i]]&&this[t[i]]===n[t[i]].exception;this[t[i]]=this[t[i]]||s?this[t[i]]:ch[t[i]]}}get clusteredBarChartEl(){return s(this)}static get watchers(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],layout:["layoutWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],reverseOrder:["reverseOrderWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],roundedCorner:["cornerWatcher"],barIntervalRatio:["intervalRatioWatcher"],groupIntervalRatio:["groupIntervalRatioWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}clustered-bar-chart{cursor:default}clustered-bar-chart .annotations{pointer-events:none}clustered-bar-chart .annotations .handle{pointer-events:all}clustered-bar-chart .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}clustered-bar-chart .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}clustered-bar-chart .hidden{display:none}clustered-bar-chart #visa-viz-d3-clustered-bar-container{clear:both}clustered-bar-chart .clustered-bar-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap}clustered-bar-chart .clustered-bar-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;margin-right:10px}clustered-bar-chart .clustered-bar-legend .key-dot{margin:3px 8px}clustered-bar-chart .light .grid line{stroke:#767676;stroke-opacity:1;stroke-width:0.8;stroke-dasharray:4, 4}clustered-bar-chart .light .grid path{stroke-width:0}clustered-bar-chart .light .axis{font-size:12px}clustered-bar-chart .light .axis .tick text{fill:#767676}clustered-bar-chart .light .axis .tick line{stroke:#767676}clustered-bar-chart .light .axis-label{text-anchor:middle;font:1rem sans-serif}clustered-bar-chart .light .y.axis path{stroke:#767676;opacity:0}clustered-bar-chart .light .x.axis path{stroke:#767676}clustered-bar-chart .dark .grid line{stroke:lightgrey;stroke-opacity:0.7;shape-rendering:crispEdges}clustered-bar-chart .dark .grid path{stroke-width:0}clustered-bar-chart .dark .axis{font-size:12px}clustered-bar-chart .dark .axis .tick line{stroke:lightgrey}clustered-bar-chart .dark .axis .tick text{fill:grey}clustered-bar-chart .dark .axis path{stroke:black}clustered-bar-chart .dark .axis-label{text-anchor:middle;font:1rem sans-serif}clustered-bar-chart .dark .o-layout--chart svg{background:black}clustered-bar-chart .dark .o-layout--chart svg .clustered-bar-dataLabel-vertical{text-anchor:middle}clustered-bar-chart .dark .o-layout--chart svg .clustered-bar-dataLabel-horizontal{text-anchor:start}"}};window.VisaChartsLibOSSLicenses=cu();var ku="http://www.w3.org/1999/xhtml";const Au={svg:"http://www.w3.org/2000/svg",xhtml:ku,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function xu(t){var i=t+="",n=i.indexOf(":");return n>=0&&"xmlns"!==(i=t.slice(0,n))&&(t=t.slice(n+1)),Au.hasOwnProperty(i)?{space:Au[i],local:t}:t}function Wu(t){return function(){var i=this.ownerDocument,n=this.namespaceURI;return n===ku&&i.documentElement.namespaceURI===ku?i.createElement(t):i.createElementNS(n,t)}}function Nu(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Lu(t){var i=xu(t);return(i.local?Nu:Wu)(i)}function Su(){}function Tu(t){return null==t?Su:function(){return this.querySelector(t)}}function Eu(){return[]}function Du(t){return null==t?Eu:function(){return this.querySelectorAll(t)}}function $u(t){return function(){return this.matches(t)}}function Cu(t){return new Array(t.length)}function Iu(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function Ou(t,i,n,s,r,e){for(var h,o=0,u=i.length,a=e.length;o<a;++o)(h=i[o])?(h.__data__=e[o],s[o]=h):n[o]=new Iu(t,e[o]);for(;o<u;++o)(h=i[o])&&(r[o]=h)}function zu(t,i,n,s,r,e,h){var o,u,a,c={},l=i.length,f=e.length,d=new Array(l);for(o=0;o<l;++o)(u=i[o])&&(d[o]=a="$"+h.call(u,u.__data__,o,i),a in c?r[o]=u:c[a]=u);for(o=0;o<f;++o)(u=c[a="$"+h.call(t,e[o],o,e)])?(s[o]=u,u.__data__=e[o],c[a]=null):n[o]=new Iu(t,e[o]);for(o=0;o<l;++o)(u=i[o])&&c[d[o]]===u&&(r[o]=u)}function Hu(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function _u(t){return function(){this.removeAttribute(t)}}function qu(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Xu(t,i){return function(){this.setAttribute(t,i)}}function Ru(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function ju(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Pu(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Fu(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Gu(t){return function(){this.style.removeProperty(t)}}function Vu(t,i,n){return function(){this.style.setProperty(t,i,n)}}function Yu(t,i,n){return function(){var s=i.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function Ku(t,i){return t.style.getPropertyValue(i)||Fu(t).getComputedStyle(t,null).getPropertyValue(i)}function Bu(t){return function(){delete this[t]}}function Uu(t,i){return function(){this[t]=i}}function Zu(t,i){return function(){var n=i.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Ju(t){return t.trim().split(/^|\s+/)}function Qu(t){return t.classList||new ta(t)}function ta(t){this._node=t,this._names=Ju(t.getAttribute("class")||"")}function ia(t,i){for(var n=Qu(t),s=-1,r=i.length;++s<r;)n.add(i[s])}function na(t,i){for(var n=Qu(t),s=-1,r=i.length;++s<r;)n.remove(i[s])}function sa(t){return function(){ia(this,t)}}function ra(t){return function(){na(this,t)}}function ea(t,i){return function(){(i.apply(this,arguments)?ia:na)(this,t)}}function ha(){this.textContent=""}function oa(t){return function(){this.textContent=t}}function ua(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function aa(){this.innerHTML=""}function ca(t){return function(){this.innerHTML=t}}function la(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function fa(){this.nextSibling&&this.parentNode.appendChild(this)}function da(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function va(){return null}function pa(){var t=this.parentNode;t&&t.removeChild(this)}function ya(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function wa(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}Iu.prototype={constructor:Iu,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},ta.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var ga={},ma=null;function ba(t,i,n){return t=Ma(t,i,n),function(i){var n=i.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,i)}}function Ma(t,i,n){return function(s){var r=ma;ma=s;try{t.call(this,this.__data__,i,n)}finally{ma=r}}}function ka(t){return t.trim().split(/^|\s+/).map((function(t){var i="",n=t.indexOf(".");return n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),{type:t,name:i}}))}function Aa(t){return function(){var i=this.__on;if(i){for(var n,s=0,r=-1,e=i.length;s<e;++s)n=i[s],t.type&&n.type!==t.type||n.name!==t.name?i[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?i.length=r:delete this.__on}}}function xa(t,i,n){var s=ga.hasOwnProperty(t.type)?ba:Ma;return function(r,e,h){var o,u=this.__on,a=s(i,e,h);if(u)for(var c=0,l=u.length;c<l;++c)if((o=u[c]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=a,o.capture=n),void(o.value=i);this.addEventListener(t.type,a,n),o={type:t.type,name:t.name,value:i,listener:a,capture:n},u?u.push(o):this.__on=[o]}}function Wa(t,i,n){var s=Fu(t),r=s.CustomEvent;"function"==typeof r?r=new r(i,n):(r=s.document.createEvent("Event"),n?(r.initEvent(i,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function Na(t,i){return function(){return Wa(this,t,i)}}function La(t,i){return function(){return Wa(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(ga={mouseenter:"mouseover",mouseleave:"mouseout"}));var Sa=[null];function Ta(t,i){this._groups=t,this._parents=i}function Ea(){return new Ta([[document.documentElement]],Sa)}function Da(t){return"string"==typeof t?new Ta([[document.querySelector(t)]],[document.documentElement]):new Ta([[t]],Sa)}function $a(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function Ca(t){return 1===t.length&&(t=function(t){return function(i,n){return $a(t(i),n)}}(t)),{left:function(i,n,s,r){for(null==s&&(s=0),null==r&&(r=i.length);s<r;){var e=s+r>>>1;t(i[e],n)<0?s=e+1:r=e}return s},right:function(i,n,s,r){for(null==s&&(s=0),null==r&&(r=i.length);s<r;){var e=s+r>>>1;t(i[e],n)>0?r=e:s=e+1}return s}}}Ta.prototype=Ea.prototype={constructor:Ta,select:function(t){"function"!=typeof t&&(t=Tu(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h,o=i[r],u=o.length,a=s[r]=new Array(u),c=0;c<u;++c)(e=o[c])&&(h=t.call(e,e.__data__,c,o))&&("__data__"in e&&(h.__data__=e.__data__),a[c]=h);return new Ta(s,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Du(t));for(var i=this._groups,n=i.length,s=[],r=[],e=0;e<n;++e)for(var h,o=i[e],u=o.length,a=0;a<u;++a)(h=o[a])&&(s.push(t.call(h,h.__data__,a,o)),r.push(h));return new Ta(s,r)},filter:function(t){"function"!=typeof t&&(t=$u(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h=i[r],o=h.length,u=s[r]=[],a=0;a<o;++a)(e=h[a])&&t.call(e,e.__data__,a,h)&&u.push(e);return new Ta(s,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),a=-1,this.each((function(t){d[++a]=t})),d;var n=i?zu:Ou,s=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),o=new Array(e),u=new Array(e),a=0;a<e;++a){var c=s[a],l=r[a],f=l.length,d=t.call(c,c&&c.__data__,a,s),v=d.length,p=o[a]=new Array(v),y=h[a]=new Array(v);n(c,l,p,y,u[a]=new Array(f),d,i);for(var w,g,m=0,b=0;m<v;++m)if(w=p[m]){for(m>=b&&(b=m+1);!(g=y[b])&&++b<v;);w._next=g||null}}return(h=new Ta(h,s))._enter=o,h._exit=u,h},enter:function(){return new Ta(this._enter||this._groups.map(Cu),this._parents)},exit:function(){return new Ta(this._exit||this._groups.map(Cu),this._parents)},join:function(t,i,n){var s=this.enter(),r=this,e=this.exit();return s="function"==typeof t?t(s):s.append(t+""),null!=i&&(r=i(r)),null==n?e.remove():n(e),s&&r?s.merge(r).order():r},merge:function(t){for(var i=this._groups,n=t._groups,s=i.length,r=Math.min(s,n.length),e=new Array(s),h=0;h<r;++h)for(var o,u=i[h],a=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=u[f]||a[f])&&(l[f]=o);for(;h<s;++h)e[h]=i[h];return new Ta(e,this._parents)},order:function(){for(var t=this._groups,i=-1,n=t.length;++i<n;)for(var s,r=t[i],e=r.length-1,h=r[e];--e>=0;)(s=r[e])&&(h&&4^s.compareDocumentPosition(h)&&h.parentNode.insertBefore(s,h),h=s);return this},sort:function(t){function i(i,n){return i&&n?t(i.__data__,n.__data__):!i-!n}t||(t=Hu);for(var n=this._groups,s=n.length,r=new Array(s),e=0;e<s;++e){for(var h,o=n[e],u=o.length,a=r[e]=new Array(u),c=0;c<u;++c)(h=o[c])&&(a[c]=h);a.sort(i)}return new Ta(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var s=t[i],r=0,e=s.length;r<e;++r){var h=s[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,n=0,s=i.length;n<s;++n)for(var r,e=i[n],h=0,o=e.length;h<o;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var n=xu(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((null==i?n.local?qu:_u:"function"==typeof i?n.local?Pu:ju:n.local?Ru:Xu)(n,i))},style:function(t,i,n){return arguments.length>1?this.each((null==i?Gu:"function"==typeof i?Yu:Vu)(t,i,null==n?"":n)):Ku(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?Bu:"function"==typeof i?Zu:Uu)(t,i)):this.node()[t]},classed:function(t,i){var n=Ju(t+"");if(arguments.length<2){for(var s=Qu(this.node()),r=-1,e=n.length;++r<e;)if(!s.contains(n[r]))return!1;return!0}return this.each(("function"==typeof i?ea:i?sa:ra)(n,i))},text:function(t){return arguments.length?this.each(null==t?ha:("function"==typeof t?ua:oa)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?aa:("function"==typeof t?la:ca)(t)):this.node().innerHTML},raise:function(){return this.each(fa)},lower:function(){return this.each(da)},append:function(t){var i="function"==typeof t?t:Lu(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var n="function"==typeof t?t:Lu(t),s=null==i?va:"function"==typeof i?i:Tu(i);return this.select((function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)}))},remove:function(){return this.each(pa)},clone:function(t){return this.select(t?wa:ya)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,n){var s,r,e=ka(t+""),h=e.length;if(!(arguments.length<2)){for(o=i?xa:Aa,null==n&&(n=!1),s=0;s<h;++s)this.each(o(e[s],i,n));return this}var o=this.node().__on;if(o)for(var u,a=0,c=o.length;a<c;++a)for(s=0,u=o[a];s<h;++s)if((r=e[s]).type===u.type&&r.name===u.name)return u.value},dispatch:function(t,i){return this.each(("function"==typeof i?La:Na)(t,i))}};var Ia=Ca($a).right;function Oa(t,i,n){t=+t,i=+i,n=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+n;for(var s=-1,r=0|Math.max(0,Math.ceil((i-t)/n)),e=new Array(r);++s<r;)e[s]=t+s*n;return e}var za=Math.sqrt(50),Ha=Math.sqrt(10),_a=Math.sqrt(2);function qa(t,i,n){var s=(i-t)/Math.max(0,n),r=Math.floor(Math.log(s)/Math.LN10),e=s/Math.pow(10,r);return r>=0?(e>=za?10:e>=Ha?5:e>=_a?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=za?10:e>=Ha?5:e>=_a?2:1)}function Xa(t,i,n){var s=Math.abs(i-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),e=s/r;return e>=za?r*=10:e>=Ha?r*=5:e>=_a&&(r*=2),i<t?-r:r}function Ra(t,i){var n,s,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(n=t[e])&&n>=n)for(s=n;++e<r;)null!=(n=t[e])&&n>s&&(s=n)}else for(;++e<r;)if(null!=(n=i(t[e],e,t))&&n>=n)for(s=n;++e<r;)null!=(n=i(t[e],e,t))&&n>s&&(s=n);return s}function ja(t,i){var n,s,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(n=t[e])&&n>=n)for(s=n;++e<r;)null!=(n=t[e])&&s>n&&(s=n)}else for(;++e<r;)if(null!=(n=i(t[e],e,t))&&n>=n)for(s=n;++e<r;)null!=(n=i(t[e],e,t))&&s>n&&(s=n);return s}var Pa=new Date,Fa=new Date;function Ga(t,i,n,s){function r(i){return t(i=0===arguments.length?new Date:new Date(+i)),i}return r.floor=function(i){return t(i=new Date(+i)),i},r.ceil=function(n){return t(n=new Date(n-1)),i(n,1),t(n),n},r.round=function(t){var i=r(t),n=r.ceil(t);return t-i<n-t?i:n},r.offset=function(t,n){return i(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,s,e){var h,o=[];if(n=r.ceil(n),e=null==e?1:Math.floor(e),!(n<s&&e>0))return o;do{o.push(h=new Date(+n)),i(n,e),t(n)}while(h<n&&n<s);return o},r.filter=function(n){return Ga((function(i){if(i>=i)for(;t(i),!n(i);)i.setTime(i-1)}),(function(t,s){if(t>=t)if(s<0)for(;++s<=0;)for(;i(t,-1),!n(t););else for(;--s>=0;)for(;i(t,1),!n(t););}))},n&&(r.count=function(i,s){return Pa.setTime(+i),Fa.setTime(+s),t(Pa),t(Fa),Math.floor(n(Pa,Fa))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(s?function(i){return s(i)%t==0}:function(i){return r.count(0,i)%t==0}):r:null}),r}var Va=Ga((function(){}),(function(t,i){t.setTime(+t+i)}),(function(t,i){return i-t}));Va.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Ga((function(i){i.setTime(Math.floor(i/t)*t)}),(function(i,n){i.setTime(+i+n*t)}),(function(i,n){return(n-i)/t})):Va:null};var Ya=Ga((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,i){t.setTime(+t+1e3*i)}),(function(t,i){return(i-t)/1e3}),(function(t){return t.getUTCSeconds()})),Ka=Ga((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,i){t.setTime(+t+6e4*i)}),(function(t,i){return(i-t)/6e4}),(function(t){return t.getMinutes()})),Ba=Ga((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,i){t.setTime(+t+36e5*i)}),(function(t,i){return(i-t)/36e5}),(function(t){return t.getHours()})),Ua=Ga((function(t){t.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}));function Za(t){return Ga((function(i){i.setDate(i.getDate()-(i.getDay()+7-t)%7),i.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+7*i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var Ja=Za(0),Qa=Za(1),tc=(Za(2),Za(3),Za(4)),ic=(Za(5),Za(6),Ga((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,i){t.setMonth(t.getMonth()+i)}),(function(t,i){return i.getMonth()-t.getMonth()+12*(i.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),nc=Ga((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,i){t.setFullYear(t.getFullYear()+i)}),(function(t,i){return i.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));nc.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Ga((function(i){i.setFullYear(Math.floor(i.getFullYear()/t)*t),i.setMonth(0,1),i.setHours(0,0,0,0)}),(function(i,n){i.setFullYear(i.getFullYear()+n*t)})):null};var sc=Ga((function(t){t.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCDate(t.getUTCDate()+i)}),(function(t,i){return(i-t)/864e5}),(function(t){return t.getUTCDate()-1}));function rc(t){return Ga((function(i){i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-t)%7),i.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCDate(t.getUTCDate()+7*i)}),(function(t,i){return(i-t)/6048e5}))}var ec=rc(0),hc=rc(1),oc=(rc(2),rc(3),rc(4)),uc=(rc(5),rc(6),Ga((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCFullYear(t.getUTCFullYear()+i)}),(function(t,i){return i.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));function ac(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function cc(){}function lc(t,i){var n=new cc;if(t instanceof cc)t.each((function(t,i){n.set(i,t)}));else if(Array.isArray(t)){var s,r=-1,e=t.length;if(null==i)for(;++r<e;)n.set(r,t[r]);else for(;++r<e;)n.set(i(s=t[r],r,t),s)}else if(t)for(var h in t)n.set(h,t[h]);return n}function fc(){return{}}function dc(t,i,n){t[i]=n}function vc(){return lc()}function pc(t,i,n){t.set(i,n)}uc.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Ga((function(i){i.setUTCFullYear(Math.floor(i.getUTCFullYear()/t)*t),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)}),(function(i,n){i.setUTCFullYear(i.getUTCFullYear()+n*t)})):null},cc.prototype=lc.prototype={constructor:cc,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var yc=Array.prototype,wc=yc.map,gc=yc.slice,mc={name:"implicit"};function bc(){var t=lc(),i=[],n=[],s=mc;function r(r){var e=r+"",h=t.get(e);if(!h){if(s!==mc)return s;t.set(e,h=i.push(r))}return n[(h-1)%n.length]}return r.domain=function(n){if(!arguments.length)return i.slice();i=[],t=lc();for(var s,e,h=-1,o=n.length;++h<o;)t.has(e=(s=n[h])+"")||t.set(e,i.push(s));return r},r.range=function(t){return arguments.length?(n=gc.call(t),r):n.slice()},r.unknown=function(t){return arguments.length?(s=t,r):s},r.copy=function(){return bc(i,n).unknown(s)},ac.apply(r,arguments),r}function Mc(){var t,i,n=bc().unknown(void 0),s=n.domain,r=n.range,e=[0,1],h=!1,o=0,u=0,a=.5;function c(){var n=s().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,n-o+2*u),h&&(t=Math.floor(t)),l+=(f-l-t*(n-o))*a,i=t*(1-o),h&&(l=Math.round(l),i=Math.round(i));var d=Oa(n).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(s(t),c()):s()},n.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},n.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},n.bandwidth=function(){return i},n.step=function(){return t},n.round=function(t){return arguments.length?(h=!!t,c()):h},n.padding=function(t){return arguments.length?(o=Math.min(1,u=+t),c()):o},n.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),c()):o},n.paddingOuter=function(t){return arguments.length?(u=+t,c()):u},n.align=function(t){return arguments.length?(a=Math.max(0,Math.min(1,t)),c()):a},n.copy=function(){return Mc(s(),e).round(h).paddingInner(o).paddingOuter(u).align(a)},ac.apply(c(),arguments)}function kc(t){var i=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return kc(i())},t}function Ac(){return kc(Mc.apply(null,arguments).paddingInner(1))}function xc(t,i,n){t.prototype=i.prototype=n,n.constructor=t}function Wc(t,i){var n=Object.create(t.prototype);for(var s in i)n[s]=i[s];return n}function Nc(){}var Lc="\\s*([+-]?\\d+)\\s*",Sc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tc="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ec=/^#([0-9a-f]{3,8})$/,Dc=new RegExp("^rgb\\("+[Lc,Lc,Lc]+"\\)$"),$c=new RegExp("^rgb\\("+[Tc,Tc,Tc]+"\\)$"),Cc=new RegExp("^rgba\\("+[Lc,Lc,Lc,Sc]+"\\)$"),Ic=new RegExp("^rgba\\("+[Tc,Tc,Tc,Sc]+"\\)$"),Oc=new RegExp("^hsl\\("+[Sc,Tc,Tc]+"\\)$"),zc=new RegExp("^hsla\\("+[Sc,Tc,Tc,Sc]+"\\)$"),Hc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function _c(){return this.rgb().formatHex()}function qc(){return this.rgb().formatRgb()}function Xc(t){var i,n;return t=(t+"").trim().toLowerCase(),(i=Ec.exec(t))?(n=i[1].length,i=parseInt(i[1],16),6===n?Rc(i):3===n?new Gc(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===n?jc(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===n?jc(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=Dc.exec(t))?new Gc(i[1],i[2],i[3],1):(i=$c.exec(t))?new Gc(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=Cc.exec(t))?jc(i[1],i[2],i[3],i[4]):(i=Ic.exec(t))?jc(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=Oc.exec(t))?Bc(i[1],i[2]/100,i[3]/100,1):(i=zc.exec(t))?Bc(i[1],i[2]/100,i[3]/100,i[4]):Hc.hasOwnProperty(t)?Rc(Hc[t]):"transparent"===t?new Gc(NaN,NaN,NaN,0):null}function Rc(t){return new Gc(t>>16&255,t>>8&255,255&t,1)}function jc(t,i,n,s){return s<=0&&(t=i=n=NaN),new Gc(t,i,n,s)}function Pc(t){return t instanceof Nc||(t=Xc(t)),t?new Gc((t=t.rgb()).r,t.g,t.b,t.opacity):new Gc}function Fc(t,i,n,s){return 1===arguments.length?Pc(t):new Gc(t,i,n,null==s?1:s)}function Gc(t,i,n,s){this.r=+t,this.g=+i,this.b=+n,this.opacity=+s}function Vc(){return"#"+Kc(this.r)+Kc(this.g)+Kc(this.b)}function Yc(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Kc(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Bc(t,i,n,s){return s<=0?t=i=n=NaN:n<=0||n>=1?t=i=NaN:i<=0&&(t=NaN),new Zc(t,i,n,s)}function Uc(t){if(t instanceof Zc)return new Zc(t.h,t.s,t.l,t.opacity);if(t instanceof Nc||(t=Xc(t)),!t)return new Zc;if(t instanceof Zc)return t;var i=(t=t.rgb()).r/255,n=t.g/255,s=t.b/255,r=Math.min(i,n,s),e=Math.max(i,n,s),h=NaN,o=e-r,u=(e+r)/2;return o?(h=i===e?(n-s)/o+6*(n<s):n===e?(s-i)/o+2:(i-n)/o+4,o/=u<.5?e+r:2-e-r,h*=60):o=u>0&&u<1?0:h,new Zc(h,o,u,t.opacity)}function Zc(t,i,n,s){this.h=+t,this.s=+i,this.l=+n,this.opacity=+s}function Jc(t,i,n){return 255*(t<60?i+(n-i)*t/60:t<180?n:t<240?i+(n-i)*(240-t)/60:i)}function Qc(t){return function(){return t}}function tl(t,i){var n=i-t;return n?function(t,i){return function(n){return t+n*i}}(t,n):Qc(isNaN(t)?i:t)}xc(Nc,Xc,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:_c,formatHex:_c,formatHsl:function(){return Uc(this).formatHsl()},formatRgb:qc,toString:qc}),xc(Gc,Fc,Wc(Nc,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Gc(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Gc(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vc,formatHex:Vc,formatRgb:Yc,toString:Yc})),xc(Zc,(function(t,i,n,s){return 1===arguments.length?Uc(t):new Zc(t,i,n,null==s?1:s)}),Wc(Nc,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Zc(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Zc(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*i,r=2*n-s;return new Gc(Jc(t>=240?t-240:t+120,r,s),Jc(t,r,s),Jc(t<120?t+240:t-120,r,s),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const il=function t(i){var n=function(t){return 1==(t=+t)?tl:function(i,n){return n-i?function(t,i,n){return t=Math.pow(t,n),i=Math.pow(i,n)-t,n=1/n,function(s){return Math.pow(t+s*i,n)}}(i,n,t):Qc(isNaN(i)?n:i)}}(i);function s(t,i){var s=n((t=Fc(t)).r,(i=Fc(i)).r),r=n(t.g,i.g),e=n(t.b,i.b),h=tl(t.opacity,i.opacity);return function(i){return t.r=s(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return s.gamma=t,s}(1);function nl(t,i){i||(i=[]);var n,s=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(n=0;n<s;++n)r[n]=t[n]*(1-e)+i[n]*e;return r}}function sl(t,i){var n,s=i?i.length:0,r=t?Math.min(s,t.length):0,e=new Array(r),h=new Array(s);for(n=0;n<r;++n)e[n]=cl(t[n],i[n]);for(;n<s;++n)h[n]=i[n];return function(t){for(n=0;n<r;++n)h[n]=e[n](t);return h}}function rl(t,i){var n=new Date;return t=+t,i=+i,function(s){return n.setTime(t*(1-s)+i*s),n}}function el(t,i){return t=+t,i=+i,function(n){return t*(1-n)+i*n}}function hl(t,i){var n,s={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)n in t?s[n]=cl(t[n],i[n]):r[n]=i[n];return function(t){for(n in s)r[n]=s[n](t);return r}}var ol=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ul=new RegExp(ol.source,"g");function al(t,i){var n,s,r,e=ol.lastIndex=ul.lastIndex=0,h=-1,o=[],u=[];for(t+="",i+="";(n=ol.exec(t))&&(s=ul.exec(i));)(r=s.index)>e&&(r=i.slice(e,r),o[h]?o[h]+=r:o[++h]=r),(n=n[0])===(s=s[0])?o[h]?o[h]+=s:o[++h]=s:(o[++h]=null,u.push({i:h,x:el(n,s)})),e=ul.lastIndex;return e<i.length&&(r=i.slice(e),o[h]?o[h]+=r:o[++h]=r),o.length<2?u[0]?function(t){return function(i){return t(i)+""}}(u[0].x):function(t){return function(){return t}}(i):(i=u.length,function(t){for(var n,s=0;s<i;++s)o[(n=u[s]).i]=n.x(t);return o.join("")})}function cl(t,i){var n,s=typeof i;return null==i||"boolean"===s?Qc(i):("number"===s?el:"string"===s?(n=Xc(i))?(i=n,il):al:i instanceof Xc?il:i instanceof Date?rl:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?nl:Array.isArray(i)?sl:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?hl:el)(t,i)}function ll(t,i){return t=+t,i=+i,function(n){return Math.round(t*(1-n)+i*n)}}var fl,dl,vl,pl,yl=180/Math.PI,wl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function gl(t,i,n,s,r,e){var h,o,u;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(u=t*n+i*s)&&(n-=t*u,s-=i*u),(o=Math.sqrt(n*n+s*s))&&(n/=o,s/=o,u/=o),t*s<i*n&&(t=-t,i=-i,u=-u,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*yl,skewX:Math.atan(u)*yl,scaleX:h,scaleY:o}}function ml(t,i,n,s){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var o=[],u=[];return e=t(e),h=t(h),function(t,s,r,e,h,o){if(t!==r||s!==e){var u=h.push("translate(",null,i,null,n);o.push({i:u-4,x:el(t,r)},{i:u-2,x:el(s,e)})}else(r||e)&&h.push("translate("+r+i+e+n)}(e.translateX,e.translateY,h.translateX,h.translateY,o,u),function(t,i,n,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:n.push(r(n)+"rotate(",null,s)-2,x:el(t,i)})):i&&n.push(r(n)+"rotate("+i+s)}(e.rotate,h.rotate,o,u),function(t,i,n,e){t!==i?e.push({i:n.push(r(n)+"skewX(",null,s)-2,x:el(t,i)}):i&&n.push(r(n)+"skewX("+i+s)}(e.skewX,h.skewX,o,u),function(t,i,n,s,e,h){if(t!==n||i!==s){var o=e.push(r(e)+"scale(",null,",",null,")");h.push({i:o-4,x:el(t,n)},{i:o-2,x:el(i,s)})}else 1===n&&1===s||e.push(r(e)+"scale("+n+","+s+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,o,u),e=h=null,function(t){for(var i,n=-1,s=u.length;++n<s;)o[(i=u[n]).i]=i.x(t);return o.join("")}}}var bl=ml((function(t){return"none"===t?wl:(fl||(fl=document.createElement("DIV"),dl=document.documentElement,vl=document.defaultView),fl.style.transform=t,t=vl.getComputedStyle(dl.appendChild(fl),null).getPropertyValue("transform"),dl.removeChild(fl),gl(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Ml=ml((function(t){return null==t?wl:(pl||(pl=document.createElementNS("http://www.w3.org/2000/svg","g")),pl.setAttribute("transform",t),(t=pl.transform.baseVal.consolidate())?gl((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):wl)}),", ",")",")");function kl(t){return+t}var Al=[0,1];function xl(t){return t}function Wl(t,i){return(i-=t=+t)?function(n){return(n-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function Nl(t){var i,n=t[0],s=t[t.length-1];return n>s&&(i=n,n=s,s=i),function(t){return Math.max(n,Math.min(s,t))}}function Ll(t,i,n){var s=t[0],r=t[1],e=i[0],h=i[1];return r<s?(s=Wl(r,s),e=n(h,e)):(s=Wl(s,r),e=n(e,h)),function(t){return e(s(t))}}function Sl(t,i,n){var s=Math.min(t.length,i.length)-1,r=new Array(s),e=new Array(s),h=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<s;)r[h]=Wl(t[h],t[h+1]),e[h]=n(i[h],i[h+1]);return function(i){var n=Ia(t,i,1,s)-1;return e[n](r[n](i))}}function Tl(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function El(t,i){return function(){var t,i,n,s,r,e,h=Al,o=Al,u=cl,a=xl;function c(){return s=Math.min(h.length,o.length)>2?Sl:Ll,r=e=null,l}function l(i){return isNaN(i=+i)?n:(r||(r=s(h.map(t),o,u)))(t(a(i)))}return l.invert=function(n){return a(i((e||(e=s(o,h.map(t),el)))(n)))},l.domain=function(t){return arguments.length?(h=wc.call(t,kl),a===xl||(a=Nl(h)),c()):h.slice()},l.range=function(t){return arguments.length?(o=gc.call(t),c()):o.slice()},l.rangeRound=function(t){return o=gc.call(t),u=ll,c()},l.clamp=function(t){return arguments.length?(a=t?Nl(h):xl,l):a!==xl},l.interpolate=function(t){return arguments.length?(u=t,c()):u},l.unknown=function(t){return arguments.length?(n=t,l):n},function(n,s){return t=n,i=s,c()}}()(t,i)}function Dl(t,i){if((n=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var n,s=t.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+t.slice(n+1)]}function $l(t){return(t=Dl(Math.abs(t)))?t[1]:NaN}var Cl,Il=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ol(t){if(!(i=Il.exec(t)))throw new Error("invalid format: "+t);var i;return new zl({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function zl(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Hl(t,i){var n=Dl(t,i);if(!n)return t+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}Ol.prototype=zl.prototype,zl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const _l={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return Hl(100*t,i)},r:Hl,s:function(t,i){var n=Dl(t,i);if(!n)return t+"";var s=n[0],r=n[1],e=r-(Cl=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=s.length;return e===h?s:e>h?s+new Array(e-h+1).join("0"):e>0?s.slice(0,e)+"."+s.slice(e):"0."+new Array(1-e).join("0")+Dl(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function ql(t){return t}var Xl,Rl,jl,Pl=Array.prototype.map,Fl=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Gl(t){var i=t.domain;return t.ticks=function(t){var n=i();return function(t,i,n){var s,r,e,h,o=-1;if(n=+n,(t=+t)==(i=+i)&&n>0)return[t];if((s=i<t)&&(r=t,t=i,i=r),0===(h=qa(t,i,n))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++o<r;)e[o]=(t+o)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++o<r;)e[o]=(t-o)/h;return s&&e.reverse(),e}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var s=i();return function(t,i,n,s){var r,e=Xa(t,i,n);switch((s=Ol(null==s?",f":s)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=s.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor($l(i)/3)))-$l(Math.abs(t)))}(e,h))||(s.precision=r),jl(s,h);case"":case"e":case"g":case"p":case"r":null!=s.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,$l(i)-$l(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(s.precision=r-("e"===s.type));break;case"f":case"%":null!=s.precision||isNaN(r=function(t){return Math.max(0,-$l(Math.abs(t)))}(e))||(s.precision=r-2*("%"===s.type))}return Rl(s)}(s[0],s[s.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var s,r=i(),e=0,h=r.length-1,o=r[e],u=r[h];return u<o&&(s=o,o=u,u=s,s=e,e=h,h=s),(s=qa(o,u,n))>0?s=qa(o=Math.floor(o/s)*s,u=Math.ceil(u/s)*s,n):s<0&&(s=qa(o=Math.ceil(o*s)/s,u=Math.floor(u*s)/s,n)),s>0?(r[e]=Math.floor(o/s)*s,r[h]=Math.ceil(u/s)*s,i(r)):s<0&&(r[e]=Math.ceil(o*s)/s,r[h]=Math.floor(u*s)/s,i(r)),t},t}function Vl(){var t=El(xl,xl);return t.copy=function(){return Tl(t,Vl())},ac.apply(t,arguments),Gl(t)}function Yl(t){if(0<=t.y&&t.y<100){var i=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return i.setFullYear(t.y),i}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Kl(t){if(0<=t.y&&t.y<100){var i=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return i.setUTCFullYear(t.y),i}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Bl(t,i,n){return{y:t,m:i,d:n,H:0,M:0,S:0,L:0}}Xl=function(t){var i,n,s=void 0===t.grouping||void 0===t.thousands?ql:(i=Pl.call(t.grouping,Number),n=t.thousands+"",function(t,s){for(var r=t.length,e=[],h=0,o=i[0],u=0;r>0&&o>0&&(u+o+1>s&&(o=Math.max(1,s-u)),e.push(t.substring(r-=o,r+o)),!((u+=o+1)>s));)o=i[h=(h+1)%i.length];return e.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?ql:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(Pl.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",a=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=Ol(t)).fill,n=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,g=t.type;"n"===g?(p=!0,g="g"):_l[g]||(void 0===y&&(y=12),w=!0,g="g"),(d||"0"===i&&"="===n)&&(d=!0,i="0",n="=");var m="$"===f?r:"#"===f&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===f?e:/[%p]/.test(g)?u:"",M=_l[g],k=/[defgprs%]/.test(g);function A(t){var r,e,u,f=m,A=b;if("c"===g)A=M(t)+A,t="";else{var x=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,n=t.length,s=1,r=-1;s<n;++s)switch(t[s]){case".":r=i=s;break;case"0":0===r&&(r=s),i=s;break;default:if(!+t[s])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),x&&0==+t&&"+"!==l&&(x=!1),f=(x?"("===l?l:a:"-"===l||"("===l?"":l)+f,A=("s"===g?Fl[8+Cl/3]:"")+A+(x&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(u=t.charCodeAt(r))||u>57){A=(46===u?h+t.slice(r+1):t.slice(r))+A,t=t.slice(0,r);break}}p&&!d&&(t=s(t,1/0));var W=f.length+t.length+A.length,N=W<v?new Array(v-W+1).join(i):"";switch(p&&d&&(t=s(N+t,N.length?v-A.length:1/0),N=""),n){case"<":t=f+t+A+N;break;case"=":t=f+N+t+A;break;case"^":t=N.slice(0,W=N.length>>1)+f+t+A+N.slice(W);break;default:t=N+f+t+A}return o(t)}return y=void 0===y?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),A.toString=function(){return t+""},A}return{format:l,formatPrefix:function(t,i){var n=l(((t=Ol(t)).type="f",t)),s=3*Math.max(-8,Math.min(8,Math.floor($l(i)/3))),r=Math.pow(10,-s),e=Fl[8+s/3];return function(t){return n(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Rl=Xl.format,jl=Xl.formatPrefix;var Ul,Zl,Jl={"-":"",_:" ",0:"0"},Ql=/^\s*\d+/,tf=/^%/,nf=/[\\^$*+?|[\]().{}]/g;function sf(t,i,n){var s=t<0?"-":"",r=(s?-t:t)+"",e=r.length;return s+(e<n?new Array(n-e+1).join(i)+r:r)}function rf(t){return t.replace(nf,"\\$&")}function ef(t){return new RegExp("^(?:"+t.map(rf).join("|")+")","i")}function hf(t){for(var i={},n=-1,s=t.length;++n<s;)i[t[n].toLowerCase()]=n;return i}function of(t,i,n){var s=Ql.exec(i.slice(n,n+1));return s?(t.w=+s[0],n+s[0].length):-1}function uf(t,i,n){var s=Ql.exec(i.slice(n,n+1));return s?(t.u=+s[0],n+s[0].length):-1}function af(t,i,n){var s=Ql.exec(i.slice(n,n+2));return s?(t.U=+s[0],n+s[0].length):-1}function cf(t,i,n){var s=Ql.exec(i.slice(n,n+2));return s?(t.V=+s[0],n+s[0].length):-1}function lf(t,i,n){var s=Ql.exec(i.slice(n,n+2));return s?(t.W=+s[0],n+s[0].length):-1}function ff(t,i,n){var s=Ql.exec(i.slice(n,n+4));return s?(t.y=+s[0],n+s[0].length):-1}function df(t,i,n){var s=Ql.exec(i.slice(n,n+2));return s?(t.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function vf(t,i,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(n,n+6));return s?(t.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function pf(t,i,n){var s=Ql.exec(i.slice(n,n+1));return s?(t.q=3*s[0]-3,n+s[0].length):-1}function yf(t,i,n){var s=Ql.exec(i.slice(n,n+2));return s?(t.m=s[0]-1,n+s[0].length):-1}function wf(t,i,n){var s=Ql.exec(i.slice(n,n+2));return s?(t.d=+s[0],n+s[0].length):-1}function gf(t,i,n){var s=Ql.exec(i.slice(n,n+3));return s?(t.m=0,t.d=+s[0],n+s[0].length):-1}function mf(t,i,n){var s=Ql.exec(i.slice(n,n+2));return s?(t.H=+s[0],n+s[0].length):-1}function bf(t,i,n){var s=Ql.exec(i.slice(n,n+2));return s?(t.M=+s[0],n+s[0].length):-1}function Mf(t,i,n){var s=Ql.exec(i.slice(n,n+2));return s?(t.S=+s[0],n+s[0].length):-1}function kf(t,i,n){var s=Ql.exec(i.slice(n,n+3));return s?(t.L=+s[0],n+s[0].length):-1}function Af(t,i,n){var s=Ql.exec(i.slice(n,n+6));return s?(t.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function xf(t,i,n){var s=tf.exec(i.slice(n,n+1));return s?n+s[0].length:-1}function Wf(t,i,n){var s=Ql.exec(i.slice(n));return s?(t.Q=+s[0],n+s[0].length):-1}function Nf(t,i,n){var s=Ql.exec(i.slice(n));return s?(t.s=+s[0],n+s[0].length):-1}function Lf(t,i){return sf(t.getDate(),i,2)}function Sf(t,i){return sf(t.getHours(),i,2)}function Tf(t,i){return sf(t.getHours()%12||12,i,2)}function Ef(t,i){return sf(1+Ua.count(nc(t),t),i,3)}function Df(t,i){return sf(t.getMilliseconds(),i,3)}function $f(t,i){return Df(t,i)+"000"}function Cf(t,i){return sf(t.getMonth()+1,i,2)}function If(t,i){return sf(t.getMinutes(),i,2)}function Of(t,i){return sf(t.getSeconds(),i,2)}function zf(t){var i=t.getDay();return 0===i?7:i}function Hf(t,i){return sf(Ja.count(nc(t)-1,t),i,2)}function _f(t){var i=t.getDay();return i>=4||0===i?tc(t):tc.ceil(t)}function qf(t,i){return t=_f(t),sf(tc.count(nc(t),t)+(4===nc(t).getDay()),i,2)}function Xf(t){return t.getDay()}function Rf(t,i){return sf(Qa.count(nc(t)-1,t),i,2)}function jf(t,i){return sf(t.getFullYear()%100,i,2)}function Pf(t,i){return sf((t=_f(t)).getFullYear()%100,i,2)}function Ff(t,i){return sf(t.getFullYear()%1e4,i,4)}function Gf(t,i){var n=t.getDay();return sf((t=n>=4||0===n?tc(t):tc.ceil(t)).getFullYear()%1e4,i,4)}function Vf(t){var i=t.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+sf(i/60|0,"0",2)+sf(i%60,"0",2)}function Yf(t,i){return sf(t.getUTCDate(),i,2)}function Kf(t,i){return sf(t.getUTCHours(),i,2)}function Bf(t,i){return sf(t.getUTCHours()%12||12,i,2)}function Uf(t,i){return sf(1+sc.count(uc(t),t),i,3)}function Zf(t,i){return sf(t.getUTCMilliseconds(),i,3)}function Jf(t,i){return Zf(t,i)+"000"}function Qf(t,i){return sf(t.getUTCMonth()+1,i,2)}function td(t,i){return sf(t.getUTCMinutes(),i,2)}function id(t,i){return sf(t.getUTCSeconds(),i,2)}function nd(t){var i=t.getUTCDay();return 0===i?7:i}function sd(t,i){return sf(ec.count(uc(t)-1,t),i,2)}function rd(t){var i=t.getUTCDay();return i>=4||0===i?oc(t):oc.ceil(t)}function ed(t,i){return t=rd(t),sf(oc.count(uc(t),t)+(4===uc(t).getUTCDay()),i,2)}function hd(t){return t.getUTCDay()}function od(t,i){return sf(hc.count(uc(t)-1,t),i,2)}function ud(t,i){return sf(t.getUTCFullYear()%100,i,2)}function ad(t,i){return sf((t=rd(t)).getUTCFullYear()%100,i,2)}function cd(t,i){return sf(t.getUTCFullYear()%1e4,i,4)}function ld(t,i){var n=t.getUTCDay();return sf((t=n>=4||0===n?oc(t):oc.ceil(t)).getUTCFullYear()%1e4,i,4)}function fd(){return"+0000"}function dd(){return"%"}function vd(t){return+t}function pd(t){return Math.floor(+t/1e3)}function yd(t){return new Date(t)}function wd(t){return t instanceof Date?+t:+new Date(+t)}function gd(t,i,n,s,r,e,h,o,u){var a=El(xl,xl),c=a.invert,l=a.domain,f=u(".%L"),d=u(":%S"),v=u("%I:%M"),p=u("%I %p"),y=u("%a %d"),w=u("%b %d"),g=u("%B"),m=u("%Y"),b=[[h,1,1e3],[h,5,5e3],[h,15,15e3],[h,30,3e4],[e,1,6e4],[e,5,3e5],[e,15,9e5],[e,30,18e5],[r,1,36e5],[r,3,108e5],[r,6,216e5],[r,12,432e5],[s,1,864e5],[s,2,1728e5],[n,1,6048e5],[i,1,2592e6],[i,3,7776e6],[t,1,31536e6]];function M(o){return(h(o)<o?f:e(o)<o?d:r(o)<o?v:s(o)<o?p:i(o)<o?n(o)<o?y:w:t(o)<o?g:m)(o)}function k(i,n,s,r){if(null==i&&(i=10),"number"==typeof i){var e=Math.abs(s-n)/i,h=Ca((function(t){return t[2]})).right(b,e);h===b.length?(r=Xa(n/31536e6,s/31536e6,i),i=t):h?(r=(h=b[e/b[h-1][2]<b[h][2]/e?h-1:h])[1],i=h[0]):(r=Math.max(Xa(n,s,i),1),i=o)}return null==r?i:i.every(r)}return a.invert=function(t){return new Date(c(t))},a.domain=function(t){return arguments.length?l(wc.call(t,wd)):l().map(yd)},a.ticks=function(t,i){var n,s=l(),r=s[0],e=s[s.length-1],h=e<r;return h&&(n=r,r=e,e=n),n=(n=k(t,r,e,i))?n.range(r,e+1):[],h?n.reverse():n},a.tickFormat=function(t,i){return null==i?M:u(i)},a.nice=function(t,i){var n=l();return(t=k(t,n[0],n[n.length-1],i))?l(function(t,i){var n,s=0,r=(t=t.slice()).length-1,e=t[s],h=t[r];return h<e&&(n=s,s=r,r=n,n=e,e=h,h=n),t[s]=i.floor(e),t[r]=i.ceil(h),t}(n,t)):a},a.copy=function(){return Tl(a,gd(t,i,n,s,r,e,h,o,u))},a}Ul=function(t){var i=t.dateTime,n=t.date,s=t.time,r=t.periods,e=t.days,h=t.shortDays,o=t.months,u=t.shortMonths,a=ef(r),c=hf(r),l=ef(e),f=hf(e),d=ef(h),v=hf(h),p=ef(o),y=hf(o),w=ef(u),g=hf(u),m={a:function(t){return h[t.getDay()]},A:function(t){return e[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return o[t.getMonth()]},c:null,d:Lf,e:Lf,f:$f,g:Pf,G:Gf,H:Sf,I:Tf,j:Ef,L:Df,m:Cf,M:If,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:vd,s:pd,S:Of,u:zf,U:Hf,V:qf,w:Xf,W:Rf,x:null,X:null,y:jf,Y:Ff,Z:Vf,"%":dd},b={a:function(t){return h[t.getUTCDay()]},A:function(t){return e[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return o[t.getUTCMonth()]},c:null,d:Yf,e:Yf,f:Jf,g:ad,G:ld,H:Kf,I:Bf,j:Uf,L:Zf,m:Qf,M:td,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:vd,s:pd,S:id,u:nd,U:sd,V:ed,w:hd,W:od,x:null,X:null,y:ud,Y:cd,Z:fd,"%":dd},M={a:function(t,i,n){var s=d.exec(i.slice(n));return s?(t.w=v[s[0].toLowerCase()],n+s[0].length):-1},A:function(t,i,n){var s=l.exec(i.slice(n));return s?(t.w=f[s[0].toLowerCase()],n+s[0].length):-1},b:function(t,i,n){var s=w.exec(i.slice(n));return s?(t.m=g[s[0].toLowerCase()],n+s[0].length):-1},B:function(t,i,n){var s=p.exec(i.slice(n));return s?(t.m=y[s[0].toLowerCase()],n+s[0].length):-1},c:function(t,n,s){return x(t,i,n,s)},d:wf,e:wf,f:Af,g:df,G:ff,H:mf,I:mf,j:gf,L:kf,m:yf,M:bf,p:function(t,i,n){var s=a.exec(i.slice(n));return s?(t.p=c[s[0].toLowerCase()],n+s[0].length):-1},q:pf,Q:Wf,s:Nf,S:Mf,u:uf,U:af,V:cf,w:of,W:lf,x:function(t,i,s){return x(t,n,i,s)},X:function(t,i,n){return x(t,s,i,n)},y:df,Y:ff,Z:vf,"%":xf};function k(t,i){return function(n){var s,r,e,h=[],o=-1,u=0,a=t.length;for(n instanceof Date||(n=new Date(+n));++o<a;)37===t.charCodeAt(o)&&(h.push(t.slice(u,o)),null!=(r=Jl[s=t.charAt(++o)])?s=t.charAt(++o):r="e"===s?" ":"0",(e=i[s])&&(s=e(n,r)),h.push(s),u=o+1);return h.push(t.slice(u,o)),h.join("")}}function A(t,i){return function(n){var s,r,e=Bl(1900,void 0,1);if(x(e,t,n+="",0)!=n.length)return null;if("Q"in e)return new Date(e.Q);if("s"in e)return new Date(1e3*e.s+("L"in e?e.L:0));if(!i||"Z"in e||(e.Z=0),"p"in e&&(e.H=e.H%12+12*e.p),void 0===e.m&&(e.m="q"in e?e.q:0),"V"in e){if(e.V<1||e.V>53)return null;"w"in e||(e.w=1),"Z"in e?(r=(s=Kl(Bl(e.y,0,1))).getUTCDay(),s=r>4||0===r?hc.ceil(s):hc(s),s=sc.offset(s,7*(e.V-1)),e.y=s.getUTCFullYear(),e.m=s.getUTCMonth(),e.d=s.getUTCDate()+(e.w+6)%7):(r=(s=Yl(Bl(e.y,0,1))).getDay(),s=r>4||0===r?Qa.ceil(s):Qa(s),s=Ua.offset(s,7*(e.V-1)),e.y=s.getFullYear(),e.m=s.getMonth(),e.d=s.getDate()+(e.w+6)%7)}else("W"in e||"U"in e)&&("w"in e||(e.w="u"in e?e.u%7:"W"in e?1:0),r="Z"in e?Kl(Bl(e.y,0,1)).getUTCDay():Yl(Bl(e.y,0,1)).getDay(),e.m=0,e.d="W"in e?(e.w+6)%7+7*e.W-(r+5)%7:e.w+7*e.U-(r+6)%7);return"Z"in e?(e.H+=e.Z/100|0,e.M+=e.Z%100,Kl(e)):Yl(e)}}function x(t,i,n,s){for(var r,e,h=0,o=i.length,u=n.length;h<o;){if(s>=u)return-1;if(37===(r=i.charCodeAt(h++))){if(r=i.charAt(h++),!(e=M[r in Jl?i.charAt(h++):r])||(s=e(t,n,s))<0)return-1}else if(r!=n.charCodeAt(s++))return-1}return s}return(m.x=k(n,m),m.X=k(s,m),m.c=k(i,m),b.x=k(n,b),b.X=k(s,b),b.c=k(i,b),{format:function(t){var i=k(t+="",m);return i.toString=function(){return t},i},parse:function(t){var i=A(t+="",!1);return i.toString=function(){return t},i},utcFormat:function(t){var i=k(t+="",b);return i.toString=function(){return t},i},utcParse:function(t){var i=A(t+="",!0);return i.toString=function(){return t},i}})}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Zl=Ul.format;const{propDefaultValues:md}=r;class bd{}function Md(t){return 1-Math.sqrt(1-t*t)}bd.mainTitle="Dumbbell Plot Title",bd.subTitle="This is the dumbbell plot's subtitle",bd.height=300,bd.width=650,bd.margin={top:3,bottom:3,right:6.5,left:6.5},bd.padding={top:20,bottom:50,right:50,left:50},bd.ordinalAccessor="date",bd.valueAccessor="value",bd.seriesAccessor="category",bd.focusMarker={key:"",sizeFromBar:12},bd.marker={visible:!0,type:"dot",sizeFromBar:8},bd.barStyle={opacity:1,width:1,colorRule:"default"},bd.differenceLabel={visible:!1,placement:"left",calculation:"difference",format:"0[.][0][0]a"},bd.layout=md.layout,bd.accessibility=md.accessibility,bd.highestHeadingLevel=md.highestHeadingLevel,bd.sortOrder=md.sortOrder,bd.xAxis=md.xAxisDate,bd.yAxis=md.yAxis,bd.showBaselineX=md.showBaselineFalse,bd.showBaselineY=md.showBaselineFalse,bd.wrapLabel=md.wrapLabel,bd.colorPalette=md.colorPaletteCategorical,bd.hoverStyle=md.hoverStyle,bd.clickStyle=md.clickStyle,bd.referenceStyle=md.referenceStyle,bd.cursor=md.cursor,bd.roundedCorner=md.roundedCorner,bd.barIntervalRatio=md.barIntervalRatio,bd.hoverOpacity=md.hoverOpacity,bd.dataLabel=md.dataLabelEnds,bd.legend=md.hiddenLegend,bd.tooltipLabel=md.tooltipLabel,bd.showTooltip=md.showTooltip,bd.suppressEvents=md.suppressEvents,bd.referenceLines=md.referenceLines,bd.annotations=md.annotations,bd.clickHighlight=md.clickHighlight,bd.seriesLabel=md.seriesLabel;var kd={value:function(){}};function Ad(){for(var t,i=0,n=arguments.length,s={};i<n;++i){if(!(t=arguments[i]+"")||t in s||/[\s.]/.test(t))throw new Error("illegal type: "+t);s[t]=[]}return new xd(s)}function xd(t){this._=t}function Wd(t,i){return t.trim().split(/^|\s+/).map((function(t){var n="",s=t.indexOf(".");if(s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Nd(t,i){for(var n,s=0,r=t.length;s<r;++s)if((n=t[s]).name===i)return n.value}function Ld(t,i,n){for(var s=0,r=t.length;s<r;++s)if(t[s].name===i){t[s]=kd,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=n&&t.push({name:i,value:n}),t}xd.prototype=Ad.prototype={constructor:xd,on:function(t,i){var n,s=this._,r=Wd(t+"",s),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(n=(t=r[e]).type)s[n]=Ld(s[n],t.name,i);else if(null==i)for(n in s)s[n]=Ld(s[n],t.name,null);return this}for(;++e<h;)if((n=(t=r[e]).type)&&(n=Nd(s[n],t.name)))return n},copy:function(){var t={},i=this._;for(var n in i)t[n]=i[n].slice();return new xd(t)},call:function(t,i){if((n=arguments.length-2)>0)for(var n,s,r=new Array(n),e=0;e<n;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,n=(s=this._[t]).length;e<n;++e)s[e].value.apply(i,r)},apply:function(t,i,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],r=0,e=s.length;r<e;++r)s[r].value.apply(i,n)}};var Sd,Td,Ed=0,Dd=0,$d=0,Cd=0,Id=0,Od=0,zd="object"==typeof performance&&performance.now?performance:Date,Hd="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function _d(){return Id||(Hd(qd),Id=zd.now()+Od)}function qd(){Id=0}function Xd(){this._call=this._time=this._next=null}function Rd(t,i,n){var s=new Xd;return s.restart(t,i,n),s}function jd(){Id=(Cd=zd.now())+Od,Ed=Dd=0;try{!function(){_d(),++Ed;for(var t,i=Sd;i;)(t=Id-i._time)>=0&&i._call.call(null,t),i=i._next;--Ed}()}finally{Ed=0,function(){for(var t,i,n=Sd,s=1/0;n;)n._call?(s>n._time&&(s=n._time),t=n,n=n._next):(i=n._next,n._next=null,n=t?t._next=i:Sd=i);Td=t,Fd(s)}(),Id=0}}function Pd(){var t=zd.now(),i=t-Cd;i>1e3&&(Od-=i,Cd=t)}function Fd(t){Ed||(Dd&&(Dd=clearTimeout(Dd)),t-Id>24?(t<1/0&&(Dd=setTimeout(jd,t-zd.now()-Od)),$d&&($d=clearInterval($d))):($d||(Cd=zd.now(),$d=setInterval(Pd,1e3)),Ed=1,Hd(jd)))}function Gd(t,i,n){var s=new Xd;return s.restart((function(n){s.stop(),t(n+i)}),i=null==i?0:+i,n),s}Xd.prototype=Rd.prototype={constructor:Xd,restart:function(t,i,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?_d():+n)+(null==i?0:+i),this._next||Td===this||(Td?Td._next=this:Sd=this,Td=this),this._call=t,this._time=n,Fd()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fd())}};var Vd=Ad("start","end","interrupt"),Yd=[];function Kd(t,i,n,s,r,e){var h=t.__transition;if(h){if(n in h)return}else t.__transition={};!function(t,i,n){var s,r=t.__transition;function e(u){var a,c,l,f;if(1!==n.state)return o();for(a in r)if((f=r[a]).name===n.name){if(3===f.state)return Gd(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[a]):+a<i&&(f.state=6,f.timer.stop(),delete r[a])}if(Gd((function(){3===n.state&&(n.state=4,n.timer.restart(h,n.delay,n.time),h(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,s=new Array(l=n.tween.length),a=0,c=-1;a<l;++a)(f=n.tween[a].value.call(t,t.__data__,n.index,n.group))&&(s[++c]=f);s.length=c+1}}function h(i){for(var r=i<n.duration?n.ease.call(null,i/n.duration):(n.timer.restart(o),n.state=5,1),e=-1,h=s.length;++e<h;)s[e].call(null,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){for(var s in n.state=6,n.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=n,n.timer=Rd((function(t){n.state=1,n.timer.restart(e,n.delay,n.time),n.delay<=t&&e(t-n.delay)}),0,n.time)}(t,n,{name:i,index:s,group:r,on:Vd,tween:Yd,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function Bd(t,i){var n=Zd(t,i);if(n.state>0)throw new Error("too late; already scheduled");return n}function Ud(t,i){var n=Zd(t,i);if(n.state>2)throw new Error("too late; already started");return n}function Zd(t,i){var n=t.__transition;if(!n||!(n=n[i]))throw new Error("transition not found");return n}function Jd(t,i){var n,s;return function(){var r=Ud(this,t),e=r.tween;if(e!==n)for(var h=0,o=(s=n=e).length;h<o;++h)if(s[h].name===i){(s=s.slice()).splice(h,1);break}r.tween=s}}function Qd(t,i,n){var s,r;if("function"!=typeof n)throw new Error;return function(){var e=Ud(this,t),h=e.tween;if(h!==s){r=(s=h).slice();for(var o={name:i,value:n},u=0,a=r.length;u<a;++u)if(r[u].name===i){r[u]=o;break}u===a&&r.push(o)}e.tween=r}}function tv(t,i,n){var s=t._id;return t.each((function(){var t=Ud(this,s);(t.value||(t.value={}))[i]=n.apply(this,arguments)})),function(t){return Zd(t,s).value[i]}}function iv(t,i){var n;return("number"==typeof i?el:i instanceof Xc?il:(n=Xc(i))?(i=n,il):al)(t,i)}function nv(t){return function(){this.removeAttribute(t)}}function sv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function rv(t,i,n){var s,r;return function(){var e=this.getAttribute(t);return e===n?null:e===s?r:r=i(s=e,n)}}function ev(t,i,n){var s,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===n?null:e===s?r:r=i(s=e,n)}}function hv(t,i,n){var s,r,e;return function(){var h,o=n(this);if(null!=o)return(h=this.getAttribute(t))===o?null:h===s&&o===r?e:e=i(s=h,r=o);this.removeAttribute(t)}}function ov(t,i,n){var s,r,e;return function(){var h,o=n(this);if(null!=o)return(h=this.getAttributeNS(t.space,t.local))===o?null:h===s&&o===r?e:e=i(s=h,r=o);this.removeAttributeNS(t.space,t.local)}}function uv(t,i){function n(){var n=this,s=i.apply(n,arguments);return s&&function(i){n.setAttributeNS(t.space,t.local,s(i))}}return n._value=i,n}function av(t,i){function n(){var n=this,s=i.apply(n,arguments);return s&&function(i){n.setAttribute(t,s(i))}}return n._value=i,n}function cv(t,i){return function(){Bd(this,t).delay=+i.apply(this,arguments)}}function lv(t,i){return i=+i,function(){Bd(this,t).delay=i}}function fv(t,i){return function(){Ud(this,t).duration=+i.apply(this,arguments)}}function dv(t,i){return i=+i,function(){Ud(this,t).duration=i}}function vv(t,i){if("function"!=typeof i)throw new Error;return function(){Ud(this,t).ease=i}}function pv(t,i,n){var s,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?Bd:Ud;return function(){var h=e(this,t),o=h.on;o!==s&&(r=(s=o).copy()).on(i,n),h.on=r}}var yv=Ea.prototype.constructor;function wv(t,i,n){function s(){var s=this,r=i.apply(s,arguments);return r&&function(i){s.style.setProperty(t,r(i),n)}}return s._value=i,s}var gv=0;function mv(t,i,n,s){this._groups=t,this._parents=i,this._name=n,this._id=s}function bv(){return++gv}var Mv=Ea.prototype;mv.prototype=function(t){return Ea().transition(t)}.prototype={constructor:mv,select:function(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=Tu(t));for(var s=this._groups,r=s.length,e=new Array(r),h=0;h<r;++h)for(var o,u,a=s[h],c=a.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=a[f])&&(u=t.call(o,o.__data__,f,a))&&("__data__"in o&&(u.__data__=o.__data__),l[f]=u,Kd(l[f],i,n,f,l,Zd(o,n)));return new mv(e,this._parents,i,n)},selectAll:function(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=Du(t));for(var s=this._groups,r=s.length,e=[],h=[],o=0;o<r;++o)for(var u,a=s[o],c=a.length,l=0;l<c;++l)if(u=a[l]){for(var f,d=t.call(u,u.__data__,l,a),v=Zd(u,n),p=0,y=d.length;p<y;++p)(f=d[p])&&Kd(f,i,n,p,d,v);e.push(d),h.push(u)}return new mv(e,h,i,n)},filter:function(t){"function"!=typeof t&&(t=$u(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h=i[r],o=h.length,u=s[r]=[],a=0;a<o;++a)(e=h[a])&&t.call(e,e.__data__,a,h)&&u.push(e);return new mv(s,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,n=t._groups,s=i.length,r=Math.min(s,n.length),e=new Array(s),h=0;h<r;++h)for(var o,u=i[h],a=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=u[f]||a[f])&&(l[f]=o);for(;h<s;++h)e[h]=i[h];return new mv(e,this._parents,this._name,this._id)},selection:function(){return new yv(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,n=bv(),s=this._groups,r=s.length,e=0;e<r;++e)for(var h,o=s[e],u=o.length,a=0;a<u;++a)if(h=o[a]){var c=Zd(h,i);Kd(h,t,n,a,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new mv(s,this._parents,t,n)},call:Mv.call,nodes:Mv.nodes,node:Mv.node,size:Mv.size,empty:Mv.empty,each:Mv.each,on:function(t,i){var n=this._id;return arguments.length<2?Zd(this.node(),n).on.on(t):this.each(pv(n,t,i))},attr:function(t,i){var n=xu(t),s="transform"===n?Ml:iv;return this.attrTween(t,"function"==typeof i?(n.local?ov:hv)(n,s,tv(this,"attr."+t,i)):null==i?(n.local?sv:nv)(n):(n.local?ev:rv)(n,s,i+""))},attrTween:function(t,i){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;var s=xu(t);return this.tween(n,(s.local?uv:av)(s,i))},style:function(t,i,n){var s="transform"==(t+="")?bl:iv;return null==i?this.styleTween(t,function(t,i){var n,s,r;return function(){var e=Ku(this,t),h=(this.style.removeProperty(t),Ku(this,t));return e===h?null:e===n&&h===s?r:r=i(n=e,s=h)}}(t,s)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,n){var s,r,e;return function(){var h=Ku(this,t),o=n(this);return null==o&&(this.style.removeProperty(t),o=Ku(this,t)),h===o?null:h===s&&o===r?e:e=i(s=h,r=o)}}(t,s,tv(this,"style."+t,i)):function(t,i,n){var s,r;return function(){var e=Ku(this,t);return e===n?null:e===s?r:r=i(s=e,n)}}(t,s,i+""),n)},styleTween:function(t,i,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;return this.tween(s,wv(t,i,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(tv(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var n in this.__transition)if(+n!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var n=this._id;if(t+="",arguments.length<2){for(var s,r=Zd(this.node(),n).tween,e=0,h=r.length;e<h;++e)if((s=r[e]).name===t)return s.value;return null}return this.each((null==i?Jd:Qd)(n,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?cv:lv)(i,t)):Zd(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?fv:dv)(i,t)):Zd(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(vv(i,t)):Zd(this.node(),i).ease}};var kv={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Av(t,i){for(var n;!(n=t.__transition)||!(n=n[i]);)if(!(t=t.parentNode))return kv.time=_d(),kv;return n}Ea.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var n,s,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(n=e[r]).name===i?(s=n.state>2&&n.state<5,n.state=6,n.timer.stop(),s&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},Ea.prototype.transition=function(t){var i,n;t instanceof mv?(i=t._id,t=t._name):(i=bv(),(n=kv).time=_d(),t=null==t?null:t+"");for(var s=this._groups,r=s.length,e=0;e<r;++e)for(var h,o=s[e],u=o.length,a=0;a<u;++a)(h=o[a])&&Kd(h,t,i,a,o,n||Av(h,i));return new mv(s,this._parents,t,i)};var xv="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Wv=new Uint8Array(16);function Nv(){if(!xv)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return xv(Wv)}for(var Lv=[],Sv=0;Sv<256;++Sv)Lv[Sv]=(Sv+256).toString(16).substr(1);function Tv(t,i,n){var s=i&&n||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||Nv)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[s+e]=r[e];return i||function(t){var i=0;return[Lv[t[i++]],Lv[t[i++]],Lv[t[i++]],Lv[t[i++]],"-",Lv[t[i++]],Lv[t[i++]],"-",Lv[t[i++]],Lv[t[i++]],"-",Lv[t[i++]],Lv[t[i++]],"-",Lv[t[i++]],Lv[t[i++]],Lv[t[i++]],Lv[t[i++]],Lv[t[i++]],Lv[t[i++]]].join("")}(r)}const{getAccessibleStrokes:Ev,ensureTextContrast:Dv,createTextStrokeFilter:$v,createUrl:Cv,initializeDescriptionRoot:Iv,initializeElementAccess:Ov,setElementFocusHandler:zv,setElementAccessID:Hv,setAccessibilityController:_v,hideNonessentialGroups:qv,setAccessTitle:Xv,setAccessSubtitle:Rv,setAccessLongDescription:jv,setAccessExecutiveSummary:Pv,setAccessPurpose:Fv,setAccessContext:Gv,setAccessStatistics:Vv,setAccessChartCounts:Yv,setAccessXAxis:Kv,setAccessYAxis:Bv,setAccessStructure:Uv,setAccessAnnotation:Zv,retainAccessFocus:Jv,checkAccessFocus:Qv,setElementInteractionAccessState:tp,setAccessibilityDescriptionWidth:ip,drawTooltip:np,annotate:sp,chartAccessors:rp,checkInteraction:ep,checkClicked:hp,checkHovered:op,convertVisaColor:up,drawAxis:ap,drawGrid:cp,drawLegend:lp,setLegendInteractionState:fp,formatDataLabel:dp,getColors:vp,getLicenses:pp,getPadding:yp,getScopedData:wp,initTooltipStyle:gp,overrideTitleTooltip:mp,placeDataLabels:bp,scopeDataKeys:Mp,visaColors:kp,transitionEndAll:Ap,validateAccessibilityProps:xp,findTagLevel:Wp}=r,Np=class{constructor(n){t(this,n),this.mainTitle=bd.mainTitle,this.subTitle=bd.subTitle,this.height=bd.height,this.width=bd.width,this.margin=bd.margin,this.padding=bd.padding,this.highestHeadingLevel=bd.highestHeadingLevel,this.ordinalAccessor=bd.ordinalAccessor,this.valueAccessor=bd.valueAccessor,this.seriesAccessor=bd.seriesAccessor,this.sortOrder=bd.sortOrder,this.xAxis=bd.xAxis,this.yAxis=bd.yAxis,this.wrapLabel=bd.wrapLabel,this.layout=bd.layout,this.showBaselineX=bd.showBaselineX,this.showBaselineY=bd.showBaselineY,this.colorPalette=bd.colorPalette,this.hoverStyle=bd.hoverStyle,this.hoverOpacity=bd.hoverOpacity,this.clickStyle=bd.clickStyle,this.referenceStyle=bd.referenceStyle,this.cursor=bd.cursor,this.focusMarker=bd.focusMarker,this.marker=bd.marker,this.barStyle=bd.barStyle,this.dataLabel=bd.dataLabel,this.seriesLabel=bd.seriesLabel,this.differenceLabel=bd.differenceLabel,this.showTooltip=bd.showTooltip,this.tooltipLabel=bd.tooltipLabel,this.accessibility=bd.accessibility,this.legend=bd.legend,this.annotations=bd.annotations,this.referenceLines=bd.referenceLines,this.suppressEvents=bd.suppressEvents,this.clickHighlight=bd.clickHighlight,this.unitTest=!1,this.shouldValidateAccessibility=!0,this.updated=!0,this.time={timemillisecond:Va,timesecond:Ya,timeminute:Ka,timehour:Ba,timeday:Ua,timeweek:Ja,timemonth:ic,timeyear:nc},this.shouldUpdateLayout=!1,this.shouldValidate=!1,this.shouldUpdateAnnotations=!1,this.shouldUpdateReferenceLines=!1,this.shouldResetRoot=!1,this.shouldUpdateXAxis=!1,this.shouldUpdateXGrid=!1,this.shouldUpdateYAxis=!1,this.shouldUpdateYGrid=!1,this.shouldUpdateScales=!1,this.shouldUpdateBaseline=!1,this.shouldCheckValueAxis=!1,this.shouldCheckLabelAxis=!1,this.shouldSetColors=!1,this.shouldUpdateLegend=!1,this.shouldSetGlobalSelections=!1,this.shouldSetSeriesSelections=!1,this.shouldSetTestingAttributes=!1,this.shouldUpdateData=!1,this.shouldEnterUpdateExit=!1,this.shouldEnterUpdateExitMarkers=!1,this.shouldUpdateMarkerOpacity=!1,this.shouldUpdateGeometries=!1,this.shouldUpdateSeriesLabels=!1,this.shouldUpdateDifferenceLabels=!1,this.shouldUpdateLabels=!1,this.shouldValidateInteractionKeys=!1,this.shouldUpdateTableData=!1,this.shouldValidateDataLabelPlacement=!1,this.shouldValidateDataLabelAccessor=!1,this.shouldAddStrokeUnder=!1,this.shouldUpdateBaselineX=!1,this.shouldUpdateBaselineY=!1,this.shouldUpdateLegendData=!1,this.shouldUpdateMarkerIDs=!1,this.shouldValidateLayout=!1,this.shouldValidateSeriesLabelPlacement=!1,this.shouldValidateDiffLabelPlacement=!1,this.shouldBindInteractivity=!1,this.shouldBindLegendInteractivity=!1,this.shouldBindSeriesInteractivity=!1,this.shouldUpdateCursor=!1,this.shouldSetLegendCursor=!1,this.shouldSetSeriesCursor=!1,this.shouldSetLabelOpacity=!1,this.shouldSetSeriesLabelOpacity=!1,this.shouldSetDifferenceLabelOpacity=!1,this.shouldSetSelectionClass=!1,this.shouldDrawInteractionState=!1,this.shouldRenderMarkerGroup=!1,this.shouldUpdateBarStyle=!1,this.shouldUpdateMarkerSize=!1,this.shouldUpdateDiffLabelColor=!1,this.shouldUpdateMarkerStyle=!1,this.shouldDrawMarkerGeometries=!1,this.shouldUpdateMarkerData=!1,this.shouldUpdateSeriesData=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityAttributes=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.topLevel="h2",this.bottomLevel="p",this.strokes={},this.handleMarkerColors=(t,i,n)=>{const s=this.rawColors[t.referenceIndex]||this.rawColors[0],r=i<2&&this.clickHighlight.length?this.clickStyle.color||s:i<4?s:this.hoverStyle.color||s,e=this.colorArr[t.referenceIndex]||this.colorArr[0],h=i<2&&this.clickHighlight.length?this.clickStyle.color||e:i<4?e:this.hoverStyle.color||e;return Da(n[i]).attr("fill",h),this.accessibility.hideStrokes?h:this.strokes[r.toLowerCase()]},this.handleSeriesLabelColors=(t,i)=>{let n,s;this.seriesInteraction&&(n=op(t,this.hoverHighlight,this.innerInteractionKeys),s=hp(t,this.clickHighlight,this.innerInteractionKeys));const r=this.rawColors[i]||this.rawColors[0];return this.textColors[(this.seriesInteraction?s&&this.clickHighlight.length?this.clickStyle.color||r:n&&this.hoverHighlight&&this.hoverStyle.color||r:r).toLowerCase()]},this.handleLabelColors=(t,i)=>{const n=op(t,this.hoverHighlight,this.innerInteractionKeys),s=hp(t,this.clickHighlight,this.innerInteractionKeys),r=this.rawColors[i]||this.rawColors[0];return this.textColors[(s&&this.clickHighlight.length?this.clickStyle.color||r:n&&this.hoverHighlight&&this.hoverStyle.color||r).toLowerCase()]},this.handleBarColors=(t,i,n)=>{t.focusMarker=!1,t.values[0][this.seriesAccessor]===this.focusMarker.key?t.focusMarker=0:t.values[1][this.seriesAccessor]===this.focusMarker.key&&(t.focusMarker=1);const s=hp(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&hp(t.values[1],this.clickHighlight,this.innerInteractionKeys),r=op(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&op(t.values[1],this.hoverHighlight,this.innerInteractionKeys),e="focus"!==this.barStyle.colorRule||!t.focusMarker&&0!==t.focusMarker?"greaterValue"===this.barStyle.colorRule?this.rawColors[t.greaterIndex]:this.rawColors[2]:this.rawColors[t.focusMarker],h=s&&this.clickHighlight.length?this.clickStyle.color||e:r&&this.hoverHighlight&&this.hoverStyle.color||e,o="focus"!==this.barStyle.colorRule||!t.focusMarker&&0!==t.focusMarker?"greaterValue"===this.barStyle.colorRule?this.colorArr[t.greaterIndex]:this.colorArr[2]:this.colorArr[t.focusMarker],u=s&&this.clickHighlight.length?this.clickStyle.color||o:r&&this.hoverHighlight&&this.hoverStyle.color||o;return Da(n[i]).attr("fill",u),this.accessibility.hideStrokes?u:this.strokes[h.toLowerCase()]},this.handleBarOpacity=(t,i,n)=>{const s=ep(t.values[0],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys),r=ep(t.values[1],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys),e=s&&r?this.barStyle.opacity:this.hoverOpacity;return Da(n[i]).attr("stroke-opacity",e),e},this.setBarSize=(t,i,n)=>{const s=hp(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&hp(t.values[1],this.clickHighlight,this.innerInteractionKeys),r=op(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&op(t.values[1],this.hoverHighlight,this.innerInteractionKeys),e=this.dumbbellInteraction?s?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:r&&parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width:this.barStyle.width,h=this.x(t.values[0][this.xAccessor]),o=this.y(t.values[0][this.yAccessor]),u=this.x(t.values[1][this.xAccessor]),a=this.y(t.values[1][this.yAccessor]),c="vertical"===this.layout?o>a?.001:-.001:0,l="horizontal"===this.layout?h>u?.001:-.001:0,f="vertical"===this.layout?e/2:0,d="horizontal"===this.layout?e/2:0;return Da(n[i]).attr("data-barSize",e).attr("data-centerX1",t=>this.x(t.values[0][this.xAccessor])).attr("data-centerY1",t=>this.y(t.values[0][this.yAccessor])).attr("data-centerX2",t=>this.x(t.values[1][this.xAccessor])).attr("data-centerY2",t=>this.y(t.values[1][this.yAccessor])),`M ${h+l} ${o+c} L ${h} ${o} L ${h+f} ${o+d} L ${u+f} ${a+d} L ${u} ${a} L ${u-f} ${a-d} L ${h-f} ${o-d} L ${h} ${o} L ${h+f} ${o+d} L ${u+f} ${a+d} L ${u} ${a} L ${u-l} ${a-c}`},this.setDiffLabelColor=t=>{t.focusMarker=!1,t.values[0][this.seriesAccessor]===this.focusMarker.key?t.focusMarker=0:t.values[1][this.seriesAccessor]===this.focusMarker.key&&(t.focusMarker=1);const i="focus"!==this.barStyle.colorRule||!t.focusMarker&&0!==t.focusMarker?"greaterValue"===this.barStyle.colorRule?this.rawColors[t.greaterIndex]:this.rawColors[2]:this.rawColors[t.focusMarker];let n,s;return this.dumbbellInteraction&&(s=hp(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&hp(t.values[1],this.clickHighlight,this.innerInteractionKeys),n=op(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&op(t.values[1],this.hoverHighlight,this.innerInteractionKeys)),this.textColors[(this.dumbbellInteraction?s&&this.clickHighlight.length?this.clickStyle.color||i:n&&this.hoverHighlight&&this.hoverStyle.color||i:i).toLowerCase()]},this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}mainTitleWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subTitleWatcher(t,i){this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}dimensionWatcher(t,i){this.shouldUpdateLayout=!0,this.shouldUpdateScales=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0}dataWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateMarkerIDs=!0,this.shouldUpdateLegendData=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldValidate=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateBarStyle=!0,this.shouldSetColors=!0}idWatcher(t,i){this.chartID=t||"dumbbell-plot-"+Tv(),this.dumbbellPlotEl.id=this.chartID,this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateLegend=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateMarkerIDs=!0}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}ordinalAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateGeometries=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateMarkerSize=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0,this.shouldCheckLabelAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0)}valueAccessorWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateMarkerSize=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldCheckValueAxis=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0}seriesAccessorWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldUpdateData=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldUpdateLegendData=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldAddStrokeUnder=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateLegend=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateTableData=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0)}sortWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldEnterUpdateExitMarkers=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0}xAxisWatcher(t,i){const n=!(!t||!t.format)&&t.format,s=!(!i||!i.format)&&i.format,r=!(!t||!t.unit)&&t.unit,e=!(!i||!i.unit)&&i.unit;(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateXGrid=!0),n===s&&r===e||(this.shouldUpdateScales=!0,r!==e&&(this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0)),this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0}yAxisWatcher(t,i){(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateYGrid=!0),this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0}wrapLabelWatcher(t,i){this.shouldCheckLabelAxis=!0}layoutWatcher(t,i){this.shouldValidateLayout=!0,this.shouldValidateDataLabelPlacement=!0,this.shouldValidateSeriesLabelPlacement=!0,this.shouldUpdateSeriesData=!0,this.shouldValidateDiffLabelPlacement=!0,this.shouldUpdateScales=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0}showBaselineXWatcher(t,i){this.shouldUpdateBaselineX=!0}showBaselineYWatcher(t,i){this.shouldUpdateBaselineY=!0}paletteWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldSetColors=!0,this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerStyle=!0,this.shouldUpdateLegend=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDiffLabelColor=!0}hoverStyleWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerSize=!0,this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0}clickStyleWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerSize=!0,this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0}hoverOpacityWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0}cursorWatcher(t,i){this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0,this.shouldSetSeriesCursor=!0}focusMarkerWatcher(t,i){this.shouldDrawMarkerGeometries=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldUpdateMarkerIDs=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldUpdateLabels=!0,(t&&t.sizeFromBar?t.sizeFromBar:0)!==(i&&i.sizeFromBar?i.sizeFromBar:0)&&(this.shouldUpdateMarkerSize=!0),(!(!t||!t.key)&&t.key)!==(!(!i||!i.key)&&i.key)&&(this.shouldUpdateDiffLabelColor=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateBarStyle=!0)}markerWatcher(t,i){(t&&t.visible)!==(i&&i.visible)&&(this.shouldUpdateMarkerOpacity=!0),(!(!t||!t.type)&&t.type)!==(!(!i||!i.type)&&i.type)&&(this.shouldRenderMarkerGroup=!0,this.shouldEnterUpdateExitMarkers=!0),this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldUpdateMarkerIDs=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateSeriesData=!0,this.shouldUpdateData=!0,this.shouldUpdateLabels=!0,(t&&t.sizeFromBar?t.sizeFromBar:0)!==(i&&i.sizeFromBar?i.sizeFromBar:0)&&(this.shouldUpdateMarkerSize=!0)}barStyleWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateDiffLabelColor=!0,this.shouldDrawInteractionState=!0,(t&&t.width?t.width:0)!==(i&&i.width?i.width:0)&&(this.shouldDrawInteractionState=!0,this.shouldUpdateMarkerData=!0,this.shouldUpdateData=!0,this.shouldUpdateMarkerSize=!0)}dataLabelWatcher(t,i){this.shouldUpdateLabels=!0,this.shouldUpdateTableData=!0;const n=!(!t||!t.placement)&&t.placement,s=!(!i||!i.placement)&&i.placement,r=!(!t||!t.labelAccessor)&&t.labelAccessor,e=!(!i||!i.labelAccessor)&&i.labelAccessor;(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetLabelOpacity=!0),n!==s&&(this.shouldValidateDataLabelPlacement=!0),r!==e&&(this.shouldValidateDataLabelAccessor=!0)}seriesLabelWatcher(t,i){this.shouldValidateSeriesLabelPlacement=!0,this.shouldUpdateSeriesLabels=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateTableData=!0,(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetSeriesLabelOpacity=!0),(!(!t||!t.placement)&&t.placement)!==(!(!i||!i.placement)&&i.placement)&&(this.shouldUpdateSeriesData=!0,this.shouldSetSeriesSelections=!0)}differenceLabelWatcher(t,i){this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateDiffLabelColor=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateTableData=!0,(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetDifferenceLabelOpacity=!0),(!(!t||!t.placement)&&t.placement)!==(!(!i||!i.placement)&&i.placement)&&(this.shouldValidateDiffLabelPlacement=!0)}showTooltipWatcher(t,i){this.shouldDrawInteractionState=!0}tooltipLabelWatcher(t,i){this.shouldUpdateTableData=!0}accessibilityWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const n=t&&t.includeDataKeyNames,s=i&&i.includeDataKeyNames;n===s&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(n!==s&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!i||!i.hideStrokes)&&i.hideStrokes)&&(this.shouldUpdateBarStyle=!0,this.shouldUpdateMarkerStyle=!0,this.shouldAddStrokeUnder=!0,this.shouldUpdateLegend=!0);const r=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,e=!(!i||!i.elementsAreInterface)&&i.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled)&&i.keyboardNavConfig.disabled)&&r===e||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),r!==e&&(this.shouldSetSelectionClass=!0)}legendWatcher(t,i){this.shouldUpdateLegend=!0,(t&&t.interactive)!==(i&&i.interactive)&&(this.shouldBindLegendInteractivity=!0,this.shouldSetLegendCursor=!0)}annotationsWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0,this.shouldSetAnnotationAccessibility=!0}valueOverrideWatcher(t,i){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldCheckValueAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateDifferenceLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaselineX=!0,this.shouldUpdateBaselineY=!0,this.shouldUpdateAnnotations=!0}referenceWatcher(t,i){this.shouldUpdateReferenceLines=!0}suppressWatcher(t,i){this.shouldBindInteractivity=!0,this.shouldBindLegendInteractivity=!0,this.shouldBindSeriesInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0,this.shouldSetSeriesCursor=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}hoverWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateMarkerStyle=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0,this.shouldUpdateData=!0,this.shouldUpdateLabels=!0,this.shouldUpdateMarkerData=!0,this.shouldSetGlobalSelections=!0}clickWatcher(t,i){this.shouldUpdateMarkerIDs=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateMarkerSize=!0,this.shouldUpdateMarkerStyle=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0,this.shouldUpdateData=!0,this.shouldUpdateLabels=!0,this.shouldUpdateMarkerData=!0,this.shouldSetGlobalSelections=!0}interactionWatcher(t,i){this.shouldValidateInteractionKeys=!0,this.shouldUpdateMarkerSize=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateMarkerStyle=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetDifferenceLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateTableData=!0,this.shouldUpdateData=!0,this.shouldUpdateLabels=!0,this.shouldUpdateMarkerData=!0,this.shouldSetGlobalSelections=!0,(!(!t||1!==t.length)&&t[0]===this.seriesAccessor)!=(!(!i||1!==i.length)&&i[0]===this.seriesAccessor)&&(this.shouldBindSeriesInteractivity=!0,this.shouldSetSeriesCursor=!0,this.shouldBindLegendInteractivity=!0,this.shouldSetLegendCursor=!0)}unitTestWatcher(t,i){this.shouldSetTestingAttributes=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.chartID=this.uniqueID||"dumbbell-plot-"+Tv(),this.dumbbellPlotEl.id=this.chartID,this.setTagLevels(),this.checkIfSafari(),this.validateLayout(),this.validateDataLabelPlacement(),this.validateSeriesLabelPlacement(),this.validateDiffLabelPlacement(),this.validateInteractionKeys(),this.prepareData(),this.prepareMarkerData(),this.prepareSeriesData(),this.prepareLegendData(),this.setLayoutData(),this.prepareScales(),this.validateDataLabelAccessor(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.setColors(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.defaults=!0,this.shouldValidateAccessibilityProps(),this.renderRootElements(),this.setTooltipInitialStyle(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.drawXGrid(),this.drawYGrid(),this.renderMarkerGroup(),this.setGlobalSelections(),this.setTestingAttributes(),this.enterMarkerGeometries(),this.updateMarkerGeometries(),this.exitMarkerGeometries(),this.updateMarkerSize(),this.enterDumbbells(),this.updateDumbbells(),this.exitDumbbells(),this.enterSeriesLabels(),this.updateSeriesLabels(),this.exitSeriesLabels(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.enterDifferenceLabels(),this.updateDifferenceLabels(),this.exitDifferenceLabels(),this.updateMarkerIds(),this.drawDumbbells(),this.updateInteractionState(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawLegendElements(),this.drawDataLabels(),this.drawSeriesLabels(),this.drawDifferenceLabels(),this.addStrokeUnder(),this.drawReferenceLines(),this.setSelectedClass(),this.setLabelOpacity(),this.bindLegendInteractivity(),this.setLegendCursor(),this.drawAnnotations(),this.setAnnotationAccessibility(),this.drawXAxis(),this.setXAxisAccessibility(),this.drawYAxis(),this.setYAxisAccessibility(),this.drawBaselineX(),this.drawBaselineY(),this.onChangeHandler(),qv(this.root.node(),this.dumbbellG.node()),this.setGroupAccessibilityAttributes(),this.setGroupAccessibilityID(),this.duration=750,this.defaults=!1,t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldRenderMarkerGroup&&(this.renderMarkerGroup(),this.shouldRenderMarkerGroup=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldSetSeriesSelections&&(this.setSeriesSelections(),this.shouldSetSeriesSelections=!1),this.shouldSetTestingAttributes&&(this.setTestingAttributes(),this.shouldSetTestingAttributes=!1),this.shouldUpdateXGrid&&(this.drawXGrid(),this.shouldUpdateXGrid=!1),this.shouldUpdateYGrid&&(this.drawYGrid(),this.shouldUpdateYGrid=!1),this.shouldEnterUpdateExitMarkers&&(this.enterMarkerGeometries(),this.updateMarkerGeometries(),this.exitMarkerGeometries(),this.shouldEnterUpdateExitMarkers=!1,this.shouldUpdateMarkerOpacity=!1),this.shouldUpdateMarkerOpacity&&(this.updateMarkerGeometries(),this.shouldUpdateMarkerOpacity=!1),this.shouldEnterUpdateExit&&(this.enterDumbbells(),this.updateDumbbells(),this.exitDumbbells(),this.enterSeriesLabels(),this.updateSeriesLabels(),this.exitSeriesLabels(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.enterDifferenceLabels(),this.updateDifferenceLabels(),this.exitDifferenceLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateMarkerIDs&&(this.updateMarkerIds(),this.shouldUpdateMarkerIDs=!1),this.shouldUpdateGeometries&&(this.drawDumbbells(),this.shouldUpdateGeometries=!1),this.shouldUpdateBarStyle&&(this.updateBarStyle(),this.shouldUpdateBarStyle=!1),this.shouldUpdateMarkerStyle&&(this.updateMarkerStyle(),this.shouldUpdateMarkerStyle=!1),this.shouldUpdateMarkerSize&&(this.updateMarkerSize(),this.shouldUpdateMarkerSize=!1),this.shouldDrawMarkerGeometries&&(this.drawMarkerGeometries(),this.shouldDrawMarkerGeometries=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldUpdateLabels&&(this.drawDataLabels(),this.shouldUpdateLabels=!1),this.shouldUpdateSeriesLabels&&(this.drawSeriesLabels(),this.shouldUpdateSeriesLabels=!1),this.shouldUpdateDifferenceLabels&&(this.drawDifferenceLabels(),this.shouldUpdateDifferenceLabels=!1),this.shouldAddStrokeUnder&&(this.addStrokeUnder(),this.shouldAddStrokeUnder=!1),this.shouldUpdateReferenceLines&&(this.drawReferenceLines(),this.shouldUpdateReferenceLines=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldSetSeriesLabelOpacity&&(this.setSeriesLabelOpacity(),this.shouldSetSeriesLabelOpacity=!1),this.shouldSetDifferenceLabelOpacity&&(this.setDifferenceLabelOpacity(),this.shouldSetDifferenceLabelOpacity=!1),this.shouldUpdateDiffLabelColor&&(this.updateDiffLabelColor(),this.shouldUpdateDiffLabelColor=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldBindLegendInteractivity&&(this.bindLegendInteractivity(),this.shouldBindLegendInteractivity=!1),this.shouldBindSeriesInteractivity&&(this.bindSeriesInteractivity(),this.shouldBindSeriesInteractivity=!1),this.shouldSetLegendCursor&&(this.setLegendCursor(),this.shouldSetLegendCursor=!1),this.shouldSetSeriesCursor&&(this.setSeriesCursor(),this.shouldSetSeriesCursor=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.shouldUpdateBaselineX&&(this.drawBaselineX(),this.shouldUpdateBaseline=!1),this.shouldUpdateBaselineY&&(this.drawBaselineY(),this.shouldUpdateBaseline=!1),this.onChangeHandler(),t("component did update")})}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,xp(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:this.suppressEvents?void 0:this.clickFunc.emit}}))}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor],this.seriesInteraction=1===this.innerInteractionKeys.length&&this.innerInteractionKeys[0]===this.seriesAccessor,this.dumbbellInteraction=1===this.innerInteractionKeys.length&&this.innerInteractionKeys[0]===this.ordinalAccessor}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor}validateLayout(){this.layoutOverride=!this.layout||this.data[0][this.ordinalAccessor]instanceof Date?"vertical":this.layout,this.isVertical="vertical"===this.layoutOverride}validateDataLabelPlacement(){this.placement=this.dataLabel.placement,"vertical"===this.layoutOverride?"left"!==this.placement&&"right"!==this.placement&&(this.placement="ends"):"top"!==this.placement&&"bottom"!==this.placement&&(this.placement="ends")}validateSeriesLabelPlacement(){this.seriesLabelDetails=Object.assign({},this.seriesLabel),this.seriesLabelDetails.placement||(this.seriesLabelDetails.placement=this.isVertical?"right":"top"),this.isVertical&&"right"!==this.seriesLabelDetails.placement&&"left"!==this.seriesLabelDetails.placement?this.seriesLabelDetails.placement="right":this.isVertical||"top"===this.seriesLabelDetails.placement||"bottom"===this.seriesLabelDetails.placement||(this.seriesLabelDetails.placement="top"),this.seriesLabelDetails.label&&this.seriesLabelDetails.label.length||(this.seriesLabelDetails.label="")}validateDiffLabelPlacement(){this.diffLabelDetails=Object.assign({},this.differenceLabel),this.diffLabelDetails.placement||(this.diffLabelDetails.placement=this.isVertical?"left":"top"),this.isVertical&&"right"!==this.diffLabelDetails.placement&&"left"!==this.diffLabelDetails.placement?this.diffLabelDetails.placement="left":this.isVertical||"top"===this.diffLabelDetails.placement||"bottom"===this.diffLabelDetails.placement||(this.diffLabelDetails.placement="top")}checkIfSafari(){this.url=Cv()}setColors(){if(this.colors=this.colors?up(this.colors):"",this.rawColors=this.colors||vp(this.colorPalette,3),this.colorArr=this.rawColors,this.textColors={},this.strokes={},this.rawColors.forEach(t=>{if(!this.accessibility.hideStrokes){const i=Ev(t),n=2===i.length?i[1]:i[0];this.strokes[t.toLowerCase()]=n}this.textColors[t.toLowerCase()]=Dv(t,"#ffffff",4.5)}),this.hoverStyle&&this.hoverStyle.color){if(!this.accessibility.hideStrokes){const t=Ev(this.hoverStyle.color),i=2===t.length?t[1]:t[0];this.strokes[this.hoverStyle.color.toLowerCase()]=i}this.textColors[this.hoverStyle.color.toLowerCase()]=Dv(this.hoverStyle.color,"#ffffff",4.5)}if(this.clickStyle&&this.clickStyle.color){if(!this.accessibility.hideStrokes){const t=Ev(this.clickStyle.color),i=2===t.length?t[1]:t[0];this.strokes[this.clickStyle.color.toLowerCase()]=i}this.textColors[this.clickStyle.color.toLowerCase()]=Dv(this.clickStyle.color,"#ffffff",4.5)}}setLayoutData(){this.padding="string"==typeof this.padding?yp(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}setTableData(){const t=Mp(this,rp,"dumbbell-plot");this.tableData=wp(this.data,t),this.tableColumns=Object.keys(t)}prepareData(){const t=function(){var t,i,n,s=[],r=[];function e(n,r,h,o){if(r>=s.length)return null!=t&&n.sort(t),null!=i?i(n):n;for(var u,a,c,l=-1,f=n.length,d=s[r++],v=lc(),p=h();++l<f;)(c=v.get(u=d(a=n[l])+""))?c.push(a):v.set(u,[a]);return v.each((function(t,i){o(p,i,e(t,r,h,o))})),p}return n={object:function(t){return e(t,0,fc,dc)},map:function(t){return e(t,0,vc,pc)},entries:function(t){return function t(n,e){if(++e>s.length)return n;var h,o=r[e-1];return null!=i&&e>=s.length?h=n.entries():(h=[],n.each((function(i,n){h.push({key:n,values:t(i,e)})}))),null!=o?h.sort((function(t,i){return o(t.key,i.key)})):h}(e(t,0,vc,pc),0)},key:function(t){return s.push(t),n},sortKeys:function(t){return r[s.length-1]=t,n},sortValues:function(i){return t=i,n},rollup:function(t){return i=t,n}}}().key(t=>t[this.ordinalAccessor]).entries(this.data);t.forEach(t=>{t.focusMarker=!1,t.greaterIndex=1;let i="marker",n="marker";t.values[0][this.seriesAccessor]===this.focusMarker.key?(t.focusMarker=0,i="focusMarker"):t.values[1][this.seriesAccessor]===this.focusMarker.key&&(t.focusMarker=1,n="focusMarker");const s=hp(t.values[0],this.clickHighlight,this.innerInteractionKeys)?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:op(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width,r=hp(t.values[1],this.clickHighlight,this.innerInteractionKeys)?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:op(t.values[1],this.hoverHighlight,this.innerInteractionKeys)&&parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width;t.values[0].offset=0===t.focusMarker||this.marker.visible?"dot"===this.marker.type?this[i].sizeFromBar*(s+1)/2:"stroke"===this.marker.type||t.focusMarker?this[i].sizeFromBar*(s+1)/5:this[i].sizeFromBar*(s+1)/2:1,t.values[1].offset=1===t.focusMarker||this.marker.visible?"dot"===this.marker.type?-this[n].sizeFromBar*(r+1)/2:"stroke"===this.marker.type?-this[n].sizeFromBar*(r+1)/5:t.focusMarker?-this[n].sizeFromBar*(r+1)/2:-this[n].sizeFromBar*(r+1)/5:-1,t.values[0][this.valueAccessor]>=t.values[1][this.valueAccessor]&&(t.greaterIndex=0,t.values[0].offset=-t.values[0].offset,t.values[1].offset=-t.values[1].offset)});const i=t=>{const i={absoluteDiff:"Absolute Difference ",difference:"Difference "},n=this.differenceLabel&&this.differenceLabel.calculation&&i[this.differenceLabel.calculation]?this.differenceLabel.calculation:"difference";return i[n]+dp(t,n,this.differenceLabel&&this.differenceLabel.format&&this.differenceLabel.visible?this.differenceLabel.format:this.differenceLabel&&this.dataLabel.format&&this.dataLabel.visible?this.dataLabel.format:"0[.][0][0]a")};this.nest=t.sort((t,n)=>{t.difference=t.values[0][this.valueAccessor]-t.values[1][this.valueAccessor],n.difference=n.values[0][this.valueAccessor]-n.values[1][this.valueAccessor],t.absoluteDiff=Math.abs(t.difference),n.absoluteDiff=Math.abs(n.difference),t.middle=(t.values[0][this.valueAccessor]+t.values[1][this.valueAccessor])/2,n.middle=(n.values[0][this.valueAccessor]+n.values[1][this.valueAccessor])/2,t.message=i(t),n.message=i(n);const s=!1!==t.focusMarker?t.focusMarker:0;return t.values[0][this.ordinalAccessor]instanceof Date?0:"asc"===this.sortOrder||"diffAsc"===this.sortOrder?t.difference-n.difference:"desc"===this.sortOrder||"diffDesc"===this.sortOrder?n.difference-t.difference:"focusAsc"===this.sortOrder?t.values[s][this.valueAccessor]-n.values[s][this.valueAccessor]:"focusDesc"===this.sortOrder?n.values[s][this.valueAccessor]-t.values[s][this.valueAccessor]:"absoluteDiffAsc"===this.sortOrder?t.absoluteDiff-n.absoluteDiff:"absoluteDiffDesc"===this.sortOrder?n.absoluteDiff-t.absoluteDiff:0})}prepareMarkerData(){this.markerData=[];const t={focus:!1,label:this.nest[0].values[0][this.seriesAccessor]},i={focus:!1,label:this.nest[0].values[1][this.seriesAccessor]};this.nest[0].focusMarker?i.focus=!0:0===this.nest[0].focusMarker&&(t.focus=!0);const n=Object.assign(Object.assign({},t),{limitOpacity:!0}),s=Object.assign(Object.assign({},i),{limitOpacity:!0}),r=Object.assign({},t),e=Object.assign({},i);this.markerData.push(t),this.markerData.push(i),this.markerData.push(n),this.markerData.push(s),this.markerData.push(r),this.markerData.push(e);let h=0;this.markerData.forEach(t=>{t.index=h,t.referenceIndex=h<2?h:h<4?h-2:h-4,h++})}prepareSeriesData(){const t=this.seriesLabelDetails.placement.includes("vertical"===this.layoutOverride?"right":"top");this.seriesData=[{label:this.nest[0].values[0][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[0][this.seriesAccessor],value:t?this.nest[this.nest.length-1].values[0][this.valueAccessor]:this.nest[0].values[0][this.valueAccessor]},{label:this.nest[0].values[1][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[1][this.seriesAccessor],value:t?this.nest[this.nest.length-1].values[1][this.valueAccessor]:this.nest[0].values[1][this.valueAccessor]}]}prepareLegendData(){this.legendData=[{label:this.nest[0].values[0][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[0][this.seriesAccessor]},{label:this.nest[0].values[1][this.seriesAccessor],[this.seriesAccessor]:this.nest[0].values[1][this.seriesAccessor]}],this.ordinalLabel=this.legendData.map(t=>t.label)}prepareScales(){const t=ja(this.data,t=>parseFloat(t[this.valueAccessor])),i=Ra(this.data,t=>parseFloat(t[this.valueAccessor]));if("vertical"===this.layoutOverride)if(this.xAccessor=this.ordinalAccessor,this.yAccessor=this.valueAccessor,this.y=Vl().domain([this.minValueOverride||0===this.minValueOverride?this.minValueOverride:t-.15*(i-t),this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:i+.15*(i-t)]).range([this.innerPaddedHeight,0]),this.data[0][this.ordinalAccessor]instanceof Date){const t=Ra(this.data,t=>t[this.ordinalAccessor]),i=ja(this.data,t=>t[this.ordinalAccessor]);if(this.x=function(){return ac.apply(gd(nc,ic,Ja,Ua,Ba,Ka,Ya,Va,Zl).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().domain([i,t]).range([0,this.innerPaddedWidth]),this.xAxis.unit){const n=this.time["time"+this.xAxis.unit];this.x.domain([n.offset(i,-1),n.offset(t,1)])}}else this.x=Ac().domain(this.nest.map(t=>t.key)).padding(.5).range([0,this.innerPaddedWidth]);else"horizontal"===this.layoutOverride&&(this.xAccessor=this.valueAccessor,this.yAccessor=this.ordinalAccessor,this.x=Vl().domain([this.minValueOverride||0===this.minValueOverride?this.minValueOverride:t-.15*(i-t),this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:i+.15*(i-t)]).range([0,this.innerPaddedWidth]),this.y=Ac().domain(this.nest.map(t=>t.key)).padding(.5).range([this.innerPaddedHeight,0]))}addStrokeUnder(){const t=$v({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.seriesLabelWrapper.selectAll("text").attr("filter",this.accessibility.hideStrokes?null:t),this.diffLabelWrapper.attr("filter",this.accessibility.hideStrokes?null:t),this.labels.attr("filter",this.accessibility.hideStrokes?null:t),this.labels.attr("filter",this.accessibility.hideStrokes?null:t),this.dumbbellG.attr("filter",this.accessibility.hideStrokes?null:t)}renderRootElements(){this.svg=Da(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.defs=this.rootG.append("defs"),this.baselineG=this.rootG.append("g").attr("class","baseline-group"),this.gridG=this.rootG.append("g").attr("class","gridline-group"),this.dumbbellG=this.rootG.append("g").attr("class","dumbbell-group"),this.seriesLabelWrapper=this.rootG.select(".dumbbell-series-wrapper"),this.seriesLabelWrapper=this.rootG.append("g").attr("class","dumbbell-series-wrapper"),this.diffLabelWrapper=this.rootG.select(".dumbbell-diff-label-wrapper"),this.diffLabelWrapper=this.rootG.append("g").attr("class","dumbbell-diff-label-wrapper"),this.legendG=Da(this.dumbbellPlotEl).select(".dumbbell-legend").append("svg"),this.tooltipG=Da(this.dumbbellPlotEl).select(".dumbbell-tooltip"),this.labels=this.rootG.append("g").attr("class","dumbbell-dataLabel-group"),this.references=this.rootG.append("g").attr("class","dumbbell-reference-line-group")}renderMarkerGroup(){this.markerG=this.defs.select("."+this.marker.type+"markers"),this.markerG.node()||(this.defs.selectAll("g").remove(),this.markerG=this.defs.append("g").attr("class",this.marker.type+"markers"))}setSeriesSelections(){const t=this.seriesLabelWrapper.selectAll(".dumbbell-series-label").data(this.seriesData,t=>t.label);this.enterSeriesLabel=t.enter().append("text"),this.exitSeriesLabel=t.exit(),this.updateSeriesLabel=t.merge(this.enterSeriesLabel)}setGlobalSelections(){const t=this.dumbbellG.selectAll(".dumbbell-plot").data(this.nest,t=>t.key);this.enter=t.enter().append("path"),this.exit=t.exit(),this.update=t.merge(this.enter),this.exitSize=this.exit.size(),this.enterSize=this.enter.size();const i=this.markerG.selectAll("marker").data(this.markerData,(t,i)=>t.label+i);this.enterMarkers=i.enter().append("marker"),this.exitMarkers=i.exit(),this.updateMarkers=i.merge(this.enterMarkers),this.setSeriesSelections();const n=this.diffLabelWrapper.selectAll(".dumbbell-diff-label").data(this.nest,t=>t.key);this.enterDiffLabel=n.enter().append("text"),this.exitDiffLabel=n.exit(),this.updateDiffLabel=n.merge(this.enterDiffLabel);const s=this.labels.selectAll("g").data(this.nest,t=>t.key);this.enterLabels=s.enter().append("g"),this.exitLabels=s.exit(),this.updateLabels=s.merge(this.enterLabels);const r=this.updateLabels.selectAll(".dumbbell-dataLabel").data(t=>[t.values[0],t.values[1]],t=>t[this.seriesAccessor]);this.enterLabelChildren=r.enter().append("text"),this.exitLabelChildren=r.exit(),this.updateLabelChildren=r.merge(this.enterLabelChildren)}setTestingAttributes(){this.unitTest?(Da(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").attr("data-testid","chart-container"),Da(this.dumbbellPlotEl).select(".dumbbell-main-title").attr("data-testid","main-title"),Da(this.dumbbellPlotEl).select(".dumbbell-sub-title").attr("data-testid","sub-title"),this.root.attr("data-testid","margin-container"),this.rootG.attr("data-testid","padding-container"),this.legendG.attr("data-testid","legend-container"),this.tooltipG.attr("data-testid","tooltip-container"),this.dumbbellG.attr("data-testid","dumbbell-group"),this.baselineG.attr("data-testid","baseline-group"),this.references.attr("data-testid","reference-line-group"),this.updateLabels.attr("data-testid","dataLabel-wrapper"),this.updateLabelChildren.attr("data-testid","dataLabel").attr("data-id",t=>`label-${t[this.ordinalAccessor]}-${t[this.seriesAccessor]}`),this.updateDiffLabel.attr("data-testid","difference-label").attr("data-id",t=>`difference-label-${t.key}`),this.updateSeriesLabel.attr("data-testid","series-label"),this.updateMarkers.attr("data-testid","marker"),this.update.attr("data-testid","line").attr("data-id",t=>`line-${t.key}`)):(Da(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").attr("data-testid",null),Da(this.dumbbellPlotEl).select(".dumbbell-main-title").attr("data-testid",null),Da(this.dumbbellPlotEl).select(".dumbbell-sub-title").attr("data-testid",null),this.root.attr("data-testid",null),this.rootG.attr("data-testid",null),this.legendG.attr("data-testid",null),this.tooltipG.attr("data-testid",null),this.dumbbellG.attr("data-testid",null),this.baselineG.attr("data-testid",null),this.references.attr("data-testid",null),this.updateLabels.attr("data-testid",null),this.updateLabelChildren.attr("data-testid",null).attr("data-id",null),this.updateDiffLabel.attr("data-testid",null).attr("data-id",null),this.updateSeriesLabel.attr("data-testid",null),this.updateMarkers.attr("data-testid",null),this.update.attr("data-testid",null).attr("data-id",null))}reSetRoot(){this.svg.transition("root_reset").duration(this.duration).ease(Md).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root.transition("root_reset").duration(this.duration).ease(Md).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),this.rootG.transition("root_reset").duration(this.duration).ease(Md).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),ip(this.chartID,this.width)}drawXAxis(){ap({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,wrapLabel:this.wrapLabel?this.innerPaddedWidth/this.nest.length*.7:"",dateFormat:this.xAxis.format,format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.xAxis.visible})}drawYAxis(){ap({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,wrapLabel:this.wrapLabel?100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.yAxis.visible})}setXAxisAccessibility(){Kv({rootEle:this.dumbbellPlotEl,hasXAxis:!!this.xAxis&&this.xAxis.visible,xAxis:!!this.x&&this.x,xAxisLabel:this.xAxis.label?this.xAxis.label:""})}setYAxisAccessibility(){Bv({rootEle:this.dumbbellPlotEl,hasYAxis:!!this.yAxis&&this.yAxis.visible,yAxis:!!this.y&&this.y,yAxisLabel:this.yAxis.label?this.yAxis.label:""})}drawBaselineX(){ap({root:this.baselineG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,padding:this.padding,markOffset:this.x(0),hide:"horizontal"!==this.layout||!this.showBaselineY})}drawBaselineY(){ap({root:this.baselineG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,padding:this.padding,markOffset:this.y(0),hide:"vertical"!==this.layout||!this.showBaselineX})}drawXGrid(){cp(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,!1,!this.xAxis.gridVisible,this.xAxis.tickInterval)}drawYGrid(){cp(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,!0,!this.yAxis.gridVisible,this.yAxis.tickInterval)}enterMarkerGeometries(){this.enterMarkers.attr("orient","auto").attr("markerUnits","userSpaceOnUse").attr("id",t=>this.generateId(t,t.index)).attr("class","marker-"+this.marker.type).attr("stroke",this.handleMarkerColors),"dot"===this.marker.type?this.enterMarkers.append("circle").attr("r",5):("stroke"===this.marker.type||"arrow"===this.marker.type)&&this.enterMarkers.append("path"),this.updateMarkerSize(this.enterMarkers)}updateMarkerGeometries(){this.updateMarkers.interrupt(),this.updateMarkers.attr("opacity",t=>!this.marker.visible&&!t.focus||t.limitOpacity?this.marker.visible||t.focus?this.hoverOpacity:0:1)}updateMarkerStyle(){this.updateMarkers.attr("stroke",this.handleMarkerColors)}exitMarkerGeometries(){this.exitMarkers.transition("exit").duration(this.duration).ease(Md).remove()}enterDumbbells(){this.enter.interrupt(),this.enter.attr("class","dumbbell-plot").attr("d",t=>{const i=this.x(t.values[0][this.xAccessor]),n=this.y(t.values[0][this.yAccessor]),s=this.x(t.values[1][this.xAccessor]),r=this.y(t.values[1][this.yAccessor]),e="vertical"===this.layout?n>r?.001:-.001:0,h="horizontal"===this.layout?i>s?.001:-.001:0;return`M ${i+h} ${n+e} L ${i} ${n} L ${i} ${n} L ${s} ${r} L ${s} ${r} L ${s} ${r} L ${i} ${n} L ${i} ${n} L ${i} ${n} L ${s} ${r} L ${s} ${r} L ${s-h} ${r-e}`}).attr("cursor",this.suppressEvents?null:this.cursor).attr("opacity",0).each((t,i,n)=>{Ov(n[i])}).on("click",this.suppressEvents?null:(t,i,n)=>{if(t.values){const s=this.findMarkerIndex(t,n[i],ma);this.onClickHandler(t.values[s])}}).on("mouseover",this.suppressEvents?null:(t,i,n)=>{let s=t;if(t.values){const r=this.findMarkerIndex(t,n[i],ma);mp(this.chartID,!0),s=t.values[r],this.hoverFunc.emit(s)}this.showTooltip&&this.eventsTooltip({data:this.tooltipLabel.labelAccessor&&this.tooltipLabel.labelAccessor.length?s:t,evt:ma,isToShow:!0})}).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity),this.update.order()}updateBarStyle(){this.update.attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity)}updateMarkerSize(t){(t||this.updateMarkers).each((t,i,n)=>{const s=Da(n[i]),r=i<2&&this.clickHighlight.length?parseFloat(this.clickStyle.strokeWidth+""):i<4?this.barStyle.width:parseFloat(this.hoverStyle.strokeWidth+""),e=(t.focus?this.focusMarker.sizeFromBar:this.marker.sizeFromBar)*("dot"===this.marker.type?1:"stroke"===this.marker.type?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?1:2)*(r+1),h=e?10/e:0;s.attr("viewBox",`0 0 ${10+h} ${10+h}`).attr("refX",5+h/2).attr("refY",5+h/2).attr("stroke-width",h).attr("markerWidth",e).attr("markerHeight",e),"dot"===this.marker.type?s.select("circle").attr("cx",5+h/2).attr("cy",5+h/2):"stroke"===this.marker.type?s.select("path").attr("d",`M 4.5 ${0+h/2} L 4.5 ${10+h/2} L 6 ${10+h/2} L 6 ${0+h/2} z`):"arrow"===this.marker.type&&s.select("path").attr("transform",t.focus&&this.focusMarker.key&&1===t.referenceIndex?`rotate(180,${5+h/2},${5+h/2})`:null).attr("d",t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?`M ${0+h/2} ${5+h/4} L ${10+h/2} ${0+h/2} L ${10+h/2} ${10+h/2} z`:`M 4.5 ${0+h/2} L 4.5 ${10+h/2} L 6 ${10+h/2} L 6 ${0+h/2} z`)})}drawMarkerGeometries(){this.updateMarkers.selectAll(".marker-"+this.marker.type).data(t=>[t]),"arrow"===this.marker.type&&this.updateMarkers.selectAll("path").attr("d",(t,i,n)=>{const s=i<2&&this.clickHighlight.length?parseFloat(this.clickStyle.strokeWidth+""):i<4?this.barStyle.width:parseFloat(this.hoverStyle.strokeWidth+""),r=(t.focus?this.focusMarker.sizeFromBar:this.marker.sizeFromBar)*("dot"===this.marker.type?1:"stroke"===this.marker.type?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?1:2)*(s+1),e=r?10/r:0;return Da(n[i]).attr("transform",t.focus&&this.focusMarker.key&&1===t.referenceIndex?`rotate(180,${5+e/2},${5+e/2})`:null),t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?`M ${0+e/2} ${5+e/4} L ${10+e/2} ${0+e/2} L ${10+e/2} ${10+e/2} z`:`M 4.5 ${0+e/2} L 4.5 ${10+e/2} L 6 ${10+e/2} L 6 ${0+e/2} z`})}updateDumbbells(){this.update.interrupt(),this.enter.transition("opacity").duration(this.duration).ease(Md).attr("opacity",1)}exitDumbbells(){this.exit.interrupt(),this.exit.transition("exit").ease(Md).duration(this.duration/2).attr("opacity",0).attr("d",(t,i,n)=>{const s=Da(n[i]),r=+s.attr("data-centerX1"),e=+s.attr("data-centerY1"),h=+s.attr("data-centerX2"),o=+s.attr("data-centerY2"),u="vertical"===this.layout?e>o?.001:-.001:0,a="horizontal"===this.layout?r>h?.001:-.001:0;return`M ${r+a} ${e+u} L ${r} ${e} L ${r} ${e} L ${h} ${o} L ${h} ${o} L ${h} ${o} L ${r} ${e} L ${r} ${e} L ${r} ${e} L ${h} ${o} L ${h} ${o} L ${h-a} ${o-u}`}),this.update.transition("accessibilityAfterExit").duration(this.duration).ease(Md).call(Ap,()=>{const t=Qv(this.rootG.node());this.exit.remove(),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),Jv({parentGNode:this.rootG.node(),focusDidExist:t})})}drawDumbbells(){this.update.classed("moving",(t,i,n)=>{const s=Da(n[i]),r=hp(t.values[0],this.clickHighlight,this.innerInteractionKeys)&&hp(t.values[1],this.clickHighlight,this.innerInteractionKeys),e=op(t.values[0],this.hoverHighlight,this.innerInteractionKeys)&&op(t.values[1],this.hoverHighlight,this.innerInteractionKeys),h=this.dumbbellInteraction?r?parseFloat(this.clickStyle.strokeWidth+"")||this.barStyle.width:e&&parseFloat(this.hoverStyle.strokeWidth+"")||this.barStyle.width:this.barStyle.width,o=this.x(t.values[0][this.xAccessor]),u=this.y(t.values[0][this.yAccessor]),a=this.x(t.values[1][this.xAccessor]),c=this.y(t.values[1][this.yAccessor]),l=+s.attr("data-barSize"),f=+s.attr("data-centerX1"),d=+s.attr("data-centerY1"),v=+s.attr("data-centerX2"),p=+s.attr("data-centerY2");return h!==l||o!==f||u!==d||a!==v||c!==p}).transition("update").ease(Md).duration(this.duration).attr("d",this.setBarSize).call(Ap,()=>{this.update.classed("moving",!1),Jv({parentGNode:this.rootG.node()})})}updateMarkerIds(){this.updateMarkers.attr("id",t=>this.generateId(t,t.index)),this.update.attr("marker-start",t=>{const i=ep(t.values[0],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys),n=op(t.values[0],this.hoverHighlight,this.innerInteractionKeys),s=hp(t.values[0],this.clickHighlight,this.innerInteractionKeys);return this.url+(n&&!s?this.updateMarkers._groups[0][4].id:s||i?this.updateMarkers._groups[0][0].id:this.updateMarkers._groups[0][2].id)+")"}).attr("marker-end",t=>{const i=ep(t.values[1],1,0,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys),n=op(t.values[1],this.hoverHighlight,this.innerInteractionKeys),s=hp(t.values[1],this.clickHighlight,this.innerInteractionKeys);return this.url+(n&&!s?this.updateMarkers._groups[0][5].id:s||i?this.updateMarkers._groups[0][1].id:this.updateMarkers._groups[0][3].id)+")"})}updateInteractionState(){this.update.interrupt("opacity"),this.updateLabelChildren.interrupt("opacity"),this.updateMarkers.interrupt(),this.updateMarkers.attr("opacity",t=>!this.marker.visible&&!t.focus||t.limitOpacity?this.marker.visible||t.focus?this.hoverOpacity:0:1),this.update.attr("opacity",1).attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity).each((t,i,n)=>{const s=Da(n[i]);s.classed("moving")||s.attr("d",this.setBarSize)}),this.drawDataLabels(!0),Jv({parentGNode:this.rootG.node()}),fp({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}enterSeriesLabels(){this.enterSeriesLabel.interrupt();const t=this.seriesLabelDetails.placement.includes(this.isVertical?"right":"top");this.enterSeriesLabel.attr("opacity",0).attr("class","dumbbell-series-label").attr("fill",this.handleSeriesLabelColors).attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>this.onHoverHandler(t,!1):null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?()=>this.onMouseOutHandler():null).attr("text-anchor",this.isVertical&&t?"start":this.isVertical?"end":"middle").attr("x",i=>this.isVertical&&t?this.innerPaddedWidth:this.isVertical?0:this.x(i.value)).attr("y",i=>this.isVertical?this.y(i.value):this.isVertical||t?0:this.innerPaddedHeight).attr("dx",this.isVertical&&t?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")}updateSeriesLabels(){this.updateSeriesLabel.interrupt(),this.updateSeriesLabel.transition("opacity_series_labels").ease(Md).duration(this.duration).attr("opacity",t=>{const i=this.seriesLabel.visible?1:0;return this.seriesInteraction?ep(t,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:i})}exitSeriesLabels(){this.exitSeriesLabel.transition("exit_series_labels").ease(Md).duration(this.duration).attr("opacity",0).remove()}drawSeriesLabels(){const t=this.seriesLabelDetails.placement.includes(this.isVertical?"right":"top");this.updateSeriesLabel.text((t,i)=>this.seriesLabelDetails.label?this.seriesLabelDetails.label[i]:t.label).attr("fill",this.handleSeriesLabelColors).transition("update_series_labels").ease(Md).duration(this.duration).attr("text-anchor",this.isVertical&&t?"start":this.isVertical?"end":"middle").attr("x",i=>this.isVertical&&t?this.innerPaddedWidth:this.isVertical?0:this.x(i.value)).attr("y",i=>this.isVertical?this.y(i.value):this.isVertical||t?0:this.innerPaddedHeight).attr("dx",this.isVertical&&t?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")}setSeriesLabelOpacity(){this.updateSeriesLabel.interrupt("opacity_series_labels"),this.updateSeriesLabel.attr("opacity",t=>{const i=this.seriesLabel.visible?1:0;return this.seriesInteraction?ep(t,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:i})}enterDifferenceLabels(){this.enterDiffLabel.interrupt();const t=this.diffLabelDetails.placement.includes(this.isVertical?"left":"top");this.enterDiffLabel.attr("class","dumbbell-diff-label").attr("opacity",0).attr("fill",this.setDiffLabelColor).attr("cursor",!this.suppressEvents&&this.dumbbellInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?t=>this.onHoverHandler(t,!0):null).on("mouseout",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?()=>this.onMouseOutHandler():null).attr("x",t=>this.x(this.isVertical?t.values[0][this.ordinalAccessor]:t.middle)).attr("y",i=>!this.isVertical&&t?this.y(i.key)-this.barStyle.width/2-4:this.isVertical?this.y(i.middle):this.y(i.key)+this.barStyle.width/2+4).attr("dx",this.isVertical&&t?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&t?"0":this.isVertical?"0.3em":"0.6em")}updateDifferenceLabels(){this.updateDiffLabel.interrupt(),this.updateDiffLabel.transition("opacity_diff_labels").ease(Md).duration(this.duration).attr("opacity",t=>{const i=this.differenceLabel.visible?1:0;return this.dumbbellInteraction?ep(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:i})}exitDifferenceLabels(){this.exitDiffLabel.transition("exit_diff_label").ease(Md).duration(this.duration).attr("opacity",0).remove()}drawDifferenceLabels(){const t=this.diffLabelDetails.placement.includes(this.isVertical?"left":"top");this.updateDiffLabel.text(t=>dp(t,this.differenceLabel.calculation,this.differenceLabel.format)).transition("update_diff_label").ease(Md).duration(this.duration).attr("text-anchor",this.isVertical&&t?"end":this.isVertical?"start":"middle").attr("x",t=>this.x(this.isVertical?t.values[0][this.ordinalAccessor]:t.middle)).attr("y",i=>!this.isVertical&&t?this.y(i.key)-this.barStyle.width/2-4:this.isVertical?this.y(i.middle):this.y(i.key)+this.barStyle.width/2+4).attr("dx",this.isVertical&&t?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&t?"0":this.isVertical?"0.3em":"0.6em")}enterDataLabels(){this.enterLabels.interrupt(),this.enterLabels.attr("class","dumbbell-label-wrapper").attr("opacity",0).attr("fill",this.handleLabelColors),this.enterLabelChildren.attr("class","dumbbell-dataLabel").attr("opacity",0).attr("fill",this.handleLabelColors).attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null).on("click",!this.suppressEvents&&this.dataLabel.visible?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?t=>this.onHoverHandler(t,!0):null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?()=>this.onMouseOutHandler():null),bp({root:this.enterLabelChildren,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.placement,chartType:"dumbbell",layout:this.layoutOverride,labelOffset:this.markerData})}setDifferenceLabelOpacity(){this.updateDiffLabel.interrupt("opacity_diff_labels"),this.updateDiffLabel.attr("opacity",t=>{const i=this.differenceLabel.visible?1:0;return this.dumbbellInteraction?ep(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:i})}updateDataLabels(){this.updateLabelChildren.classed("transitioning",!0),this.updateLabels.transition("opacity").ease(Md).duration(this.duration).attr("opacity",()=>this.dataLabel.visible?1:0).call(Ap,()=>{this.updateLabelChildren.classed("transitioning",!1)})}exitDataLabels(){this.exitLabels.interrupt(),this.exitLabels.selectAll(".dumbbell-dataLabel").transition("exit").ease(Md).duration(this.duration/2).attr("opacity",0).call(Ap,()=>{this.exitLabels.remove()}),this.exitLabelChildren.transition("exit_dataLabel").ease(Md).duration(this.duration).attr("opacity",0).remove()}drawDataLabels(t){this.updateLabelChildren.text(t=>dp(t,this.innerLabelAccessor,this.dataLabel.format));const i=this.updateLabelChildren.attr("fill",this.handleLabelColors).transition("update_dataLabel").ease(Md).duration((i,n,s)=>{const r=op(i,this.hoverHighlight,this.innerInteractionKeys),e=hp(i,this.clickHighlight,this.innerInteractionKeys);return(r||e)&&t&&!Da(s[n]).classed("transitioning")?0:this.duration});bp({root:i,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.placement,chartType:"dumbbell",layout:this.layoutOverride,labelOffset:this.markerData})}updateDiffLabelColor(){this.updateDiffLabel.attr("fill",this.setDiffLabelColor)}setLabelOpacity(){this.updateLabels.attr("opacity",this.dataLabel.visible?1:0),this.updateLabelChildren.attr("opacity",t=>ep(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1)}updateMarkerOpacity(){this.updateMarkers.interrupt(),this.updateMarkers.attr("opacity",t=>!this.marker.visible&&!t.focus||t.limitOpacity?this.marker.visible||t.focus?this.hoverOpacity:0:1)}drawReferenceLines(){const t=this.references.selectAll("g").data(this.referenceLines,t=>t.label),i=t.enter().append("g").attr("class",".dumbbell-reference").attr("opacity",1),n=i.append("line");n.attr("class","dumbbell-reference-line").attr("data-testid",this.unitTest?"reference-line":null).attr("opacity",0);const s=i.append("text");s.attr("class","dumbbell-reference-line-label").attr("opacity",0);const r=t.merge(i),e=r.selectAll(".dumbbell-reference-line").data(t=>[t]).transition("merge").ease(Md).duration(this.duration),h=r.selectAll(".dumbbell-reference-line-label").data(t=>[t]).transition("merge").ease(Md).duration(this.duration).text(t=>t.label);t.exit().transition("exit").ease(Md).duration(this.duration).attr("opacity",0).remove(),i.attr("transform",t=>"translate(0,"+this["horizontal"===this.layoutOverride?"x":"y"](t.value)+")"),r.transition("merge").ease(Md).duration(this.duration).attr("transform",t=>"translate(0,"+this["horizontal"===this.layoutOverride?"x":"y"](t.value)+")"),n.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),s.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),h.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.style("stroke",kp[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity),h.style("fill",kp[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)}setSelectedClass(){this.update.classed("highlight",(t,i,n)=>{const s=ep(t.values[0],1,0,{},this.clickHighlight,this.innerInteractionKeys),r=ep(t.values[1],1,0,{},this.clickHighlight,this.innerInteractionKeys);let e=s||r;return e=!(!this.clickHighlight||!this.clickHighlight.length)&&e,tp(n[i],e,this.accessibility.elementsAreInterface),e})}drawAnnotations(){sp({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:"horizontal"!==this.layout?this.ordinalAccessor:this.valueAccessor,yScale:this.y,yAccessor:"horizontal"!==this.layout?this.valueAccessor:this.ordinalAccessor})}setAnnotationAccessibility(){Zv(this.dumbbellPlotEl,this.annotations)}setTagLevels(){this.topLevel=Wp(this.highestHeadingLevel),this.bottomLevel=Wp(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){Iv({rootEle:this.dumbbellPlotEl,geomType:"dumbbell",title:this.accessibility.title||this.mainTitle,chartTag:"dumbbell-plot",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){const t=Mp(this,rp,"dumbbell-plot");delete t[this.ordinalAccessor],_v({node:this.svg.node(),chartTag:"dumbbell-plot",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"dumbbell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupKeys:["message"],nested:"values",disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.update.each((t,i,n)=>{Ov(n[i])})}setGeometryAriaLabels(){const t=Mp(this,rp,"dumbbell-plot");delete t[this.ordinalAccessor],this.update.each((i,n,s)=>{zv({node:s[n],geomType:"dumbbell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupKeys:["message"],nested:["values"],uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),Hv({node:s[n],uniqueID:this.chartID})})}setGroupAccessibilityAttributes(){Ov(this.dumbbellG.node())}setGroupAccessibilityID(){this.dumbbellG.each((t,i,n)=>{Hv({node:n[i],uniqueID:this.chartID})})}setChartAccessibilityTitle(){Xv(this.dumbbellPlotEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){Rv(this.dumbbellPlotEl,this.subTitle)}setChartAccessibilityLongDescription(){jv(this.dumbbellPlotEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){Pv(this.dumbbellPlotEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){Fv(this.dumbbellPlotEl,this.accessibility.purpose)}setChartAccessibilityContext(){Gv(this.dumbbellPlotEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){Vv(this.dumbbellPlotEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){Yv({rootEle:this.dumbbellPlotEl,parentGNode:this.dumbbellG.node(),chartTag:"dumbbell-plot",geomType:"dumbbell"})}setChartAccessibilityStructureNotes(){Uv(this.dumbbellPlotEl,this.accessibility.structureNotes)}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t,i){mp(this.chartID,!0),this.hoverFunc.emit(t),this.showTooltip&&i&&this.eventsTooltip({data:t,evt:ma,isToShow:!0})}onMouseOutHandler(){mp(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){gp(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:n}){np({root:this.tooltipG,data:t,event:i,isToShow:n,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,groupAccessor:this.seriesAccessor,diffLabelDetails:this.diffLabelDetails,chartType:"dumbbell"})}updateCursor(){this.update.attr("cursor",this.suppressEvents?null:this.cursor),this.updateDiffLabel.attr("cursor",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?this.cursor:null),this.updateLabelChildren.attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null)}drawLegendElements(){lp({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:this.accessibility.hideStrokes?null:this.rawColors,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,label:this.legend.labels||this.ordinalLabel,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}bindLegendInteractivity(){Da(this.dumbbellPlotEl).selectAll(".legend").on("click",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?t=>this.onClickHandler(t):null).on("mouseover",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?t=>this.onHoverHandler(t,!1):null).on("mouseout",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?()=>this.onMouseOutHandler():null)}setLegendCursor(){Da(this.dumbbellPlotEl).selectAll(".legend").style("cursor",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?this.cursor:null)}setSeriesCursor(){this.updateSeriesLabel.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null)}bindSeriesInteractivity(){this.updateSeriesLabel.on("click",!this.suppressEvents&&this.seriesInteraction?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>this.onHoverHandler(t,!1):null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?()=>this.onMouseOutHandler():null)}bindInteractivity(){this.update.on("click",this.suppressEvents?null:(t,i,n)=>{if(t.values){const s=this.findMarkerIndex(t,n[i],ma);this.onClickHandler(t.values[s])}}).on("mouseover",this.suppressEvents?null:(t,i,n)=>{let s=t;if(t.values){const r=this.findMarkerIndex(t,n[i],ma);mp(this.chartID,!0),s=t.values[r],this.hoverFunc.emit(s)}this.showTooltip&&this.eventsTooltip({data:this.tooltipLabel.labelAccessor&&this.tooltipLabel.labelAccessor.length?s:t,evt:ma,isToShow:!0})}).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updateLabelChildren.on("click",!this.suppressEvents&&this.dataLabel.visible?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?t=>this.onHoverHandler(t,!0):null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?()=>this.onMouseOutHandler():null),this.updateDiffLabel.on("click",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?t=>this.onHoverHandler(t,!0):null).on("mouseout",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?()=>this.onMouseOutHandler():null)}findMarkerIndex(t,i,n){const s="vertical"===this.layoutOverride?this.findPosition(i,n)[1]:this.findPosition(i,n)[0],r="vertical"===this.layoutOverride?"Y":"X",e=+Da(i).attr("data-center"+r+"1"),h=+Da(i).attr("data-center"+r+"2"),o=t.values[0][this.valueAccessor]>=t.values[1][this.valueAccessor]?0:1;return s<=(h-e)/2+e?0+o:1-o}findPosition(t,i){let n=(t.ownerSVGElement||t).createSVGPoint();return n.x=i.clientX,n.y=i.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}generateId(t,i){let n="dot"===this.marker.type?1:"stroke"===this.marker.type?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&0===t.referenceIndex?1:2;n=t.focus?this.focusMarker.sizeFromBar*n:this.marker.sizeFromBar*n;const s=this.marker.visible||t.focus?1:0,r="#"===this.rawColors[t.referenceIndex][0]?this.rawColors[t.referenceIndex].substring(1):this.rawColors[t.referenceIndex];let e=(i<2&&this.clickHighlight.length?this.clickStyle.strokeWidth:i<4?this.barStyle.width:this.hoverStyle.strokeWidth).toString();return e=""+e,e=e.replace(/\D/g,"n"),"marker-"+this.chartID+i+this.marker.type+n+r+e+s}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidate=!1),this.shouldValidateLayout&&this.validateLayout(),this.shouldValidateDataLabelPlacement&&(this.validateDataLabelPlacement(),this.shouldValidateDataLabelPlacement=!1),this.shouldValidateSeriesLabelPlacement&&(this.validateSeriesLabelPlacement(),this.shouldValidateSeriesLabelPlacement=!1),this.shouldValidateDiffLabelPlacement&&(this.validateDiffLabelPlacement(),this.shouldValidateDiffLabelPlacement=!1),this.shouldValidateDataLabelAccessor&&(this.validateDataLabelAccessor(),this.shouldValidateDataLabelAccessor=!1),this.shouldUpdateLayout&&(this.setLayoutData(),this.shouldUpdateLayout=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldUpdateMarkerData&&(this.prepareMarkerData(),this.shouldUpdateMarkerData=!1),this.shouldUpdateSeriesData&&(this.prepareSeriesData(),this.shouldUpdateSeriesData=!1),this.shouldUpdateLegendData&&(this.prepareLegendData(),this.shouldUpdateLegendData=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldCheckValueAxis&&("horizontal"===this.layout?(this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXGrid=!0):("vertical"===this.layout||this.layoutOverride)&&(this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYGrid=!0),this.shouldCheckValueAxis=!1),this.shouldCheckLabelAxis&&("vertical"===this.layout||this.layoutOverride?(this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXGrid=!0):"horizontal"===this.layout&&(this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYGrid=!0),this.shouldCheckLabelAxis=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),n("div",{class:"o-layout"},n("div",{class:"o-layout--chart"},n(this.topLevel,{class:"dumbbell-main-title vcl-main-title","data-testid":"main-title"},this.mainTitle),n(this.bottomLevel,{class:"visa-ui-text--instructions dumbbell-sub-title vcl-sub-title","data-testid":"sub-title"},this.subTitle),n("div",{class:"dumbbell-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),n("div",{class:"visa-viz-d3-dumbbell-container"}),n("div",{class:"dumbbell-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),n("data-table",{uniqueID:this.chartID,isCompact:!0,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))}init(){const t=Object.keys(bd);let i=0;const n={wrapLabel:{exception:!1},strokeWidth:{exception:0},showDots:{exception:!1},dotRadius:{exception:0},hoverOpacity:{exception:0},showTooltip:{exception:!1},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:!1}};for(i=0;i<t.length;i++){const s=!!n[t[i]]&&this[t[i]]===n[t[i]].exception;this[t[i]]=this[t[i]]||s?this[t[i]]:bd[t[i]]}}get dumbbellPlotEl(){return s(this)}static get watchers(){return{mainTitle:["mainTitleWatcher"],subTitle:["subTitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],seriesAccessor:["seriesAccessorWatcher"],sortOrder:["sortWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],layout:["layoutWatcher"],showBaselineX:["showBaselineXWatcher"],showBaselineY:["showBaselineYWatcher"],colorPalette:["paletteWatcher"],colors:["paletteWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],hoverOpacity:["hoverOpacityWatcher"],cursor:["cursorWatcher"],focusMarker:["focusMarkerWatcher"],marker:["markerWatcher"],barStyle:["barStyleWatcher"],dataLabel:["dataLabelWatcher"],seriesLabel:["seriesLabelWatcher"],differenceLabel:["differenceLabelWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],referenceStyle:["referenceWatcher"],referenceLines:["referenceWatcher"],suppressEvents:["suppressWatcher"],hoverHighlight:["hoverWatcher"],clickHighlight:["clickWatcher"],interactionKeys:["interactionWatcher"],unitTest:["unitTestWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}dumbbell-plot{cursor:default}dumbbell-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}dumbbell-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}dumbbell-plot .hidden{display:none}dumbbell-plot .axis{font-size:12px}dumbbell-plot .axis text{fill:#767676}dumbbell-plot .axis-label{text-anchor:middle;font:1rem sans-serif}dumbbell-plot .axis path{stroke:#767676}dumbbell-plot .grid line{stroke:#767676;stroke-opacity:0.6;shape-rendering:crispEdges;stroke-dasharray:4, 4}dumbbell-plot .grid path{stroke-width:0;stroke:#767676}dumbbell-plot .dumbbell-group{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear}dumbbell-plot .dumbbell-group__inactive{opacity:0}dumbbell-plot .dumbbell-group .dot{stroke:#ffffff}dumbbell-plot .dumbbell-group .dumbbell-series-label{font-size:1em}dumbbell-plot .dumbbell-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}dumbbell-plot .dumbbell-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}dumbbell-plot .annotations{pointer-events:none}dumbbell-plot .annotations .handle{pointer-events:all}"}};window.VisaChartsLibOSSLicenses=pp();const{getLicenses:Lp}=r,Sp=class{constructor(i){t(this,i),this.chartContent=[],this.selectionMode="multiple",this.onElementUpdate=new Function,this.filterAccessor="label",this.defaultClickElement=[],this.data=[],this.hoverElement="",this.clickElement=[]}componentWillLoad(){}componentWillUpdate(){this.clickElement||(this.clickElement=this.defaultClickElement),this.renderCharts()}onClick(t){this.handleClickElement(t)}handleClickElement(t){if(console.log("handleClickElement",t),"single"===this.selectionMode)this.clickElement=this.clickElement.includes(t)?"":[t];else if("multiple"===this.selectionMode)if(this.clickElement.includes(t))for(let i=this.clickElement.length-1;i>=0;i--)this.clickElement[i]===t&&this.clickElement.splice(i,1);else this.clickElement.push(t);else this.clickElement=[];this.onElementUpdate(this.clickElement)}onHover(t){this.hoverElement=t}onMouseOut(){this.hoverElement=""}drawChart(t){const i=function(t,i){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&i.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)i.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]])}return n}(t,["chartType","width"]),s={onClickFunc:t=>this.onClick(t),onHoverFunc:t=>this.onHover(t),onMouseOutFunc:()=>this.onMouseOut(),clickHighlight:this.clickElement,hoverHighlight:this.hoverElement};switch(t.chartType){case"bar-chart":return n("div",{class:"col--lg-"+t.width},n("bar-chart",Object.assign({width:100*t.width},s,i)));case"pie-chart":return n("div",{class:"col--lg-"+t.width},n("pie-chart",Object.assign({width:100*t.width},s,i)));case"scatter-plot":return n("div",{class:"col--lg-"+t.width},n("scatter-plot",Object.assign({width:100*t.width},s,i)));case"circle-packing":return n("div",{class:"col--lg-"+t.width},n("circle-packing",Object.assign({width:100*t.width},s,i)));case"clustered-force-layout":return n("div",{class:"col--lg-"+t.width},n("clustered-force-layout",Object.assign({width:100*t.width},s,i)));case"line-chart":return n("div",{class:"col--lg-"+t.width},n("line-chart",Object.assign({width:100*t.width},s,i)));case"world-map":return n("div",{class:"col--lg-"+t.width},n("world-map",Object.assign({width:100*t.width},s,i)));case"space":return n("div",{class:"col--lg-"+t.width});default:return}}renderCharts(){return this.chartContent.map(t=>this.drawChart(t))}render(){return n("div",{class:"row"},this.renderCharts())}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}"}};window.VisaChartsLibOSSLicenses=Lp();var Tp="http://www.w3.org/1999/xhtml";const Ep={svg:"http://www.w3.org/2000/svg",xhtml:Tp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Dp(t){var i=t+="",n=i.indexOf(":");return n>=0&&"xmlns"!==(i=t.slice(0,n))&&(t=t.slice(n+1)),Ep.hasOwnProperty(i)?{space:Ep[i],local:t}:t}function $p(t){return function(){var i=this.ownerDocument,n=this.namespaceURI;return n===Tp&&i.documentElement.namespaceURI===Tp?i.createElement(t):i.createElementNS(n,t)}}function Cp(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ip(t){var i=Dp(t);return(i.local?Cp:$p)(i)}function Op(){}function zp(t){return null==t?Op:function(){return this.querySelector(t)}}function Hp(){return[]}function _p(t){return null==t?Hp:function(){return this.querySelectorAll(t)}}function qp(t){return function(){return this.matches(t)}}function Xp(t){return new Array(t.length)}function Rp(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function jp(t,i,n,s,r,e){for(var h,o=0,u=i.length,a=e.length;o<a;++o)(h=i[o])?(h.__data__=e[o],s[o]=h):n[o]=new Rp(t,e[o]);for(;o<u;++o)(h=i[o])&&(r[o]=h)}function Pp(t,i,n,s,r,e,h){var o,u,a,c={},l=i.length,f=e.length,d=new Array(l);for(o=0;o<l;++o)(u=i[o])&&(d[o]=a="$"+h.call(u,u.__data__,o,i),a in c?r[o]=u:c[a]=u);for(o=0;o<f;++o)(u=c[a="$"+h.call(t,e[o],o,e)])?(s[o]=u,u.__data__=e[o],c[a]=null):n[o]=new Rp(t,e[o]);for(o=0;o<l;++o)(u=i[o])&&c[d[o]]===u&&(r[o]=u)}function Fp(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function Gp(t){return function(){this.removeAttribute(t)}}function Vp(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Yp(t,i){return function(){this.setAttribute(t,i)}}function Kp(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function Bp(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Up(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Zp(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Jp(t){return function(){this.style.removeProperty(t)}}function Qp(t,i,n){return function(){this.style.setProperty(t,i,n)}}function ty(t,i,n){return function(){var s=i.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function iy(t,i){return t.style.getPropertyValue(i)||Zp(t).getComputedStyle(t,null).getPropertyValue(i)}function ny(t){return function(){delete this[t]}}function sy(t,i){return function(){this[t]=i}}function ry(t,i){return function(){var n=i.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function ey(t){return t.trim().split(/^|\s+/)}function hy(t){return t.classList||new oy(t)}function oy(t){this._node=t,this._names=ey(t.getAttribute("class")||"")}function uy(t,i){for(var n=hy(t),s=-1,r=i.length;++s<r;)n.add(i[s])}function ay(t,i){for(var n=hy(t),s=-1,r=i.length;++s<r;)n.remove(i[s])}function cy(t){return function(){uy(this,t)}}function ly(t){return function(){ay(this,t)}}function fy(t,i){return function(){(i.apply(this,arguments)?uy:ay)(this,t)}}function dy(){this.textContent=""}function vy(t){return function(){this.textContent=t}}function py(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function yy(){this.innerHTML=""}function wy(t){return function(){this.innerHTML=t}}function gy(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function my(){this.nextSibling&&this.parentNode.appendChild(this)}function by(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function My(){return null}function ky(){var t=this.parentNode;t&&t.removeChild(this)}function Ay(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function xy(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}Rp.prototype={constructor:Rp,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},oy.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Wy={},Ny=null;function Ly(t,i,n){return t=Sy(t,i,n),function(i){var n=i.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,i)}}function Sy(t,i,n){return function(s){var r=Ny;Ny=s;try{t.call(this,this.__data__,i,n)}finally{Ny=r}}}function Ty(t){return t.trim().split(/^|\s+/).map((function(t){var i="",n=t.indexOf(".");return n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),{type:t,name:i}}))}function Ey(t){return function(){var i=this.__on;if(i){for(var n,s=0,r=-1,e=i.length;s<e;++s)n=i[s],t.type&&n.type!==t.type||n.name!==t.name?i[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?i.length=r:delete this.__on}}}function Dy(t,i,n){var s=Wy.hasOwnProperty(t.type)?Ly:Sy;return function(r,e,h){var o,u=this.__on,a=s(i,e,h);if(u)for(var c=0,l=u.length;c<l;++c)if((o=u[c]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=a,o.capture=n),void(o.value=i);this.addEventListener(t.type,a,n),o={type:t.type,name:t.name,value:i,listener:a,capture:n},u?u.push(o):this.__on=[o]}}function $y(t,i,n){var s=Zp(t),r=s.CustomEvent;"function"==typeof r?r=new r(i,n):(r=s.document.createEvent("Event"),n?(r.initEvent(i,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function Cy(t,i){return function(){return $y(this,t,i)}}function Iy(t,i){return function(){return $y(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Wy={mouseenter:"mouseover",mouseleave:"mouseout"}));var Oy=[null];function zy(t,i){this._groups=t,this._parents=i}function Hy(){return new zy([[document.documentElement]],Oy)}function _y(t){return"string"==typeof t?new zy([[document.querySelector(t)]],[document.documentElement]):new zy([[t]],Oy)}function qy(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}zy.prototype=Hy.prototype={constructor:zy,select:function(t){"function"!=typeof t&&(t=zp(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h,o=i[r],u=o.length,a=s[r]=new Array(u),c=0;c<u;++c)(e=o[c])&&(h=t.call(e,e.__data__,c,o))&&("__data__"in e&&(h.__data__=e.__data__),a[c]=h);return new zy(s,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=_p(t));for(var i=this._groups,n=i.length,s=[],r=[],e=0;e<n;++e)for(var h,o=i[e],u=o.length,a=0;a<u;++a)(h=o[a])&&(s.push(t.call(h,h.__data__,a,o)),r.push(h));return new zy(s,r)},filter:function(t){"function"!=typeof t&&(t=qp(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h=i[r],o=h.length,u=s[r]=[],a=0;a<o;++a)(e=h[a])&&t.call(e,e.__data__,a,h)&&u.push(e);return new zy(s,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),a=-1,this.each((function(t){d[++a]=t})),d;var n=i?Pp:jp,s=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),o=new Array(e),u=new Array(e),a=0;a<e;++a){var c=s[a],l=r[a],f=l.length,d=t.call(c,c&&c.__data__,a,s),v=d.length,p=o[a]=new Array(v),y=h[a]=new Array(v);n(c,l,p,y,u[a]=new Array(f),d,i);for(var w,g,m=0,b=0;m<v;++m)if(w=p[m]){for(m>=b&&(b=m+1);!(g=y[b])&&++b<v;);w._next=g||null}}return(h=new zy(h,s))._enter=o,h._exit=u,h},enter:function(){return new zy(this._enter||this._groups.map(Xp),this._parents)},exit:function(){return new zy(this._exit||this._groups.map(Xp),this._parents)},join:function(t,i,n){var s=this.enter(),r=this,e=this.exit();return s="function"==typeof t?t(s):s.append(t+""),null!=i&&(r=i(r)),null==n?e.remove():n(e),s&&r?s.merge(r).order():r},merge:function(t){for(var i=this._groups,n=t._groups,s=i.length,r=Math.min(s,n.length),e=new Array(s),h=0;h<r;++h)for(var o,u=i[h],a=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=u[f]||a[f])&&(l[f]=o);for(;h<s;++h)e[h]=i[h];return new zy(e,this._parents)},order:function(){for(var t=this._groups,i=-1,n=t.length;++i<n;)for(var s,r=t[i],e=r.length-1,h=r[e];--e>=0;)(s=r[e])&&(h&&4^s.compareDocumentPosition(h)&&h.parentNode.insertBefore(s,h),h=s);return this},sort:function(t){function i(i,n){return i&&n?t(i.__data__,n.__data__):!i-!n}t||(t=Fp);for(var n=this._groups,s=n.length,r=new Array(s),e=0;e<s;++e){for(var h,o=n[e],u=o.length,a=r[e]=new Array(u),c=0;c<u;++c)(h=o[c])&&(a[c]=h);a.sort(i)}return new zy(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var s=t[i],r=0,e=s.length;r<e;++r){var h=s[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,n=0,s=i.length;n<s;++n)for(var r,e=i[n],h=0,o=e.length;h<o;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var n=Dp(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((null==i?n.local?Vp:Gp:"function"==typeof i?n.local?Up:Bp:n.local?Kp:Yp)(n,i))},style:function(t,i,n){return arguments.length>1?this.each((null==i?Jp:"function"==typeof i?ty:Qp)(t,i,null==n?"":n)):iy(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?ny:"function"==typeof i?ry:sy)(t,i)):this.node()[t]},classed:function(t,i){var n=ey(t+"");if(arguments.length<2){for(var s=hy(this.node()),r=-1,e=n.length;++r<e;)if(!s.contains(n[r]))return!1;return!0}return this.each(("function"==typeof i?fy:i?cy:ly)(n,i))},text:function(t){return arguments.length?this.each(null==t?dy:("function"==typeof t?py:vy)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?yy:("function"==typeof t?gy:wy)(t)):this.node().innerHTML},raise:function(){return this.each(my)},lower:function(){return this.each(by)},append:function(t){var i="function"==typeof t?t:Ip(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var n="function"==typeof t?t:Ip(t),s=null==i?My:"function"==typeof i?i:zp(i);return this.select((function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)}))},remove:function(){return this.each(ky)},clone:function(t){return this.select(t?xy:Ay)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,n){var s,r,e=Ty(t+""),h=e.length;if(!(arguments.length<2)){for(o=i?Dy:Ey,null==n&&(n=!1),s=0;s<h;++s)this.each(o(e[s],i,n));return this}var o=this.node().__on;if(o)for(var u,a=0,c=o.length;a<c;++a)for(s=0,u=o[a];s<h;++s)if((r=e[s]).type===u.type&&r.name===u.name)return u.value},dispatch:function(t,i){return this.each(("function"==typeof i?Iy:Cy)(t,i))}};var Xy=function(t){return 1===t.length&&(t=function(t){return function(i,n){return qy(t(i),n)}}(t)),{left:function(i,n,s,r){for(null==s&&(s=0),null==r&&(r=i.length);s<r;){var e=s+r>>>1;t(i[e],n)<0?s=e+1:r=e}return s},right:function(i,n,s,r){for(null==s&&(s=0),null==r&&(r=i.length);s<r;){var e=s+r>>>1;t(i[e],n)>0?r=e:s=e+1}return s}}}(qy).right;function Ry(t,i,n){t=+t,i=+i,n=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+n;for(var s=-1,r=0|Math.max(0,Math.ceil((i-t)/n)),e=new Array(r);++s<r;)e[s]=t+s*n;return e}var jy=Math.sqrt(50),Py=Math.sqrt(10),Fy=Math.sqrt(2);function Gy(t,i,n){var s=(i-t)/Math.max(0,n),r=Math.floor(Math.log(s)/Math.LN10),e=s/Math.pow(10,r);return r>=0?(e>=jy?10:e>=Py?5:e>=Fy?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=jy?10:e>=Py?5:e>=Fy?2:1)}function Vy(t,i){var n,s,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(n=t[e])&&n>=n)for(s=n;++e<r;)null!=(n=t[e])&&n>s&&(s=n)}else for(;++e<r;)if(null!=(n=i(t[e],e,t))&&n>=n)for(s=n;++e<r;)null!=(n=i(t[e],e,t))&&n>s&&(s=n);return s}function Yy(t,i){var n,s,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(n=t[e])&&n>=n)for(s=n;++e<r;)null!=(n=t[e])&&s>n&&(s=n)}else for(;++e<r;)if(null!=(n=i(t[e],e,t))&&n>=n)for(s=n;++e<r;)null!=(n=i(t[e],e,t))&&s>n&&(s=n);return s}function Ky(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function By(){}function Uy(t,i){var n=new By;if(t instanceof By)t.each((function(t,i){n.set(i,t)}));else if(Array.isArray(t)){var s,r=-1,e=t.length;if(null==i)for(;++r<e;)n.set(r,t[r]);else for(;++r<e;)n.set(i(s=t[r],r,t),s)}else if(t)for(var h in t)n.set(h,t[h]);return n}function Zy(){return{}}function Jy(t,i,n){t[i]=n}function Qy(){return Uy()}function tw(t,i,n){t.set(i,n)}By.prototype=Uy.prototype={constructor:By,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var iw=Array.prototype.slice,nw={name:"implicit"};function sw(){var t=Uy(),i=[],n=[],s=nw;function r(r){var e=r+"",h=t.get(e);if(!h){if(s!==nw)return s;t.set(e,h=i.push(r))}return n[(h-1)%n.length]}return r.domain=function(n){if(!arguments.length)return i.slice();i=[],t=Uy();for(var s,e,h=-1,o=n.length;++h<o;)t.has(e=(s=n[h])+"")||t.set(e,i.push(s));return r},r.range=function(t){return arguments.length?(n=iw.call(t),r):n.slice()},r.unknown=function(t){return arguments.length?(s=t,r):s},r.copy=function(){return sw(i,n).unknown(s)},Ky.apply(r,arguments),r}function rw(){var t,i,n=sw().unknown(void 0),s=n.domain,r=n.range,e=[0,1],h=!1,o=0,u=0,a=.5;function c(){var n=s().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,n-o+2*u),h&&(t=Math.floor(t)),l+=(f-l-t*(n-o))*a,i=t*(1-o),h&&(l=Math.round(l),i=Math.round(i));var d=Ry(n).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(s(t),c()):s()},n.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},n.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},n.bandwidth=function(){return i},n.step=function(){return t},n.round=function(t){return arguments.length?(h=!!t,c()):h},n.padding=function(t){return arguments.length?(o=Math.min(1,u=+t),c()):o},n.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),c()):o},n.paddingOuter=function(t){return arguments.length?(u=+t,c()):u},n.align=function(t){return arguments.length?(a=Math.max(0,Math.min(1,t)),c()):a},n.copy=function(){return rw(s(),e).round(h).paddingInner(o).paddingOuter(u).align(a)},Ky.apply(c(),arguments)}function ew(t,i,n){t.prototype=i.prototype=n,n.constructor=t}function hw(t,i){var n=Object.create(t.prototype);for(var s in i)n[s]=i[s];return n}function ow(){}var uw="\\s*([+-]?\\d+)\\s*",aw="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",cw="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lw=/^#([0-9a-f]{3,8})$/,fw=new RegExp("^rgb\\("+[uw,uw,uw]+"\\)$"),dw=new RegExp("^rgb\\("+[cw,cw,cw]+"\\)$"),vw=new RegExp("^rgba\\("+[uw,uw,uw,aw]+"\\)$"),pw=new RegExp("^rgba\\("+[cw,cw,cw,aw]+"\\)$"),yw=new RegExp("^hsl\\("+[aw,cw,cw]+"\\)$"),ww=new RegExp("^hsla\\("+[aw,cw,cw,aw]+"\\)$"),gw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function mw(){return this.rgb().formatHex()}function bw(){return this.rgb().formatRgb()}function Mw(t){var i,n;return t=(t+"").trim().toLowerCase(),(i=lw.exec(t))?(n=i[1].length,i=parseInt(i[1],16),6===n?kw(i):3===n?new Nw(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===n?Aw(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===n?Aw(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=fw.exec(t))?new Nw(i[1],i[2],i[3],1):(i=dw.exec(t))?new Nw(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=vw.exec(t))?Aw(i[1],i[2],i[3],i[4]):(i=pw.exec(t))?Aw(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=yw.exec(t))?Ew(i[1],i[2]/100,i[3]/100,1):(i=ww.exec(t))?Ew(i[1],i[2]/100,i[3]/100,i[4]):gw.hasOwnProperty(t)?kw(gw[t]):"transparent"===t?new Nw(NaN,NaN,NaN,0):null}function kw(t){return new Nw(t>>16&255,t>>8&255,255&t,1)}function Aw(t,i,n,s){return s<=0&&(t=i=n=NaN),new Nw(t,i,n,s)}function xw(t){return t instanceof ow||(t=Mw(t)),t?new Nw((t=t.rgb()).r,t.g,t.b,t.opacity):new Nw}function Ww(t,i,n,s){return 1===arguments.length?xw(t):new Nw(t,i,n,null==s?1:s)}function Nw(t,i,n,s){this.r=+t,this.g=+i,this.b=+n,this.opacity=+s}function Lw(){return"#"+Tw(this.r)+Tw(this.g)+Tw(this.b)}function Sw(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Tw(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ew(t,i,n,s){return s<=0?t=i=n=NaN:n<=0||n>=1?t=i=NaN:i<=0&&(t=NaN),new $w(t,i,n,s)}function Dw(t){if(t instanceof $w)return new $w(t.h,t.s,t.l,t.opacity);if(t instanceof ow||(t=Mw(t)),!t)return new $w;if(t instanceof $w)return t;var i=(t=t.rgb()).r/255,n=t.g/255,s=t.b/255,r=Math.min(i,n,s),e=Math.max(i,n,s),h=NaN,o=e-r,u=(e+r)/2;return o?(h=i===e?(n-s)/o+6*(n<s):n===e?(s-i)/o+2:(i-n)/o+4,o/=u<.5?e+r:2-e-r,h*=60):o=u>0&&u<1?0:h,new $w(h,o,u,t.opacity)}function $w(t,i,n,s){this.h=+t,this.s=+i,this.l=+n,this.opacity=+s}function Cw(t,i,n){return 255*(t<60?i+(n-i)*t/60:t<180?n:t<240?i+(n-i)*(240-t)/60:i)}function Iw(t){return function(){return t}}function Ow(t,i){var n=i-t;return n?function(t,i){return function(n){return t+n*i}}(t,n):Iw(isNaN(t)?i:t)}ew(ow,Mw,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:mw,formatHex:mw,formatHsl:function(){return Dw(this).formatHsl()},formatRgb:bw,toString:bw}),ew(Nw,Ww,hw(ow,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Nw(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Nw(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lw,formatHex:Lw,formatRgb:Sw,toString:Sw})),ew($w,(function(t,i,n,s){return 1===arguments.length?Dw(t):new $w(t,i,n,null==s?1:s)}),hw(ow,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new $w(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new $w(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*i,r=2*n-s;return new Nw(Cw(t>=240?t-240:t+120,r,s),Cw(t,r,s),Cw(t<120?t+240:t-120,r,s),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const zw=function t(i){var n=function(t){return 1==(t=+t)?Ow:function(i,n){return n-i?function(t,i,n){return t=Math.pow(t,n),i=Math.pow(i,n)-t,n=1/n,function(s){return Math.pow(t+s*i,n)}}(i,n,t):Iw(isNaN(i)?n:i)}}(i);function s(t,i){var s=n((t=Ww(t)).r,(i=Ww(i)).r),r=n(t.g,i.g),e=n(t.b,i.b),h=Ow(t.opacity,i.opacity);return function(i){return t.r=s(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return s.gamma=t,s}(1);function Hw(t,i){return t=+t,i=+i,function(n){return t*(1-n)+i*n}}var _w=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qw=new RegExp(_w.source,"g");function Xw(t,i){var n,s,r,e=_w.lastIndex=qw.lastIndex=0,h=-1,o=[],u=[];for(t+="",i+="";(n=_w.exec(t))&&(s=qw.exec(i));)(r=s.index)>e&&(r=i.slice(e,r),o[h]?o[h]+=r:o[++h]=r),(n=n[0])===(s=s[0])?o[h]?o[h]+=s:o[++h]=s:(o[++h]=null,u.push({i:h,x:Hw(n,s)})),e=qw.lastIndex;return e<i.length&&(r=i.slice(e),o[h]?o[h]+=r:o[++h]=r),o.length<2?u[0]?function(t){return function(i){return t(i)+""}}(u[0].x):function(t){return function(){return t}}(i):(i=u.length,function(t){for(var n,s=0;s<i;++s)o[(n=u[s]).i]=n.x(t);return o.join("")})}var Rw,jw,Pw,Fw,Gw=180/Math.PI,Vw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Yw(t,i,n,s,r,e){var h,o,u;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(u=t*n+i*s)&&(n-=t*u,s-=i*u),(o=Math.sqrt(n*n+s*s))&&(n/=o,s/=o,u/=o),t*s<i*n&&(t=-t,i=-i,u=-u,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*Gw,skewX:Math.atan(u)*Gw,scaleX:h,scaleY:o}}function Kw(t,i,n,s){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var o=[],u=[];return e=t(e),h=t(h),function(t,s,r,e,h,o){if(t!==r||s!==e){var u=h.push("translate(",null,i,null,n);o.push({i:u-4,x:Hw(t,r)},{i:u-2,x:Hw(s,e)})}else(r||e)&&h.push("translate("+r+i+e+n)}(e.translateX,e.translateY,h.translateX,h.translateY,o,u),function(t,i,n,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:n.push(r(n)+"rotate(",null,s)-2,x:Hw(t,i)})):i&&n.push(r(n)+"rotate("+i+s)}(e.rotate,h.rotate,o,u),function(t,i,n,e){t!==i?e.push({i:n.push(r(n)+"skewX(",null,s)-2,x:Hw(t,i)}):i&&n.push(r(n)+"skewX("+i+s)}(e.skewX,h.skewX,o,u),function(t,i,n,s,e,h){if(t!==n||i!==s){var o=e.push(r(e)+"scale(",null,",",null,")");h.push({i:o-4,x:Hw(t,n)},{i:o-2,x:Hw(i,s)})}else 1===n&&1===s||e.push(r(e)+"scale("+n+","+s+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,o,u),e=h=null,function(t){for(var i,n=-1,s=u.length;++n<s;)o[(i=u[n]).i]=i.x(t);return o.join("")}}}var Bw=Kw((function(t){return"none"===t?Vw:(Rw||(Rw=document.createElement("DIV"),jw=document.documentElement,Pw=document.defaultView),Rw.style.transform=t,t=Pw.getComputedStyle(jw.appendChild(Rw),null).getPropertyValue("transform"),jw.removeChild(Rw),Yw(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Uw=Kw((function(t){return null==t?Vw:(Fw||(Fw=document.createElementNS("http://www.w3.org/2000/svg","g")),Fw.setAttribute("transform",t),(t=Fw.transform.baseVal.consolidate())?Yw((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Vw)}),", ",")",")");function Zw(t,i){if((n=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var n,s=t.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+t.slice(n+1)]}function Jw(t){return(t=Zw(Math.abs(t)))?t[1]:NaN}var Qw,tg=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ig(t){if(!(i=tg.exec(t)))throw new Error("invalid format: "+t);var i;return new ng({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function ng(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function sg(t,i){var n=Zw(t,i);if(!n)return t+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}ig.prototype=ng.prototype,ng.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const rg={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return sg(100*t,i)},r:sg,s:function(t,i){var n=Zw(t,i);if(!n)return t+"";var s=n[0],r=n[1],e=r-(Qw=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=s.length;return e===h?s:e>h?s+new Array(e-h+1).join("0"):e>0?s.slice(0,e)+"."+s.slice(e):"0."+new Array(1-e).join("0")+Zw(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function eg(t){return t}var hg,og,ug,ag=Array.prototype.map,cg=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function lg(t){var i=t.domain;return t.ticks=function(t){var n=i();return function(t,i,n){var s,r,e,h,o=-1;if(n=+n,(t=+t)==(i=+i)&&n>0)return[t];if((s=i<t)&&(r=t,t=i,i=r),0===(h=Gy(t,i,n))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++o<r;)e[o]=(t+o)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++o<r;)e[o]=(t-o)/h;return s&&e.reverse(),e}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var s=i();return function(t,i,n,s){var r,e=function(t,i,n){var s=Math.abs(i-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),e=s/r;return e>=jy?r*=10:e>=Py?r*=5:e>=Fy&&(r*=2),i<t?-r:r}(t,i,n);switch((s=ig(null==s?",f":s)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=s.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Jw(i)/3)))-Jw(Math.abs(t)))}(e,h))||(s.precision=r),ug(s,h);case"":case"e":case"g":case"p":case"r":null!=s.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,Jw(i)-Jw(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(s.precision=r-("e"===s.type));break;case"f":case"%":null!=s.precision||isNaN(r=function(t){return Math.max(0,-Jw(Math.abs(t)))}(e))||(s.precision=r-2*("%"===s.type))}return og(s)}(s[0],s[s.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var s,r=i(),e=0,h=r.length-1,o=r[e],u=r[h];return u<o&&(s=o,o=u,u=s,s=e,e=h,h=s),(s=Gy(o,u,n))>0?s=Gy(o=Math.floor(o/s)*s,u=Math.ceil(u/s)*s,n):s<0&&(s=Gy(o=Math.ceil(o*s)/s,u=Math.floor(u*s)/s,n)),s>0?(r[e]=Math.floor(o/s)*s,r[h]=Math.ceil(u/s)*s,i(r)):s<0&&(r[e]=Math.ceil(o*s)/s,r[h]=Math.floor(u*s)/s,i(r)),t},t}function fg(){var t,i=0,n=1,s=1,r=[.5],e=[0,1];function h(i){return i<=i?e[Xy(r,i,0,s)]:t}function o(){var t=-1;for(r=new Array(s);++t<s;)r[t]=((t+1)*n-(t-s)*i)/(s+1);return h}return h.domain=function(t){return arguments.length?(i=+t[0],n=+t[1],o()):[i,n]},h.range=function(t){return arguments.length?(s=(e=iw.call(t)).length-1,o()):e.slice()},h.invertExtent=function(t){var h=e.indexOf(t);return h<0?[NaN,NaN]:h<1?[i,r[0]]:h>=s?[r[s-1],n]:[r[h-1],r[h]]},h.unknown=function(i){return arguments.length?(t=i,h):h},h.thresholds=function(){return r.slice()},h.copy=function(){return fg().domain([i,n]).range(e).unknown(t)},Ky.apply(lg(h),arguments)}function dg(t){return 1-Math.sqrt(1-t*t)}hg=function(t){var i,n,s=void 0===t.grouping||void 0===t.thousands?eg:(i=ag.call(t.grouping,Number),n=t.thousands+"",function(t,s){for(var r=t.length,e=[],h=0,o=i[0],u=0;r>0&&o>0&&(u+o+1>s&&(o=Math.max(1,s-u)),e.push(t.substring(r-=o,r+o)),!((u+=o+1)>s));)o=i[h=(h+1)%i.length];return e.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?eg:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(ag.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",a=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=ig(t)).fill,n=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,g=t.type;"n"===g?(p=!0,g="g"):rg[g]||(void 0===y&&(y=12),w=!0,g="g"),(d||"0"===i&&"="===n)&&(d=!0,i="0",n="=");var m="$"===f?r:"#"===f&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===f?e:/[%p]/.test(g)?u:"",M=rg[g],k=/[defgprs%]/.test(g);function A(t){var r,e,u,f=m,A=b;if("c"===g)A=M(t)+A,t="";else{var x=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,n=t.length,s=1,r=-1;s<n;++s)switch(t[s]){case".":r=i=s;break;case"0":0===r&&(r=s),i=s;break;default:if(!+t[s])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),x&&0==+t&&"+"!==l&&(x=!1),f=(x?"("===l?l:a:"-"===l||"("===l?"":l)+f,A=("s"===g?cg[8+Qw/3]:"")+A+(x&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(u=t.charCodeAt(r))||u>57){A=(46===u?h+t.slice(r+1):t.slice(r))+A,t=t.slice(0,r);break}}p&&!d&&(t=s(t,1/0));var W=f.length+t.length+A.length,N=W<v?new Array(v-W+1).join(i):"";switch(p&&d&&(t=s(N+t,N.length?v-A.length:1/0),N=""),n){case"<":t=f+t+A+N;break;case"=":t=f+N+t+A;break;case"^":t=N.slice(0,W=N.length>>1)+f+t+A+N.slice(W);break;default:t=N+f+t+A}return o(t)}return y=void 0===y?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),A.toString=function(){return t+""},A}return{format:l,formatPrefix:function(t,i){var n=l(((t=ig(t)).type="f",t)),s=3*Math.max(-8,Math.min(8,Math.floor(Jw(i)/3))),r=Math.pow(10,-s),e=cg[8+s/3];return function(t){return n(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),og=hg.format,ug=hg.formatPrefix;const{propDefaultValues:vg}=r;class pg{}pg.mainTitle="Heat Map Title",pg.subTitle="This is the heat map's subtitle",pg.height=250,pg.width=500,pg.margin={top:2.5,bottom:2.5,right:5,left:5},pg.padding={top:20,bottom:30,right:60,left:80},pg.xAccessor="date",pg.yAccessor="category",pg.valueAccessor="value",pg.shape="rect",pg.hideAxisPath=vg.showBaselineFalse,pg.accessibility=vg.accessibility,pg.highestHeadingLevel=vg.highestHeadingLevel,pg.xAxis=vg.xAxis,pg.yAxis=vg.yAxis,pg.wrapLabel=vg.wrapLabel,pg.strokeWidth=vg.strokeWidth2,pg.colorPalette=vg.colorPaletteSequential,pg.colorSteps=vg.colorSteps5,pg.hoverStyle=vg.hoverStyle,pg.clickStyle=vg.clickStyle,pg.cursor=vg.cursor,pg.hoverOpacity=vg.hoverOpacity,pg.dataLabel=vg.dataLabel,pg.legend=vg.legend,pg.tooltipLabel=vg.tooltipLabel,pg.showTooltip=vg.showTooltip,pg.suppressEvents=vg.suppressEvents,pg.referenceLines=vg.referenceLines,pg.annotations=vg.annotations,pg.clickHighlight=vg.clickHighlight;var yg={value:function(){}};function wg(){for(var t,i=0,n=arguments.length,s={};i<n;++i){if(!(t=arguments[i]+"")||t in s||/[\s.]/.test(t))throw new Error("illegal type: "+t);s[t]=[]}return new gg(s)}function gg(t){this._=t}function mg(t,i){return t.trim().split(/^|\s+/).map((function(t){var n="",s=t.indexOf(".");if(s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function bg(t,i){for(var n,s=0,r=t.length;s<r;++s)if((n=t[s]).name===i)return n.value}function Mg(t,i,n){for(var s=0,r=t.length;s<r;++s)if(t[s].name===i){t[s]=yg,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=n&&t.push({name:i,value:n}),t}gg.prototype=wg.prototype={constructor:gg,on:function(t,i){var n,s=this._,r=mg(t+"",s),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(n=(t=r[e]).type)s[n]=Mg(s[n],t.name,i);else if(null==i)for(n in s)s[n]=Mg(s[n],t.name,null);return this}for(;++e<h;)if((n=(t=r[e]).type)&&(n=bg(s[n],t.name)))return n},copy:function(){var t={},i=this._;for(var n in i)t[n]=i[n].slice();return new gg(t)},call:function(t,i){if((n=arguments.length-2)>0)for(var n,s,r=new Array(n),e=0;e<n;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,n=(s=this._[t]).length;e<n;++e)s[e].value.apply(i,r)},apply:function(t,i,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],r=0,e=s.length;r<e;++r)s[r].value.apply(i,n)}};var kg,Ag,xg=0,Wg=0,Ng=0,Lg=0,Sg=0,Tg=0,Eg="object"==typeof performance&&performance.now?performance:Date,Dg="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $g(){return Sg||(Dg(Cg),Sg=Eg.now()+Tg)}function Cg(){Sg=0}function Ig(){this._call=this._time=this._next=null}function Og(t,i,n){var s=new Ig;return s.restart(t,i,n),s}function zg(){Sg=(Lg=Eg.now())+Tg,xg=Wg=0;try{!function(){$g(),++xg;for(var t,i=kg;i;)(t=Sg-i._time)>=0&&i._call.call(null,t),i=i._next;--xg}()}finally{xg=0,function(){for(var t,i,n=kg,s=1/0;n;)n._call?(s>n._time&&(s=n._time),t=n,n=n._next):(i=n._next,n._next=null,n=t?t._next=i:kg=i);Ag=t,_g(s)}(),Sg=0}}function Hg(){var t=Eg.now(),i=t-Lg;i>1e3&&(Tg-=i,Lg=t)}function _g(t){xg||(Wg&&(Wg=clearTimeout(Wg)),t-Sg>24?(t<1/0&&(Wg=setTimeout(zg,t-Eg.now()-Tg)),Ng&&(Ng=clearInterval(Ng))):(Ng||(Lg=Eg.now(),Ng=setInterval(Hg,1e3)),xg=1,Dg(zg)))}function qg(t,i,n){var s=new Ig;return s.restart((function(n){s.stop(),t(n+i)}),i=null==i?0:+i,n),s}Ig.prototype=Og.prototype={constructor:Ig,restart:function(t,i,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?$g():+n)+(null==i?0:+i),this._next||Ag===this||(Ag?Ag._next=this:kg=this,Ag=this),this._call=t,this._time=n,_g()},stop:function(){this._call&&(this._call=null,this._time=1/0,_g())}};var Xg=wg("start","end","interrupt"),Rg=[];function jg(t,i,n,s,r,e){var h=t.__transition;if(h){if(n in h)return}else t.__transition={};!function(t,i,n){var s,r=t.__transition;function e(u){var a,c,l,f;if(1!==n.state)return o();for(a in r)if((f=r[a]).name===n.name){if(3===f.state)return qg(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[a]):+a<i&&(f.state=6,f.timer.stop(),delete r[a])}if(qg((function(){3===n.state&&(n.state=4,n.timer.restart(h,n.delay,n.time),h(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,s=new Array(l=n.tween.length),a=0,c=-1;a<l;++a)(f=n.tween[a].value.call(t,t.__data__,n.index,n.group))&&(s[++c]=f);s.length=c+1}}function h(i){for(var r=i<n.duration?n.ease.call(null,i/n.duration):(n.timer.restart(o),n.state=5,1),e=-1,h=s.length;++e<h;)s[e].call(null,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){for(var s in n.state=6,n.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=n,n.timer=Og((function(t){n.state=1,n.timer.restart(e,n.delay,n.time),n.delay<=t&&e(t-n.delay)}),0,n.time)}(t,n,{name:i,index:s,group:r,on:Xg,tween:Rg,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function Pg(t,i){var n=Gg(t,i);if(n.state>0)throw new Error("too late; already scheduled");return n}function Fg(t,i){var n=Gg(t,i);if(n.state>2)throw new Error("too late; already started");return n}function Gg(t,i){var n=t.__transition;if(!n||!(n=n[i]))throw new Error("transition not found");return n}function Vg(t,i){var n,s;return function(){var r=Fg(this,t),e=r.tween;if(e!==n)for(var h=0,o=(s=n=e).length;h<o;++h)if(s[h].name===i){(s=s.slice()).splice(h,1);break}r.tween=s}}function Yg(t,i,n){var s,r;if("function"!=typeof n)throw new Error;return function(){var e=Fg(this,t),h=e.tween;if(h!==s){r=(s=h).slice();for(var o={name:i,value:n},u=0,a=r.length;u<a;++u)if(r[u].name===i){r[u]=o;break}u===a&&r.push(o)}e.tween=r}}function Kg(t,i,n){var s=t._id;return t.each((function(){var t=Fg(this,s);(t.value||(t.value={}))[i]=n.apply(this,arguments)})),function(t){return Gg(t,s).value[i]}}function Bg(t,i){var n;return("number"==typeof i?Hw:i instanceof Mw?zw:(n=Mw(i))?(i=n,zw):Xw)(t,i)}function Ug(t){return function(){this.removeAttribute(t)}}function Zg(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Jg(t,i,n){var s,r;return function(){var e=this.getAttribute(t);return e===n?null:e===s?r:r=i(s=e,n)}}function Qg(t,i,n){var s,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===n?null:e===s?r:r=i(s=e,n)}}function tm(t,i,n){var s,r,e;return function(){var h,o=n(this);if(null!=o)return(h=this.getAttribute(t))===o?null:h===s&&o===r?e:e=i(s=h,r=o);this.removeAttribute(t)}}function im(t,i,n){var s,r,e;return function(){var h,o=n(this);if(null!=o)return(h=this.getAttributeNS(t.space,t.local))===o?null:h===s&&o===r?e:e=i(s=h,r=o);this.removeAttributeNS(t.space,t.local)}}function nm(t,i){function n(){var n=this,s=i.apply(n,arguments);return s&&function(i){n.setAttributeNS(t.space,t.local,s(i))}}return n._value=i,n}function sm(t,i){function n(){var n=this,s=i.apply(n,arguments);return s&&function(i){n.setAttribute(t,s(i))}}return n._value=i,n}function rm(t,i){return function(){Pg(this,t).delay=+i.apply(this,arguments)}}function em(t,i){return i=+i,function(){Pg(this,t).delay=i}}function hm(t,i){return function(){Fg(this,t).duration=+i.apply(this,arguments)}}function om(t,i){return i=+i,function(){Fg(this,t).duration=i}}function um(t,i){if("function"!=typeof i)throw new Error;return function(){Fg(this,t).ease=i}}function am(t,i,n){var s,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?Pg:Fg;return function(){var h=e(this,t),o=h.on;o!==s&&(r=(s=o).copy()).on(i,n),h.on=r}}var cm=Hy.prototype.constructor;function lm(t,i,n){function s(){var s=this,r=i.apply(s,arguments);return r&&function(i){s.style.setProperty(t,r(i),n)}}return s._value=i,s}var fm=0;function dm(t,i,n,s){this._groups=t,this._parents=i,this._name=n,this._id=s}function vm(){return++fm}var pm=Hy.prototype;dm.prototype=function(t){return Hy().transition(t)}.prototype={constructor:dm,select:function(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=zp(t));for(var s=this._groups,r=s.length,e=new Array(r),h=0;h<r;++h)for(var o,u,a=s[h],c=a.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=a[f])&&(u=t.call(o,o.__data__,f,a))&&("__data__"in o&&(u.__data__=o.__data__),l[f]=u,jg(l[f],i,n,f,l,Gg(o,n)));return new dm(e,this._parents,i,n)},selectAll:function(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=_p(t));for(var s=this._groups,r=s.length,e=[],h=[],o=0;o<r;++o)for(var u,a=s[o],c=a.length,l=0;l<c;++l)if(u=a[l]){for(var f,d=t.call(u,u.__data__,l,a),v=Gg(u,n),p=0,y=d.length;p<y;++p)(f=d[p])&&jg(f,i,n,p,d,v);e.push(d),h.push(u)}return new dm(e,h,i,n)},filter:function(t){"function"!=typeof t&&(t=qp(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h=i[r],o=h.length,u=s[r]=[],a=0;a<o;++a)(e=h[a])&&t.call(e,e.__data__,a,h)&&u.push(e);return new dm(s,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,n=t._groups,s=i.length,r=Math.min(s,n.length),e=new Array(s),h=0;h<r;++h)for(var o,u=i[h],a=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=u[f]||a[f])&&(l[f]=o);for(;h<s;++h)e[h]=i[h];return new dm(e,this._parents,this._name,this._id)},selection:function(){return new cm(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,n=vm(),s=this._groups,r=s.length,e=0;e<r;++e)for(var h,o=s[e],u=o.length,a=0;a<u;++a)if(h=o[a]){var c=Gg(h,i);jg(h,t,n,a,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new dm(s,this._parents,t,n)},call:pm.call,nodes:pm.nodes,node:pm.node,size:pm.size,empty:pm.empty,each:pm.each,on:function(t,i){var n=this._id;return arguments.length<2?Gg(this.node(),n).on.on(t):this.each(am(n,t,i))},attr:function(t,i){var n=Dp(t),s="transform"===n?Uw:Bg;return this.attrTween(t,"function"==typeof i?(n.local?im:tm)(n,s,Kg(this,"attr."+t,i)):null==i?(n.local?Zg:Ug)(n):(n.local?Qg:Jg)(n,s,i+""))},attrTween:function(t,i){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;var s=Dp(t);return this.tween(n,(s.local?nm:sm)(s,i))},style:function(t,i,n){var s="transform"==(t+="")?Bw:Bg;return null==i?this.styleTween(t,function(t,i){var n,s,r;return function(){var e=iy(this,t),h=(this.style.removeProperty(t),iy(this,t));return e===h?null:e===n&&h===s?r:r=i(n=e,s=h)}}(t,s)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,n){var s,r,e;return function(){var h=iy(this,t),o=n(this);return null==o&&(this.style.removeProperty(t),o=iy(this,t)),h===o?null:h===s&&o===r?e:e=i(s=h,r=o)}}(t,s,Kg(this,"style."+t,i)):function(t,i,n){var s,r;return function(){var e=iy(this,t);return e===n?null:e===s?r:r=i(s=e,n)}}(t,s,i+""),n)},styleTween:function(t,i,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;return this.tween(s,lm(t,i,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(Kg(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var n in this.__transition)if(+n!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var n=this._id;if(t+="",arguments.length<2){for(var s,r=Gg(this.node(),n).tween,e=0,h=r.length;e<h;++e)if((s=r[e]).name===t)return s.value;return null}return this.each((null==i?Vg:Yg)(n,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?rm:em)(i,t)):Gg(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?hm:om)(i,t)):Gg(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(um(i,t)):Gg(this.node(),i).ease}};var ym={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function wm(t,i){for(var n;!(n=t.__transition)||!(n=n[i]);)if(!(t=t.parentNode))return ym.time=$g(),ym;return n}Hy.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var n,s,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(n=e[r]).name===i?(s=n.state>2&&n.state<5,n.state=6,n.timer.stop(),s&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},Hy.prototype.transition=function(t){var i,n;t instanceof dm?(i=t._id,t=t._name):(i=vm(),(n=ym).time=$g(),t=null==t?null:t+"");for(var s=this._groups,r=s.length,e=0;e<r;++e)for(var h,o=s[e],u=o.length,a=0;a<u;++a)(h=o[a])&&jg(h,t,i,a,o,n||wm(h,i));return new dm(s,this._parents,t,i)};var gm="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),mm=new Uint8Array(16);function bm(){if(!gm)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return gm(mm)}for(var Mm=[],km=0;km<256;++km)Mm[km]=(km+256).toString(16).substr(1);function Am(t,i,n){var s=i&&n||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||bm)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[s+e]=r[e];return i||function(t){var i=0;return[Mm[t[i++]],Mm[t[i++]],Mm[t[i++]],Mm[t[i++]],"-",Mm[t[i++]],Mm[t[i++]],"-",Mm[t[i++]],Mm[t[i++]],"-",Mm[t[i++]],Mm[t[i++]],"-",Mm[t[i++]],Mm[t[i++]],Mm[t[i++]],Mm[t[i++]],Mm[t[i++]],Mm[t[i++]]].join("")}(r)}const{calculateLuminance:xm,prepareStrokeColorsFromScheme:Wm,verifyTextHasSpace:Nm,checkAttributeTransitions:Lm,createTextStrokeFilter:Sm,drawHoverStrokes:Tm,removeHoverStrokes:Em,buildStrokes:Dm,convertColorsToTextures:$m,findTagLevel:Cm,initializeDescriptionRoot:Im,initializeElementAccess:Om,setElementFocusHandler:zm,setElementAccessID:Hm,setAccessibilityController:_m,hideNonessentialGroups:qm,setAccessTitle:Xm,setAccessSubtitle:Rm,setAccessLongDescription:jm,setAccessExecutiveSummary:Pm,setAccessPurpose:Fm,setAccessContext:Gm,setAccessStatistics:Vm,setAccessChartCounts:Ym,setAccessXAxis:Km,setAccessYAxis:Bm,setAccessStructure:Um,setAccessAnnotation:Zm,retainAccessFocus:Jm,checkAccessFocus:Qm,setElementInteractionAccessState:tb,setAccessibilityDescriptionWidth:ib,autoTextColor:nb,annotate:sb,chartAccessors:rb,checkInteraction:eb,checkClicked:hb,checkHovered:ob,convertVisaColor:ub,drawAxis:ab,drawLegend:cb,drawTooltip:lb,formatStats:fb,formatDate:db,getColors:vb,getLicenses:pb,getPadding:yb,getScopedData:wb,initTooltipStyle:gb,overrideTitleTooltip:mb,placeDataLabels:bb,scopeDataKeys:Mb,transitionEndAll:kb,validateAccessibilityProps:Ab}=r,xb=class{constructor(n){t(this,n),this.mainTitle=pg.mainTitle,this.subTitle=pg.subTitle,this.height=pg.height,this.width=pg.width,this.highestHeadingLevel=pg.highestHeadingLevel,this.margin=pg.margin,this.padding=pg.padding,this.xAccessor=pg.xAccessor,this.yAccessor=pg.yAccessor,this.valueAccessor=pg.valueAccessor,this.xAxis=pg.xAxis,this.yAxis=pg.yAxis,this.wrapLabel=pg.wrapLabel,this.hideAxisPath=pg.hideAxisPath,this.colorPalette=pg.colorPalette,this.colorSteps=pg.colorSteps,this.hoverStyle=pg.hoverStyle,this.clickStyle=pg.clickStyle,this.cursor=pg.cursor,this.shape=pg.shape,this.hoverOpacity=pg.hoverOpacity,this.strokeWidth=pg.strokeWidth,this.dataLabel=pg.dataLabel,this.showTooltip=pg.showTooltip,this.tooltipLabel=pg.tooltipLabel,this.accessibility=pg.accessibility,this.legend=pg.legend,this.annotations=pg.annotations,this.clickHighlight=pg.clickHighlight,this.suppressEvents=pg.suppressEvents,this.shouldValidateAccessibility=!0,this.nest=[],this.datakeys=[],this.updated=!0,this.shouldValidate=!1,this.shouldUpdateData=!1,this.shouldSetDimensions=!1,this.shouldUpdateTableData=!1,this.shouldUpdateScales=!1,this.shouldResetRoot=!1,this.shouldSetColors=!1,this.shouldValidateInteractionKeys=!1,this.shouldFormatClickHighlight=!1,this.shouldFormatHoverHighlight=!1,this.shouldUpdateAnnotations=!1,this.shouldUpdateXAxis=!1,this.shouldUpdateYAxis=!1,this.shouldSetGlobalSelections=!1,this.shouldEnterUpdateExit=!1,this.shouldUpdateGeometries=!1,this.shouldSetSelectionClass=!1,this.shouldDrawInteractionState=!1,this.shouldUpdateLegend=!1,this.shouldUpdateCursor=!1,this.shouldBindInteractivity=!1,this.shouldUpdateLabels=!1,this.shouldSetLabelOpacity=!1,this.shouldSwapXAxis=!1,this.shouldSwapYAxis=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldSetTextures=!1,this.shouldSetStrokes=!1,this.strokes={},this.topLevel="h2",this.bottomLevel="p",this.textTreatmentHandler=(t,i,n)=>{const s=!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.fillColors(t.valueAccessor):this.rawHeat(t.valueAccessor),r=nb(s),e=_y(n[i]);return e.attr("filter",e.classed("textIsMoving")?null:Sm({root:this.svg.node(),id:this.chartID,color:s})),r},this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}dataWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateScales=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldValidate=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetXAxisAccessibility=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0,this.shouldSetLabelOpacity=!0}idWatcher(t,i){this.chartID=t,this.heatMapEl.id=this.chartID,this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateLegend=!0,this.shouldSetTextures=!0,this.shouldDrawInteractionState=!0,this.shouldSetStrokes=!0}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}titleWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subtitleWatcher(t,i){this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}layoutWatcher(t,i){this.shouldSetDimensions=!0,this.shouldUpdateScales=!0,this.shouldSetTextures=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetLabelOpacity=!0}xAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldFormatClickHighlight=!0,this.shouldFormatHoverHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetXAxisAccessibility=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0,this.shouldSetLabelOpacity=!0}yAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldFormatClickHighlight=!0,this.shouldFormatHoverHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0,this.shouldSetLabelOpacity=!0}groupAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldUpdateTableData=!0,this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateLabels=!0,this.shouldSetGeometryAriaLabels=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0),this.shouldSetTextures=!0,this.shouldSetStrokes=!0}xKeyOrderWatcher(t,i){this.shouldUpdateData=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetXAxisAccessibility=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0}yKeyOrderWatcher(t,i){this.shouldUpdateData=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0}xAxisWatcher(t,i){const n=!(!t||!t.placement)&&t.placement,s=!(!i||!i.placement)&&i.placement;(!(!t||!t.format)&&t.format)!==(!(!i||!i.format)&&i.format)&&(this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldSetTextures=!0,this.shouldSetGlobalSelections=!0,this.shouldFormatClickHighlight=!0,this.shouldFormatHoverHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0),n!==s&&(this.shouldSwapXAxis=!0),this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0}yAxisWatcher(t,i){const n=!(!t||!t.placement)&&t.placement,s=!(!i||!i.placement)&&i.placement;(!(!t||!t.format)&&t.format)!==(!(!i||!i.format)&&i.format)&&(this.shouldUpdateData=!0,this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldSetTextures=!0,this.shouldSetGlobalSelections=!0,this.shouldFormatClickHighlight=!0,this.shouldFormatHoverHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0),n!==s&&(this.shouldSwapYAxis=!0),this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0}wrapLabelWatcher(t,i){this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0}hideAxisPathWatcher(t,i){this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0}colorsWatcher(t,i){this.shouldSetColors=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLegend=!0,this.shouldDrawInteractionState=!0,this.shouldSetTextures=!0,this.shouldSetStrokes=!0}hoverStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0}clickStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0}shapeWatcher(t,i){this.shouldUpdateGeometries=!0}cursorWatcher(t,i){this.shouldUpdateCursor=!0}strokeWidthWatcher(t,i){this.shouldUpdateGeometries=!0,this.shouldUpdateScales=!0,this.shouldSetTextures=!0,this.shouldUpdateGeometries=!0,this.shouldSetStrokes=!0}hoverOpacityWatcher(t,i){this.shouldSetLabelOpacity=!0,this.shouldDrawInteractionState=!0}labelWatcher(t,i){this.shouldUpdateLabels=!0,this.shouldUpdateTableData=!0,(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetLabelOpacity=!0)}showTooltipWatcher(t,i){}tooltipLabelWatcher(t,i){this.shouldUpdateTableData=!0}legendWatcher(t,i){this.shouldUpdateLegend=!0}suppressWatcher(t,i){this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}annotationsWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0,this.shouldSetAnnotationAccessibility=!0}accessibilityWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const n=t&&t.includeDataKeyNames,s=i&&i.includeDataKeyNames;n===s&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(n!==s&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.hideTextures)&&t.hideTextures)===(!(!i||!i.hideTextures)&&i.hideTextures)&&(!(!t||!t.showExperimentalTextures)&&t.showExperimentalTextures)===(!(!i||!i.showExperimentalTextures)&&i.showExperimentalTextures)||(this.shouldSetTextures=!0,this.shouldUpdateLegend=!0,this.shouldSetStrokes=!0,this.shouldDrawInteractionState=!0),(!(!t||!t.showSmallLabels)&&t.showSmallLabels)!==(!(!i||!i.showSmallLabels)&&i.showSmallLabels)&&(this.shouldSetLabelOpacity=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!i||!i.hideStrokes)&&i.hideStrokes)&&(this.shouldUpdateLegend=!0,this.shouldSetStrokes=!0,this.shouldDrawInteractionState=!0);const r=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,e=!(!i||!i.elementsAreInterface)&&i.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled)&&i.keyboardNavConfig.disabled)&&r===e||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),r!==e&&(this.shouldSetSelectionClass=!0)}valueOverrideWatcher(t,i){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateAnnotations=!0,this.shouldSetTextures=!0}clickWatcher(t,i){this.shouldFormatClickHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0}hoverWatcher(t,i){this.shouldFormatHoverHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0}interactionWatcher(t,i){this.shouldValidateInteractionKeys=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateTableData=!0,this.shouldSetGeometryAriaLabels=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.defaults=!0,this.chartID=this.uniqueID||"heat-map-"+Am(),this.heatMapEl.id=this.chartID,this.setTagLevels(),this.prepareData(),this.setDimensions(),this.setColors(),this.prepareScales(),this.validateInteractionKeys(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.formatClickHighlight(),this.formatHoverHighlight(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.renderRootElements(),this.setTooltipInitialStyle(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.setTextures(),this.setStrokes(),this.setGlobalSelections(),this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.drawGeometries(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawDataLabels(),this.drawLegendElements(),this.setSelectedClass(),this.updateInteractionState(),this.bindInteractivity(),this.drawAnnotations(),this.setAnnotationAccessibility(),this.drawXAxis(),this.setXAxisAccessibility(),this.drawYAxis(),this.setYAxisAccessibility(),qm(this.root.node(),this.map.node()),this.setGroupAccessibilityID(),this.onChangeHandler(),this.duration=750,this.defaults=!1,t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldSetTextures&&(this.setTextures(),this.shouldSetTextures=!1),this.shouldSetStrokes&&(this.setStrokes(),this.shouldSetStrokes=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldEnterUpdateExit&&(this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateGeometries&&(this.drawGeometries(),this.shouldUpdateGeometries=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldUpdateLabels&&(this.drawDataLabels(),this.shouldUpdateLabels=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldSwapXAxis&&(this.drawXAxis(!0),this.shouldSwapXAxis=!1),this.shouldSwapYAxis&&(this.drawYAxis(!0),this.shouldSwapYAxis=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.onChangeHandler(),t("component did update")})}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,Ab(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:this.suppressEvents?void 0:this.clickFunc.emit}}))}formatClickHighlight(){this.clickHighlight&&this.clickHighlight.map(t=>{t.xAccessor&&t.yAccessor||(t.xAccessor=t[this.xAccessor]instanceof Date?db({date:t[this.xAccessor],format:this.xAxis.format,offsetTimezone:!0}):t[this.xAccessor],t.yAccessor=t[this.yAccessor]instanceof Date?db({date:t[this.yAccessor],format:this.yAxis.format,offsetTimezone:!0}):t[this.yAccessor])})}formatHoverHighlight(){this.hoverHighlight&&(this.hoverHighlight.xAccessor&&this.hoverHighlight.yAccessor||(this.hoverHighlight.xAccessor=this.hoverHighlight[this.xAccessor]instanceof Date?db({date:this.hoverHighlight[this.xAccessor],format:this.xAxis.format,offsetTimezone:!0}):this.hoverHighlight[this.xAccessor],this.hoverHighlight.yAccessor=this.hoverHighlight[this.yAccessor]instanceof Date?db({date:this.hoverHighlight[this.yAccessor],format:this.yAxis.format,offsetTimezone:!0}):this.hoverHighlight[this.yAccessor]))}setDimensions(){this.padding="string"==typeof this.padding?yb(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}validateInteractionKeys(){if(this.interactionKeys&&this.interactionKeys.length){if(this.interactionKeys.includes(this.xAccessor)||this.interactionKeys.includes(this.yAccessor)){const t=[];this.interactionKeys.map(i=>{t.push(i===this.xAccessor?"xAccessor":i===this.yAccessor?"yAccessor":i)}),this.innerInteractionKeys=t}}else this.innerInteractionKeys=["xAccessor","yAccessor"]}prepareScales(){const t=(this.minValueOverride||0===this.minValueOverride)&&this.minValueOverride<Yy(this.preppedData,t=>t.valueAccessor)?this.minValueOverride:Yy(this.preppedData,t=>t.valueAccessor),i=(this.maxValueOverride||0===this.maxValueOverride)&&this.maxValueOverride>Vy(this.preppedData,t=>t.valueAccessor)?this.maxValueOverride:Vy(this.preppedData,t=>t.valueAccessor);this.x=rw().domain(this.xKeyOrder?this.xKeyOrder:this.preppedData.map(t=>t.xAccessor)).range([0,this.innerPaddedWidth]),this.x.padding(this.strokeWidth?this.strokeWidth/this.x.bandwidth():0),this.y=rw().domain(this.yKeyOrder?this.yKeyOrder:this.preppedData.map(t=>t.yAccessor)).range([0,this.innerPaddedHeight]),this.y.padding(this.strokeWidth?this.strokeWidth/this.y.bandwidth():0),this.heat=fg().domain([t,i]);const n=[],s=[];let r=0;const e=Math.ceil(this.preparedColors.length/2),h=this.colorPalette&&this.colorPalette.includes("diverging"),o=this.colorPalette&&this.colorPalette.includes("dark");this.preparedColors.forEach(t=>{const i=Wm(t,r,this.preparedColors,h?"diverging":"sequential");if(h){const t=xm(i.fillColor),e=xm(i.textureColor),h=t>e?i.textureColor:i.fillColor,u=t<e?i.textureColor:i.fillColor;this.preparedColors.length%2&&r===(this.preparedColors.length-1)/2?(s.push(o?h:u),n.push(o?u:h)):(n.push(o?h:u),s.push(o?u:h))}else r+1<e?(s.push(this.preparedColors[0]),n.push(this.preparedColors[this.preparedColors.length-1])):(n.push(this.preparedColors[0]),s.push(this.preparedColors[this.preparedColors.length-1]));r++}),this.fillColors=fg().domain([t,i]).range(s),this.strokeColors=fg().domain([t,i]).range(n),this.rawHeat=fg().domain([t,i]).range(this.preparedColors),this.updateCheck=!0}setColors(){this.preparedColors=this.colors?ub(this.colors):vb(this.colorPalette,this.colorSteps)}setTextures(){const t=this.colorPalette&&this.colorPalette.includes("diverging")?"diverging":"sequential";if(this.accessibility.hideTextures||this.colorSteps>("diverging"===t?11:9)||!this.accessibility.showExperimentalTextures)this.colorArr=this.preparedColors;else{const i=$m({colors:this.preparedColors,rootSVG:this.svg.node(),id:this.chartID,scheme:t});this.colorArr=i}this.heat.range(this.colorArr)}setStrokes(){const t=Object.assign(Object.assign({},this.clickStyle),{color:void 0}),i=Object.assign(Object.assign({},this.hoverStyle),{color:void 0});this.strokes=Dm({root:this.svg.node(),id:this.chartID,colors:!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.fillColors.range():this.preparedColors,clickStyle:t,hoverStyle:i,strokeOverride:!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.strokeColors.range():void 0})}setTableData(){const t=Mb(this,rb,"heat-map");this.tableData=wb(this.data,t),this.tableColumns=Object.keys(t)}prepareData(){if(this.updateCheck){this.interpolating=this.preppedData;const t=this.x.domain(),i=this.x.range(),n=this.y.domain(),s=this.y.range();this.interpolating.x=rw().domain(t).range(i),this.interpolating.y=rw().domain(n).range(s)}this.preppedData=this.data.map(t=>{const i=Object.assign({},t);return i.valueAccessor=parseFloat(t[this.valueAccessor]),i.xAccessor=t[this.xAccessor]instanceof Date?db({date:t[this.xAccessor],format:this.xAxis.format,offsetTimezone:!0}):t[this.xAccessor],i.yAccessor=t[this.yAccessor]instanceof Date?db({date:t[this.yAccessor],format:this.yAxis.format,offsetTimezone:!0}):t[this.yAccessor],i}),this.nest=function(){var t,i,n,s=[],r=[];function e(n,r,h,o){if(r>=s.length)return null!=t&&n.sort(t),null!=i?i(n):n;for(var u,a,c,l=-1,f=n.length,d=s[r++],v=Uy(),p=h();++l<f;)(c=v.get(u=d(a=n[l])+""))?c.push(a):v.set(u,[a]);return v.each((function(t,i){o(p,i,e(t,r,h,o))})),p}return n={object:function(t){return e(t,0,Zy,Jy)},map:function(t){return e(t,0,Qy,tw)},entries:function(t){return function t(n,e){if(++e>s.length)return n;var h,o=r[e-1];return null!=i&&e>=s.length?h=n.entries():(h=[],n.each((function(i,n){h.push({key:n,values:t(i,e)})}))),null!=o?h.sort((function(t,i){return o(t.key,i.key)})):h}(e(t,0,Qy,tw),0)},key:function(t){return s.push(t),n},sortKeys:function(t){return r[s.length-1]=t,n},sortValues:function(i){return t=i,n},rollup:function(t){return i=t,n}}}().key(t=>t[this.yAccessor]).entries(this.preppedData),this.datakeys=this.nest.map(t=>t.key)}reSetRoot(){this.svg.transition("root_reset").duration(this.duration).ease(dg).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root.transition("root_reset").duration(this.duration).ease(dg).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),this.rootG.transition("root_reset").duration(this.duration).ease(dg).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),ib(this.chartID,this.width)}drawXAxis(t){ab({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,top:"top"===this.xAxis.placement,wrapLabel:this.wrapLabel?this.x.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:t||!this.xAxis.visible,hidePath:this.hideAxisPath})}drawYAxis(t){ab({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:"right"!==this.yAxis.placement,right:"right"===this.yAxis.placement,format:this.yAxis.format,wrapLabel:this.wrapLabel?this.padding.left||100:"",tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:t||!this.yAxis.visible,hidePath:this.hideAxisPath})}setXAxisAccessibility(){Km({rootEle:this.heatMapEl,hasXAxis:!!this.xAxis&&this.xAxis.visible,xAxis:this.x||!1,xAxisLabel:this.xAxis&&this.xAxis.label||""})}setYAxisAccessibility(){Bm({rootEle:this.heatMapEl,hasYAxis:!!this.yAxis&&this.yAxis.visible,yAxis:this.y||!1,yAxisLabel:this.yAxis&&this.yAxis.label||""})}renderRootElements(){this.svg=_y(this.heatMapEl).select(".visa-viz-d3-heat-map-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.map=this.rootG.append("g").attr("class","map-group"),this.labelG=this.rootG.append("g").attr("class","heat-map-dataLabel-group"),this.legendG=_y(this.heatMapEl).select(".heat-map-legend").append("svg"),this.tooltipG=_y(this.heatMapEl).select(".heat-map-tooltip")}setGlobalSelections(){this.xAxisElement=this.rootG.selectAll(".bottom");const t=this.map.selectAll(".row").data(this.nest,t=>t.key);this.enterRowWrappers=t.enter().append("g"),this.exitRowWrappers=t.exit(),this.updateRowWrappers=t.merge(this.enterRowWrappers);const i=this.updateRowWrappers.selectAll(".grid").data(t=>t.values,t=>t.xAccessor+t.yAccessor);this.enter=i.enter().append("rect"),this.exit=i.exit(),this.update=i.merge(this.enter),this.exitSize=this.exit.size(),this.enterSize=this.enter.size(),this.exitSize+=this.exitRowWrappers.selectAll(".grid").size();const n=this.labelG.selectAll("g").data(this.nest,t=>t.key);this.enteringLabelGroups=n.enter().append("g"),this.exitingLabelGroups=n.exit(),this.updatingLabelGroups=n.merge(this.enteringLabelGroups);const s=this.updatingLabelGroups.selectAll("text").data(t=>t.values,t=>t.xAccessor+t.yAccessor);this.enterLabels=s.enter().append("text"),this.exitLabels=s.exit(),this.updateLabels=s.merge(this.enterLabels)}enterGeometries(){this.enter.interrupt(),this.enterRowWrappers.attr("class","row").classed("entering",!0).attr("cursor",this.suppressEvents?null:this.cursor).each((t,i,n)=>{Om(n[i])}),this.enter.attr("class","grid").each((t,i,n)=>{Om(n[i])}).on("click",this.suppressEvents?null:t=>{this.onClickHandler(t)}).on("mouseover",this.suppressEvents?null:t=>{this.onHoverHandler(t)}).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("opacity",0).attr("y",t=>{if(this.interpolating&&void 0===this.interpolating.y(t.yAccessor)){let i=this.y(t.yAccessor);return i+=this.y.bandwidth()*(i/this.y(this.y.domain()[0])),i}return this.interpolating?this.interpolating.y(t.yAccessor):this.y(t.yAccessor)}).attr("height",t=>this.interpolating&&void 0===this.interpolating.y(t.yAccessor)?0:this.interpolating?this.interpolating.y.bandwidth():this.y.bandwidth()).attr("x",t=>{if(this.interpolating&&void 0===this.interpolating.x(t.xAccessor)){let i=this.x(t.xAccessor);return i+=this.x.bandwidth()*(i/this.x(this.x.domain()[this.x.domain().length-1])),i}return this.interpolating?this.interpolating.x(t.xAccessor):this.x(t.xAccessor)}).attr("width",t=>this.interpolating&&void 0===this.interpolating.x(t.xAccessor)?0:this.interpolating?this.interpolating.x.bandwidth():this.x.bandwidth()).attr("rx","circle"===this.shape?this.x.bandwidth():0).attr("ry","circle"===this.shape?this.y.bandwidth():0),this.update.order(),this.enterRowWrappers.order()}updateGeometries(){this.update.interrupt(),this.update.transition("opacity").duration((t,i,n)=>_y(n[i]).classed("entering")?(_y(n[i]).classed("entering",!1),this.duration):0).ease(dg).attr("opacity",t=>eb(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))}exitGeometries(){this.exit.interrupt(),this.exit.transition("exit").duration(this.duration).ease(dg).attr("opacity",0).attr("y",(t,i,n)=>{if(void 0===this.y(t.yAccessor)){const t=_y(n[i]);let s=+t.attr("y");return s+=+t.attr("height")*(s/this.y(this.y.domain()[0])),s}return this.y(t.yAccessor)}).attr("height",t=>void 0===this.y(t.yAccessor)?0:this.y.bandwidth()).attr("x",(t,i,n)=>{if(void 0===this.x(t.xAccessor)){const t=_y(n[i]);let s=+t.attr("x");return s+=+t.attr("width")*(s/this.x(this.x.domain()[this.x.domain().length-1])),s}return this.x(t.xAccessor)}).attr("width",t=>void 0===this.x(t.xAccessor)?0:this.x.bandwidth()),this.exitRowWrappers.selectAll(".grid").transition("exit").duration(this.duration).ease(dg).attr("opacity",0).attr("y",(t,i,n)=>{const s=_y(n[i]);let r=+s.attr("y");return r+=+s.attr("height")*(r/this.y(this.y.domain()[0])),r}).attr("height",0).attr("x",(t,i,n)=>{if(void 0===this.x(t.xAccessor)){const t=_y(n[i]);let s=+t.attr("x");return s+=+t.attr("width")*(s/this.x(this.x.domain()[this.x.domain().length-1])),s}return this.x(t.xAccessor)}).attr("width",t=>void 0===this.x(t.xAccessor)?0:this.x.bandwidth()),this.update.transition("accessibilityAfterExit").duration(this.duration).ease(dg).call(kb,()=>{const t=Qm(this.rootG.node());this.exit.remove(),this.exitRowWrappers.remove(),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),Jm({parentGNode:this.rootG.node(),focusDidExist:t})})}drawGeometries(){this.updateRowWrappers.transition("update").duration(this.duration).ease(dg).call(kb,()=>{this.updateRowWrappers.classed("entering",!1)});const t=this.update.classed("geometryIsMoving",(t,i,n)=>Lm(_y(n[i]),[{attr:"y",numeric:!0,newValue:this.y(t.yAccessor)},{attr:"height",numeric:!0,newValue:this.y.bandwidth()},{attr:"x",numeric:!0,newValue:this.x(t.xAccessor)},{attr:"width",numeric:!0,newValue:this.x.bandwidth()},{attr:"rx",numeric:!0,newValue:"circle"===this.shape?this.x.bandwidth():0},{attr:"ry",numeric:!0,newValue:"circle"===this.shape?this.y.bandwidth():0}])).transition("update").duration(this.duration).ease(dg).attr("y",t=>this.y(t.yAccessor)).attr("height",this.y.bandwidth()).attr("x",t=>this.x(t.xAccessor)).attr("width",this.x.bandwidth()).attr("rx","circle"===this.shape?this.x.bandwidth():0).attr("ry","circle"===this.shape?this.y.bandwidth():0);!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures||t.attr("fill",t=>this.heat(t[this.valueAccessor])),t.call(kb,()=>{this.update.classed("geometryIsMoving",!1),this.updateInteractionState(),Jm({parentGNode:this.rootG.node()})})}updateInteractionState(){Em(this.svg.node()),this.update.attr("fill",t=>this.heat(t[this.valueAccessor])).attr("opacity",t=>eb(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)).attr("filter",(t,i,n)=>{if(!this.accessibility.hideStrokes&&!_y(n[i]).classed("geometryIsMoving")){const s=this.clickHighlight&&this.clickHighlight.length>0&&hb(t,this.clickHighlight,this.innerInteractionKeys),r=this.hoverHighlight&&ob(t,this.hoverHighlight,this.innerInteractionKeys),e=!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.fillColors(t[this.valueAccessor]):this.rawHeat(t[this.valueAccessor]),h=!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.strokeColors(t[this.valueAccessor]):void 0,o=s?"click":r&&!_y(n[i]).classed("geometryIsMoving")?"hover":"rest";return"hover"===o&&Tm({inputElement:n[i],id:this.chartID,key:t[this.xAccessor]+t[this.yAccessor],strokeWidth:this.hoverStyle.strokeWidth,fill:e,strokeOverride:h}),this.strokes[o+e]}return null}),Jm({parentGNode:this.rootG.node()}),this.updateLabels.attr("fill",this.textTreatmentHandler)}setLabelOpacity(){this.processLabelOpacity(this.updateLabels)}processLabelOpacity(t,i){const n=this.dataLabel.visible?1:0,s={width:this.x.bandwidth(),height:this.y.bandwidth()},r=t=>{let i=this.dataLabel.labelAccessor?t[this.dataLabel.labelAccessor]:t.valueAccessor;return i=i instanceof Date?db({date:i,format:this.dataLabel.format,offsetTimezone:!0}):fb(i,this.dataLabel.format),this.accessibility.showSmallLabels||Nm({text:i,dimensions:s,fontSize:14})?eb(t,n,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:0};i?t.attr("opacity",r):t.each((t,i,n)=>{_y(n[i]).classed("entering")||_y(n[i]).attr("opacity",()=>r(t))})}setSelectedClass(){this.update.classed("highlight",(t,i,n)=>{let s=eb(t,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);return s=!(!this.clickHighlight||!this.clickHighlight.length)&&s,tb(n[i],s,this.accessibility.elementsAreInterface),s})}updateCursor(){this.update.attr("cursor",this.suppressEvents?null:this.cursor),this.updateLabels.attr("cursor",this.suppressEvents?null:this.cursor)}bindInteractivity(){this.update.on("click",this.suppressEvents?null:t=>{this.onClickHandler(t)}).on("mouseover",this.suppressEvents?null:t=>{this.onHoverHandler(t)}).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updateLabels.on("click",this.dataLabel.visible&&!this.suppressEvents?t=>this.onClickHandler(t):null).on("mouseover",this.dataLabel.visible&&!this.suppressEvents?t=>this.onHoverHandler(t):null).on("mouseout",this.dataLabel.visible&&!this.suppressEvents?()=>this.onMouseOutHandler():null)}enterDataLabels(){this.enteringLabelGroups.attr("class","heat-map-label-wrapper"),this.enterLabels.attr("class","heat-map-dataLabel entering").attr("opacity",0).attr("fill",this.textTreatmentHandler).attr("cursor",this.suppressEvents?null:this.cursor).on("click",this.dataLabel.visible&&!this.suppressEvents?t=>this.onClickHandler(t):null).on("mouseover",this.dataLabel.visible&&!this.suppressEvents?t=>this.onHoverHandler(t):null).on("mouseout",this.dataLabel.visible&&!this.suppressEvents?()=>this.onMouseOutHandler():null),bb({root:this.enterLabels,xScale:this.x,yScale:this.y,ordinalAccessor:"xAccessor",valueAccessor:"yAccessor",chartType:"heat-map"})}updateDataLabels(){const t=this.updateLabels.transition("opacity").ease(dg).duration((t,i,n)=>_y(n[i]).classed("entering")?this.duration/2:0).delay((t,i,n)=>_y(n[i]).classed("entering")?this.duration/2:0);this.processLabelOpacity(t,!0),t.call(kb,()=>{this.updateLabels.classed("entering",!1)})}exitDataLabels(){this.exitLabels.transition("exit").ease(dg).duration(this.duration/2).attr("opacity",0).remove(),this.exitingLabelGroups.selectAll("text").transition("exit").ease(dg).duration(this.duration/2).attr("opacity",0).call(kb,()=>{this.exitingLabelGroups.remove()})}drawDataLabels(){this.updateLabels.attr("fill",this.textTreatmentHandler).text(t=>{const i=this.dataLabel.labelAccessor?t[this.dataLabel.labelAccessor]:t.valueAccessor;return i instanceof Date?db({date:i,format:this.dataLabel.format,offsetTimezone:!0}):fb(i,this.dataLabel.format)});const t=this.updateLabels.transition("update").ease(dg).duration(this.duration);bb({root:t,xScale:this.x,yScale:this.y,ordinalAccessor:"xAccessor",valueAccessor:"yAccessor",chartType:"heat-map"})}drawLegendElements(){cb({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.bottom+60,colorArr:this.legend&&"gradient"!==this.legend.type?this.colorArr:this.preparedColors,baseColorArr:this.colorPalette&&this.colorPalette.includes("diverging")?this.strokeColors.range():[this.preparedColors[this.preparedColors.length-1]],hideStrokes:this.accessibility.hideStrokes,scale:this.heat,steps:this.colorSteps,margin:this.margin,padding:this.padding,duration:this.duration,type:this.legend.type,fontSize:12,label:this.legend.labels,format:this.legend.format,hide:!this.legend.visible})}drawAnnotations(){sb({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.xAccessor,yScale:this.y,yAccessor:this.yAccessor})}setAnnotationAccessibility(){Zm(this.heatMapEl,this.annotations)}setTagLevels(){this.topLevel=Cm(this.highestHeadingLevel),this.bottomLevel=Cm(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){Im({rootEle:this.heatMapEl,geomType:"cell",title:this.accessibility.title||this.mainTitle,chartTag:"heat-map",uniqueID:this.chartID,groupName:"row",highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){_m({node:this.svg.node(),chartTag:"heat-map",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"cell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:Mb(this,rb,"heat-map"),groupAccessor:this.yAccessor,groupName:"row",disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.update.each((t,i,n)=>{Om(n[i])})}setGeometryAriaLabels(){const t=Mb(this,rb,"heat-map");this.update.each((i,n,s)=>{zm({node:s[n],geomType:"cell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupName:"row",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),Hm({node:s[n],uniqueID:this.chartID})})}setGroupAccessibilityID(){this.updateRowWrappers.each((t,i,n)=>{Hm({node:n[i],uniqueID:this.chartID})})}setChartAccessibilityTitle(){Xm(this.heatMapEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){Rm(this.heatMapEl,this.subTitle)}setChartAccessibilityLongDescription(){jm(this.heatMapEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){Pm(this.heatMapEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){Fm(this.heatMapEl,this.accessibility.purpose)}setChartAccessibilityContext(){Gm(this.heatMapEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){Vm(this.heatMapEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){Ym({rootEle:this.heatMapEl,parentGNode:this.map.node(),chartTag:"heat-map",geomType:"cell",groupName:"row"})}setChartAccessibilityStructureNotes(){Um(this.heatMapEl,this.accessibility.structureNotes)}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){mb(this.chartID,!0),this.hoverFunc.emit(t),this.showTooltip&&this.eventsTooltip({data:t,evt:Ny,isToShow:!0})}onMouseOutHandler(){mb(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){gb(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:n}){lb({root:this.tooltipG,data:t,event:i,isToShow:n,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,valueAccessor:this.valueAccessor,xAccessor:this.xAccessor,yAccessor:this.yAccessor,chartType:"heat-map"})}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldSetDimensions&&(this.setDimensions(),this.shouldSetDimensions=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldFormatClickHighlight&&(this.formatClickHighlight(),this.shouldFormatClickHighlight=!1),this.shouldFormatHoverHighlight&&(this.formatHoverHighlight(),this.shouldFormatHoverHighlight=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidate=!1),n("div",{class:"o-layout"},n("div",{class:"o-layout--chart"},n(this.topLevel,{"data-testid":"main-title"},this.mainTitle),n(this.bottomLevel,{class:"visa-ui-text--instructions","data-testid":"sub-title"},this.subTitle),n("div",{class:"heat-map-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),n("div",{class:"visa-viz-d3-heat-map-container"}),n("div",{class:"heat-map-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),n("data-table",{uniqueID:this.chartID,isCompact:!0,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))}init(){const t=Object.keys(pg);let i=0;const n={strokeWidth:{exception:0},showTooltip:{exception:!1},mainTitle:{exception:""},subTitle:{exception:""},wrapLabel:{exception:!1},hoverOpacity:{exception:0}};for(i=0;i<t.length;i++){const s=!!n[t[i]]&&this[t[i]]===n[t[i]].exception;this[t[i]]=this[t[i]]||s?this[t[i]]:pg[t[i]]}}get heatMapEl(){return s(this)}static get watchers(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["layoutWatcher"],width:["layoutWatcher"],padding:["layoutWatcher"],margin:["layoutWatcher"],xAccessor:["xAccessorWatcher"],yAccessor:["yAccessorWatcher"],valueAccessor:["groupAccessorWatcher"],xKeyOrder:["xKeyOrderWatcher"],yKeyOrder:["yKeyOrderWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],hideAxisPath:["hideAxisPathWatcher"],colorPalette:["colorsWatcher"],colors:["colorsWatcher"],colorSteps:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],shape:["shapeWatcher"],cursor:["cursorWatcher"],strokeWidth:["strokeWidthWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],legend:["legendWatcher"],suppressEvents:["suppressWatcher"],annotations:["annotationsWatcher"],accessibility:["accessibilityWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}heat-map{cursor:default}heat-map .annotations{pointer-events:none}heat-map .annotations .handle{pointer-events:all}heat-map .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}heat-map .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}heat-map .hidden{display:none}heat-map .axis{font-size:12px}heat-map .axis text{fill:#767676}heat-map .axis-label{text-anchor:middle;font:1rem sans-serif}heat-map .axis path{stroke:#767676}heat-map .axis .hidden{visibility:hidden}heat-map .heat-map-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}heat-map .heat-map-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}"}};window.VisaChartsLibOSSLicenses=pb();var Wb="http://www.w3.org/1999/xhtml";const Nb={svg:"http://www.w3.org/2000/svg",xhtml:Wb,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Lb(t){var i=t+="",n=i.indexOf(":");return n>=0&&"xmlns"!==(i=t.slice(0,n))&&(t=t.slice(n+1)),Nb.hasOwnProperty(i)?{space:Nb[i],local:t}:t}function Sb(t){return function(){var i=this.ownerDocument,n=this.namespaceURI;return n===Wb&&i.documentElement.namespaceURI===Wb?i.createElement(t):i.createElementNS(n,t)}}function Tb(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Eb(t){var i=Lb(t);return(i.local?Tb:Sb)(i)}function Db(){}function $b(t){return null==t?Db:function(){return this.querySelector(t)}}function Cb(){return[]}function Ib(t){return null==t?Cb:function(){return this.querySelectorAll(t)}}function Ob(t){return function(){return this.matches(t)}}function zb(t){return new Array(t.length)}function Hb(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function _b(t,i,n,s,r,e){for(var h,o=0,u=i.length,a=e.length;o<a;++o)(h=i[o])?(h.__data__=e[o],s[o]=h):n[o]=new Hb(t,e[o]);for(;o<u;++o)(h=i[o])&&(r[o]=h)}function qb(t,i,n,s,r,e,h){var o,u,a,c={},l=i.length,f=e.length,d=new Array(l);for(o=0;o<l;++o)(u=i[o])&&(d[o]=a="$"+h.call(u,u.__data__,o,i),a in c?r[o]=u:c[a]=u);for(o=0;o<f;++o)(u=c[a="$"+h.call(t,e[o],o,e)])?(s[o]=u,u.__data__=e[o],c[a]=null):n[o]=new Hb(t,e[o]);for(o=0;o<l;++o)(u=i[o])&&c[d[o]]===u&&(r[o]=u)}function Xb(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function Rb(t){return function(){this.removeAttribute(t)}}function jb(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Pb(t,i){return function(){this.setAttribute(t,i)}}function Fb(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function Gb(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Vb(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Yb(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Kb(t){return function(){this.style.removeProperty(t)}}function Bb(t,i,n){return function(){this.style.setProperty(t,i,n)}}function Ub(t,i,n){return function(){var s=i.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function Zb(t,i){return t.style.getPropertyValue(i)||Yb(t).getComputedStyle(t,null).getPropertyValue(i)}function Jb(t){return function(){delete this[t]}}function Qb(t,i){return function(){this[t]=i}}function tM(t,i){return function(){var n=i.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function iM(t){return t.trim().split(/^|\s+/)}function nM(t){return t.classList||new sM(t)}function sM(t){this._node=t,this._names=iM(t.getAttribute("class")||"")}function rM(t,i){for(var n=nM(t),s=-1,r=i.length;++s<r;)n.add(i[s])}function eM(t,i){for(var n=nM(t),s=-1,r=i.length;++s<r;)n.remove(i[s])}function hM(t){return function(){rM(this,t)}}function oM(t){return function(){eM(this,t)}}function uM(t,i){return function(){(i.apply(this,arguments)?rM:eM)(this,t)}}function aM(){this.textContent=""}function cM(t){return function(){this.textContent=t}}function lM(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function fM(){this.innerHTML=""}function dM(t){return function(){this.innerHTML=t}}function vM(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function pM(){this.nextSibling&&this.parentNode.appendChild(this)}function yM(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wM(){return null}function gM(){var t=this.parentNode;t&&t.removeChild(this)}function mM(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function bM(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}Hb.prototype={constructor:Hb,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},sM.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var MM={},kM=null;function AM(t,i,n){return t=xM(t,i,n),function(i){var n=i.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,i)}}function xM(t,i,n){return function(s){var r=kM;kM=s;try{t.call(this,this.__data__,i,n)}finally{kM=r}}}function WM(t){return t.trim().split(/^|\s+/).map((function(t){var i="",n=t.indexOf(".");return n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),{type:t,name:i}}))}function NM(t){return function(){var i=this.__on;if(i){for(var n,s=0,r=-1,e=i.length;s<e;++s)n=i[s],t.type&&n.type!==t.type||n.name!==t.name?i[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?i.length=r:delete this.__on}}}function LM(t,i,n){var s=MM.hasOwnProperty(t.type)?AM:xM;return function(r,e,h){var o,u=this.__on,a=s(i,e,h);if(u)for(var c=0,l=u.length;c<l;++c)if((o=u[c]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=a,o.capture=n),void(o.value=i);this.addEventListener(t.type,a,n),o={type:t.type,name:t.name,value:i,listener:a,capture:n},u?u.push(o):this.__on=[o]}}function SM(t,i,n){var s=Yb(t),r=s.CustomEvent;"function"==typeof r?r=new r(i,n):(r=s.document.createEvent("Event"),n?(r.initEvent(i,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function TM(t,i){return function(){return SM(this,t,i)}}function EM(t,i){return function(){return SM(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(MM={mouseenter:"mouseover",mouseleave:"mouseout"}));var DM=[null];function $M(t,i){this._groups=t,this._parents=i}function CM(){return new $M([[document.documentElement]],DM)}function IM(t){return"string"==typeof t?new $M([[document.querySelector(t)]],[document.documentElement]):new $M([[t]],DM)}function OM(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}$M.prototype=CM.prototype={constructor:$M,select:function(t){"function"!=typeof t&&(t=$b(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h,o=i[r],u=o.length,a=s[r]=new Array(u),c=0;c<u;++c)(e=o[c])&&(h=t.call(e,e.__data__,c,o))&&("__data__"in e&&(h.__data__=e.__data__),a[c]=h);return new $M(s,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Ib(t));for(var i=this._groups,n=i.length,s=[],r=[],e=0;e<n;++e)for(var h,o=i[e],u=o.length,a=0;a<u;++a)(h=o[a])&&(s.push(t.call(h,h.__data__,a,o)),r.push(h));return new $M(s,r)},filter:function(t){"function"!=typeof t&&(t=Ob(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h=i[r],o=h.length,u=s[r]=[],a=0;a<o;++a)(e=h[a])&&t.call(e,e.__data__,a,h)&&u.push(e);return new $M(s,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),a=-1,this.each((function(t){d[++a]=t})),d;var n=i?qb:_b,s=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),o=new Array(e),u=new Array(e),a=0;a<e;++a){var c=s[a],l=r[a],f=l.length,d=t.call(c,c&&c.__data__,a,s),v=d.length,p=o[a]=new Array(v),y=h[a]=new Array(v);n(c,l,p,y,u[a]=new Array(f),d,i);for(var w,g,m=0,b=0;m<v;++m)if(w=p[m]){for(m>=b&&(b=m+1);!(g=y[b])&&++b<v;);w._next=g||null}}return(h=new $M(h,s))._enter=o,h._exit=u,h},enter:function(){return new $M(this._enter||this._groups.map(zb),this._parents)},exit:function(){return new $M(this._exit||this._groups.map(zb),this._parents)},join:function(t,i,n){var s=this.enter(),r=this,e=this.exit();return s="function"==typeof t?t(s):s.append(t+""),null!=i&&(r=i(r)),null==n?e.remove():n(e),s&&r?s.merge(r).order():r},merge:function(t){for(var i=this._groups,n=t._groups,s=i.length,r=Math.min(s,n.length),e=new Array(s),h=0;h<r;++h)for(var o,u=i[h],a=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=u[f]||a[f])&&(l[f]=o);for(;h<s;++h)e[h]=i[h];return new $M(e,this._parents)},order:function(){for(var t=this._groups,i=-1,n=t.length;++i<n;)for(var s,r=t[i],e=r.length-1,h=r[e];--e>=0;)(s=r[e])&&(h&&4^s.compareDocumentPosition(h)&&h.parentNode.insertBefore(s,h),h=s);return this},sort:function(t){function i(i,n){return i&&n?t(i.__data__,n.__data__):!i-!n}t||(t=Xb);for(var n=this._groups,s=n.length,r=new Array(s),e=0;e<s;++e){for(var h,o=n[e],u=o.length,a=r[e]=new Array(u),c=0;c<u;++c)(h=o[c])&&(a[c]=h);a.sort(i)}return new $M(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var s=t[i],r=0,e=s.length;r<e;++r){var h=s[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,n=0,s=i.length;n<s;++n)for(var r,e=i[n],h=0,o=e.length;h<o;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var n=Lb(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((null==i?n.local?jb:Rb:"function"==typeof i?n.local?Vb:Gb:n.local?Fb:Pb)(n,i))},style:function(t,i,n){return arguments.length>1?this.each((null==i?Kb:"function"==typeof i?Ub:Bb)(t,i,null==n?"":n)):Zb(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?Jb:"function"==typeof i?tM:Qb)(t,i)):this.node()[t]},classed:function(t,i){var n=iM(t+"");if(arguments.length<2){for(var s=nM(this.node()),r=-1,e=n.length;++r<e;)if(!s.contains(n[r]))return!1;return!0}return this.each(("function"==typeof i?uM:i?hM:oM)(n,i))},text:function(t){return arguments.length?this.each(null==t?aM:("function"==typeof t?lM:cM)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?fM:("function"==typeof t?vM:dM)(t)):this.node().innerHTML},raise:function(){return this.each(pM)},lower:function(){return this.each(yM)},append:function(t){var i="function"==typeof t?t:Eb(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var n="function"==typeof t?t:Eb(t),s=null==i?wM:"function"==typeof i?i:$b(i);return this.select((function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)}))},remove:function(){return this.each(gM)},clone:function(t){return this.select(t?bM:mM)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,n){var s,r,e=WM(t+""),h=e.length;if(!(arguments.length<2)){for(o=i?LM:NM,null==n&&(n=!1),s=0;s<h;++s)this.each(o(e[s],i,n));return this}var o=this.node().__on;if(o)for(var u,a=0,c=o.length;a<c;++a)for(s=0,u=o[a];s<h;++s)if((r=e[s]).type===u.type&&r.name===u.name)return u.value},dispatch:function(t,i){return this.each(("function"==typeof i?EM:TM)(t,i))}};var zM=function(t){return 1===t.length&&(t=function(t){return function(i,n){return OM(t(i),n)}}(t)),{left:function(i,n,s,r){for(null==s&&(s=0),null==r&&(r=i.length);s<r;){var e=s+r>>>1;t(i[e],n)<0?s=e+1:r=e}return s},right:function(i,n,s,r){for(null==s&&(s=0),null==r&&(r=i.length);s<r;){var e=s+r>>>1;t(i[e],n)>0?r=e:s=e+1}return s}}}(OM).right;function HM(t,i,n){t=+t,i=+i,n=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+n;for(var s=-1,r=0|Math.max(0,Math.ceil((i-t)/n)),e=new Array(r);++s<r;)e[s]=t+s*n;return e}var _M=Math.sqrt(50),qM=Math.sqrt(10),XM=Math.sqrt(2);function RM(t,i,n){var s=(i-t)/Math.max(0,n),r=Math.floor(Math.log(s)/Math.LN10),e=s/Math.pow(10,r);return r>=0?(e>=_M?10:e>=qM?5:e>=XM?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=_M?10:e>=qM?5:e>=XM?2:1)}function jM(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function PM(){}function FM(t,i){var n=new PM;if(t instanceof PM)t.each((function(t,i){n.set(i,t)}));else if(Array.isArray(t)){var s,r=-1,e=t.length;if(null==i)for(;++r<e;)n.set(r,t[r]);else for(;++r<e;)n.set(i(s=t[r],r,t),s)}else if(t)for(var h in t)n.set(h,t[h]);return n}PM.prototype=FM.prototype={constructor:PM,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var GM=Array.prototype,VM=GM.map,YM=GM.slice,KM={name:"implicit"};function BM(){var t=FM(),i=[],n=[],s=KM;function r(r){var e=r+"",h=t.get(e);if(!h){if(s!==KM)return s;t.set(e,h=i.push(r))}return n[(h-1)%n.length]}return r.domain=function(n){if(!arguments.length)return i.slice();i=[],t=FM();for(var s,e,h=-1,o=n.length;++h<o;)t.has(e=(s=n[h])+"")||t.set(e,i.push(s));return r},r.range=function(t){return arguments.length?(n=YM.call(t),r):n.slice()},r.unknown=function(t){return arguments.length?(s=t,r):s},r.copy=function(){return BM(i,n).unknown(s)},jM.apply(r,arguments),r}function UM(t,i,n){t.prototype=i.prototype=n,n.constructor=t}function ZM(t,i){var n=Object.create(t.prototype);for(var s in i)n[s]=i[s];return n}function JM(){}var QM="\\s*([+-]?\\d+)\\s*",tk="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ik="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nk=/^#([0-9a-f]{3,8})$/,sk=new RegExp("^rgb\\("+[QM,QM,QM]+"\\)$"),rk=new RegExp("^rgb\\("+[ik,ik,ik]+"\\)$"),ek=new RegExp("^rgba\\("+[QM,QM,QM,tk]+"\\)$"),hk=new RegExp("^rgba\\("+[ik,ik,ik,tk]+"\\)$"),ok=new RegExp("^hsl\\("+[tk,ik,ik]+"\\)$"),uk=new RegExp("^hsla\\("+[tk,ik,ik,tk]+"\\)$"),ak={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ck(){return this.rgb().formatHex()}function lk(){return this.rgb().formatRgb()}function fk(t){var i,n;return t=(t+"").trim().toLowerCase(),(i=nk.exec(t))?(n=i[1].length,i=parseInt(i[1],16),6===n?dk(i):3===n?new wk(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===n?vk(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===n?vk(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=sk.exec(t))?new wk(i[1],i[2],i[3],1):(i=rk.exec(t))?new wk(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=ek.exec(t))?vk(i[1],i[2],i[3],i[4]):(i=hk.exec(t))?vk(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=ok.exec(t))?Mk(i[1],i[2]/100,i[3]/100,1):(i=uk.exec(t))?Mk(i[1],i[2]/100,i[3]/100,i[4]):ak.hasOwnProperty(t)?dk(ak[t]):"transparent"===t?new wk(NaN,NaN,NaN,0):null}function dk(t){return new wk(t>>16&255,t>>8&255,255&t,1)}function vk(t,i,n,s){return s<=0&&(t=i=n=NaN),new wk(t,i,n,s)}function pk(t){return t instanceof JM||(t=fk(t)),t?new wk((t=t.rgb()).r,t.g,t.b,t.opacity):new wk}function yk(t,i,n,s){return 1===arguments.length?pk(t):new wk(t,i,n,null==s?1:s)}function wk(t,i,n,s){this.r=+t,this.g=+i,this.b=+n,this.opacity=+s}function gk(){return"#"+bk(this.r)+bk(this.g)+bk(this.b)}function mk(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function bk(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Mk(t,i,n,s){return s<=0?t=i=n=NaN:n<=0||n>=1?t=i=NaN:i<=0&&(t=NaN),new Ak(t,i,n,s)}function kk(t){if(t instanceof Ak)return new Ak(t.h,t.s,t.l,t.opacity);if(t instanceof JM||(t=fk(t)),!t)return new Ak;if(t instanceof Ak)return t;var i=(t=t.rgb()).r/255,n=t.g/255,s=t.b/255,r=Math.min(i,n,s),e=Math.max(i,n,s),h=NaN,o=e-r,u=(e+r)/2;return o?(h=i===e?(n-s)/o+6*(n<s):n===e?(s-i)/o+2:(i-n)/o+4,o/=u<.5?e+r:2-e-r,h*=60):o=u>0&&u<1?0:h,new Ak(h,o,u,t.opacity)}function Ak(t,i,n,s){this.h=+t,this.s=+i,this.l=+n,this.opacity=+s}function xk(t,i,n){return 255*(t<60?i+(n-i)*t/60:t<180?n:t<240?i+(n-i)*(240-t)/60:i)}function Wk(t){return function(){return t}}function Nk(t,i){var n=i-t;return n?function(t,i){return function(n){return t+n*i}}(t,n):Wk(isNaN(t)?i:t)}UM(JM,fk,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ck,formatHex:ck,formatHsl:function(){return kk(this).formatHsl()},formatRgb:lk,toString:lk}),UM(wk,yk,ZM(JM,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new wk(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new wk(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gk,formatHex:gk,formatRgb:mk,toString:mk})),UM(Ak,(function(t,i,n,s){return 1===arguments.length?kk(t):new Ak(t,i,n,null==s?1:s)}),ZM(JM,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ak(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ak(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*i,r=2*n-s;return new wk(xk(t>=240?t-240:t+120,r,s),xk(t,r,s),xk(t<120?t+240:t-120,r,s),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Lk=function t(i){var n=function(t){return 1==(t=+t)?Nk:function(i,n){return n-i?function(t,i,n){return t=Math.pow(t,n),i=Math.pow(i,n)-t,n=1/n,function(s){return Math.pow(t+s*i,n)}}(i,n,t):Wk(isNaN(i)?n:i)}}(i);function s(t,i){var s=n((t=yk(t)).r,(i=yk(i)).r),r=n(t.g,i.g),e=n(t.b,i.b),h=Nk(t.opacity,i.opacity);return function(i){return t.r=s(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return s.gamma=t,s}(1);function Sk(t,i){i||(i=[]);var n,s=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(n=0;n<s;++n)r[n]=t[n]*(1-e)+i[n]*e;return r}}function Tk(t,i){var n,s=i?i.length:0,r=t?Math.min(s,t.length):0,e=new Array(r),h=new Array(s);for(n=0;n<r;++n)e[n]=zk(t[n],i[n]);for(;n<s;++n)h[n]=i[n];return function(t){for(n=0;n<r;++n)h[n]=e[n](t);return h}}function Ek(t,i){var n=new Date;return t=+t,i=+i,function(s){return n.setTime(t*(1-s)+i*s),n}}function Dk(t,i){return t=+t,i=+i,function(n){return t*(1-n)+i*n}}function $k(t,i){var n,s={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)n in t?s[n]=zk(t[n],i[n]):r[n]=i[n];return function(t){for(n in s)r[n]=s[n](t);return r}}var Ck=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ik=new RegExp(Ck.source,"g");function Ok(t,i){var n,s,r,e=Ck.lastIndex=Ik.lastIndex=0,h=-1,o=[],u=[];for(t+="",i+="";(n=Ck.exec(t))&&(s=Ik.exec(i));)(r=s.index)>e&&(r=i.slice(e,r),o[h]?o[h]+=r:o[++h]=r),(n=n[0])===(s=s[0])?o[h]?o[h]+=s:o[++h]=s:(o[++h]=null,u.push({i:h,x:Dk(n,s)})),e=Ik.lastIndex;return e<i.length&&(r=i.slice(e),o[h]?o[h]+=r:o[++h]=r),o.length<2?u[0]?function(t){return function(i){return t(i)+""}}(u[0].x):function(t){return function(){return t}}(i):(i=u.length,function(t){for(var n,s=0;s<i;++s)o[(n=u[s]).i]=n.x(t);return o.join("")})}function zk(t,i){var n,s=typeof i;return null==i||"boolean"===s?Wk(i):("number"===s?Dk:"string"===s?(n=fk(i))?(i=n,Lk):Ok:i instanceof fk?Lk:i instanceof Date?Ek:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?Sk:Array.isArray(i)?Tk:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?$k:Dk)(t,i)}function Hk(t,i){return t=+t,i=+i,function(n){return Math.round(t*(1-n)+i*n)}}var _k,qk,Xk,Rk,jk=180/Math.PI,Pk={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Fk(t,i,n,s,r,e){var h,o,u;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(u=t*n+i*s)&&(n-=t*u,s-=i*u),(o=Math.sqrt(n*n+s*s))&&(n/=o,s/=o,u/=o),t*s<i*n&&(t=-t,i=-i,u=-u,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*jk,skewX:Math.atan(u)*jk,scaleX:h,scaleY:o}}function Gk(t,i,n,s){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var o=[],u=[];return e=t(e),h=t(h),function(t,s,r,e,h,o){if(t!==r||s!==e){var u=h.push("translate(",null,i,null,n);o.push({i:u-4,x:Dk(t,r)},{i:u-2,x:Dk(s,e)})}else(r||e)&&h.push("translate("+r+i+e+n)}(e.translateX,e.translateY,h.translateX,h.translateY,o,u),function(t,i,n,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:n.push(r(n)+"rotate(",null,s)-2,x:Dk(t,i)})):i&&n.push(r(n)+"rotate("+i+s)}(e.rotate,h.rotate,o,u),function(t,i,n,e){t!==i?e.push({i:n.push(r(n)+"skewX(",null,s)-2,x:Dk(t,i)}):i&&n.push(r(n)+"skewX("+i+s)}(e.skewX,h.skewX,o,u),function(t,i,n,s,e,h){if(t!==n||i!==s){var o=e.push(r(e)+"scale(",null,",",null,")");h.push({i:o-4,x:Dk(t,n)},{i:o-2,x:Dk(i,s)})}else 1===n&&1===s||e.push(r(e)+"scale("+n+","+s+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,o,u),e=h=null,function(t){for(var i,n=-1,s=u.length;++n<s;)o[(i=u[n]).i]=i.x(t);return o.join("")}}}var Vk=Gk((function(t){return"none"===t?Pk:(_k||(_k=document.createElement("DIV"),qk=document.documentElement,Xk=document.defaultView),_k.style.transform=t,t=Xk.getComputedStyle(qk.appendChild(_k),null).getPropertyValue("transform"),qk.removeChild(_k),Fk(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Yk=Gk((function(t){return null==t?Pk:(Rk||(Rk=document.createElementNS("http://www.w3.org/2000/svg","g")),Rk.setAttribute("transform",t),(t=Rk.transform.baseVal.consolidate())?Fk((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Pk)}),", ",")",")");function Kk(t){return+t}var Bk=[0,1];function Uk(t){return t}function Zk(t,i){return(i-=t=+t)?function(n){return(n-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function Jk(t){var i,n=t[0],s=t[t.length-1];return n>s&&(i=n,n=s,s=i),function(t){return Math.max(n,Math.min(s,t))}}function Qk(t,i,n){var s=t[0],r=t[1],e=i[0],h=i[1];return r<s?(s=Zk(r,s),e=n(h,e)):(s=Zk(s,r),e=n(e,h)),function(t){return e(s(t))}}function tA(t,i,n){var s=Math.min(t.length,i.length)-1,r=new Array(s),e=new Array(s),h=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<s;)r[h]=Zk(t[h],t[h+1]),e[h]=n(i[h],i[h+1]);return function(i){var n=zM(t,i,1,s)-1;return e[n](r[n](i))}}function iA(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function nA(t,i){return function(){var t,i,n,s,r,e,h=Bk,o=Bk,u=zk,a=Uk;function c(){return s=Math.min(h.length,o.length)>2?tA:Qk,r=e=null,l}function l(i){return isNaN(i=+i)?n:(r||(r=s(h.map(t),o,u)))(t(a(i)))}return l.invert=function(n){return a(i((e||(e=s(o,h.map(t),Dk)))(n)))},l.domain=function(t){return arguments.length?(h=VM.call(t,Kk),a===Uk||(a=Jk(h)),c()):h.slice()},l.range=function(t){return arguments.length?(o=YM.call(t),c()):o.slice()},l.rangeRound=function(t){return o=YM.call(t),u=Hk,c()},l.clamp=function(t){return arguments.length?(a=t?Jk(h):Uk,l):a!==Uk},l.interpolate=function(t){return arguments.length?(u=t,c()):u},l.unknown=function(t){return arguments.length?(n=t,l):n},function(n,s){return t=n,i=s,c()}}()(t,i)}function sA(t,i){if((n=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var n,s=t.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+t.slice(n+1)]}function rA(t){return(t=sA(Math.abs(t)))?t[1]:NaN}var eA,hA=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function oA(t){if(!(i=hA.exec(t)))throw new Error("invalid format: "+t);var i;return new uA({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function uA(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function aA(t,i){var n=sA(t,i);if(!n)return t+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}oA.prototype=uA.prototype,uA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const cA={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return aA(100*t,i)},r:aA,s:function(t,i){var n=sA(t,i);if(!n)return t+"";var s=n[0],r=n[1],e=r-(eA=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=s.length;return e===h?s:e>h?s+new Array(e-h+1).join("0"):e>0?s.slice(0,e)+"."+s.slice(e):"0."+new Array(1-e).join("0")+sA(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function lA(t){return t}var fA,dA,vA,pA=Array.prototype.map,yA=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function wA(t){var i=t.domain;return t.ticks=function(t){var n=i();return function(t,i,n){var s,r,e,h,o=-1;if(n=+n,(t=+t)==(i=+i)&&n>0)return[t];if((s=i<t)&&(r=t,t=i,i=r),0===(h=RM(t,i,n))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++o<r;)e[o]=(t+o)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++o<r;)e[o]=(t-o)/h;return s&&e.reverse(),e}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var s=i();return function(t,i,n,s){var r,e=function(t,i,n){var s=Math.abs(i-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),e=s/r;return e>=_M?r*=10:e>=qM?r*=5:e>=XM&&(r*=2),i<t?-r:r}(t,i,n);switch((s=oA(null==s?",f":s)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=s.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(rA(i)/3)))-rA(Math.abs(t)))}(e,h))||(s.precision=r),vA(s,h);case"":case"e":case"g":case"p":case"r":null!=s.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,rA(i)-rA(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(s.precision=r-("e"===s.type));break;case"f":case"%":null!=s.precision||isNaN(r=function(t){return Math.max(0,-rA(Math.abs(t)))}(e))||(s.precision=r-2*("%"===s.type))}return dA(s)}(s[0],s[s.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var s,r=i(),e=0,h=r.length-1,o=r[e],u=r[h];return u<o&&(s=o,o=u,u=s,s=e,e=h,h=s),(s=RM(o,u,n))>0?s=RM(o=Math.floor(o/s)*s,u=Math.ceil(u/s)*s,n):s<0&&(s=RM(o=Math.ceil(o*s)/s,u=Math.floor(u*s)/s,n)),s>0?(r[e]=Math.floor(o/s)*s,r[h]=Math.ceil(u/s)*s,i(r)):s<0&&(r[e]=Math.ceil(o*s)/s,r[h]=Math.floor(u*s)/s,i(r)),t},t}fA=function(t){var i,n,s=void 0===t.grouping||void 0===t.thousands?lA:(i=pA.call(t.grouping,Number),n=t.thousands+"",function(t,s){for(var r=t.length,e=[],h=0,o=i[0],u=0;r>0&&o>0&&(u+o+1>s&&(o=Math.max(1,s-u)),e.push(t.substring(r-=o,r+o)),!((u+=o+1)>s));)o=i[h=(h+1)%i.length];return e.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?lA:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(pA.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",a=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=oA(t)).fill,n=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,g=t.type;"n"===g?(p=!0,g="g"):cA[g]||(void 0===y&&(y=12),w=!0,g="g"),(d||"0"===i&&"="===n)&&(d=!0,i="0",n="=");var m="$"===f?r:"#"===f&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===f?e:/[%p]/.test(g)?u:"",M=cA[g],k=/[defgprs%]/.test(g);function A(t){var r,e,u,f=m,A=b;if("c"===g)A=M(t)+A,t="";else{var x=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,n=t.length,s=1,r=-1;s<n;++s)switch(t[s]){case".":r=i=s;break;case"0":0===r&&(r=s),i=s;break;default:if(!+t[s])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),x&&0==+t&&"+"!==l&&(x=!1),f=(x?"("===l?l:a:"-"===l||"("===l?"":l)+f,A=("s"===g?yA[8+eA/3]:"")+A+(x&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(u=t.charCodeAt(r))||u>57){A=(46===u?h+t.slice(r+1):t.slice(r))+A,t=t.slice(0,r);break}}p&&!d&&(t=s(t,1/0));var W=f.length+t.length+A.length,N=W<v?new Array(v-W+1).join(i):"";switch(p&&d&&(t=s(N+t,N.length?v-A.length:1/0),N=""),n){case"<":t=f+t+A+N;break;case"=":t=f+N+t+A;break;case"^":t=N.slice(0,W=N.length>>1)+f+t+A+N.slice(W);break;default:t=N+f+t+A}return o(t)}return y=void 0===y?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),A.toString=function(){return t+""},A}return{format:l,formatPrefix:function(t,i){var n=l(((t=oA(t)).type="f",t)),s=3*Math.max(-8,Math.min(8,Math.floor(rA(i)/3))),r=Math.pow(10,-s),e=yA[8+s/3];return function(t){return n(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),dA=fA.format,vA=fA.formatPrefix;var gA={value:function(){}};function mA(){for(var t,i=0,n=arguments.length,s={};i<n;++i){if(!(t=arguments[i]+"")||t in s||/[\s.]/.test(t))throw new Error("illegal type: "+t);s[t]=[]}return new bA(s)}function bA(t){this._=t}function MA(t,i){return t.trim().split(/^|\s+/).map((function(t){var n="",s=t.indexOf(".");if(s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function kA(t,i){for(var n,s=0,r=t.length;s<r;++s)if((n=t[s]).name===i)return n.value}function AA(t,i,n){for(var s=0,r=t.length;s<r;++s)if(t[s].name===i){t[s]=gA,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=n&&t.push({name:i,value:n}),t}bA.prototype=mA.prototype={constructor:bA,on:function(t,i){var n,s=this._,r=MA(t+"",s),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(n=(t=r[e]).type)s[n]=AA(s[n],t.name,i);else if(null==i)for(n in s)s[n]=AA(s[n],t.name,null);return this}for(;++e<h;)if((n=(t=r[e]).type)&&(n=kA(s[n],t.name)))return n},copy:function(){var t={},i=this._;for(var n in i)t[n]=i[n].slice();return new bA(t)},call:function(t,i){if((n=arguments.length-2)>0)for(var n,s,r=new Array(n),e=0;e<n;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,n=(s=this._[t]).length;e<n;++e)s[e].value.apply(i,r)},apply:function(t,i,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],r=0,e=s.length;r<e;++r)s[r].value.apply(i,n)}};var xA,WA,NA=0,LA=0,SA=0,TA=0,EA=0,DA=0,$A="object"==typeof performance&&performance.now?performance:Date,CA="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function IA(){return EA||(CA(OA),EA=$A.now()+DA)}function OA(){EA=0}function zA(){this._call=this._time=this._next=null}function HA(t,i,n){var s=new zA;return s.restart(t,i,n),s}function _A(){EA=(TA=$A.now())+DA,NA=LA=0;try{!function(){IA(),++NA;for(var t,i=xA;i;)(t=EA-i._time)>=0&&i._call.call(null,t),i=i._next;--NA}()}finally{NA=0,function(){for(var t,i,n=xA,s=1/0;n;)n._call?(s>n._time&&(s=n._time),t=n,n=n._next):(i=n._next,n._next=null,n=t?t._next=i:xA=i);WA=t,XA(s)}(),EA=0}}function qA(){var t=$A.now(),i=t-TA;i>1e3&&(DA-=i,TA=t)}function XA(t){NA||(LA&&(LA=clearTimeout(LA)),t-EA>24?(t<1/0&&(LA=setTimeout(_A,t-$A.now()-DA)),SA&&(SA=clearInterval(SA))):(SA||(TA=$A.now(),SA=setInterval(qA,1e3)),NA=1,CA(_A)))}function RA(t,i,n){var s=new zA;return s.restart((function(n){s.stop(),t(n+i)}),i=null==i?0:+i,n),s}zA.prototype=HA.prototype={constructor:zA,restart:function(t,i,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?IA():+n)+(null==i?0:+i),this._next||WA===this||(WA?WA._next=this:xA=this,WA=this),this._call=t,this._time=n,XA()},stop:function(){this._call&&(this._call=null,this._time=1/0,XA())}};var jA=mA("start","end","interrupt"),PA=[];function FA(t,i,n,s,r,e){var h=t.__transition;if(h){if(n in h)return}else t.__transition={};!function(t,i,n){var s,r=t.__transition;function e(u){var a,c,l,f;if(1!==n.state)return o();for(a in r)if((f=r[a]).name===n.name){if(3===f.state)return RA(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[a]):+a<i&&(f.state=6,f.timer.stop(),delete r[a])}if(RA((function(){3===n.state&&(n.state=4,n.timer.restart(h,n.delay,n.time),h(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,s=new Array(l=n.tween.length),a=0,c=-1;a<l;++a)(f=n.tween[a].value.call(t,t.__data__,n.index,n.group))&&(s[++c]=f);s.length=c+1}}function h(i){for(var r=i<n.duration?n.ease.call(null,i/n.duration):(n.timer.restart(o),n.state=5,1),e=-1,h=s.length;++e<h;)s[e].call(null,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){for(var s in n.state=6,n.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=n,n.timer=HA((function(t){n.state=1,n.timer.restart(e,n.delay,n.time),n.delay<=t&&e(t-n.delay)}),0,n.time)}(t,n,{name:i,index:s,group:r,on:jA,tween:PA,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function GA(t,i){var n=YA(t,i);if(n.state>0)throw new Error("too late; already scheduled");return n}function VA(t,i){var n=YA(t,i);if(n.state>2)throw new Error("too late; already started");return n}function YA(t,i){var n=t.__transition;if(!n||!(n=n[i]))throw new Error("transition not found");return n}function KA(t,i){var n,s;return function(){var r=VA(this,t),e=r.tween;if(e!==n)for(var h=0,o=(s=n=e).length;h<o;++h)if(s[h].name===i){(s=s.slice()).splice(h,1);break}r.tween=s}}function BA(t,i,n){var s,r;if("function"!=typeof n)throw new Error;return function(){var e=VA(this,t),h=e.tween;if(h!==s){r=(s=h).slice();for(var o={name:i,value:n},u=0,a=r.length;u<a;++u)if(r[u].name===i){r[u]=o;break}u===a&&r.push(o)}e.tween=r}}function UA(t,i,n){var s=t._id;return t.each((function(){var t=VA(this,s);(t.value||(t.value={}))[i]=n.apply(this,arguments)})),function(t){return YA(t,s).value[i]}}function ZA(t,i){var n;return("number"==typeof i?Dk:i instanceof fk?Lk:(n=fk(i))?(i=n,Lk):Ok)(t,i)}function JA(t){return function(){this.removeAttribute(t)}}function QA(t){return function(){this.removeAttributeNS(t.space,t.local)}}function tx(t,i,n){var s,r;return function(){var e=this.getAttribute(t);return e===n?null:e===s?r:r=i(s=e,n)}}function ix(t,i,n){var s,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===n?null:e===s?r:r=i(s=e,n)}}function nx(t,i,n){var s,r,e;return function(){var h,o=n(this);if(null!=o)return(h=this.getAttribute(t))===o?null:h===s&&o===r?e:e=i(s=h,r=o);this.removeAttribute(t)}}function sx(t,i,n){var s,r,e;return function(){var h,o=n(this);if(null!=o)return(h=this.getAttributeNS(t.space,t.local))===o?null:h===s&&o===r?e:e=i(s=h,r=o);this.removeAttributeNS(t.space,t.local)}}function rx(t,i){function n(){var n=this,s=i.apply(n,arguments);return s&&function(i){n.setAttributeNS(t.space,t.local,s(i))}}return n._value=i,n}function ex(t,i){function n(){var n=this,s=i.apply(n,arguments);return s&&function(i){n.setAttribute(t,s(i))}}return n._value=i,n}function hx(t,i){return function(){GA(this,t).delay=+i.apply(this,arguments)}}function ox(t,i){return i=+i,function(){GA(this,t).delay=i}}function ux(t,i){return function(){VA(this,t).duration=+i.apply(this,arguments)}}function ax(t,i){return i=+i,function(){VA(this,t).duration=i}}function cx(t,i){if("function"!=typeof i)throw new Error;return function(){VA(this,t).ease=i}}function lx(t,i,n){var s,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?GA:VA;return function(){var h=e(this,t),o=h.on;o!==s&&(r=(s=o).copy()).on(i,n),h.on=r}}var fx=CM.prototype.constructor;function dx(t,i,n){function s(){var s=this,r=i.apply(s,arguments);return r&&function(i){s.style.setProperty(t,r(i),n)}}return s._value=i,s}var vx=0;function px(t,i,n,s){this._groups=t,this._parents=i,this._name=n,this._id=s}function yx(){return++vx}var wx=CM.prototype;px.prototype=function(t){return CM().transition(t)}.prototype={constructor:px,select:function(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=$b(t));for(var s=this._groups,r=s.length,e=new Array(r),h=0;h<r;++h)for(var o,u,a=s[h],c=a.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=a[f])&&(u=t.call(o,o.__data__,f,a))&&("__data__"in o&&(u.__data__=o.__data__),l[f]=u,FA(l[f],i,n,f,l,YA(o,n)));return new px(e,this._parents,i,n)},selectAll:function(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=Ib(t));for(var s=this._groups,r=s.length,e=[],h=[],o=0;o<r;++o)for(var u,a=s[o],c=a.length,l=0;l<c;++l)if(u=a[l]){for(var f,d=t.call(u,u.__data__,l,a),v=YA(u,n),p=0,y=d.length;p<y;++p)(f=d[p])&&FA(f,i,n,p,d,v);e.push(d),h.push(u)}return new px(e,h,i,n)},filter:function(t){"function"!=typeof t&&(t=Ob(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h=i[r],o=h.length,u=s[r]=[],a=0;a<o;++a)(e=h[a])&&t.call(e,e.__data__,a,h)&&u.push(e);return new px(s,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,n=t._groups,s=i.length,r=Math.min(s,n.length),e=new Array(s),h=0;h<r;++h)for(var o,u=i[h],a=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=u[f]||a[f])&&(l[f]=o);for(;h<s;++h)e[h]=i[h];return new px(e,this._parents,this._name,this._id)},selection:function(){return new fx(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,n=yx(),s=this._groups,r=s.length,e=0;e<r;++e)for(var h,o=s[e],u=o.length,a=0;a<u;++a)if(h=o[a]){var c=YA(h,i);FA(h,t,n,a,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new px(s,this._parents,t,n)},call:wx.call,nodes:wx.nodes,node:wx.node,size:wx.size,empty:wx.empty,each:wx.each,on:function(t,i){var n=this._id;return arguments.length<2?YA(this.node(),n).on.on(t):this.each(lx(n,t,i))},attr:function(t,i){var n=Lb(t),s="transform"===n?Yk:ZA;return this.attrTween(t,"function"==typeof i?(n.local?sx:nx)(n,s,UA(this,"attr."+t,i)):null==i?(n.local?QA:JA)(n):(n.local?ix:tx)(n,s,i+""))},attrTween:function(t,i){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;var s=Lb(t);return this.tween(n,(s.local?rx:ex)(s,i))},style:function(t,i,n){var s="transform"==(t+="")?Vk:ZA;return null==i?this.styleTween(t,function(t,i){var n,s,r;return function(){var e=Zb(this,t),h=(this.style.removeProperty(t),Zb(this,t));return e===h?null:e===n&&h===s?r:r=i(n=e,s=h)}}(t,s)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,n){var s,r,e;return function(){var h=Zb(this,t),o=n(this);return null==o&&(this.style.removeProperty(t),o=Zb(this,t)),h===o?null:h===s&&o===r?e:e=i(s=h,r=o)}}(t,s,UA(this,"style."+t,i)):function(t,i,n){var s,r;return function(){var e=Zb(this,t);return e===n?null:e===s?r:r=i(s=e,n)}}(t,s,i+""),n)},styleTween:function(t,i,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;return this.tween(s,dx(t,i,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(UA(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var n in this.__transition)if(+n!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var n=this._id;if(t+="",arguments.length<2){for(var s,r=YA(this.node(),n).tween,e=0,h=r.length;e<h;++e)if((s=r[e]).name===t)return s.value;return null}return this.each((null==i?KA:BA)(n,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?hx:ox)(i,t)):YA(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?ux:ax)(i,t)):YA(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(cx(i,t)):YA(this.node(),i).ease}};var gx={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function mx(t,i){for(var n;!(n=t.__transition)||!(n=n[i]);)if(!(t=t.parentNode))return gx.time=IA(),gx;return n}CM.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var n,s,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(n=e[r]).name===i?(s=n.state>2&&n.state<5,n.state=6,n.timer.stop(),s&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},CM.prototype.transition=function(t){var i,n;t instanceof px?(i=t._id,t=t._name):(i=yx(),(n=gx).time=IA(),t=null==t?null:t+"");for(var s=this._groups,r=s.length,e=0;e<r;++e)for(var h,o=s[e],u=o.length,a=0;a<u;++a)(h=o[a])&&FA(h,t,i,a,o,n||mx(h,i));return new px(s,this._parents,t,i)};const{getLicenses:bx,drawTooltip:Mx,initTooltipStyle:kx}=r,Ax=class{constructor(n){t(this,n),this.height=100,this.width=60,this.data=[{}],this.ordinalAccessor="label",this.valueAccessor="value",this.showHeader=!0,this.showLabel=!1,this.enableColor=!0,this.dataFormat="0,0.00",this.threshold=.1,this.colors=["#180F58","#B7C9E7","#B7B7B7","#E2AEBC","#D60036"],this.indicatorLabels=["High","Above","Avg.","Below","Poor"],this.defaultColor=["#180F58"],this.wrapLabel=!0,this.alignLabel="center",this.padding={top:.08*this.height,bottom:.25*this.height,right:.01*this.width,left:.01*this.width},this.indicatorWidth=this.height/4,this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}componentWillLoad(){this.innerHeight=this.height-this.padding.top-this.padding.bottom,this.innerWidth=this.width-this.padding.left-this.padding.right}componentWillUpdate(){this.drawChart()}componentDidLoad(){this.drawChart(),this.setTooltipInitialStyle()}drawChart(){this.reSetRoot(),this.y=function t(){var i=nA(Uk,Uk);return i.copy=function(){return iA(i,t())},jM.apply(i,arguments),wA(i)}().domain([-this.threshold,this.threshold]).range([this.innerHeight-this.indicatorWidth/6,0]),this.x=function t(){var i,n,s=BM().unknown(void 0),r=s.domain,e=s.range,h=[0,1],o=!1,u=0,a=0,c=.5;function l(){var t=r().length,s=h[1]<h[0],l=h[s-0],f=h[1-s];i=(f-l)/Math.max(1,t-u+2*a),o&&(i=Math.floor(i)),l+=(f-l-i*(t-u))*c,n=i*(1-u),o&&(l=Math.round(l),n=Math.round(n));var d=HM(t).map((function(t){return l+i*t}));return e(s?d.reverse():d)}return delete s.unknown,s.domain=function(t){return arguments.length?(r(t),l()):r()},s.range=function(t){return arguments.length?(h=[+t[0],+t[1]],l()):h.slice()},s.rangeRound=function(t){return h=[+t[0],+t[1]],o=!0,l()},s.bandwidth=function(){return n},s.step=function(){return i},s.round=function(t){return arguments.length?(o=!!t,l()):o},s.padding=function(t){return arguments.length?(u=Math.min(1,a=+t),l()):u},s.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),l()):u},s.paddingOuter=function(t){return arguments.length?(a=+t,l()):a},s.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},s.copy=function(){return t(r(),h).round(o).paddingInner(u).paddingOuter(a).align(c)},jM.apply(l(),arguments)}().domain(this.data.map(t=>t[this.ordinalAccessor])).range([0,this.innerWidth]).padding(.2),this.showLabel&&this.drawLabel(),this.drawIndicator()}reSetRoot(){this.svg&&this.svg.remove(),this.svg=IM(this.indicatorChartEl).select("#visa-viz-d3-indicator-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.rootG=this.svg.append("g").attr("id","visa-viz-padding-container-g").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`).attr("class","indicator"),this.tooltipG=IM(this.indicatorChartEl).select(".indicator-tooltip")}drawLabel(){this.rootG.append("g").attr("class","indicator-label").attr("transform",`translate(0, ${this.innerHeight})`).selectAll("text").data(this.data).enter().append("text").attr("dy","1.5em").attr("dx",t=>this.x(t[this.ordinalAccessor])/2).text(t=>this.getLabel(t[this.valueAccessor]))}drawIndicator(){let t=this.rootG.append("g").attr("class","indicator-chart").selectAll("g").data(this.data).enter().append("g");[-2,-1,0,1,2].map(i=>{t.append("rect").attr("x",t=>this.x(t[this.ordinalAccessor])).attr("y",()=>this.y(this.threshold/2*i)-this.indicatorWidth/4).attr("height",this.indicatorWidth/2).attr("width",.8*this.indicatorWidth).attr("fill","#E6E6E6")}),t.append("rect").attr("x",t=>this.x(t[this.ordinalAccessor])-.1*this.indicatorWidth).attr("y",t=>this.y(this.getLevel(t[this.valueAccessor]))-this.indicatorWidth/4).attr("height",this.indicatorWidth/2).attr("width",this.indicatorWidth).attr("fill",t=>this.enableColor?this.getColor(t[this.valueAccessor]):this.defaultColor).on("click",t=>this.onClickHandler(t)).on("mouseover",t=>this.onHoverHandler(t)).on("mouseout",()=>this.onMouseOutHandler())}getLevel(t){return t>=this.threshold?this.threshold:t>=this.threshold/2?this.threshold/2:t>-this.threshold/2?0:t>-this.threshold?-this.threshold/2:-this.threshold}getLabel(t){return t>=this.threshold?this.indicatorLabels[0]:t>=this.threshold/2?this.indicatorLabels[1]:t>-this.threshold/2?this.indicatorLabels[2]:t>-this.threshold?this.indicatorLabels[3]:this.indicatorLabels[4]}getColor(t){return t>=this.threshold?this.colors[0]:t>=this.threshold/2?this.colors[1]:t>-this.threshold/2?this.colors[2]:t>-this.threshold?this.colors[3]:this.colors[4]}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){this.hoverFunc.emit(t),this.eventsTooltip({data:t,evt:kM,isToShow:!0})}onMouseOutHandler(){this.mouseOutFunc.emit(),this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){kx(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:n}){Mx({root:this.tooltipG,data:t,event:i,isToShow:n,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"bar"})}render(){return n("div",{class:"o-layout"},n("div",{class:"o-layout--chart"},n("div",{class:"visa-ui-text--body",style:{visibility:this.showHeader?"visible":"hidden",width:this.wrapLabel?`${1.5*this.indicatorWidth}`+"px":"auto",textAlign:this.alignLabel}},this.data[0][this.ordinalAccessor]),n("div",{class:"indicator-tooltip vcl-tooltip",style:{display:"block"}}),n("div",{id:"visa-viz-d3-indicator-container"})))}get indicatorChartEl(){return s(this)}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}.indicator .indicator-grid line{stroke:#767676;stroke-opacity:1}.indicator .indicator-grid path{stroke-width:0;stroke:#767676}.indicator .indicator-grid text{fill:#767676}.indicator .indicator-label{font-size:0.8em;fill:#767676;text-anchor:start}.indicator .indicator-chart{stroke:#767676}.indicator .indicator-chart rect{stroke:none}"}};window.VisaChartsLibOSSLicenses=bx();var xx="http://www.w3.org/1999/xhtml";const Wx={svg:"http://www.w3.org/2000/svg",xhtml:xx,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nx(t){var i=t+="",n=i.indexOf(":");return n>=0&&"xmlns"!==(i=t.slice(0,n))&&(t=t.slice(n+1)),Wx.hasOwnProperty(i)?{space:Wx[i],local:t}:t}function Lx(t){return function(){var i=this.ownerDocument,n=this.namespaceURI;return n===xx&&i.documentElement.namespaceURI===xx?i.createElement(t):i.createElementNS(n,t)}}function Sx(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Tx(t){var i=Nx(t);return(i.local?Sx:Lx)(i)}function Ex(){}function Dx(t){return null==t?Ex:function(){return this.querySelector(t)}}function $x(){return[]}function Cx(t){return null==t?$x:function(){return this.querySelectorAll(t)}}function Ix(t){return function(){return this.matches(t)}}function Ox(t){return new Array(t.length)}function zx(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function Hx(t,i,n,s,r,e){for(var h,o=0,u=i.length,a=e.length;o<a;++o)(h=i[o])?(h.__data__=e[o],s[o]=h):n[o]=new zx(t,e[o]);for(;o<u;++o)(h=i[o])&&(r[o]=h)}function _x(t,i,n,s,r,e,h){var o,u,a,c={},l=i.length,f=e.length,d=new Array(l);for(o=0;o<l;++o)(u=i[o])&&(d[o]=a="$"+h.call(u,u.__data__,o,i),a in c?r[o]=u:c[a]=u);for(o=0;o<f;++o)(u=c[a="$"+h.call(t,e[o],o,e)])?(s[o]=u,u.__data__=e[o],c[a]=null):n[o]=new zx(t,e[o]);for(o=0;o<l;++o)(u=i[o])&&c[d[o]]===u&&(r[o]=u)}function qx(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function Xx(t){return function(){this.removeAttribute(t)}}function Rx(t){return function(){this.removeAttributeNS(t.space,t.local)}}function jx(t,i){return function(){this.setAttribute(t,i)}}function Px(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function Fx(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Gx(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Vx(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Yx(t){return function(){this.style.removeProperty(t)}}function Kx(t,i,n){return function(){this.style.setProperty(t,i,n)}}function Bx(t,i,n){return function(){var s=i.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function Ux(t,i){return t.style.getPropertyValue(i)||Vx(t).getComputedStyle(t,null).getPropertyValue(i)}function Zx(t){return function(){delete this[t]}}function Jx(t,i){return function(){this[t]=i}}function Qx(t,i){return function(){var n=i.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function tW(t){return t.trim().split(/^|\s+/)}function iW(t){return t.classList||new nW(t)}function nW(t){this._node=t,this._names=tW(t.getAttribute("class")||"")}function sW(t,i){for(var n=iW(t),s=-1,r=i.length;++s<r;)n.add(i[s])}function rW(t,i){for(var n=iW(t),s=-1,r=i.length;++s<r;)n.remove(i[s])}function eW(t){return function(){sW(this,t)}}function hW(t){return function(){rW(this,t)}}function oW(t,i){return function(){(i.apply(this,arguments)?sW:rW)(this,t)}}function uW(){this.textContent=""}function aW(t){return function(){this.textContent=t}}function cW(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function lW(){this.innerHTML=""}function fW(t){return function(){this.innerHTML=t}}function dW(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function vW(){this.nextSibling&&this.parentNode.appendChild(this)}function pW(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yW(){return null}function wW(){var t=this.parentNode;t&&t.removeChild(this)}function gW(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function mW(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}zx.prototype={constructor:zx,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},nW.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var bW={},MW=null;function kW(t,i,n){return t=AW(t,i,n),function(i){var n=i.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,i)}}function AW(t,i,n){return function(s){var r=MW;MW=s;try{t.call(this,this.__data__,i,n)}finally{MW=r}}}function xW(t){return t.trim().split(/^|\s+/).map((function(t){var i="",n=t.indexOf(".");return n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),{type:t,name:i}}))}function WW(t){return function(){var i=this.__on;if(i){for(var n,s=0,r=-1,e=i.length;s<e;++s)n=i[s],t.type&&n.type!==t.type||n.name!==t.name?i[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?i.length=r:delete this.__on}}}function NW(t,i,n){var s=bW.hasOwnProperty(t.type)?kW:AW;return function(r,e,h){var o,u=this.__on,a=s(i,e,h);if(u)for(var c=0,l=u.length;c<l;++c)if((o=u[c]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=a,o.capture=n),void(o.value=i);this.addEventListener(t.type,a,n),o={type:t.type,name:t.name,value:i,listener:a,capture:n},u?u.push(o):this.__on=[o]}}function LW(t,i,n){var s=Vx(t),r=s.CustomEvent;"function"==typeof r?r=new r(i,n):(r=s.document.createEvent("Event"),n?(r.initEvent(i,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function SW(t,i){return function(){return LW(this,t,i)}}function TW(t,i){return function(){return LW(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(bW={mouseenter:"mouseover",mouseleave:"mouseout"}));var EW=[null];function DW(t,i){this._groups=t,this._parents=i}function $W(){return new DW([[document.documentElement]],EW)}function CW(t){return"string"==typeof t?new DW([[document.querySelector(t)]],[document.documentElement]):new DW([[t]],EW)}function IW(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}DW.prototype=$W.prototype={constructor:DW,select:function(t){"function"!=typeof t&&(t=Dx(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h,o=i[r],u=o.length,a=s[r]=new Array(u),c=0;c<u;++c)(e=o[c])&&(h=t.call(e,e.__data__,c,o))&&("__data__"in e&&(h.__data__=e.__data__),a[c]=h);return new DW(s,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Cx(t));for(var i=this._groups,n=i.length,s=[],r=[],e=0;e<n;++e)for(var h,o=i[e],u=o.length,a=0;a<u;++a)(h=o[a])&&(s.push(t.call(h,h.__data__,a,o)),r.push(h));return new DW(s,r)},filter:function(t){"function"!=typeof t&&(t=Ix(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h=i[r],o=h.length,u=s[r]=[],a=0;a<o;++a)(e=h[a])&&t.call(e,e.__data__,a,h)&&u.push(e);return new DW(s,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),a=-1,this.each((function(t){d[++a]=t})),d;var n=i?_x:Hx,s=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),o=new Array(e),u=new Array(e),a=0;a<e;++a){var c=s[a],l=r[a],f=l.length,d=t.call(c,c&&c.__data__,a,s),v=d.length,p=o[a]=new Array(v),y=h[a]=new Array(v);n(c,l,p,y,u[a]=new Array(f),d,i);for(var w,g,m=0,b=0;m<v;++m)if(w=p[m]){for(m>=b&&(b=m+1);!(g=y[b])&&++b<v;);w._next=g||null}}return(h=new DW(h,s))._enter=o,h._exit=u,h},enter:function(){return new DW(this._enter||this._groups.map(Ox),this._parents)},exit:function(){return new DW(this._exit||this._groups.map(Ox),this._parents)},join:function(t,i,n){var s=this.enter(),r=this,e=this.exit();return s="function"==typeof t?t(s):s.append(t+""),null!=i&&(r=i(r)),null==n?e.remove():n(e),s&&r?s.merge(r).order():r},merge:function(t){for(var i=this._groups,n=t._groups,s=i.length,r=Math.min(s,n.length),e=new Array(s),h=0;h<r;++h)for(var o,u=i[h],a=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=u[f]||a[f])&&(l[f]=o);for(;h<s;++h)e[h]=i[h];return new DW(e,this._parents)},order:function(){for(var t=this._groups,i=-1,n=t.length;++i<n;)for(var s,r=t[i],e=r.length-1,h=r[e];--e>=0;)(s=r[e])&&(h&&4^s.compareDocumentPosition(h)&&h.parentNode.insertBefore(s,h),h=s);return this},sort:function(t){function i(i,n){return i&&n?t(i.__data__,n.__data__):!i-!n}t||(t=qx);for(var n=this._groups,s=n.length,r=new Array(s),e=0;e<s;++e){for(var h,o=n[e],u=o.length,a=r[e]=new Array(u),c=0;c<u;++c)(h=o[c])&&(a[c]=h);a.sort(i)}return new DW(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var s=t[i],r=0,e=s.length;r<e;++r){var h=s[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,n=0,s=i.length;n<s;++n)for(var r,e=i[n],h=0,o=e.length;h<o;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var n=Nx(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((null==i?n.local?Rx:Xx:"function"==typeof i?n.local?Gx:Fx:n.local?Px:jx)(n,i))},style:function(t,i,n){return arguments.length>1?this.each((null==i?Yx:"function"==typeof i?Bx:Kx)(t,i,null==n?"":n)):Ux(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?Zx:"function"==typeof i?Qx:Jx)(t,i)):this.node()[t]},classed:function(t,i){var n=tW(t+"");if(arguments.length<2){for(var s=iW(this.node()),r=-1,e=n.length;++r<e;)if(!s.contains(n[r]))return!1;return!0}return this.each(("function"==typeof i?oW:i?eW:hW)(n,i))},text:function(t){return arguments.length?this.each(null==t?uW:("function"==typeof t?cW:aW)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?lW:("function"==typeof t?dW:fW)(t)):this.node().innerHTML},raise:function(){return this.each(vW)},lower:function(){return this.each(pW)},append:function(t){var i="function"==typeof t?t:Tx(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var n="function"==typeof t?t:Tx(t),s=null==i?yW:"function"==typeof i?i:Dx(i);return this.select((function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)}))},remove:function(){return this.each(wW)},clone:function(t){return this.select(t?mW:gW)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,n){var s,r,e=xW(t+""),h=e.length;if(!(arguments.length<2)){for(o=i?NW:WW,null==n&&(n=!1),s=0;s<h;++s)this.each(o(e[s],i,n));return this}var o=this.node().__on;if(o)for(var u,a=0,c=o.length;a<c;++a)for(s=0,u=o[a];s<h;++s)if((r=e[s]).type===u.type&&r.name===u.name)return u.value},dispatch:function(t,i){return this.each(("function"==typeof i?TW:SW)(t,i))}};var OW=function(t){return 1===t.length&&(t=function(t){return function(i,n){return IW(t(i),n)}}(t)),{left:function(i,n,s,r){for(null==s&&(s=0),null==r&&(r=i.length);s<r;){var e=s+r>>>1;t(i[e],n)<0?s=e+1:r=e}return s},right:function(i,n,s,r){for(null==s&&(s=0),null==r&&(r=i.length);s<r;){var e=s+r>>>1;t(i[e],n)>0?r=e:s=e+1}return s}}}(IW).right;function zW(t,i,n){t=+t,i=+i,n=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+n;for(var s=-1,r=0|Math.max(0,Math.ceil((i-t)/n)),e=new Array(r);++s<r;)e[s]=t+s*n;return e}var HW=Math.sqrt(50),_W=Math.sqrt(10),qW=Math.sqrt(2);function XW(t,i,n){var s=(i-t)/Math.max(0,n),r=Math.floor(Math.log(s)/Math.LN10),e=s/Math.pow(10,r);return r>=0?(e>=HW?10:e>=_W?5:e>=qW?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=HW?10:e>=_W?5:e>=qW?2:1)}var RW=new Date,jW=new Date;function PW(t,i,n,s){function r(i){return t(i=0===arguments.length?new Date:new Date(+i)),i}return r.floor=function(i){return t(i=new Date(+i)),i},r.ceil=function(n){return t(n=new Date(n-1)),i(n,1),t(n),n},r.round=function(t){var i=r(t),n=r.ceil(t);return t-i<n-t?i:n},r.offset=function(t,n){return i(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,s,e){var h,o=[];if(n=r.ceil(n),e=null==e?1:Math.floor(e),!(n<s&&e>0))return o;do{o.push(h=new Date(+n)),i(n,e),t(n)}while(h<n&&n<s);return o},r.filter=function(n){return PW((function(i){if(i>=i)for(;t(i),!n(i);)i.setTime(i-1)}),(function(t,s){if(t>=t)if(s<0)for(;++s<=0;)for(;i(t,-1),!n(t););else for(;--s>=0;)for(;i(t,1),!n(t););}))},n&&(r.count=function(i,s){return RW.setTime(+i),jW.setTime(+s),t(RW),t(jW),Math.floor(n(RW,jW))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(s?function(i){return s(i)%t==0}:function(i){return r.count(0,i)%t==0}):r:null}),r}var FW=PW((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,i){t.setTime(+t+36e5*i)}),(function(t,i){return(i-t)/36e5}),(function(t){return t.getHours()})),GW=PW((function(t){t.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}));function VW(t){return PW((function(i){i.setDate(i.getDate()-(i.getDay()+7-t)%7),i.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+7*i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var YW=VW(0),KW=(VW(1),VW(2),VW(3),VW(4),VW(5),VW(6),PW((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,i){t.setMonth(t.getMonth()+i)}),(function(t,i){return i.getMonth()-t.getMonth()+12*(i.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),BW=PW((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,i){t.setFullYear(t.getFullYear()+i)}),(function(t,i){return i.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));function UW(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function ZW(){}function JW(t,i){var n=new ZW;if(t instanceof ZW)t.each((function(t,i){n.set(i,t)}));else if(Array.isArray(t)){var s,r=-1,e=t.length;if(null==i)for(;++r<e;)n.set(r,t[r]);else for(;++r<e;)n.set(i(s=t[r],r,t),s)}else if(t)for(var h in t)n.set(h,t[h]);return n}function QW(){var t,i,n,s=[],r=[];function e(n,r,h,o){if(r>=s.length)return null!=t&&n.sort(t),null!=i?i(n):n;for(var u,a,c,l=-1,f=n.length,d=s[r++],v=JW(),p=h();++l<f;)(c=v.get(u=d(a=n[l])+""))?c.push(a):v.set(u,[a]);return v.each((function(t,i){o(p,i,e(t,r,h,o))})),p}return n={object:function(t){return e(t,0,tN,iN)},map:function(t){return e(t,0,nN,sN)},entries:function(t){return function t(n,e){if(++e>s.length)return n;var h,o=r[e-1];return null!=i&&e>=s.length?h=n.entries():(h=[],n.each((function(i,n){h.push({key:n,values:t(i,e)})}))),null!=o?h.sort((function(t,i){return o(t.key,i.key)})):h}(e(t,0,nN,sN),0)},key:function(t){return s.push(t),n},sortKeys:function(t){return r[s.length-1]=t,n},sortValues:function(i){return t=i,n},rollup:function(t){return i=t,n}}}function tN(){return{}}function iN(t,i,n){t[i]=n}function nN(){return JW()}function sN(t,i,n){t.set(i,n)}BW.every=function(t){return isFinite(t=Math.floor(t))&&t>0?PW((function(i){i.setFullYear(Math.floor(i.getFullYear()/t)*t),i.setMonth(0,1),i.setHours(0,0,0,0)}),(function(i,n){i.setFullYear(i.getFullYear()+n*t)})):null},ZW.prototype=JW.prototype={constructor:ZW,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var rN=Array.prototype,eN=rN.map,hN=rN.slice,oN={name:"implicit"};function uN(){var t=JW(),i=[],n=[],s=oN;function r(r){var e=r+"",h=t.get(e);if(!h){if(s!==oN)return s;t.set(e,h=i.push(r))}return n[(h-1)%n.length]}return r.domain=function(n){if(!arguments.length)return i.slice();i=[],t=JW();for(var s,e,h=-1,o=n.length;++h<o;)t.has(e=(s=n[h])+"")||t.set(e,i.push(s));return r},r.range=function(t){return arguments.length?(n=hN.call(t),r):n.slice()},r.unknown=function(t){return arguments.length?(s=t,r):s},r.copy=function(){return uN(i,n).unknown(s)},UW.apply(r,arguments),r}function aN(){var t,i,n=uN().unknown(void 0),s=n.domain,r=n.range,e=[0,1],h=!1,o=0,u=0,a=.5;function c(){var n=s().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,n-o+2*u),h&&(t=Math.floor(t)),l+=(f-l-t*(n-o))*a,i=t*(1-o),h&&(l=Math.round(l),i=Math.round(i));var d=zW(n).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(s(t),c()):s()},n.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},n.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},n.bandwidth=function(){return i},n.step=function(){return t},n.round=function(t){return arguments.length?(h=!!t,c()):h},n.padding=function(t){return arguments.length?(o=Math.min(1,u=+t),c()):o},n.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),c()):o},n.paddingOuter=function(t){return arguments.length?(u=+t,c()):u},n.align=function(t){return arguments.length?(a=Math.max(0,Math.min(1,t)),c()):a},n.copy=function(){return aN(s(),e).round(h).paddingInner(o).paddingOuter(u).align(a)},UW.apply(c(),arguments)}function cN(t){var i=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return cN(i())},t}function lN(t,i,n){t.prototype=i.prototype=n,n.constructor=t}function fN(t,i){var n=Object.create(t.prototype);for(var s in i)n[s]=i[s];return n}function dN(){}var vN="\\s*([+-]?\\d+)\\s*",pN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",yN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wN=/^#([0-9a-f]{3,8})$/,gN=new RegExp("^rgb\\("+[vN,vN,vN]+"\\)$"),mN=new RegExp("^rgb\\("+[yN,yN,yN]+"\\)$"),bN=new RegExp("^rgba\\("+[vN,vN,vN,pN]+"\\)$"),MN=new RegExp("^rgba\\("+[yN,yN,yN,pN]+"\\)$"),kN=new RegExp("^hsl\\("+[pN,yN,yN]+"\\)$"),AN=new RegExp("^hsla\\("+[pN,yN,yN,pN]+"\\)$"),xN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function WN(){return this.rgb().formatHex()}function NN(){return this.rgb().formatRgb()}function LN(t){var i,n;return t=(t+"").trim().toLowerCase(),(i=wN.exec(t))?(n=i[1].length,i=parseInt(i[1],16),6===n?SN(i):3===n?new $N(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===n?TN(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===n?TN(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=gN.exec(t))?new $N(i[1],i[2],i[3],1):(i=mN.exec(t))?new $N(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=bN.exec(t))?TN(i[1],i[2],i[3],i[4]):(i=MN.exec(t))?TN(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=kN.exec(t))?zN(i[1],i[2]/100,i[3]/100,1):(i=AN.exec(t))?zN(i[1],i[2]/100,i[3]/100,i[4]):xN.hasOwnProperty(t)?SN(xN[t]):"transparent"===t?new $N(NaN,NaN,NaN,0):null}function SN(t){return new $N(t>>16&255,t>>8&255,255&t,1)}function TN(t,i,n,s){return s<=0&&(t=i=n=NaN),new $N(t,i,n,s)}function EN(t){return t instanceof dN||(t=LN(t)),t?new $N((t=t.rgb()).r,t.g,t.b,t.opacity):new $N}function DN(t,i,n,s){return 1===arguments.length?EN(t):new $N(t,i,n,null==s?1:s)}function $N(t,i,n,s){this.r=+t,this.g=+i,this.b=+n,this.opacity=+s}function CN(){return"#"+ON(this.r)+ON(this.g)+ON(this.b)}function IN(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function ON(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function zN(t,i,n,s){return s<=0?t=i=n=NaN:n<=0||n>=1?t=i=NaN:i<=0&&(t=NaN),new _N(t,i,n,s)}function HN(t){if(t instanceof _N)return new _N(t.h,t.s,t.l,t.opacity);if(t instanceof dN||(t=LN(t)),!t)return new _N;if(t instanceof _N)return t;var i=(t=t.rgb()).r/255,n=t.g/255,s=t.b/255,r=Math.min(i,n,s),e=Math.max(i,n,s),h=NaN,o=e-r,u=(e+r)/2;return o?(h=i===e?(n-s)/o+6*(n<s):n===e?(s-i)/o+2:(i-n)/o+4,o/=u<.5?e+r:2-e-r,h*=60):o=u>0&&u<1?0:h,new _N(h,o,u,t.opacity)}function _N(t,i,n,s){this.h=+t,this.s=+i,this.l=+n,this.opacity=+s}function qN(t,i,n){return 255*(t<60?i+(n-i)*t/60:t<180?n:t<240?i+(n-i)*(240-t)/60:i)}function XN(t){return function(){return t}}function RN(t,i){var n=i-t;return n?function(t,i){return function(n){return t+n*i}}(t,n):XN(isNaN(t)?i:t)}lN(dN,LN,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:WN,formatHex:WN,formatHsl:function(){return HN(this).formatHsl()},formatRgb:NN,toString:NN}),lN($N,DN,fN(dN,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new $N(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new $N(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:CN,formatHex:CN,formatRgb:IN,toString:IN})),lN(_N,(function(t,i,n,s){return 1===arguments.length?HN(t):new _N(t,i,n,null==s?1:s)}),fN(dN,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new _N(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new _N(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*i,r=2*n-s;return new $N(qN(t>=240?t-240:t+120,r,s),qN(t,r,s),qN(t<120?t+240:t-120,r,s),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const jN=function t(i){var n=function(t){return 1==(t=+t)?RN:function(i,n){return n-i?function(t,i,n){return t=Math.pow(t,n),i=Math.pow(i,n)-t,n=1/n,function(s){return Math.pow(t+s*i,n)}}(i,n,t):XN(isNaN(i)?n:i)}}(i);function s(t,i){var s=n((t=DN(t)).r,(i=DN(i)).r),r=n(t.g,i.g),e=n(t.b,i.b),h=RN(t.opacity,i.opacity);return function(i){return t.r=s(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return s.gamma=t,s}(1);function PN(t,i){i||(i=[]);var n,s=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(n=0;n<s;++n)r[n]=t[n]*(1-e)+i[n]*e;return r}}function FN(t,i){var n,s=i?i.length:0,r=t?Math.min(s,t.length):0,e=new Array(r),h=new Array(s);for(n=0;n<r;++n)e[n]=ZN(t[n],i[n]);for(;n<s;++n)h[n]=i[n];return function(t){for(n=0;n<r;++n)h[n]=e[n](t);return h}}function GN(t,i){var n=new Date;return t=+t,i=+i,function(s){return n.setTime(t*(1-s)+i*s),n}}function VN(t,i){return t=+t,i=+i,function(n){return t*(1-n)+i*n}}function YN(t,i){var n,s={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)n in t?s[n]=ZN(t[n],i[n]):r[n]=i[n];return function(t){for(n in s)r[n]=s[n](t);return r}}var KN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,BN=new RegExp(KN.source,"g");function UN(t,i){var n,s,r,e=KN.lastIndex=BN.lastIndex=0,h=-1,o=[],u=[];for(t+="",i+="";(n=KN.exec(t))&&(s=BN.exec(i));)(r=s.index)>e&&(r=i.slice(e,r),o[h]?o[h]+=r:o[++h]=r),(n=n[0])===(s=s[0])?o[h]?o[h]+=s:o[++h]=s:(o[++h]=null,u.push({i:h,x:VN(n,s)})),e=BN.lastIndex;return e<i.length&&(r=i.slice(e),o[h]?o[h]+=r:o[++h]=r),o.length<2?u[0]?function(t){return function(i){return t(i)+""}}(u[0].x):function(t){return function(){return t}}(i):(i=u.length,function(t){for(var n,s=0;s<i;++s)o[(n=u[s]).i]=n.x(t);return o.join("")})}function ZN(t,i){var n,s=typeof i;return null==i||"boolean"===s?XN(i):("number"===s?VN:"string"===s?(n=LN(i))?(i=n,jN):UN:i instanceof LN?jN:i instanceof Date?GN:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?PN:Array.isArray(i)?FN:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?YN:VN)(t,i)}function JN(t,i){return t=+t,i=+i,function(n){return Math.round(t*(1-n)+i*n)}}var QN,tL,iL,nL,sL=180/Math.PI,rL={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function eL(t,i,n,s,r,e){var h,o,u;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(u=t*n+i*s)&&(n-=t*u,s-=i*u),(o=Math.sqrt(n*n+s*s))&&(n/=o,s/=o,u/=o),t*s<i*n&&(t=-t,i=-i,u=-u,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*sL,skewX:Math.atan(u)*sL,scaleX:h,scaleY:o}}function hL(t,i,n,s){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var o=[],u=[];return e=t(e),h=t(h),function(t,s,r,e,h,o){if(t!==r||s!==e){var u=h.push("translate(",null,i,null,n);o.push({i:u-4,x:VN(t,r)},{i:u-2,x:VN(s,e)})}else(r||e)&&h.push("translate("+r+i+e+n)}(e.translateX,e.translateY,h.translateX,h.translateY,o,u),function(t,i,n,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:n.push(r(n)+"rotate(",null,s)-2,x:VN(t,i)})):i&&n.push(r(n)+"rotate("+i+s)}(e.rotate,h.rotate,o,u),function(t,i,n,e){t!==i?e.push({i:n.push(r(n)+"skewX(",null,s)-2,x:VN(t,i)}):i&&n.push(r(n)+"skewX("+i+s)}(e.skewX,h.skewX,o,u),function(t,i,n,s,e,h){if(t!==n||i!==s){var o=e.push(r(e)+"scale(",null,",",null,")");h.push({i:o-4,x:VN(t,n)},{i:o-2,x:VN(i,s)})}else 1===n&&1===s||e.push(r(e)+"scale("+n+","+s+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,o,u),e=h=null,function(t){for(var i,n=-1,s=u.length;++n<s;)o[(i=u[n]).i]=i.x(t);return o.join("")}}}var oL=hL((function(t){return"none"===t?rL:(QN||(QN=document.createElement("DIV"),tL=document.documentElement,iL=document.defaultView),QN.style.transform=t,t=iL.getComputedStyle(tL.appendChild(QN),null).getPropertyValue("transform"),tL.removeChild(QN),eL(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),uL=hL((function(t){return null==t?rL:(nL||(nL=document.createElementNS("http://www.w3.org/2000/svg","g")),nL.setAttribute("transform",t),(t=nL.transform.baseVal.consolidate())?eL((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):rL)}),", ",")",")");function aL(t){return+t}var cL=[0,1];function lL(t){return t}function fL(t,i){return(i-=t=+t)?function(n){return(n-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function dL(t){var i,n=t[0],s=t[t.length-1];return n>s&&(i=n,n=s,s=i),function(t){return Math.max(n,Math.min(s,t))}}function vL(t,i,n){var s=t[0],r=t[1],e=i[0],h=i[1];return r<s?(s=fL(r,s),e=n(h,e)):(s=fL(s,r),e=n(e,h)),function(t){return e(s(t))}}function pL(t,i,n){var s=Math.min(t.length,i.length)-1,r=new Array(s),e=new Array(s),h=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<s;)r[h]=fL(t[h],t[h+1]),e[h]=n(i[h],i[h+1]);return function(i){var n=OW(t,i,1,s)-1;return e[n](r[n](i))}}function yL(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function wL(t,i){return function(){var t,i,n,s,r,e,h=cL,o=cL,u=ZN,a=lL;function c(){return s=Math.min(h.length,o.length)>2?pL:vL,r=e=null,l}function l(i){return isNaN(i=+i)?n:(r||(r=s(h.map(t),o,u)))(t(a(i)))}return l.invert=function(n){return a(i((e||(e=s(o,h.map(t),VN)))(n)))},l.domain=function(t){return arguments.length?(h=eN.call(t,aL),a===lL||(a=dL(h)),c()):h.slice()},l.range=function(t){return arguments.length?(o=hN.call(t),c()):o.slice()},l.rangeRound=function(t){return o=hN.call(t),u=JN,c()},l.clamp=function(t){return arguments.length?(a=t?dL(h):lL,l):a!==lL},l.interpolate=function(t){return arguments.length?(u=t,c()):u},l.unknown=function(t){return arguments.length?(n=t,l):n},function(n,s){return t=n,i=s,c()}}()(t,i)}function gL(t,i){if((n=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var n,s=t.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+t.slice(n+1)]}function mL(t){return(t=gL(Math.abs(t)))?t[1]:NaN}var bL,ML=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kL(t){if(!(i=ML.exec(t)))throw new Error("invalid format: "+t);var i;return new AL({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function AL(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function xL(t,i){var n=gL(t,i);if(!n)return t+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}kL.prototype=AL.prototype,AL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const WL={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return xL(100*t,i)},r:xL,s:function(t,i){var n=gL(t,i);if(!n)return t+"";var s=n[0],r=n[1],e=r-(bL=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=s.length;return e===h?s:e>h?s+new Array(e-h+1).join("0"):e>0?s.slice(0,e)+"."+s.slice(e):"0."+new Array(1-e).join("0")+gL(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function NL(t){return t}var LL,SL,TL,EL=Array.prototype.map,DL=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function $L(t){var i=t.domain;return t.ticks=function(t){var n=i();return function(t,i,n){var s,r,e,h,o=-1;if(n=+n,(t=+t)==(i=+i)&&n>0)return[t];if((s=i<t)&&(r=t,t=i,i=r),0===(h=XW(t,i,n))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++o<r;)e[o]=(t+o)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++o<r;)e[o]=(t-o)/h;return s&&e.reverse(),e}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var s=i();return function(t,i,n,s){var r,e=function(t,i,n){var s=Math.abs(i-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),e=s/r;return e>=HW?r*=10:e>=_W?r*=5:e>=qW&&(r*=2),i<t?-r:r}(t,i,n);switch((s=kL(null==s?",f":s)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=s.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(mL(i)/3)))-mL(Math.abs(t)))}(e,h))||(s.precision=r),TL(s,h);case"":case"e":case"g":case"p":case"r":null!=s.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,mL(i)-mL(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(s.precision=r-("e"===s.type));break;case"f":case"%":null!=s.precision||isNaN(r=function(t){return Math.max(0,-mL(Math.abs(t)))}(e))||(s.precision=r-2*("%"===s.type))}return SL(s)}(s[0],s[s.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var s,r=i(),e=0,h=r.length-1,o=r[e],u=r[h];return u<o&&(s=o,o=u,u=s,s=e,e=h,h=s),(s=XW(o,u,n))>0?s=XW(o=Math.floor(o/s)*s,u=Math.ceil(u/s)*s,n):s<0&&(s=XW(o=Math.ceil(o*s)/s,u=Math.floor(u*s)/s,n)),s>0?(r[e]=Math.floor(o/s)*s,r[h]=Math.ceil(u/s)*s,i(r)):s<0&&(r[e]=Math.ceil(o*s)/s,r[h]=Math.floor(u*s)/s,i(r)),t},t}function CL(){var t=wL(lL,lL);return t.copy=function(){return yL(t,CL())},UW.apply(t,arguments),$L(t)}LL=function(t){var i,n,s=void 0===t.grouping||void 0===t.thousands?NL:(i=EL.call(t.grouping,Number),n=t.thousands+"",function(t,s){for(var r=t.length,e=[],h=0,o=i[0],u=0;r>0&&o>0&&(u+o+1>s&&(o=Math.max(1,s-u)),e.push(t.substring(r-=o,r+o)),!((u+=o+1)>s));)o=i[h=(h+1)%i.length];return e.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?NL:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(EL.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",a=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=kL(t)).fill,n=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,g=t.type;"n"===g?(p=!0,g="g"):WL[g]||(void 0===y&&(y=12),w=!0,g="g"),(d||"0"===i&&"="===n)&&(d=!0,i="0",n="=");var m="$"===f?r:"#"===f&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===f?e:/[%p]/.test(g)?u:"",M=WL[g],k=/[defgprs%]/.test(g);function A(t){var r,e,u,f=m,A=b;if("c"===g)A=M(t)+A,t="";else{var x=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,n=t.length,s=1,r=-1;s<n;++s)switch(t[s]){case".":r=i=s;break;case"0":0===r&&(r=s),i=s;break;default:if(!+t[s])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),x&&0==+t&&"+"!==l&&(x=!1),f=(x?"("===l?l:a:"-"===l||"("===l?"":l)+f,A=("s"===g?DL[8+bL/3]:"")+A+(x&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(u=t.charCodeAt(r))||u>57){A=(46===u?h+t.slice(r+1):t.slice(r))+A,t=t.slice(0,r);break}}p&&!d&&(t=s(t,1/0));var W=f.length+t.length+A.length,N=W<v?new Array(v-W+1).join(i):"";switch(p&&d&&(t=s(N+t,N.length?v-A.length:1/0),N=""),n){case"<":t=f+t+A+N;break;case"=":t=f+N+t+A;break;case"^":t=N.slice(0,W=N.length>>1)+f+t+A+N.slice(W);break;default:t=N+f+t+A}return o(t)}return y=void 0===y?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),A.toString=function(){return t+""},A}return{format:l,formatPrefix:function(t,i){var n=l(((t=kL(t)).type="f",t)),s=3*Math.max(-8,Math.min(8,Math.floor(mL(i)/3))),r=Math.pow(10,-s),e=DL[8+s/3];return function(t){return n(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),SL=LL.format,TL=LL.formatPrefix;var IL=Math.PI,OL=2*IL,zL=OL-1e-6;function HL(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function _L(){return new HL}function qL(t){return function(){return t}}function XL(t){this._context=t}function RL(t){return new XL(t)}function jL(t){return t[0]}function PL(t){return t[1]}function FL(){var t=jL,i=PL,n=qL(!0),s=null,r=RL,e=null;function h(h){var o,u,a,c=h.length,l=!1;for(null==s&&(e=r(a=_L())),o=0;o<=c;++o)!(o<c&&n(u=h[o],o,h))===l&&((l=!l)?e.lineStart():e.lineEnd()),l&&e.point(+t(u,o,h),+i(u,o,h));if(a)return e=null,a+""||null}return h.x=function(i){return arguments.length?(t="function"==typeof i?i:qL(+i),h):t},h.y=function(t){return arguments.length?(i="function"==typeof t?t:qL(+t),h):i},h.defined=function(t){return arguments.length?(n="function"==typeof t?t:qL(!!t),h):n},h.curve=function(t){return arguments.length?(r=t,null!=s&&(e=r(s)),h):r},h.context=function(t){return arguments.length?(null==t?s=e=null:e=r(s=t),h):s},h}HL.prototype=_L.prototype={constructor:HL,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,n,s){this._+="Q"+ +t+","+ +i+","+(this._x1=+n)+","+(this._y1=+s)},bezierCurveTo:function(t,i,n,s,r,e){this._+="C"+ +t+","+ +i+","+ +n+","+ +s+","+(this._x1=+r)+","+(this._y1=+e)},arcTo:function(t,i,n,s,r){var e=this._x1,h=this._y1,o=(n=+n)-(t=+t),u=(s=+s)-(i=+i),a=e-t,c=h-i,l=a*a+c*c;if((r=+r)<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=i);else if(l>1e-6)if(Math.abs(c*o-u*a)>1e-6&&r){var f=n-e,d=s-h,v=o*o+u*u,p=f*f+d*d,y=Math.sqrt(v),w=Math.sqrt(l),g=r*Math.tan((IL-Math.acos((v+l-p)/(2*y*w)))/2),m=g/w,b=g/y;Math.abs(m-1)>1e-6&&(this._+="L"+(t+m*a)+","+(i+m*c)),this._+="A"+r+","+r+",0,0,"+ +(c*f>a*d)+","+(this._x1=t+b*o)+","+(this._y1=i+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=i)},arc:function(t,i,n,s,r,e){t=+t,i=+i,e=!!e;var h=(n=+n)*Math.cos(s),o=n*Math.sin(s),u=t+h,a=i+o,c=1^e,l=e?s-r:r-s;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+a:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-a)>1e-6)&&(this._+="L"+u+","+a),n&&(l<0&&(l=l%OL+OL),l>zL?this._+="A"+n+","+n+",0,1,"+c+","+(t-h)+","+(i-o)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=a):l>1e-6&&(this._+="A"+n+","+n+",0,"+ +(l>=IL)+","+c+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=i+n*Math.sin(r))))},rect:function(t,i,n,s){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +n+"v"+ +s+"h"+-n+"Z"},toString:function(){return this._}},XL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i)}}};const{propDefaultValues:GL}=r;class VL{}function YL(t){return 1-Math.sqrt(1-t*t)}VL.mainTitle="Parallel Plot Title",VL.subTitle="This is the parallel plot's subtitle",VL.height=300,VL.width=500,VL.margin={top:3,bottom:3,right:5,left:5},VL.padding={top:20,bottom:50,right:100,left:75},VL.ordinalAccessor="label",VL.valueAccessor="value",VL.seriesAccessor="series",VL.accessibility=GL.accessibility,VL.highestHeadingLevel=GL.highestHeadingLevel,VL.xAxis=GL.xAxis,VL.yAxis=GL.yAxis,VL.showBaselineX=GL.showBaselineFalse,VL.wrapLabel=GL.wrapLabel,VL.colorPalette=GL.colorPaletteCategorical,VL.hoverStyle=GL.hoverStyle,VL.clickStyle=GL.clickStyle,VL.referenceStyle=GL.referenceStyle,VL.strokeWidth=GL.strokeWidth1,VL.showDots=GL.showDots,VL.dotRadius=GL.dotRadius4,VL.hoverOpacity=GL.hoverOpacity,VL.cursor=GL.cursor,VL.dataLabel=GL.dataLabelBottomRight,VL.seriesLabel=GL.seriesLabel,VL.legend=GL.hiddenLegend,VL.tooltipLabel=GL.tooltipLabel,VL.secondaryLines=GL.secondaryLines,VL.showTooltip=GL.showTooltip,VL.suppressEvents=GL.suppressEvents,VL.referenceLines=GL.referenceLines,VL.annotations=GL.annotations,VL.clickHighlight=GL.clickHighlight;var KL={value:function(){}};function BL(){for(var t,i=0,n=arguments.length,s={};i<n;++i){if(!(t=arguments[i]+"")||t in s||/[\s.]/.test(t))throw new Error("illegal type: "+t);s[t]=[]}return new UL(s)}function UL(t){this._=t}function ZL(t,i){return t.trim().split(/^|\s+/).map((function(t){var n="",s=t.indexOf(".");if(s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function JL(t,i){for(var n,s=0,r=t.length;s<r;++s)if((n=t[s]).name===i)return n.value}function QL(t,i,n){for(var s=0,r=t.length;s<r;++s)if(t[s].name===i){t[s]=KL,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=n&&t.push({name:i,value:n}),t}UL.prototype=BL.prototype={constructor:UL,on:function(t,i){var n,s=this._,r=ZL(t+"",s),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(n=(t=r[e]).type)s[n]=QL(s[n],t.name,i);else if(null==i)for(n in s)s[n]=QL(s[n],t.name,null);return this}for(;++e<h;)if((n=(t=r[e]).type)&&(n=JL(s[n],t.name)))return n},copy:function(){var t={},i=this._;for(var n in i)t[n]=i[n].slice();return new UL(t)},call:function(t,i){if((n=arguments.length-2)>0)for(var n,s,r=new Array(n),e=0;e<n;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,n=(s=this._[t]).length;e<n;++e)s[e].value.apply(i,r)},apply:function(t,i,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],r=0,e=s.length;r<e;++r)s[r].value.apply(i,n)}};var tS,iS,nS=0,sS=0,rS=0,eS=0,hS=0,oS=0,uS="object"==typeof performance&&performance.now?performance:Date,aS="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function cS(){return hS||(aS(lS),hS=uS.now()+oS)}function lS(){hS=0}function fS(){this._call=this._time=this._next=null}function dS(t,i,n){var s=new fS;return s.restart(t,i,n),s}function vS(){hS=(eS=uS.now())+oS,nS=sS=0;try{!function(){cS(),++nS;for(var t,i=tS;i;)(t=hS-i._time)>=0&&i._call.call(null,t),i=i._next;--nS}()}finally{nS=0,function(){for(var t,i,n=tS,s=1/0;n;)n._call?(s>n._time&&(s=n._time),t=n,n=n._next):(i=n._next,n._next=null,n=t?t._next=i:tS=i);iS=t,yS(s)}(),hS=0}}function pS(){var t=uS.now(),i=t-eS;i>1e3&&(oS-=i,eS=t)}function yS(t){nS||(sS&&(sS=clearTimeout(sS)),t-hS>24?(t<1/0&&(sS=setTimeout(vS,t-uS.now()-oS)),rS&&(rS=clearInterval(rS))):(rS||(eS=uS.now(),rS=setInterval(pS,1e3)),nS=1,aS(vS)))}function wS(t,i,n){var s=new fS;return s.restart((function(n){s.stop(),t(n+i)}),i=null==i?0:+i,n),s}fS.prototype=dS.prototype={constructor:fS,restart:function(t,i,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?cS():+n)+(null==i?0:+i),this._next||iS===this||(iS?iS._next=this:tS=this,iS=this),this._call=t,this._time=n,yS()},stop:function(){this._call&&(this._call=null,this._time=1/0,yS())}};var gS=BL("start","end","interrupt"),mS=[];function bS(t,i,n,s,r,e){var h=t.__transition;if(h){if(n in h)return}else t.__transition={};!function(t,i,n){var s,r=t.__transition;function e(u){var a,c,l,f;if(1!==n.state)return o();for(a in r)if((f=r[a]).name===n.name){if(3===f.state)return wS(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[a]):+a<i&&(f.state=6,f.timer.stop(),delete r[a])}if(wS((function(){3===n.state&&(n.state=4,n.timer.restart(h,n.delay,n.time),h(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,s=new Array(l=n.tween.length),a=0,c=-1;a<l;++a)(f=n.tween[a].value.call(t,t.__data__,n.index,n.group))&&(s[++c]=f);s.length=c+1}}function h(i){for(var r=i<n.duration?n.ease.call(null,i/n.duration):(n.timer.restart(o),n.state=5,1),e=-1,h=s.length;++e<h;)s[e].call(null,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){for(var s in n.state=6,n.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=n,n.timer=dS((function(t){n.state=1,n.timer.restart(e,n.delay,n.time),n.delay<=t&&e(t-n.delay)}),0,n.time)}(t,n,{name:i,index:s,group:r,on:gS,tween:mS,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function MS(t,i){var n=AS(t,i);if(n.state>0)throw new Error("too late; already scheduled");return n}function kS(t,i){var n=AS(t,i);if(n.state>2)throw new Error("too late; already started");return n}function AS(t,i){var n=t.__transition;if(!n||!(n=n[i]))throw new Error("transition not found");return n}function xS(t,i){var n,s;return function(){var r=kS(this,t),e=r.tween;if(e!==n)for(var h=0,o=(s=n=e).length;h<o;++h)if(s[h].name===i){(s=s.slice()).splice(h,1);break}r.tween=s}}function WS(t,i,n){var s,r;if("function"!=typeof n)throw new Error;return function(){var e=kS(this,t),h=e.tween;if(h!==s){r=(s=h).slice();for(var o={name:i,value:n},u=0,a=r.length;u<a;++u)if(r[u].name===i){r[u]=o;break}u===a&&r.push(o)}e.tween=r}}function NS(t,i,n){var s=t._id;return t.each((function(){var t=kS(this,s);(t.value||(t.value={}))[i]=n.apply(this,arguments)})),function(t){return AS(t,s).value[i]}}function LS(t,i){var n;return("number"==typeof i?VN:i instanceof LN?jN:(n=LN(i))?(i=n,jN):UN)(t,i)}function SS(t){return function(){this.removeAttribute(t)}}function TS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ES(t,i,n){var s,r;return function(){var e=this.getAttribute(t);return e===n?null:e===s?r:r=i(s=e,n)}}function DS(t,i,n){var s,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===n?null:e===s?r:r=i(s=e,n)}}function $S(t,i,n){var s,r,e;return function(){var h,o=n(this);if(null!=o)return(h=this.getAttribute(t))===o?null:h===s&&o===r?e:e=i(s=h,r=o);this.removeAttribute(t)}}function CS(t,i,n){var s,r,e;return function(){var h,o=n(this);if(null!=o)return(h=this.getAttributeNS(t.space,t.local))===o?null:h===s&&o===r?e:e=i(s=h,r=o);this.removeAttributeNS(t.space,t.local)}}function IS(t,i){function n(){var n=this,s=i.apply(n,arguments);return s&&function(i){n.setAttributeNS(t.space,t.local,s(i))}}return n._value=i,n}function OS(t,i){function n(){var n=this,s=i.apply(n,arguments);return s&&function(i){n.setAttribute(t,s(i))}}return n._value=i,n}function zS(t,i){return function(){MS(this,t).delay=+i.apply(this,arguments)}}function HS(t,i){return i=+i,function(){MS(this,t).delay=i}}function _S(t,i){return function(){kS(this,t).duration=+i.apply(this,arguments)}}function qS(t,i){return i=+i,function(){kS(this,t).duration=i}}function XS(t,i){if("function"!=typeof i)throw new Error;return function(){kS(this,t).ease=i}}function RS(t,i,n){var s,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?MS:kS;return function(){var h=e(this,t),o=h.on;o!==s&&(r=(s=o).copy()).on(i,n),h.on=r}}var jS=$W.prototype.constructor;function PS(t,i,n){function s(){var s=this,r=i.apply(s,arguments);return r&&function(i){s.style.setProperty(t,r(i),n)}}return s._value=i,s}var FS=0;function GS(t,i,n,s){this._groups=t,this._parents=i,this._name=n,this._id=s}function VS(){return++FS}var YS=$W.prototype;GS.prototype=function(t){return $W().transition(t)}.prototype={constructor:GS,select:function(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=Dx(t));for(var s=this._groups,r=s.length,e=new Array(r),h=0;h<r;++h)for(var o,u,a=s[h],c=a.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=a[f])&&(u=t.call(o,o.__data__,f,a))&&("__data__"in o&&(u.__data__=o.__data__),l[f]=u,bS(l[f],i,n,f,l,AS(o,n)));return new GS(e,this._parents,i,n)},selectAll:function(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=Cx(t));for(var s=this._groups,r=s.length,e=[],h=[],o=0;o<r;++o)for(var u,a=s[o],c=a.length,l=0;l<c;++l)if(u=a[l]){for(var f,d=t.call(u,u.__data__,l,a),v=AS(u,n),p=0,y=d.length;p<y;++p)(f=d[p])&&bS(f,i,n,p,d,v);e.push(d),h.push(u)}return new GS(e,h,i,n)},filter:function(t){"function"!=typeof t&&(t=Ix(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h=i[r],o=h.length,u=s[r]=[],a=0;a<o;++a)(e=h[a])&&t.call(e,e.__data__,a,h)&&u.push(e);return new GS(s,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,n=t._groups,s=i.length,r=Math.min(s,n.length),e=new Array(s),h=0;h<r;++h)for(var o,u=i[h],a=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=u[f]||a[f])&&(l[f]=o);for(;h<s;++h)e[h]=i[h];return new GS(e,this._parents,this._name,this._id)},selection:function(){return new jS(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,n=VS(),s=this._groups,r=s.length,e=0;e<r;++e)for(var h,o=s[e],u=o.length,a=0;a<u;++a)if(h=o[a]){var c=AS(h,i);bS(h,t,n,a,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new GS(s,this._parents,t,n)},call:YS.call,nodes:YS.nodes,node:YS.node,size:YS.size,empty:YS.empty,each:YS.each,on:function(t,i){var n=this._id;return arguments.length<2?AS(this.node(),n).on.on(t):this.each(RS(n,t,i))},attr:function(t,i){var n=Nx(t),s="transform"===n?uL:LS;return this.attrTween(t,"function"==typeof i?(n.local?CS:$S)(n,s,NS(this,"attr."+t,i)):null==i?(n.local?TS:SS)(n):(n.local?DS:ES)(n,s,i+""))},attrTween:function(t,i){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;var s=Nx(t);return this.tween(n,(s.local?IS:OS)(s,i))},style:function(t,i,n){var s="transform"==(t+="")?oL:LS;return null==i?this.styleTween(t,function(t,i){var n,s,r;return function(){var e=Ux(this,t),h=(this.style.removeProperty(t),Ux(this,t));return e===h?null:e===n&&h===s?r:r=i(n=e,s=h)}}(t,s)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,n){var s,r,e;return function(){var h=Ux(this,t),o=n(this);return null==o&&(this.style.removeProperty(t),o=Ux(this,t)),h===o?null:h===s&&o===r?e:e=i(s=h,r=o)}}(t,s,NS(this,"style."+t,i)):function(t,i,n){var s,r;return function(){var e=Ux(this,t);return e===n?null:e===s?r:r=i(s=e,n)}}(t,s,i+""),n)},styleTween:function(t,i,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;return this.tween(s,PS(t,i,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(NS(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var n in this.__transition)if(+n!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var n=this._id;if(t+="",arguments.length<2){for(var s,r=AS(this.node(),n).tween,e=0,h=r.length;e<h;++e)if((s=r[e]).name===t)return s.value;return null}return this.each((null==i?xS:WS)(n,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?zS:HS)(i,t)):AS(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?_S:qS)(i,t)):AS(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(XS(i,t)):AS(this.node(),i).ease}};var KS={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function BS(t,i){for(var n;!(n=t.__transition)||!(n=n[i]);)if(!(t=t.parentNode))return KS.time=cS(),KS;return n}$W.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var n,s,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(n=e[r]).name===i?(s=n.state>2&&n.state<5,n.state=6,n.timer.stop(),s&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},$W.prototype.transition=function(t){var i,n;t instanceof GS?(i=t._id,t=t._name):(i=VS(),(n=KS).time=cS(),t=null==t?null:t+"");for(var s=this._groups,r=s.length,e=0;e<r;++e)for(var h,o=s[e],u=o.length,a=0;a<u;++a)(h=o[a])&&bS(h,t,i,a,o,n||BS(h,i));return new GS(s,this._parents,t,i)};var US="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),ZS=new Uint8Array(16);function JS(){if(!US)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return US(ZS)}for(var QS=[],tT=0;tT<256;++tT)QS[tT]=(tT+256).toString(16).substr(1);function iT(t,i,n){var s=i&&n||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||JS)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[s+e]=r[e];return i||function(t){var i=0;return[QS[t[i++]],QS[t[i++]],QS[t[i++]],QS[t[i++]],"-",QS[t[i++]],QS[t[i++]],"-",QS[t[i++]],QS[t[i++]],"-",QS[t[i++]],QS[t[i++]],"-",QS[t[i++]],QS[t[i++]],QS[t[i++]],QS[t[i++]],QS[t[i++]],QS[t[i++]]].join("")}(r)}const{getAccessibleStrokes:nT,ensureTextContrast:sT,createTextStrokeFilter:rT,findTagLevel:eT,initializeDescriptionRoot:hT,initializeElementAccess:oT,setElementFocusHandler:uT,setElementAccessID:aT,setAccessibilityController:cT,hideNonessentialGroups:lT,setAccessTitle:fT,setAccessSubtitle:dT,setAccessLongDescription:vT,setAccessExecutiveSummary:pT,setAccessPurpose:yT,setAccessContext:wT,setAccessStatistics:gT,setAccessChartCounts:mT,setAccessXAxis:bT,setAccessYAxis:MT,setAccessStructure:kT,setAccessAnnotation:AT,retainAccessFocus:xT,checkAccessFocus:WT,setElementInteractionAccessState:NT,setAccessibilityDescriptionWidth:LT,annotate:ST,chartAccessors:TT,checkInteraction:ET,checkClicked:DT,checkHovered:$T,convertVisaColor:CT,drawAxis:IT,drawGrid:OT,drawLegend:zT,setLegendInteractionState:HT,drawTooltip:_T,formatDataLabel:qT,getColors:XT,getLicenses:RT,getPadding:jT,getScopedData:PT,initTooltipStyle:FT,overrideTitleTooltip:GT,placeDataLabels:VT,resolveLines:YT,scopeDataKeys:KT,transitionEndAll:BT,visaColors:UT,validateAccessibilityProps:ZT}=r,JT=class{constructor(n){t(this,n),this.mainTitle=VL.mainTitle,this.subTitle=VL.subTitle,this.height=VL.height,this.width=VL.width,this.highestHeadingLevel=VL.highestHeadingLevel,this.margin=VL.margin,this.padding=VL.padding,this.ordinalAccessor=VL.ordinalAccessor,this.valueAccessor=VL.valueAccessor,this.seriesAccessor=VL.seriesAccessor,this.xAxis=VL.xAxis,this.yAxis=VL.yAxis,this.wrapLabel=VL.wrapLabel,this.showBaselineX=VL.showBaselineX,this.colorPalette=VL.colorPalette,this.hoverStyle=VL.hoverStyle,this.clickStyle=VL.clickStyle,this.referenceStyle=VL.referenceStyle,this.cursor=VL.cursor,this.hoverOpacity=VL.hoverOpacity,this.strokeWidth=VL.strokeWidth,this.showDots=VL.showDots,this.dotRadius=VL.dotRadius,this.dataLabel=VL.dataLabel,this.showTooltip=VL.showTooltip,this.tooltipLabel=VL.tooltipLabel,this.accessibility=VL.accessibility,this.legend=VL.legend,this.annotations=VL.annotations,this.seriesLabel=VL.seriesLabel,this.referenceLines=VL.referenceLines,this.secondaryLines=VL.secondaryLines,this.suppressEvents=VL.suppressEvents,this.clickHighlight=VL.clickHighlight,this.unitTest=!1,this.shouldValidateAccessibility=!0,this.updated=!0,this.enterSize=0,this.exitSize=0,this.time={timehour:FW,timeday:GW,timeweek:YW,timemonth:KW,timeyear:BW},this.shouldUpdateXAxis=!1,this.shouldUpdateYAxis=!1,this.shouldUpdateXGrid=!1,this.shouldUpdateYGrid=!1,this.shouldValidate=!1,this.shouldUpdateData=!1,this.shouldSetDimensions=!1,this.shouldUpdateScales=!1,this.shouldUpdateTableData=!1,this.shouldUpdateLabels=!1,this.shouldUpdateAnnotations=!1,this.shouldDrawInteractionState=!1,this.shouldSetSelectionClass=!1,this.shouldUpdateCursor=!1,this.shouldSetColors=!1,this.shouldUpdateLines=!1,this.shouldUpdatePoints=!1,this.shouldUpdateLegend=!1,this.shouldUpdateReferenceLines=!1,this.shouldBindInteractivity=!1,this.shouldUpdateLegendInteractivity=!1,this.shouldResetRoot=!1,this.shouldUpdateBaseline=!1,this.shouldValidateInteractionKeys=!1,this.shouldEnterUpdateExit=!1,this.shouldSetGlobalSelections=!1,this.shouldSetTestingAttributes=!1,this.shouldSetLabelOpacity=!1,this.shouldSetSeriesLabelOpacity=!1,this.shouldSetLegendCursor=!1,this.shouldAddStrokeUnder=!1,this.shouldValidateSeriesLabels=!1,this.shouldUpdateSeriesLabels=!1,this.shouldUpdateColors=!1,this.shouldUpdateStrokeWidth=!1,this.shouldUpdateInterpolationData=!1,this.shouldSetScaleUsed=!1,this.shouldUpdateDotRadius=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldUpdateDashPatterns=!1,this.topLevel="h2",this.bottomLevel="p",this.strokes={},this.b=",",this.short="2,2",this.med="4,2",this.long="8,2",this.dashPatterns=["",this.long,this.long+this.b+this.med,this.short+this.b+this.long+this.b+this.long,this.short+this.b+this.short+this.b+this.long],this.dynamicY=t=>"individual"===this.yAxis.scales?this.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor]):this.y(t[this.valueAccessor]),this.interpolateDynamicY=t=>"individual"===this.yAxis.scales?this.interpolating.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor]):this.interpolating.y(t[this.valueAccessor]),this.handleDotStroke=(t,i,n)=>{if(!this.accessibility.hideStrokes){const s=this.clickHighlight&&this.clickHighlight.length>0&&DT(t,this.clickHighlight,this.innerInteractionKeys),r=this.hoverHighlight&&$T(t,this.hoverHighlight,this.innerInteractionKeys),e=CW(n[i].parentNode).attr("fill"),h=s&&this.clickStyle.color?UT[this.clickStyle.color]||this.clickStyle.color:s?e:r&&this.hoverStyle.color?UT[this.hoverStyle.color]||this.hoverStyle.color:e;return CW(n[i]).attr("stroke-width",this.calculateStrokeWidth(t)),CW(n[i]).attr("fill",h),this.strokes[h.toLowerCase()]}return null},this.handleLineStroke=(t,i)=>{const n=this.colorArr[i]||this.colorArr[0],s=t.values[0],r=DT(s,this.clickHighlight,this.innerInteractionKeys),e=$T(s,this.hoverHighlight,this.innerInteractionKeys);return this.seriesInteraction?r&&this.clickStyle.color?this.strokes[(UT[this.clickStyle.color]||this.clickStyle.color).toLowerCase()]:r?n:e&&this.hoverStyle.color?this.strokes[(UT[this.hoverStyle.color]||this.hoverStyle.color).toLowerCase()]:n:n},this.handleSeriesTextFill=(t,i)=>{const n=this.rawColors[i]||this.rawColors[0],s=t.values[0],r=DT(s,this.clickHighlight,this.innerInteractionKeys),e=$T(s,this.hoverHighlight,this.innerInteractionKeys);return this.textColors[(this.seriesInteraction?r&&this.clickStyle.color?UT[this.clickStyle.color]||this.clickStyle.color:r?n:e&&this.hoverStyle.color?UT[this.hoverStyle.color]||this.hoverStyle.color:n:n).toLowerCase()]},this.handleTextFill=(t,i,n)=>{const s=this.clickHighlight&&this.clickHighlight.length>0&&DT(t,this.clickHighlight,this.innerInteractionKeys),r=this.hoverHighlight&&$T(t,this.hoverHighlight,this.innerInteractionKeys),e=CW(n[i].parentNode).attr("fill");return this.textColors[(s&&this.clickStyle.color?UT[this.clickStyle.color]||this.clickStyle.color:s?e:r&&this.hoverStyle.color?UT[this.hoverStyle.color]||this.hoverStyle.color:e).toLowerCase()]},this.calculateStrokeWidth=(t,i)=>{const n=i?t.values[0]:t;return!i||this.seriesInteraction?DT(n,this.clickHighlight,this.innerInteractionKeys)?this.clickStyle.strokeWidth||this.strokeWidth:$T(n,this.hoverHighlight,this.innerInteractionKeys)?this.hoverStyle.strokeWidth||this.strokeWidth:this.secondaryLines.keys.includes(n[this.seriesAccessor])?1:this.strokeWidth:this.secondaryLines.keys.includes(n[this.seriesAccessor])?1:this.strokeWidth},this.handleStrokeDasharray=(t,i)=>this.secondaryLines.keys.includes(t.key)?this.short:this.accessibility.hideTextures?"":this.dashPatterns[i],this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}dataWatcher(t,i){this.updated=!0,this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateData=!0,this.shouldUpdateInterpolationData=!0,this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateDotRadius=!0,this.shouldSetGlobalSelections=!0,this.shouldSetTestingAttributes=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldValidate=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0}idWatcher(t,i){this.chartID=t,this.parallelChartEl.id=this.chartID,this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateLegend=!0,this.shouldUpdateLegend=!0,this.shouldAddStrokeUnder=!0}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}titleWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subtitleWatcher(t,i){this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}dimensionWatcher(t,i){this.shouldSetDimensions=!0,this.shouldResetRoot=!0,this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateInterpolationData=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0}seriesAccessorWatcher(t,i){this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateData=!0,this.shouldUpdateInterpolationData=!0,this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldValidate=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateTableData=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetGroupAccessibilityLabel=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldUpdateLabels=!0,this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0}ordinalAccessorWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldUpdateTableData=!0,this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateInterpolationData=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateStrokeWidth=!0}valueAccessorWatcher(t,i){this.shouldUpdateTableData=!0,this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateInterpolationData=!0,this.shouldSetColors=!0,this.shouldSetGlobalSelections=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGlobalSelections=!0}xAxisWatcher(t,i){this.shouldUpdateXAxis=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateXGrid=!0),this.shouldSetXAxisAccessibility=!0}yAxisWatcher(t,i){(!(!t||!t.scales)&&t.scales)!==(!(!i||!i.scales)&&i.scales)&&(this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateData=!0,this.shouldUpdateInterpolationData=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0),this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateYGrid=!0)}wrapLabelWatcher(t,i){this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0}showBaselineXWatcher(t,i){this.shouldUpdateBaseline=!0}paletteWatcher(t,i){this.shouldSetColors=!0,this.shouldUpdateColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0}colorsWatcher(t,i){this.shouldSetColors=!0,this.shouldUpdateColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0}clickStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldSetColors=!0}hoverStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldSetColors=!0}referenceWatcher(t,i){this.shouldUpdateReferenceLines=!0}cursorWatcher(t,i){this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0}strokeWidthWatcher(t,i){this.shouldUpdateStrokeWidth=!0}showDotsWatcher(t,i){this.shouldDrawInteractionState=!0}dotRadiusWatcher(t,i){this.shouldUpdateDotRadius=!0}hoverOpacityWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0}dataLabelWatcher(t,i){this.shouldUpdateLabels=!0,this.shouldUpdateTableData=!0;const n=!(!t||!t.placement)&&t.placement,s=!(!i||!i.placement)&&i.placement;(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetLabelOpacity=!0),n!==s&&(this.shouldUpdateSeriesLabels=!0)}seriesLabelWatcher(t,i){this.shouldUpdateSeriesLabels=!0,this.shouldUpdateTableData=!0,this.shouldValidateSeriesLabels=!0,(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetSeriesLabelOpacity=!0)}tooltipLabelWatcher(t,i){this.shouldUpdateTableData=!0}showTooltipWatcher(t,i){}accessibilityWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const n=t&&t.includeDataKeyNames,s=i&&i.includeDataKeyNames;n===s&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(n!==s&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.showSmallLabels)&&t.showSmallLabels)!==(!(!i||!i.showSmallLabels)&&i.showSmallLabels)&&(this.shouldSetLabelOpacity=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!i||!i.hideStrokes)&&i.hideStrokes)&&(this.shouldUpdateStrokeWidth=!0,this.shouldSetColors=!0,this.shouldDrawInteractionState=!0),(!(!t||!t.hideTextures)&&t.hideTextures)!==(!(!i||!i.hideTextures)&&i.hideTextures)&&(this.shouldUpdateDashPatterns=!0,this.shouldUpdateLegend=!0);const r=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,e=!(!i||!i.elementsAreInterface)&&i.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled)&&i.keyboardNavConfig.disabled)&&r===e||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),r!==e&&(this.shouldSetSelectionClass=!0)}legendWatcher(t,i){this.shouldUpdateLegend=!0,(t&&t.interactive)!==(i&&i.interactive)&&(this.shouldSetLegendCursor=!0,this.shouldUpdateLegendInteractivity=!0)}annotationsWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0}valueOverrideWatcher(t,i){this.shouldSetScaleUsed=!0,this.shouldUpdateScales=!0,this.shouldUpdateInterpolationData=!0,this.shouldUpdateLines=!0,this.shouldUpdatePoints=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateSeriesLabels=!0,this.shouldUpdateLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0}secondaryLinesWatcher(t,i){const n=t&&t.showDataLabel,s=i&&i.showDataLabel,r=t&&t.showSeriesLabel,e=i&&i.showSeriesLabel,h=t&&t.opacity?t.opacity:0,o=i&&i.opacity?i.opacity:0;(!(!t||!t.keys)&&t.keys)!==(!(!i||!i.keys)&&i.keys)&&(this.shouldUpdateLines=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0),n!==s&&(this.shouldSetLabelOpacity=!0),r!==e&&(this.shouldUpdateLabels=!0),h!==o&&(this.shouldDrawInteractionState=!0,this.shouldSetSeriesLabelOpacity=!0)}clickWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldUpdateDotRadius=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0}hoverWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldUpdateDotRadius=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0}interactionWatcher(t,i){this.shouldValidateInteractionKeys=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateDotRadius=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSeriesLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateTableData=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateStrokeWidth=!0,this.shouldUpdateColors=!0,this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0}suppressWatcher(t,i){this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldSetLegendCursor=!0,this.shouldUpdateLegendInteractivity=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}unitTestWatcher(t,i){this.shouldSetTestingAttributes=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.defaults=!0,this.chartID=this.uniqueID||"parallel-plot-"+iT(),this.parallelChartEl.id=this.chartID,this.setTagLevels(),this.setDimensions(),this.setScaleUsed(),this.prepareScales(),this.prepareData(),this.updateInterpolationData(),this.validateInteractionKeys(),this.validateSeriesLabels(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.setColors(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.renderRootElements(),this.renderChartRootElemets(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.drawXGrid(),this.drawYGrid(),this.setGlobalSelections(),this.setTestingAttributes(),this.drawXAxis(),this.setXAxisAccessibility(),this.enterYAxis(),this.exitYAxis(),this.drawYAxis(),this.setYAxisAccessibility(),this.enterChartLines(),this.updateChartLines(),this.exitChartLines(),this.enterPoints(),this.updatePoints(),this.exitPoints(),this.enterSeriesLabels(),this.updateSeriesLabels(),this.exitSeriesLabels(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.drawChartLines(),this.drawPoints(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawSeriesLabels(),this.drawLegendElements(),this.drawDataLabels(),this.addStrokeUnder(),this.drawReferenceLines(),this.setSelectedClass(),this.updateInteractionState(),this.setLabelOpacity(),this.setSeriesLabelOpacity(),this.updateCursor(),this.bindInteractivity(),this.setLegendCursor(),this.bindLegendInteractivity(),this.drawBaseline(),this.drawAnnotations(),this.setAnnotationAccessibility(),lT(this.root.node(),this.dotG.node()),this.setGroupAccessibilityID(),this.onChangeHandler(),this.duration=750,this.defaults=!1,t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldUpdateXGrid&&(this.drawXGrid(),this.shouldUpdateXGrid=!1),this.shouldUpdateYGrid&&(this.drawYGrid(),this.shouldUpdateYGrid=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldSetTestingAttributes&&(this.setTestingAttributes(),this.shouldSetTestingAttributes=!1),this.shouldEnterUpdateExit&&(this.enterYAxis(),this.exitYAxis(),this.enterChartLines(),this.updateChartLines(),this.exitChartLines(),this.enterPoints(),this.updatePoints(),this.exitPoints(),this.enterSeriesLabels(),this.updateSeriesLabels(),this.exitSeriesLabels(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.shouldUpdateLines&&(this.drawChartLines(),this.shouldUpdateLines=!1),this.shouldUpdatePoints&&(this.drawPoints(),this.shouldUpdatePoints=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateSeriesLabels&&(this.drawSeriesLabels(),this.shouldUpdateSeriesLabels=!1),this.shouldUpdateColors&&(this.updateColors(),this.shouldUpdateColors=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldUpdateLabels&&(this.drawDataLabels(),this.shouldUpdateLabels=!1),this.addStrokeUnder&&(this.addStrokeUnder(),this.shouldAddStrokeUnder=!1),this.shouldUpdateReferenceLines&&(this.drawReferenceLines(),this.shouldUpdateReferenceLines=!1),this.shouldUpdateStrokeWidth&&(this.updateStrokeWidth(),this.shouldUpdateStrokeWidth=!1),this.shouldUpdateDotRadius&&(this.updateDotRadius(),this.shouldUpdateDotRadius=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldUpdateDashPatterns&&(this.updateStrokePattern(),this.shouldUpdateDashPatterns=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldSetSeriesLabelOpacity&&(this.setSeriesLabelOpacity(),this.shouldSetSeriesLabelOpacity=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldUpdateLegendInteractivity&&(this.bindLegendInteractivity(),this.shouldUpdateLegendInteractivity=!1),this.shouldSetLegendCursor&&(this.setLegendCursor(),this.shouldSetLegendCursor=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldUpdateBaseline&&(this.drawBaseline(),this.shouldUpdateBaseline=!1),this.onChangeHandler(),t("component did update")})}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,ZT(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:this.suppressEvents?void 0:this.clickFunc.emit}}))}setDimensions(){this.padding="string"==typeof this.padding?jT(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.seriesAccessor],this.seriesInteraction=1===this.innerInteractionKeys.length&&this.innerInteractionKeys[0]===this.seriesAccessor}setColors(){this.rawColors=this.colors?CT(this.colors):XT(this.colorPalette,this.nest.length),this.textColors={};let t=this.rawColors;if(this.strokes={},this.accessibility.hideStrokes||(t=[]),this.rawColors.forEach(i=>{if(!this.accessibility.hideStrokes){const n=nT(i),s=2===n.length?n[1]:n[0];this.strokes[i.toLowerCase()]=s,t.push(s)}this.textColors[i.toLowerCase()]=sT(i,"#ffffff",4.5)}),this.hoverStyle&&this.hoverStyle.color){if(!this.accessibility.hideStrokes){const t=nT(this.hoverStyle.color),i=2===t.length?t[1]:t[0];this.strokes[this.hoverStyle.color.toLowerCase()]=i}this.textColors[this.hoverStyle.color.toLowerCase()]=sT(this.hoverStyle.color,"#ffffff",4.5)}if(this.clickStyle&&this.clickStyle.color){if(!this.accessibility.hideStrokes){const t=nT(this.clickStyle.color),i=2===t.length?t[1]:t[0];this.strokes[this.clickStyle.color.toLowerCase()]=i}this.textColors[this.clickStyle.color.toLowerCase()]=sT(this.clickStyle.color,"#ffffff",4.5)}this.colorArr=t}setTableData(){const t=KT(this,TT,"parallel-plot");this.tableData=PT(this.data,t),this.tableColumns=Object.keys(t)}prepareData(){this.multiYScale={},this.nest=QW().key(t=>(this.multiYScale[t[this.ordinalAccessor]]||(this.multiYScale[t[this.ordinalAccessor]]={min:1/0,max:0}),this.multiYScale[t[this.ordinalAccessor]].min>t[this.valueAccessor]&&(this.multiYScale[t[this.ordinalAccessor]].min=t[this.valueAccessor]),this.multiYScale[t[this.ordinalAccessor]].max<t[this.valueAccessor]&&(this.multiYScale[t[this.ordinalAccessor]].max=t[this.valueAccessor]),t[this.seriesAccessor])).entries(this.data),this.map=QW().key(t=>t[this.seriesAccessor]).map(this.data),Object.keys(this.multiYScale).forEach(t=>{const i=this.multiYScale[t],n=.05*this.innerPaddedHeight;i.y=CL().domain([this.minValueOverride||0===this.minValueOverride?this.minValueOverride:i.min,this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:i.max]).range([this.innerPaddedHeight-n,0+n]),i.ticks=[i.y.invert(this.innerPaddedHeight),i.y.invert(0)]})}updateInterpolationData(){if(this.interpolating){let t=this.nest.length;this.nest.forEach(i=>{i.interpolate={};const n=this.interpolating.map.get(i.key),s=i.values;if(n){const r=YT(n,s,this.ordinalAccessor);r.length?(i.interpolate.start=r[0],i.interpolate.end=r[1]):(i.interpolate.start=n,i.interpolate.end=s,t--)}else i.interpolate.start=s,i.interpolate.end=s}),t||this.nest.length!==this.interpolating.length||(this.interpolating=!1)}}prepareScales(){if(this.nest){this.interpolating=this.nest;const t=this.x.domain(),i=this.x.range(),n=this.y.domain(),s=this.y.range();this.interpolating.scales=this.scalesUsed,this.interpolating.multiYScale=Object.assign({},this.multiYScale),this.interpolating.x=this.x.domain(t).range(i),this.interpolating.y=CL().domain(n).range(s),this.interpolating.line=FL().x(t=>this.interpolating.x(t[this.ordinalAccessor])).y(t=>"individual"===this.interpolating.scales?this.interpolating.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor]):this.interpolating.y(t[this.valueAccessor])),this.interpolating.map=this.map}this.extent={},this.extent.minValue=function(t,i){var n,s,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(n=t[e])&&n>=n)for(s=n;++e<r;)null!=(n=t[e])&&s>n&&(s=n)}else for(;++e<r;)if(null!=(n=i(t[e]))&&n>=n)for(s=n;++e<r;)null!=(n=i(t[e]))&&s>n&&(s=n);return s}(this.data,t=>parseFloat(t[this.valueAccessor])),this.extent.maxValue=function(t,i){var n,s,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(n=t[e])&&n>=n)for(s=n;++e<r;)null!=(n=t[e])&&n>s&&(s=n)}else for(;++e<r;)if(null!=(n=i(t[e]))&&n>=n)for(s=n;++e<r;)null!=(n=i(t[e]))&&n>s&&(s=n);return s}(this.data,t=>parseFloat(t[this.valueAccessor]));let t=0+.05*this.innerPaddedHeight,i=this.innerPaddedHeight-.05*this.innerPaddedHeight;"preNormalized"===this.yAxis.scales&&(this.extent.minValue=0,this.extent.maxValue=1,t=0,i=this.innerPaddedHeight),this.extent.minValue=this.minValueOverride||0===this.minValueOverride?this.minValueOverride:this.extent.minValue,this.extent.maxValue=this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:this.extent.maxValue,t=this.minValueOverride||0===this.minValueOverride?this.minValueOverride:t,i=this.maxValueOverride||0===this.maxValueOverride?this.maxValueOverride:i,this.y=CL().domain([this.extent.minValue,this.extent.maxValue]).range([i,t]),this.x=function(){return cN(aN.apply(null,arguments).paddingInner(1))}().domain(this.data.map(t=>t[this.ordinalAccessor])).range([0,this.innerPaddedWidth]),this.line=FL().x(t=>this.x(t[this.ordinalAccessor])).y(t=>"individual"===this.yAxis.scales?this.multiYScale[t[this.ordinalAccessor]].y(t[this.valueAccessor]):this.y(t[this.valueAccessor]))}validateSeriesLabels(){this.labelDetails=Object.assign({},this.seriesLabel),this.labelDetails.placement||(this.labelDetails.placement=""),this.labelDetails.label&&this.labelDetails.label.length||(this.labelDetails.label=""),this.isRight=this.labelDetails.placement.includes("right")}setScaleUsed(){this.scalesUsed=this.yAxis.scales}renderRootElements(){this.svg=CW(this.parallelChartEl).select(".visa-viz-d3-parallel-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.gridG=this.rootG.append("g").attr("class","grid-group"),this.references=this.rootG.append("g").attr("class","parallel-reference-line-group")}renderChartRootElemets(){this.yGroup=this.rootG.append("g").attr("class","y-scales-group"),this.parallelLineG=this.rootG.append("g").attr("class","parallel-group parallel-line-group"),this.dotG=this.rootG.append("g").attr("class","parallel-group"),this.seriesLabelG=this.rootG.append("g").attr("class","parallel-series-wrapper"),this.labels=this.rootG.append("g").attr("class","parallel-dataLabel-group"),this.legendG=CW(this.parallelChartEl).select(".parallel-legend").append("svg"),this.tooltipG=CW(this.parallelChartEl).select(".parallel-tooltip"),this.setTooltipInitialStyle()}reSetRoot(){this.svg.transition("root_reset").duration(this.duration).ease(YL).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root.transition("root_reset").duration(this.duration).ease(YL).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),this.rootG.transition("root_reset").duration(this.duration).ease(YL).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),LT(this.chartID,this.width)}setGlobalSelections(){const t=Object.keys(this.multiYScale),i=this.yGroup.selectAll(".y-wrapper").data(t,t=>t);this.yEnter=i.enter().append("g"),this.yExit=i.exit(),this.yUpdate=i.merge(this.yEnter);const n=this.parallelLineG.selectAll(".parallel-plot").data(this.nest,t=>t.key);this.enterLines=n.enter().append("path"),this.exitLines=n.exit(),this.updateLines=n.merge(this.enterLines),this.enterSize=this.enterLines.size();const s=this.dotG.selectAll(".parallel-dot-wrapper").data(this.nest,t=>t.key);this.enterDotWrappers=s.enter().append("g"),this.exitDotWrappers=s.exit(),this.updateDotWrappers=s.merge(this.enterDotWrappers);const r=this.seriesLabelG.selectAll(".parallel-series-label").data(this.nest,t=>t.key);this.seriesLabelEnter=r.enter().append("text"),this.seriesLabelExit=r.exit(),this.seriesLabelUpdate=r.merge(this.seriesLabelEnter);const e=this.labels.selectAll("g").data(this.nest,t=>t.key);if(this.enteringLabelGroups=e.enter().append("g"),this.exitingLabelGroups=e.exit(),this.updatingLabelGroups=e.merge(this.enteringLabelGroups),this.interpolating){this.updateDotWrappers.selectAll("circle").remove();const t=this.updateDotWrappers.selectAll("circle").data(t=>t.interpolate.start);this.enterDots=t.enter().append("circle"),this.exitDots=t.exit(),this.updateDots=t.merge(this.enterDots),this.updatingLabelGroups.selectAll(".parallel-dataLabel").remove();const i=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data(t=>t.interpolate.start);this.enteringLabels=i.enter().append("text"),this.updatingLabels=i.merge(this.enteringLabels)}else{const t=this.updateDotWrappers.selectAll("circle").data(t=>t.values);this.enterDots=t.enter().append("circle"),this.exitDots=t.exit(),this.updateDots=t.merge(this.enterDots),this.enterSize=this.enterDots.size(),this.exitSize=this.exitDots.size();const i=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data(t=>t.values,t=>t[this.ordinalAccessor]);this.enteringLabels=i.enter().append("text"),this.exitingLabels=i.exit(),this.updatingLabels=i.merge(this.enteringLabels)}}setTestingAttributes(){this.unitTest?(CW(this.parallelChartEl).select(".visa-viz-d3-parallel-container").attr("data-testid","chart-container"),CW(this.parallelChartEl).select(".parallel-main-title").attr("data-testid","main-title"),CW(this.parallelChartEl).select(".parallel-sub-title").attr("data-testid","sub-title"),this.svg.attr("data-testid","root-svg"),this.root.attr("data-testid","margin-container"),this.rootG.attr("data-testid","padding-container"),this.legendG.attr("data-testid","legend-container"),this.tooltipG.attr("data-testid","tooltip-container"),this.gridG.attr("data-testid","grid-group"),this.references.attr("data-testid","reference-line-group"),this.yGroup.attr("data-testid","y-scales-group"),this.yUpdate.attr("data-testid","y-scale-wrapper"),this.parallelLineG.attr("data-testid","parallel-line-group"),this.updateLines.attr("data-testid","parallel-line").attr("data-id",t=>`parallel-line-${t.key}`),this.seriesLabelG.attr("data-testid","parallel-series-label-container"),this.seriesLabelUpdate.attr("data-testid","parallel-series-label").attr("data-id",t=>`parallel-series-label-${t.key}`),this.dotG.attr("data-testid","marker-group"),this.updateDotWrappers.attr("data-testid","marker-series-group").attr("data-id",t=>`marker-series-${t.key}`),this.updateDots.attr("data-testid","marker").attr("data-id",t=>`marker-${t[this.seriesAccessor]}-${t[this.ordinalAccessor]}`),this.labels.attr("data-testid","dataLabel-group-container"),this.updatingLabelGroups.attr("data-testid","dataLabel-group").attr("data-id",t=>`dataLabel-group-${t.key}`),this.updatingLabels.attr("data-testid","dataLabel").attr("data-id",t=>`dataLabel-${t[this.seriesAccessor]}-${t[this.ordinalAccessor]}`),this.svg.select("defs").attr("data-testid","pattern-defs")):(CW(this.parallelChartEl).select(".visa-viz-d3-parallel-container").attr("data-testid",null),CW(this.parallelChartEl).select(".parallel-main-title").attr("data-testid",null),CW(this.parallelChartEl).select(".parallel-sub-title").attr("data-testid",null),this.svg.attr("data-testid",null),this.root.attr("data-testid",null),this.rootG.attr("data-testid",null),this.legendG.attr("data-testid",null),this.tooltipG.attr("data-testid",null),this.gridG.attr("data-testid",null),this.references.attr("data-testid",null),this.yGroup.attr("data-testid",null),this.yUpdate.attr("data-testid",null),this.parallelLineG.attr("data-testid",null),this.updateLines.attr("data-testid",null).attr("data-id",null),this.seriesLabelG.attr("data-testid",null),this.seriesLabelUpdate.attr("data-testid",null).attr("data-id",null),this.dotG.attr("data-testid",null),this.updateDotWrappers.attr("data-testid",null).attr("data-id",null),this.updateDots.attr("data-testid",null).attr("data-id",null),this.labels.attr("data-testid",null),this.updatingLabelGroups.attr("data-testid",null).attr("data-id",null),this.updatingLabels.attr("data-testid",null).attr("data-id",null),this.svg.select("defs").attr("data-testid",null))}drawXAxis(){IT({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,wrapLabel:this.wrapLabel?this.innerPaddedWidth/this.nest[0].values.length*.7:"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.xAxis.visible,hidePath:!0})}enterYAxis(){this.yEnter.attr("class","y-wrapper").attr("transform",t=>"translate("+this.x(t)+",0)").attr("opacity",0)}exitYAxis(){this.yExit.transition("exit").duration(this.duration).ease(YL).attr("opacity",0).remove()}drawYAxis(){this.yUpdate.each((t,i,n)=>{const s="individual"===this.yAxis.scales?this.multiYScale[t].ticks:this.yAxis.onlyTickExtents?[this.extent.minValue,this.extent.maxValue]:this.yAxis.onlyTickExtents,r=this.multiYScale[t].y.domain(),e=r[0]===r[1]||0!==i&&"individual"!==this.yAxis.scales||!this.yAxis.visible;IT({root:CW(n[i]),height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:"individual"===this.yAxis.scales?this.multiYScale[t].y:this.y,left:!0,wrapLabel:this.wrapLabel?this.padding.left:"",format:this.yAxis.format,tickInterval:s?1:this.yAxis.tickInterval,label:"individual"===this.yAxis.scales||e?"":this.yAxis.label,padding:this.padding,hide:e,hidePath:!0,ticks:s})}).transition("update").duration(this.duration).ease(YL).attr("transform",t=>"translate("+this.x(t)+",0)").attr("opacity",1)}setXAxisAccessibility(){bT({rootEle:this.parallelChartEl,hasXAxis:!!this.xAxis&&this.xAxis.visible,xAxis:!!this.x&&this.x,xAxisLabel:this.xAxis.label?this.xAxis.label:""})}setYAxisAccessibility(){MT({rootEle:this.parallelChartEl,hasYAxis:!!this.yAxis&&this.yAxis.visible,yAxis:!!this.y&&this.y,yAxisLabel:this.yAxis.label?this.yAxis.label:"",xAxisLabel:this.xAxis.label?this.xAxis.label:""})}drawBaseline(){IT({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,padding:this.padding,markOffset:this.y(0),hide:!this.showBaselineX})}drawXGrid(){OT(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,!1,!1,this.xAxis.tickInterval)}drawYGrid(){OT(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,!0,!this.yAxis.gridVisible,this.yAxis.tickInterval)}enterChartLines(){this.enterLines.interrupt(),this.enterLines.attr("class","parallel-plot entering").attr("d",t=>this.line(t.values)),this.enterLines.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onClickHandler(t.values[0])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onHoverHandler(t.values[0])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("stroke-dasharray",(t,i,n)=>(t.linelength=n[i].getTotalLength(),t.linelength+" "+t.linelength)).attr("stroke",this.handleLineStroke).attr("fill","none").attr("stroke-width",.1)}updateChartLines(){this.updateLines.interrupt(),this.updateLines.transition().duration(this.duration).ease(YL).attr("stroke-dashoffset",0).attr("stroke-width",t=>this.calculateStrokeWidth(t,!0)).call(BT,()=>{this.updateLines.attr("stroke-dasharray",this.handleStrokeDasharray)}),this.updateLines.transition("opacity").ease(YL).duration(this.duration).attr("opacity",t=>{const i=this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1;return this.seriesInteraction?this.secondaryLines.keys.includes(t.key)?ET(t.values[0],this.secondaryLines.opacity,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):ET(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):i})}exitChartLines(){this.exitLines.interrupt(),this.exitLines.attr("stroke-dasharray",(t,i,n)=>(t.linelength=n[i].getTotalLength(),t.linelength+" "+t.linelength)).transition("exit").ease(YL).duration(this.duration).attr("opacity",0).attr("stroke-dashoffset",t=>t.linelength).attr("stroke-width",.1).remove()}drawChartLines(){this.interpolating&&this.updateLines.attr("d",(t,i,n)=>CW(n[i]).classed("entering")?this.line(t.values):this.interpolating.line(t.interpolate.start)),this.updateLines.attr("stroke-width",t=>this.calculateStrokeWidth(t,!0)).attr("stroke-dashoffset",t=>t.linelength).transition("update").ease(YL).duration(this.duration).attr("d",t=>this.line(this.interpolating?t.interpolate.end:t.values)).call(BT,()=>{this.updateLines.classed("entering",!1).attr("d",t=>this.line(t.values)).attr("stroke-dasharray",this.handleStrokeDasharray)})}enterPoints(){this.enterDots.interrupt(),this.enterDotWrappers.attr("class","parallel-dot-wrapper").attr("opacity",0).attr("fill",(t,i)=>this.rawColors[i]||this.rawColors[0]).each((t,i,n)=>{oT(n[i])}),this.enterDots.each((t,i,n)=>{oT(n[i])}).attr("stroke",this.handleDotStroke).attr("cursor",this.suppressEvents?null:this.cursor).on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.interpolating&&(this.enterDots.attr("cx",t=>this.interpolating.x(t[this.ordinalAccessor])).attr("cy",this.interpolateDynamicY).attr("r",t=>t.enter?0:DT(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):$T(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2).attr("stroke-width",t=>this.calculateStrokeWidth(t)),this.enterDotWrappers.selectAll("circle").attr("r",0).attr("cx",t=>this.x(t[this.ordinalAccessor])).attr("cy",this.dynamicY).attr("opacity",0)),this.updateDotWrappers.order(),this.updateDots.order()}updatePoints(){this.updateDots.interrupt();const t=this.showDots?1:0;this.updateDots.attr("tabindex",(t,i)=>0===i?"0":"-1"),this.updateDotWrappers.attr("opacity",i=>this.secondaryLines.keys.includes(i.key)?this.secondaryLines.opacity:t),this.interpolating?(this.updateDots.attr("opacity",t=>(this.exitSize+=t.exit?1:0,this.enterSize+=t.enter?1:0,t.enter?0:1)),this.updateDots=this.updateDotWrappers.selectAll("circle").data(t=>t.interpolate.end).classed("exiting",t=>t.exit),this.enterDotWrappers.selectAll("circle").each(t=>{t.enterWholeGroup=!0}),this.updateDots.transition("opacity").ease(YL).duration(t=>t.enterWholeGroup?this.duration/2:this.duration).delay((t,i,n)=>t.enterWholeGroup?.75*this.duration*(i/(n.length-1)):0).attr("opacity",i=>ET(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))):this.updateDots.transition("opacity").ease(YL).duration(this.duration).attr("opacity",i=>ET(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))}exitPoints(){this.exitDots.interrupt(),this.exitDots.transition("exit").ease(YL).duration(this.duration).attr("opacity",0).attr("r",0),this.exitDotWrappers.selectAll("circle").each(t=>{t.exitWholeGroup=!0}).transition("exit").ease(YL).duration(this.duration/2).delay((t,i,n)=>this.duration-this.duration*(i/(n.length-1))).attr("opacity",0).attr("r",0),this.updateDots.transition("accessibilityAfterExit").duration(this.duration/2).delay((t,i,n)=>this.duration-this.duration*(i/(n.length-1))).ease(YL).call(BT,()=>{const t=WT(this.rootG.node());this.exitDots.remove(),this.exitDotWrappers.remove(),this.svg.selectAll(".exiting").remove(),this.updateDots=this.updateDotWrappers.selectAll("circle"),this.updatingLabels=this.updatingLabelGroups.selectAll(".parallel-dataLabel"),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),xT({parentGNode:this.rootG.node(),focusDidExist:t})})}drawPoints(){let t;t=this.interpolating?this.updateDots.transition("update").ease(YL).duration(t=>t.enterWholeGroup?this.duration/2:this.duration).delay((t,i,n)=>t.enterWholeGroup?.75*this.duration*(i/(n.length-1)):0).attr("r",t=>t.exit?0:DT(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):$T(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2).attr("stroke-width",t=>this.calculateStrokeWidth(t)):this.updateDots.attr("r",t=>DT(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):$T(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2).attr("stroke-width",t=>this.calculateStrokeWidth(t)).transition("update").ease(YL).duration(this.duration),this.updateDots.attr("stroke",this.handleDotStroke),t.attr("cx",t=>this.x(t[this.ordinalAccessor])).attr("cy",this.dynamicY).call(BT,()=>{this.updateDots.each(t=>{t.enterWholeGroup=!1,t.enter=!1}),xT({parentGNode:this.rootG.node()})})}enterSeriesLabels(){this.seriesLabelEnter.interrupt(),this.seriesLabelEnter.attr("class","parallel-series-label").attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onClickHandler(t.values[0])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onSeriesHoverHandler(t.values[0])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr("fill",this.handleSeriesTextFill).attr("x",this.isRight?this.innerPaddedWidth:0).attr("y",t=>"individual"===this.yAxis.scales?this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor]):this.y(this.isRight?t.values[t.values.length-1][this.valueAccessor]:t.values[0][this.valueAccessor])).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&"top-right"===this.dataLabel.placement?"0.9em":"-0.1em").attr("opacity",0)}updateSeriesLabels(){this.seriesLabelUpdate.interrupt(),this.seriesLabelUpdate.transition("opacity").ease(YL).duration(this.duration).attr("opacity",t=>{const i=this.seriesLabel.visible?this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1:0;return this.seriesInteraction?this.secondaryLines.keys.includes(t.key)?ET(t.values[0],i,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):ET(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):i})}exitSeriesLabels(){this.seriesLabelExit.interrupt(),this.seriesLabelExit.transition("update").ease(YL).duration(this.duration).attr("opacity",0).remove()}drawSeriesLabels(){this.seriesLabelUpdate.attr("fill",this.handleSeriesTextFill).text((t,i)=>this.secondaryLines.keys.includes(t.key)&&!this.secondaryLines.showSeriesLabel?"":this.labelDetails.label?this.labelDetails.label[i]:t.key).transition("update").ease(YL).duration(this.duration).attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth:0).attr("y",t=>"individual"===this.yAxis.scales?this.isRight?this.multiYScale[t.values[t.values.length-1][this.ordinalAccessor]].y(t.values[t.values.length-1][this.valueAccessor]):this.multiYScale[t.values[0][this.ordinalAccessor]].y(t.values[0][this.valueAccessor]):this.y(this.isRight?t.values[t.values.length-1][this.valueAccessor]:t.values[0][this.valueAccessor])).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&"top-right"===this.dataLabel.placement?"0.9em":"-0.1em")}enterDataLabels(){if(this.enteringLabels.interrupt(),this.enteringLabelGroups.attr("class","parallel-label-wrapper").attr("opacity",0).attr("fill",(t,i)=>this.rawColors[i]||this.rawColors[0]),this.enteringLabels.attr("opacity",0).attr("fill",this.handleTextFill).attr("class","parallel-dataLabel").attr("cursor",this.suppressEvents?null:this.cursor).on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.interpolating){const t=this.enteringLabels.attr("class","parallel-dataLabel");VT({root:t,xScale:this.interpolating.x,yScale:this.interpolateDynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"}),this.updatingLabels.attr("opacity",t=>t.enter?0:1);const i=this.enteringLabelGroups.selectAll(".parallel-dataLabel").attr("opacity",0);VT({root:i,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})}else{const t=this.enteringLabels.attr("opacity",0).attr("class","parallel-dataLabel");VT({root:t,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})}}updateDataLabels(){this.updatingLabelGroups.interrupt(),this.updatingLabelGroups.attr("opacity",t=>this.dataLabel.visible?this.secondaryLines.keys.includes(t.key)&&this.secondaryLines.showDataLabel?this.secondaryLines.opacity:this.secondaryLines.keys.includes(t.key)&&!this.secondaryLines.showDataLabel?0:1:0),this.interpolating?(this.updatingLabels=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data(t=>t.interpolate.end).classed("exiting",t=>t.exit),this.enteringLabelGroups.each(t=>t.enterWholeGroup=!0),this.updatingLabels.transition("opacity").ease(YL).duration(t=>t.enterWholeGroup?this.duration/2:this.duration).delay((t,i,n)=>t.enterWholeGroup?.75*this.duration*(i/(n.length-1)):0).attr("opacity",t=>t.exit||ET(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1)):this.updatingLabels.attr("opacity",t=>ET(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1)}exitDataLabels(){this.exitingLabels.interrupt(),this.exitingLabels.transition("exit").ease(YL).duration(this.duration).attr("opacity",0).remove(),this.exitingLabelGroups.selectAll(".parallel-dataLabel").transition("exit").ease(YL).duration(this.duration/2).delay((t,i,n)=>this.duration-this.duration*(i/(n.length-1))).attr("opacity",0).call(BT,()=>{this.exitingLabelGroups.remove()})}drawDataLabels(){let t=this.updatingLabels.text(t=>qT(t,this.dataLabel.labelAccessor,this.dataLabel.format));t=this.interpolating?this.updatingLabels.transition("update").ease(YL).duration(t=>t.enterWholeGroup?this.duration/2:this.duration).delay((t,i,n)=>t.enterWholeGroup?.75*this.duration*(i/(n.length-1)):0):this.updatingLabels.transition("update").ease(YL).duration(this.duration),VT({root:t,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})}updateInteractionState(){this.updateLines.interrupt("opacity"),this.updateLines.attr("opacity",t=>{const i=this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1;return this.seriesInteraction?this.secondaryLines.keys.includes(t.key)?ET(t.values[0],this.secondaryLines.opacity,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):ET(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys):i});const t=this.showDots?1:0;this.updateDotWrappers.attr("opacity",i=>this.secondaryLines.keys.includes(i.key)?this.secondaryLines.opacity:t),this.updateDots.each((i,n,s)=>{i.enter||i.enterWholeGroup||i.exit||i.exitWholeGroup||CW(s[n]).attr("opacity",()=>ET(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys))}),xT({parentGNode:this.rootG.node()}),HT({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}setSeriesLabelOpacity(){this.seriesLabelUpdate.each((t,i,n)=>{const s=CW(n[i]);s.classed("entering")||s.attr("opacity",()=>{const i=(this.seriesLabel.visible?this.secondaryLines.keys.includes(t.key)?this.secondaryLines.opacity:1:0)<1?0:1;return this.seriesInteraction?this.secondaryLines.keys.includes(t.key)?ET(t.values[0],i,Math.min(this.secondaryLines.opacity,this.hoverOpacity),this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:ET(t.values[0],i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:i})})}setLabelOpacity(){this.updatingLabelGroups.attr("opacity",t=>(this.dataLabel.visible?this.secondaryLines.keys.includes(t.key)&&this.secondaryLines.showDataLabel?this.secondaryLines.opacity:this.secondaryLines.keys.includes(t.key)&&!this.secondaryLines.showDataLabel?0:1:0)<1?0:1),this.updatingLabels.each((t,i,n)=>{t.enter||t.enterWholeGroup||t.exit||t.exitWholeGroup||CW(n[i]).attr("opacity",()=>ET(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1)})}bindInteractivity(){this.updateLines.on("click",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onClickHandler(t.values[0])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onHoverHandler(t.values[0])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updateDots.on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.seriesLabelUpdate.on("click",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onClickHandler(t.values[0])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?t=>{t.values&&this.onSeriesHoverHandler(t.values[0])}:null).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()),this.updatingLabels.on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler())}addStrokeUnder(){const t=rT({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.labels.attr("filter",t),this.seriesLabelG.attr("filter",t)}updateColors(){this.updateDotWrappers.attr("fill",(t,i)=>this.rawColors[i]||this.rawColors[0]),this.updateDots.attr("stroke",this.handleDotStroke),this.updateLines.attr("stroke",this.handleLineStroke),this.seriesLabelUpdate.attr("fill",this.handleSeriesTextFill),this.updatingLabelGroups.attr("fill",(t,i)=>this.rawColors[i]||this.rawColors[0]),this.updatingLabels.attr("fill",this.handleTextFill)}updateCursor(){this.updateLines.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null),this.updateDots.attr("cursor",this.suppressEvents?null:this.cursor),this.seriesLabelUpdate.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null),this.updatingLabels.attr("cursor",this.suppressEvents?null:this.cursor)}drawReferenceLines(){const t=this.references.selectAll("g").data(this.referenceLines,t=>t.label),i=t.enter().append("g").attr("class",".parallel-reference").attr("opacity",1),n=i.append("line");n.attr("class","line-reference-line").attr("opacity",0);const s=i.append("text");s.attr("class","parallel-reference-line-label").attr("opacity",0);const r=t.merge(i),e=r.selectAll(".parallel-reference-line").data(t=>[t]).transition("merge").ease(YL).duration(this.duration),h=r.selectAll(".parallel-reference-line-label").data(t=>[t]).transition("merge").ease(YL).duration(this.duration).text(t=>t.label);t.exit().transition("exit").ease(YL).duration(this.duration).attr("opacity",0).remove(),i.attr("transform",t=>"translate(0,"+this.y(t.value)+")"),r.transition("merge").ease(YL).duration(this.duration).attr("transform",t=>"translate(0,"+this.y(t.value)+")"),n.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),s.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),h.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.style("stroke",UT[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity),h.style("fill",UT[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)}updateStrokeWidth(){this.updateLines.attr("stroke-width",t=>this.calculateStrokeWidth(t,!0)),this.updateDots.attr("stroke",this.handleDotStroke)}updateStrokePattern(){this.updateLines.attr("stroke-dasharray",this.handleStrokeDasharray)}updateDotRadius(){this.updateDots.each((t,i,n)=>{const s=CW(n[i]);t.enter||t.enterWholeGroup||s.classed("entering")||t.exit||s.attr("r",()=>DT(t,this.clickHighlight,this.innerInteractionKeys)?this.dotRadius+(this.clickStyle&&this.clickStyle.strokeWidth?parseFloat(""+this.clickStyle.strokeWidth)/2:1):$T(t,this.hoverHighlight,this.innerInteractionKeys)?this.dotRadius+(this.hoverStyle&&this.hoverStyle.strokeWidth?parseFloat(""+this.hoverStyle.strokeWidth)/2:1):this.secondaryLines.keys.includes(t[this.seriesAccessor])?this.dotRadius+.5:this.dotRadius+parseFloat(""+this.strokeWidth)/2)}).attr("stroke",this.handleDotStroke)}setSelectedClass(){this.updateDots.classed("highlight",(t,i,n)=>{let s=ET(t,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);return s=!(!this.clickHighlight||!this.clickHighlight.length)&&s,NT(n[i],s,this.accessibility.elementsAreInterface),s})}drawAnnotations(){ST({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.ordinalAccessor,yScale:this.y,yAccessor:this.valueAccessor})}setAnnotationAccessibility(){AT(this.parallelChartEl,this.annotations)}setTagLevels(){this.topLevel=eT(this.highestHeadingLevel),this.bottomLevel=eT(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){hT({rootEle:this.parallelChartEl,geomType:"point",title:this.accessibility.title||this.mainTitle,chartTag:"parallel-plot",uniqueID:this.chartID,groupName:"line",highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){cT({node:this.svg.node(),chartTag:"parallel-plot",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:KT(this,TT,"parallel-plot"),groupAccessor:this.seriesAccessor,groupName:"line",disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.updateDots.each((t,i,n)=>{oT(n[i])})}setGeometryAriaLabels(){const t=KT(this,TT,"parallel-plot");this.updateDots.each((i,n,s)=>{uT({node:s[n],geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupName:"line",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),aT({node:s[n],uniqueID:this.chartID})})}setGroupAccessibilityID(){this.updateDotWrappers.each((t,i,n)=>{aT({node:n[i],uniqueID:this.chartID})})}setChartAccessibilityTitle(){fT(this.parallelChartEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){dT(this.parallelChartEl,this.subTitle)}setChartAccessibilityLongDescription(){vT(this.parallelChartEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){pT(this.parallelChartEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){yT(this.parallelChartEl,this.accessibility.purpose)}setChartAccessibilityContext(){wT(this.parallelChartEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){gT(this.parallelChartEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){mT({rootEle:this.parallelChartEl,parentGNode:this.dotG.node(),chartTag:"parallel-plot",geomType:"point",groupName:"line"})}setChartAccessibilityStructureNotes(){kT(this.parallelChartEl,this.accessibility.structureNotes)}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.interpolating=!1,this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){GT(this.chartID,!0),this.hoverFunc.emit(t),this.showTooltip&&t[this.ordinalAccessor]&&this.eventsTooltip({data:t,evt:MW,isToShow:!0})}onSeriesHoverHandler(t){this.hoverFunc.emit(t)}onMouseOutHandler(){GT(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){FT(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:n}){_T({root:this.tooltipG,data:t,event:i,isToShow:n,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,groupAccessor:this.seriesAccessor,chartType:"parallel"})}bindLegendInteractivity(){CW(this.parallelChartEl).selectAll(".legend").on("click",!this.suppressEvents&&this.seriesInteraction&&this.legend.interactive?t=>{t.values&&this.onClickHandler(t.values[0])}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction&&this.legend.interactive?t=>{t.values&&this.hoverFunc.emit(t.values[0])}:null).on("mouseout",!this.suppressEvents&&this.legend.interactive?()=>this.onMouseOutHandler():null)}setLegendCursor(){CW(this.parallelChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.seriesInteraction?this.cursor:null)}drawLegendElements(){zT({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,dashPatterns:this.accessibility.hideTextures?null:this.dashPatterns,margin:this.margin,padding:this.padding,duration:this.duration,type:"parallel",secondary:this.secondaryLines.keys,fontSize:16,data:this.nest,label:this.legend.labels,hide:!(this.legend.visible||!this.legend),interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldSetDimensions&&(this.setDimensions(),this.shouldSetDimensions=!1),this.shouldSetScaleUsed&&(this.setScaleUsed(),this.shouldSetScaleUsed=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldUpdateInterpolationData&&(this.updateInterpolationData(),this.shouldUpdateInterpolationData=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidate=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),this.shouldValidateSeriesLabels&&(this.validateSeriesLabels(),this.shouldValidateSeriesLabels=!1),n("div",{class:"o-layout"},n("div",{class:"o-layout--chart"},n(this.topLevel,{class:"parallel-main-title vcl-main-title"},this.mainTitle),n(this.bottomLevel,{class:"visa-ui-text--instructions parallel-sub-title vcl-sub-title"},this.subTitle),n("div",{class:"parallel-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),n("div",{class:"visa-viz-d3-parallel-container"}),n("div",{class:"parallel-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),n("data-table",{uniqueID:this.chartID,isCompact:!0,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))}init(){const t=Object.keys(VL);let i=0;const n={wrapLabel:{exception:!1},strokeWidth:{exception:0},showDots:{exception:!1},hoverOpacity:{exception:0},dotRadius:{exception:0},showTooltip:{exception:!1},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:!1}};for(i=0;i<t.length;i++){const s=!!n[t[i]]&&this[t[i]]===n[t[i]].exception;this[t[i]]=this[t[i]]||s?this[t[i]]:VL[t[i]]}}get parallelChartEl(){return s(this)}static get watchers(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],seriesAccessor:["seriesAccessorWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],showBaselineX:["showBaselineXWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],clickStyle:["clickStyleWatcher"],hoverStyle:["hoverStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],strokeWidth:["strokeWidthWatcher"],showDots:["showDotsWatcher"],dotRadius:["dotRadiusWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["dataLabelWatcher"],seriesLabel:["seriesLabelWatcher"],tooltipLabel:["tooltipLabelWatcher"],showTooltip:["showTooltipWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],secondaryLines:["secondaryLinesWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}parallel-plot{cursor:default}parallel-plot .annotations{pointer-events:none}parallel-plot .annotations .handle{pointer-events:all}parallel-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}parallel-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}parallel-plot .hidden{display:none}parallel-plot .axis{font-size:12px}parallel-plot .axis text{fill:#767676}parallel-plot .axis-label{text-anchor:middle;font:1rem sans-serif}parallel-plot .axis path{stroke:#767676}parallel-plot .grid line{stroke:#767676;shape-rendering:crispEdges}parallel-plot .grid path{stroke-width:0;stroke:#767676}parallel-plot .grid.left line{stroke-dasharray:4, 4;stroke-opacity:0.6}parallel-plot .parallel-group{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear}parallel-plot .parallel-group__inactive{opacity:0}parallel-plot .parallel-group .parallel-plot{fill:none}parallel-plot .parallel-group .dot{stroke:#ffffff}parallel-plot .parallel-group .parallel-series-label{font-size:1em}parallel-plot .parallel-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}parallel-plot .parallel-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}"}};window.VisaChartsLibOSSLicenses=RT();var QT="http://www.w3.org/1999/xhtml";const tE={svg:"http://www.w3.org/2000/svg",xhtml:QT,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function iE(t){var i=t+="",n=i.indexOf(":");return n>=0&&"xmlns"!==(i=t.slice(0,n))&&(t=t.slice(n+1)),tE.hasOwnProperty(i)?{space:tE[i],local:t}:t}function nE(t){return function(){var i=this.ownerDocument,n=this.namespaceURI;return n===QT&&i.documentElement.namespaceURI===QT?i.createElement(t):i.createElementNS(n,t)}}function sE(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function rE(t){var i=iE(t);return(i.local?sE:nE)(i)}function eE(){}function hE(t){return null==t?eE:function(){return this.querySelector(t)}}function oE(){return[]}function uE(t){return null==t?oE:function(){return this.querySelectorAll(t)}}function aE(t){return function(){return this.matches(t)}}function cE(t){return new Array(t.length)}function lE(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function fE(t,i,n,s,r,e){for(var h,o=0,u=i.length,a=e.length;o<a;++o)(h=i[o])?(h.__data__=e[o],s[o]=h):n[o]=new lE(t,e[o]);for(;o<u;++o)(h=i[o])&&(r[o]=h)}function dE(t,i,n,s,r,e,h){var o,u,a,c={},l=i.length,f=e.length,d=new Array(l);for(o=0;o<l;++o)(u=i[o])&&(d[o]=a="$"+h.call(u,u.__data__,o,i),a in c?r[o]=u:c[a]=u);for(o=0;o<f;++o)(u=c[a="$"+h.call(t,e[o],o,e)])?(s[o]=u,u.__data__=e[o],c[a]=null):n[o]=new lE(t,e[o]);for(o=0;o<l;++o)(u=i[o])&&c[d[o]]===u&&(r[o]=u)}function vE(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function pE(t){return function(){this.removeAttribute(t)}}function yE(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wE(t,i){return function(){this.setAttribute(t,i)}}function gE(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function mE(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function bE(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ME(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function kE(t){return function(){this.style.removeProperty(t)}}function AE(t,i,n){return function(){this.style.setProperty(t,i,n)}}function xE(t,i,n){return function(){var s=i.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function WE(t,i){return t.style.getPropertyValue(i)||ME(t).getComputedStyle(t,null).getPropertyValue(i)}function NE(t){return function(){delete this[t]}}function LE(t,i){return function(){this[t]=i}}function SE(t,i){return function(){var n=i.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function TE(t){return t.trim().split(/^|\s+/)}function EE(t){return t.classList||new DE(t)}function DE(t){this._node=t,this._names=TE(t.getAttribute("class")||"")}function $E(t,i){for(var n=EE(t),s=-1,r=i.length;++s<r;)n.add(i[s])}function CE(t,i){for(var n=EE(t),s=-1,r=i.length;++s<r;)n.remove(i[s])}function IE(t){return function(){$E(this,t)}}function OE(t){return function(){CE(this,t)}}function zE(t,i){return function(){(i.apply(this,arguments)?$E:CE)(this,t)}}function HE(){this.textContent=""}function _E(t){return function(){this.textContent=t}}function qE(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function XE(){this.innerHTML=""}function RE(t){return function(){this.innerHTML=t}}function jE(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function PE(){this.nextSibling&&this.parentNode.appendChild(this)}function FE(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function GE(){return null}function VE(){var t=this.parentNode;t&&t.removeChild(this)}function YE(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function KE(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}lE.prototype={constructor:lE,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},DE.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var BE={},UE=null;function ZE(t,i,n){return t=JE(t,i,n),function(i){var n=i.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,i)}}function JE(t,i,n){return function(s){var r=UE;UE=s;try{t.call(this,this.__data__,i,n)}finally{UE=r}}}function QE(t){return t.trim().split(/^|\s+/).map((function(t){var i="",n=t.indexOf(".");return n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),{type:t,name:i}}))}function tD(t){return function(){var i=this.__on;if(i){for(var n,s=0,r=-1,e=i.length;s<e;++s)n=i[s],t.type&&n.type!==t.type||n.name!==t.name?i[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?i.length=r:delete this.__on}}}function iD(t,i,n){var s=BE.hasOwnProperty(t.type)?ZE:JE;return function(r,e,h){var o,u=this.__on,a=s(i,e,h);if(u)for(var c=0,l=u.length;c<l;++c)if((o=u[c]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=a,o.capture=n),void(o.value=i);this.addEventListener(t.type,a,n),o={type:t.type,name:t.name,value:i,listener:a,capture:n},u?u.push(o):this.__on=[o]}}function nD(t,i,n){var s=ME(t),r=s.CustomEvent;"function"==typeof r?r=new r(i,n):(r=s.document.createEvent("Event"),n?(r.initEvent(i,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function sD(t,i){return function(){return nD(this,t,i)}}function rD(t,i){return function(){return nD(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(BE={mouseenter:"mouseover",mouseleave:"mouseout"}));var eD=[null];function hD(t,i){this._groups=t,this._parents=i}function oD(){return new hD([[document.documentElement]],eD)}function uD(t){return"string"==typeof t?new hD([[document.querySelector(t)]],[document.documentElement]):new hD([[t]],eD)}function aD(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}hD.prototype=oD.prototype={constructor:hD,select:function(t){"function"!=typeof t&&(t=hE(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h,o=i[r],u=o.length,a=s[r]=new Array(u),c=0;c<u;++c)(e=o[c])&&(h=t.call(e,e.__data__,c,o))&&("__data__"in e&&(h.__data__=e.__data__),a[c]=h);return new hD(s,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=uE(t));for(var i=this._groups,n=i.length,s=[],r=[],e=0;e<n;++e)for(var h,o=i[e],u=o.length,a=0;a<u;++a)(h=o[a])&&(s.push(t.call(h,h.__data__,a,o)),r.push(h));return new hD(s,r)},filter:function(t){"function"!=typeof t&&(t=aE(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h=i[r],o=h.length,u=s[r]=[],a=0;a<o;++a)(e=h[a])&&t.call(e,e.__data__,a,h)&&u.push(e);return new hD(s,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),a=-1,this.each((function(t){d[++a]=t})),d;var n=i?dE:fE,s=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),o=new Array(e),u=new Array(e),a=0;a<e;++a){var c=s[a],l=r[a],f=l.length,d=t.call(c,c&&c.__data__,a,s),v=d.length,p=o[a]=new Array(v),y=h[a]=new Array(v);n(c,l,p,y,u[a]=new Array(f),d,i);for(var w,g,m=0,b=0;m<v;++m)if(w=p[m]){for(m>=b&&(b=m+1);!(g=y[b])&&++b<v;);w._next=g||null}}return(h=new hD(h,s))._enter=o,h._exit=u,h},enter:function(){return new hD(this._enter||this._groups.map(cE),this._parents)},exit:function(){return new hD(this._exit||this._groups.map(cE),this._parents)},join:function(t,i,n){var s=this.enter(),r=this,e=this.exit();return s="function"==typeof t?t(s):s.append(t+""),null!=i&&(r=i(r)),null==n?e.remove():n(e),s&&r?s.merge(r).order():r},merge:function(t){for(var i=this._groups,n=t._groups,s=i.length,r=Math.min(s,n.length),e=new Array(s),h=0;h<r;++h)for(var o,u=i[h],a=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=u[f]||a[f])&&(l[f]=o);for(;h<s;++h)e[h]=i[h];return new hD(e,this._parents)},order:function(){for(var t=this._groups,i=-1,n=t.length;++i<n;)for(var s,r=t[i],e=r.length-1,h=r[e];--e>=0;)(s=r[e])&&(h&&4^s.compareDocumentPosition(h)&&h.parentNode.insertBefore(s,h),h=s);return this},sort:function(t){function i(i,n){return i&&n?t(i.__data__,n.__data__):!i-!n}t||(t=vE);for(var n=this._groups,s=n.length,r=new Array(s),e=0;e<s;++e){for(var h,o=n[e],u=o.length,a=r[e]=new Array(u),c=0;c<u;++c)(h=o[c])&&(a[c]=h);a.sort(i)}return new hD(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var s=t[i],r=0,e=s.length;r<e;++r){var h=s[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,n=0,s=i.length;n<s;++n)for(var r,e=i[n],h=0,o=e.length;h<o;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var n=iE(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((null==i?n.local?yE:pE:"function"==typeof i?n.local?bE:mE:n.local?gE:wE)(n,i))},style:function(t,i,n){return arguments.length>1?this.each((null==i?kE:"function"==typeof i?xE:AE)(t,i,null==n?"":n)):WE(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?NE:"function"==typeof i?SE:LE)(t,i)):this.node()[t]},classed:function(t,i){var n=TE(t+"");if(arguments.length<2){for(var s=EE(this.node()),r=-1,e=n.length;++r<e;)if(!s.contains(n[r]))return!1;return!0}return this.each(("function"==typeof i?zE:i?IE:OE)(n,i))},text:function(t){return arguments.length?this.each(null==t?HE:("function"==typeof t?qE:_E)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?XE:("function"==typeof t?jE:RE)(t)):this.node().innerHTML},raise:function(){return this.each(PE)},lower:function(){return this.each(FE)},append:function(t){var i="function"==typeof t?t:rE(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var n="function"==typeof t?t:rE(t),s=null==i?GE:"function"==typeof i?i:hE(i);return this.select((function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)}))},remove:function(){return this.each(VE)},clone:function(t){return this.select(t?KE:YE)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,n){var s,r,e=QE(t+""),h=e.length;if(!(arguments.length<2)){for(o=i?iD:tD,null==n&&(n=!1),s=0;s<h;++s)this.each(o(e[s],i,n));return this}var o=this.node().__on;if(o)for(var u,a=0,c=o.length;a<c;++a)for(s=0,u=o[a];s<h;++s)if((r=e[s]).type===u.type&&r.name===u.name)return u.value},dispatch:function(t,i){return this.each(("function"==typeof i?rD:sD)(t,i))}};var cD=function(t){return 1===t.length&&(t=function(t){return function(i,n){return aD(t(i),n)}}(t)),{left:function(i,n,s,r){for(null==s&&(s=0),null==r&&(r=i.length);s<r;){var e=s+r>>>1;t(i[e],n)<0?s=e+1:r=e}return s},right:function(i,n,s,r){for(null==s&&(s=0),null==r&&(r=i.length);s<r;){var e=s+r>>>1;t(i[e],n)>0?r=e:s=e+1}return s}}}(aD).right;function lD(t,i,n){t=+t,i=+i,n=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+n;for(var s=-1,r=0|Math.max(0,Math.ceil((i-t)/n)),e=new Array(r);++s<r;)e[s]=t+s*n;return e}var fD=Math.sqrt(50),dD=Math.sqrt(10),vD=Math.sqrt(2);function pD(t,i,n){var s=(i-t)/Math.max(0,n),r=Math.floor(Math.log(s)/Math.LN10),e=s/Math.pow(10,r);return r>=0?(e>=fD?10:e>=dD?5:e>=vD?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=fD?10:e>=dD?5:e>=vD?2:1)}function yD(t,i){var n,s,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(n=t[e])&&n>=n)for(s=n;++e<r;)null!=(n=t[e])&&n>s&&(s=n)}else for(;++e<r;)if(null!=(n=i(t[e],e,t))&&n>=n)for(s=n;++e<r;)null!=(n=i(t[e],e,t))&&n>s&&(s=n);return s}function wD(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function gD(){}function mD(t,i){var n=new gD;if(t instanceof gD)t.each((function(t,i){n.set(i,t)}));else if(Array.isArray(t)){var s,r=-1,e=t.length;if(null==i)for(;++r<e;)n.set(r,t[r]);else for(;++r<e;)n.set(i(s=t[r],r,t),s)}else if(t)for(var h in t)n.set(h,t[h]);return n}gD.prototype=mD.prototype={constructor:gD,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var bD=Array.prototype,MD=bD.map,kD=bD.slice,AD={name:"implicit"};function xD(){var t=mD(),i=[],n=[],s=AD;function r(r){var e=r+"",h=t.get(e);if(!h){if(s!==AD)return s;t.set(e,h=i.push(r))}return n[(h-1)%n.length]}return r.domain=function(n){if(!arguments.length)return i.slice();i=[],t=mD();for(var s,e,h=-1,o=n.length;++h<o;)t.has(e=(s=n[h])+"")||t.set(e,i.push(s));return r},r.range=function(t){return arguments.length?(n=kD.call(t),r):n.slice()},r.unknown=function(t){return arguments.length?(s=t,r):s},r.copy=function(){return xD(i,n).unknown(s)},wD.apply(r,arguments),r}function WD(){var t,i,n=xD().unknown(void 0),s=n.domain,r=n.range,e=[0,1],h=!1,o=0,u=0,a=.5;function c(){var n=s().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,n-o+2*u),h&&(t=Math.floor(t)),l+=(f-l-t*(n-o))*a,i=t*(1-o),h&&(l=Math.round(l),i=Math.round(i));var d=lD(n).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(s(t),c()):s()},n.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},n.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},n.bandwidth=function(){return i},n.step=function(){return t},n.round=function(t){return arguments.length?(h=!!t,c()):h},n.padding=function(t){return arguments.length?(o=Math.min(1,u=+t),c()):o},n.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),c()):o},n.paddingOuter=function(t){return arguments.length?(u=+t,c()):u},n.align=function(t){return arguments.length?(a=Math.max(0,Math.min(1,t)),c()):a},n.copy=function(){return WD(s(),e).round(h).paddingInner(o).paddingOuter(u).align(a)},wD.apply(c(),arguments)}function ND(t,i,n){t.prototype=i.prototype=n,n.constructor=t}function LD(t,i){var n=Object.create(t.prototype);for(var s in i)n[s]=i[s];return n}function SD(){}var TD="\\s*([+-]?\\d+)\\s*",ED="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",DD="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$D=/^#([0-9a-f]{3,8})$/,CD=new RegExp("^rgb\\("+[TD,TD,TD]+"\\)$"),ID=new RegExp("^rgb\\("+[DD,DD,DD]+"\\)$"),OD=new RegExp("^rgba\\("+[TD,TD,TD,ED]+"\\)$"),zD=new RegExp("^rgba\\("+[DD,DD,DD,ED]+"\\)$"),HD=new RegExp("^hsl\\("+[ED,DD,DD]+"\\)$"),_D=new RegExp("^hsla\\("+[ED,DD,DD,ED]+"\\)$"),qD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function XD(){return this.rgb().formatHex()}function RD(){return this.rgb().formatRgb()}function jD(t){var i,n;return t=(t+"").trim().toLowerCase(),(i=$D.exec(t))?(n=i[1].length,i=parseInt(i[1],16),6===n?PD(i):3===n?new YD(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===n?FD(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===n?FD(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=CD.exec(t))?new YD(i[1],i[2],i[3],1):(i=ID.exec(t))?new YD(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=OD.exec(t))?FD(i[1],i[2],i[3],i[4]):(i=zD.exec(t))?FD(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=HD.exec(t))?ZD(i[1],i[2]/100,i[3]/100,1):(i=_D.exec(t))?ZD(i[1],i[2]/100,i[3]/100,i[4]):qD.hasOwnProperty(t)?PD(qD[t]):"transparent"===t?new YD(NaN,NaN,NaN,0):null}function PD(t){return new YD(t>>16&255,t>>8&255,255&t,1)}function FD(t,i,n,s){return s<=0&&(t=i=n=NaN),new YD(t,i,n,s)}function GD(t){return t instanceof SD||(t=jD(t)),t?new YD((t=t.rgb()).r,t.g,t.b,t.opacity):new YD}function VD(t,i,n,s){return 1===arguments.length?GD(t):new YD(t,i,n,null==s?1:s)}function YD(t,i,n,s){this.r=+t,this.g=+i,this.b=+n,this.opacity=+s}function KD(){return"#"+UD(this.r)+UD(this.g)+UD(this.b)}function BD(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function UD(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ZD(t,i,n,s){return s<=0?t=i=n=NaN:n<=0||n>=1?t=i=NaN:i<=0&&(t=NaN),new QD(t,i,n,s)}function JD(t){if(t instanceof QD)return new QD(t.h,t.s,t.l,t.opacity);if(t instanceof SD||(t=jD(t)),!t)return new QD;if(t instanceof QD)return t;var i=(t=t.rgb()).r/255,n=t.g/255,s=t.b/255,r=Math.min(i,n,s),e=Math.max(i,n,s),h=NaN,o=e-r,u=(e+r)/2;return o?(h=i===e?(n-s)/o+6*(n<s):n===e?(s-i)/o+2:(i-n)/o+4,o/=u<.5?e+r:2-e-r,h*=60):o=u>0&&u<1?0:h,new QD(h,o,u,t.opacity)}function QD(t,i,n,s){this.h=+t,this.s=+i,this.l=+n,this.opacity=+s}function t$(t,i,n){return 255*(t<60?i+(n-i)*t/60:t<180?n:t<240?i+(n-i)*(240-t)/60:i)}function i$(t){return function(){return t}}function n$(t,i){var n=i-t;return n?function(t,i){return function(n){return t+n*i}}(t,n):i$(isNaN(t)?i:t)}ND(SD,jD,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:XD,formatHex:XD,formatHsl:function(){return JD(this).formatHsl()},formatRgb:RD,toString:RD}),ND(YD,VD,LD(SD,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new YD(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new YD(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:KD,formatHex:KD,formatRgb:BD,toString:BD})),ND(QD,(function(t,i,n,s){return 1===arguments.length?JD(t):new QD(t,i,n,null==s?1:s)}),LD(SD,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new QD(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new QD(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*i,r=2*n-s;return new YD(t$(t>=240?t-240:t+120,r,s),t$(t,r,s),t$(t<120?t+240:t-120,r,s),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const s$=function t(i){var n=function(t){return 1==(t=+t)?n$:function(i,n){return n-i?function(t,i,n){return t=Math.pow(t,n),i=Math.pow(i,n)-t,n=1/n,function(s){return Math.pow(t+s*i,n)}}(i,n,t):i$(isNaN(i)?n:i)}}(i);function s(t,i){var s=n((t=VD(t)).r,(i=VD(i)).r),r=n(t.g,i.g),e=n(t.b,i.b),h=n$(t.opacity,i.opacity);return function(i){return t.r=s(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return s.gamma=t,s}(1);function r$(t,i){i||(i=[]);var n,s=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(n=0;n<s;++n)r[n]=t[n]*(1-e)+i[n]*e;return r}}function e$(t,i){var n,s=i?i.length:0,r=t?Math.min(s,t.length):0,e=new Array(r),h=new Array(s);for(n=0;n<r;++n)e[n]=f$(t[n],i[n]);for(;n<s;++n)h[n]=i[n];return function(t){for(n=0;n<r;++n)h[n]=e[n](t);return h}}function h$(t,i){var n=new Date;return t=+t,i=+i,function(s){return n.setTime(t*(1-s)+i*s),n}}function o$(t,i){return t=+t,i=+i,function(n){return t*(1-n)+i*n}}function u$(t,i){var n,s={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)n in t?s[n]=f$(t[n],i[n]):r[n]=i[n];return function(t){for(n in s)r[n]=s[n](t);return r}}var a$=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,c$=new RegExp(a$.source,"g");function l$(t,i){var n,s,r,e=a$.lastIndex=c$.lastIndex=0,h=-1,o=[],u=[];for(t+="",i+="";(n=a$.exec(t))&&(s=c$.exec(i));)(r=s.index)>e&&(r=i.slice(e,r),o[h]?o[h]+=r:o[++h]=r),(n=n[0])===(s=s[0])?o[h]?o[h]+=s:o[++h]=s:(o[++h]=null,u.push({i:h,x:o$(n,s)})),e=c$.lastIndex;return e<i.length&&(r=i.slice(e),o[h]?o[h]+=r:o[++h]=r),o.length<2?u[0]?function(t){return function(i){return t(i)+""}}(u[0].x):function(t){return function(){return t}}(i):(i=u.length,function(t){for(var n,s=0;s<i;++s)o[(n=u[s]).i]=n.x(t);return o.join("")})}function f$(t,i){var n,s=typeof i;return null==i||"boolean"===s?i$(i):("number"===s?o$:"string"===s?(n=jD(i))?(i=n,s$):l$:i instanceof jD?s$:i instanceof Date?h$:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?r$:Array.isArray(i)?e$:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?u$:o$)(t,i)}function d$(t,i){return t=+t,i=+i,function(n){return Math.round(t*(1-n)+i*n)}}var v$,p$,y$,w$,g$=180/Math.PI,m$={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function b$(t,i,n,s,r,e){var h,o,u;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(u=t*n+i*s)&&(n-=t*u,s-=i*u),(o=Math.sqrt(n*n+s*s))&&(n/=o,s/=o,u/=o),t*s<i*n&&(t=-t,i=-i,u=-u,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*g$,skewX:Math.atan(u)*g$,scaleX:h,scaleY:o}}function M$(t,i,n,s){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var o=[],u=[];return e=t(e),h=t(h),function(t,s,r,e,h,o){if(t!==r||s!==e){var u=h.push("translate(",null,i,null,n);o.push({i:u-4,x:o$(t,r)},{i:u-2,x:o$(s,e)})}else(r||e)&&h.push("translate("+r+i+e+n)}(e.translateX,e.translateY,h.translateX,h.translateY,o,u),function(t,i,n,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:n.push(r(n)+"rotate(",null,s)-2,x:o$(t,i)})):i&&n.push(r(n)+"rotate("+i+s)}(e.rotate,h.rotate,o,u),function(t,i,n,e){t!==i?e.push({i:n.push(r(n)+"skewX(",null,s)-2,x:o$(t,i)}):i&&n.push(r(n)+"skewX("+i+s)}(e.skewX,h.skewX,o,u),function(t,i,n,s,e,h){if(t!==n||i!==s){var o=e.push(r(e)+"scale(",null,",",null,")");h.push({i:o-4,x:o$(t,n)},{i:o-2,x:o$(i,s)})}else 1===n&&1===s||e.push(r(e)+"scale("+n+","+s+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,o,u),e=h=null,function(t){for(var i,n=-1,s=u.length;++n<s;)o[(i=u[n]).i]=i.x(t);return o.join("")}}}var k$=M$((function(t){return"none"===t?m$:(v$||(v$=document.createElement("DIV"),p$=document.documentElement,y$=document.defaultView),v$.style.transform=t,t=y$.getComputedStyle(p$.appendChild(v$),null).getPropertyValue("transform"),p$.removeChild(v$),b$(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),A$=M$((function(t){return null==t?m$:(w$||(w$=document.createElementNS("http://www.w3.org/2000/svg","g")),w$.setAttribute("transform",t),(t=w$.transform.baseVal.consolidate())?b$((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):m$)}),", ",")",")");function x$(t){return+t}var W$=[0,1];function N$(t){return t}function L$(t,i){return(i-=t=+t)?function(n){return(n-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function S$(t){var i,n=t[0],s=t[t.length-1];return n>s&&(i=n,n=s,s=i),function(t){return Math.max(n,Math.min(s,t))}}function T$(t,i,n){var s=t[0],r=t[1],e=i[0],h=i[1];return r<s?(s=L$(r,s),e=n(h,e)):(s=L$(s,r),e=n(e,h)),function(t){return e(s(t))}}function E$(t,i,n){var s=Math.min(t.length,i.length)-1,r=new Array(s),e=new Array(s),h=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<s;)r[h]=L$(t[h],t[h+1]),e[h]=n(i[h],i[h+1]);return function(i){var n=cD(t,i,1,s)-1;return e[n](r[n](i))}}function D$(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function $$(t,i){return function(){var t,i,n,s,r,e,h=W$,o=W$,u=f$,a=N$;function c(){return s=Math.min(h.length,o.length)>2?E$:T$,r=e=null,l}function l(i){return isNaN(i=+i)?n:(r||(r=s(h.map(t),o,u)))(t(a(i)))}return l.invert=function(n){return a(i((e||(e=s(o,h.map(t),o$)))(n)))},l.domain=function(t){return arguments.length?(h=MD.call(t,x$),a===N$||(a=S$(h)),c()):h.slice()},l.range=function(t){return arguments.length?(o=kD.call(t),c()):o.slice()},l.rangeRound=function(t){return o=kD.call(t),u=d$,c()},l.clamp=function(t){return arguments.length?(a=t?S$(h):N$,l):a!==N$},l.interpolate=function(t){return arguments.length?(u=t,c()):u},l.unknown=function(t){return arguments.length?(n=t,l):n},function(n,s){return t=n,i=s,c()}}()(t,i)}function C$(t,i){if((n=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var n,s=t.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+t.slice(n+1)]}function I$(t){return(t=C$(Math.abs(t)))?t[1]:NaN}var O$,z$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function H$(t){if(!(i=z$.exec(t)))throw new Error("invalid format: "+t);var i;return new _$({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function _$(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function q$(t,i){var n=C$(t,i);if(!n)return t+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}H$.prototype=_$.prototype,_$.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const X$={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return q$(100*t,i)},r:q$,s:function(t,i){var n=C$(t,i);if(!n)return t+"";var s=n[0],r=n[1],e=r-(O$=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=s.length;return e===h?s:e>h?s+new Array(e-h+1).join("0"):e>0?s.slice(0,e)+"."+s.slice(e):"0."+new Array(1-e).join("0")+C$(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function R$(t){return t}var j$,P$,F$,G$=Array.prototype.map,V$=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Y$(t){var i=t.domain;return t.ticks=function(t){var n=i();return function(t,i,n){var s,r,e,h,o=-1;if(n=+n,(t=+t)==(i=+i)&&n>0)return[t];if((s=i<t)&&(r=t,t=i,i=r),0===(h=pD(t,i,n))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++o<r;)e[o]=(t+o)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++o<r;)e[o]=(t-o)/h;return s&&e.reverse(),e}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var s=i();return function(t,i,n,s){var r,e=function(t,i,n){var s=Math.abs(i-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),e=s/r;return e>=fD?r*=10:e>=dD?r*=5:e>=vD&&(r*=2),i<t?-r:r}(t,i,n);switch((s=H$(null==s?",f":s)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=s.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(I$(i)/3)))-I$(Math.abs(t)))}(e,h))||(s.precision=r),F$(s,h);case"":case"e":case"g":case"p":case"r":null!=s.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,I$(i)-I$(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(s.precision=r-("e"===s.type));break;case"f":case"%":null!=s.precision||isNaN(r=function(t){return Math.max(0,-I$(Math.abs(t)))}(e))||(s.precision=r-2*("%"===s.type))}return P$(s)}(s[0],s[s.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var s,r=i(),e=0,h=r.length-1,o=r[e],u=r[h];return u<o&&(s=o,o=u,u=s,s=e,e=h,h=s),(s=pD(o,u,n))>0?s=pD(o=Math.floor(o/s)*s,u=Math.ceil(u/s)*s,n):s<0&&(s=pD(o=Math.ceil(o*s)/s,u=Math.floor(u*s)/s,n)),s>0?(r[e]=Math.floor(o/s)*s,r[h]=Math.ceil(u/s)*s,i(r)):s<0&&(r[e]=Math.ceil(o*s)/s,r[h]=Math.floor(u*s)/s,i(r)),t},t}function K$(){var t=$$(N$,N$);return t.copy=function(){return D$(t,K$())},wD.apply(t,arguments),Y$(t)}j$=function(t){var i,n,s=void 0===t.grouping||void 0===t.thousands?R$:(i=G$.call(t.grouping,Number),n=t.thousands+"",function(t,s){for(var r=t.length,e=[],h=0,o=i[0],u=0;r>0&&o>0&&(u+o+1>s&&(o=Math.max(1,s-u)),e.push(t.substring(r-=o,r+o)),!((u+=o+1)>s));)o=i[h=(h+1)%i.length];return e.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?R$:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(G$.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",a=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=H$(t)).fill,n=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,g=t.type;"n"===g?(p=!0,g="g"):X$[g]||(void 0===y&&(y=12),w=!0,g="g"),(d||"0"===i&&"="===n)&&(d=!0,i="0",n="=");var m="$"===f?r:"#"===f&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===f?e:/[%p]/.test(g)?u:"",M=X$[g],k=/[defgprs%]/.test(g);function A(t){var r,e,u,f=m,A=b;if("c"===g)A=M(t)+A,t="";else{var x=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,n=t.length,s=1,r=-1;s<n;++s)switch(t[s]){case".":r=i=s;break;case"0":0===r&&(r=s),i=s;break;default:if(!+t[s])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),x&&0==+t&&"+"!==l&&(x=!1),f=(x?"("===l?l:a:"-"===l||"("===l?"":l)+f,A=("s"===g?V$[8+O$/3]:"")+A+(x&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(u=t.charCodeAt(r))||u>57){A=(46===u?h+t.slice(r+1):t.slice(r))+A,t=t.slice(0,r);break}}p&&!d&&(t=s(t,1/0));var W=f.length+t.length+A.length,N=W<v?new Array(v-W+1).join(i):"";switch(p&&d&&(t=s(N+t,N.length?v-A.length:1/0),N=""),n){case"<":t=f+t+A+N;break;case"=":t=f+N+t+A;break;case"^":t=N.slice(0,W=N.length>>1)+f+t+A+N.slice(W);break;default:t=N+f+t+A}return o(t)}return y=void 0===y?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),A.toString=function(){return t+""},A}return{format:l,formatPrefix:function(t,i){var n=l(((t=H$(t)).type="f",t)),s=3*Math.max(-8,Math.min(8,Math.floor(I$(i)/3))),r=Math.pow(10,-s),e=V$[8+s/3];return function(t){return n(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),P$=j$.format,F$=j$.formatPrefix;var B$=Math.PI,U$=2*B$,Z$=U$-1e-6;function J$(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Q$(){return new J$}function tC(t){return function(){return t}}function iC(t){this._context=t}function nC(t){return new iC(t)}function sC(t){return t[0]}function rC(t){return t[1]}J$.prototype=Q$.prototype={constructor:J$,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,n,s){this._+="Q"+ +t+","+ +i+","+(this._x1=+n)+","+(this._y1=+s)},bezierCurveTo:function(t,i,n,s,r,e){this._+="C"+ +t+","+ +i+","+ +n+","+ +s+","+(this._x1=+r)+","+(this._y1=+e)},arcTo:function(t,i,n,s,r){var e=this._x1,h=this._y1,o=(n=+n)-(t=+t),u=(s=+s)-(i=+i),a=e-t,c=h-i,l=a*a+c*c;if((r=+r)<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=i);else if(l>1e-6)if(Math.abs(c*o-u*a)>1e-6&&r){var f=n-e,d=s-h,v=o*o+u*u,p=f*f+d*d,y=Math.sqrt(v),w=Math.sqrt(l),g=r*Math.tan((B$-Math.acos((v+l-p)/(2*y*w)))/2),m=g/w,b=g/y;Math.abs(m-1)>1e-6&&(this._+="L"+(t+m*a)+","+(i+m*c)),this._+="A"+r+","+r+",0,0,"+ +(c*f>a*d)+","+(this._x1=t+b*o)+","+(this._y1=i+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=i)},arc:function(t,i,n,s,r,e){t=+t,i=+i,e=!!e;var h=(n=+n)*Math.cos(s),o=n*Math.sin(s),u=t+h,a=i+o,c=1^e,l=e?s-r:r-s;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+a:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-a)>1e-6)&&(this._+="L"+u+","+a),n&&(l<0&&(l=l%U$+U$),l>Z$?this._+="A"+n+","+n+",0,1,"+c+","+(t-h)+","+(i-o)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=a):l>1e-6&&(this._+="A"+n+","+n+",0,"+ +(l>=B$)+","+c+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=i+n*Math.sin(r))))},rect:function(t,i,n,s){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +n+"v"+ +s+"h"+-n+"Z"},toString:function(){return this._}},iC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i)}}};var eC="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),hC=new Uint8Array(16);function oC(){if(!eC)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return eC(hC)}for(var uC=[],aC=0;aC<256;++aC)uC[aC]=(aC+256).toString(16).substr(1);function cC(t,i,n){var s=i&&n||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||oC)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[s+e]=r[e];return i||function(t){var i=0;return[uC[t[i++]],uC[t[i++]],uC[t[i++]],uC[t[i++]],"-",uC[t[i++]],uC[t[i++]],"-",uC[t[i++]],uC[t[i++]],"-",uC[t[i++]],uC[t[i++]],"-",uC[t[i++]],uC[t[i++]],uC[t[i++]],uC[t[i++]],uC[t[i++]],uC[t[i++]]].join("")}(r)}var lC={value:function(){}};function fC(){for(var t,i=0,n=arguments.length,s={};i<n;++i){if(!(t=arguments[i]+"")||t in s||/[\s.]/.test(t))throw new Error("illegal type: "+t);s[t]=[]}return new dC(s)}function dC(t){this._=t}function vC(t,i){return t.trim().split(/^|\s+/).map((function(t){var n="",s=t.indexOf(".");if(s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function pC(t,i){for(var n,s=0,r=t.length;s<r;++s)if((n=t[s]).name===i)return n.value}function yC(t,i,n){for(var s=0,r=t.length;s<r;++s)if(t[s].name===i){t[s]=lC,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=n&&t.push({name:i,value:n}),t}dC.prototype=fC.prototype={constructor:dC,on:function(t,i){var n,s=this._,r=vC(t+"",s),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(n=(t=r[e]).type)s[n]=yC(s[n],t.name,i);else if(null==i)for(n in s)s[n]=yC(s[n],t.name,null);return this}for(;++e<h;)if((n=(t=r[e]).type)&&(n=pC(s[n],t.name)))return n},copy:function(){var t={},i=this._;for(var n in i)t[n]=i[n].slice();return new dC(t)},call:function(t,i){if((n=arguments.length-2)>0)for(var n,s,r=new Array(n),e=0;e<n;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,n=(s=this._[t]).length;e<n;++e)s[e].value.apply(i,r)},apply:function(t,i,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],r=0,e=s.length;r<e;++r)s[r].value.apply(i,n)}};var wC,gC,mC=0,bC=0,MC=0,kC=0,AC=0,xC=0,WC="object"==typeof performance&&performance.now?performance:Date,NC="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function LC(){return AC||(NC(SC),AC=WC.now()+xC)}function SC(){AC=0}function TC(){this._call=this._time=this._next=null}function EC(t,i,n){var s=new TC;return s.restart(t,i,n),s}function DC(){AC=(kC=WC.now())+xC,mC=bC=0;try{!function(){LC(),++mC;for(var t,i=wC;i;)(t=AC-i._time)>=0&&i._call.call(null,t),i=i._next;--mC}()}finally{mC=0,function(){for(var t,i,n=wC,s=1/0;n;)n._call?(s>n._time&&(s=n._time),t=n,n=n._next):(i=n._next,n._next=null,n=t?t._next=i:wC=i);gC=t,CC(s)}(),AC=0}}function $C(){var t=WC.now(),i=t-kC;i>1e3&&(xC-=i,kC=t)}function CC(t){mC||(bC&&(bC=clearTimeout(bC)),t-AC>24?(t<1/0&&(bC=setTimeout(DC,t-WC.now()-xC)),MC&&(MC=clearInterval(MC))):(MC||(kC=WC.now(),MC=setInterval($C,1e3)),mC=1,NC(DC)))}function IC(t,i,n){var s=new TC;return s.restart((function(n){s.stop(),t(n+i)}),i=null==i?0:+i,n),s}TC.prototype=EC.prototype={constructor:TC,restart:function(t,i,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?LC():+n)+(null==i?0:+i),this._next||gC===this||(gC?gC._next=this:wC=this,gC=this),this._call=t,this._time=n,CC()},stop:function(){this._call&&(this._call=null,this._time=1/0,CC())}};var OC=fC("start","end","interrupt"),zC=[];function HC(t,i,n,s,r,e){var h=t.__transition;if(h){if(n in h)return}else t.__transition={};!function(t,i,n){var s,r=t.__transition;function e(u){var a,c,l,f;if(1!==n.state)return o();for(a in r)if((f=r[a]).name===n.name){if(3===f.state)return IC(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[a]):+a<i&&(f.state=6,f.timer.stop(),delete r[a])}if(IC((function(){3===n.state&&(n.state=4,n.timer.restart(h,n.delay,n.time),h(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,s=new Array(l=n.tween.length),a=0,c=-1;a<l;++a)(f=n.tween[a].value.call(t,t.__data__,n.index,n.group))&&(s[++c]=f);s.length=c+1}}function h(i){for(var r=i<n.duration?n.ease.call(null,i/n.duration):(n.timer.restart(o),n.state=5,1),e=-1,h=s.length;++e<h;)s[e].call(null,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){for(var s in n.state=6,n.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=n,n.timer=EC((function(t){n.state=1,n.timer.restart(e,n.delay,n.time),n.delay<=t&&e(t-n.delay)}),0,n.time)}(t,n,{name:i,index:s,group:r,on:OC,tween:zC,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function _C(t,i){var n=XC(t,i);if(n.state>0)throw new Error("too late; already scheduled");return n}function qC(t,i){var n=XC(t,i);if(n.state>2)throw new Error("too late; already started");return n}function XC(t,i){var n=t.__transition;if(!n||!(n=n[i]))throw new Error("transition not found");return n}function RC(t,i){var n,s;return function(){var r=qC(this,t),e=r.tween;if(e!==n)for(var h=0,o=(s=n=e).length;h<o;++h)if(s[h].name===i){(s=s.slice()).splice(h,1);break}r.tween=s}}function jC(t,i,n){var s,r;if("function"!=typeof n)throw new Error;return function(){var e=qC(this,t),h=e.tween;if(h!==s){r=(s=h).slice();for(var o={name:i,value:n},u=0,a=r.length;u<a;++u)if(r[u].name===i){r[u]=o;break}u===a&&r.push(o)}e.tween=r}}function PC(t,i,n){var s=t._id;return t.each((function(){var t=qC(this,s);(t.value||(t.value={}))[i]=n.apply(this,arguments)})),function(t){return XC(t,s).value[i]}}function FC(t,i){var n;return("number"==typeof i?o$:i instanceof jD?s$:(n=jD(i))?(i=n,s$):l$)(t,i)}function GC(t){return function(){this.removeAttribute(t)}}function VC(t){return function(){this.removeAttributeNS(t.space,t.local)}}function YC(t,i,n){var s,r;return function(){var e=this.getAttribute(t);return e===n?null:e===s?r:r=i(s=e,n)}}function KC(t,i,n){var s,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===n?null:e===s?r:r=i(s=e,n)}}function BC(t,i,n){var s,r,e;return function(){var h,o=n(this);if(null!=o)return(h=this.getAttribute(t))===o?null:h===s&&o===r?e:e=i(s=h,r=o);this.removeAttribute(t)}}function UC(t,i,n){var s,r,e;return function(){var h,o=n(this);if(null!=o)return(h=this.getAttributeNS(t.space,t.local))===o?null:h===s&&o===r?e:e=i(s=h,r=o);this.removeAttributeNS(t.space,t.local)}}function ZC(t,i){function n(){var n=this,s=i.apply(n,arguments);return s&&function(i){n.setAttributeNS(t.space,t.local,s(i))}}return n._value=i,n}function JC(t,i){function n(){var n=this,s=i.apply(n,arguments);return s&&function(i){n.setAttribute(t,s(i))}}return n._value=i,n}function QC(t,i){return function(){_C(this,t).delay=+i.apply(this,arguments)}}function tI(t,i){return i=+i,function(){_C(this,t).delay=i}}function iI(t,i){return function(){qC(this,t).duration=+i.apply(this,arguments)}}function nI(t,i){return i=+i,function(){qC(this,t).duration=i}}function sI(t,i){if("function"!=typeof i)throw new Error;return function(){qC(this,t).ease=i}}function rI(t,i,n){var s,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?_C:qC;return function(){var h=e(this,t),o=h.on;o!==s&&(r=(s=o).copy()).on(i,n),h.on=r}}var eI=oD.prototype.constructor;function hI(t,i,n){function s(){var s=this,r=i.apply(s,arguments);return r&&function(i){s.style.setProperty(t,r(i),n)}}return s._value=i,s}var oI=0;function uI(t,i,n,s){this._groups=t,this._parents=i,this._name=n,this._id=s}function aI(){return++oI}var cI=oD.prototype;uI.prototype=function(t){return oD().transition(t)}.prototype={constructor:uI,select:function(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=hE(t));for(var s=this._groups,r=s.length,e=new Array(r),h=0;h<r;++h)for(var o,u,a=s[h],c=a.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=a[f])&&(u=t.call(o,o.__data__,f,a))&&("__data__"in o&&(u.__data__=o.__data__),l[f]=u,HC(l[f],i,n,f,l,XC(o,n)));return new uI(e,this._parents,i,n)},selectAll:function(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=uE(t));for(var s=this._groups,r=s.length,e=[],h=[],o=0;o<r;++o)for(var u,a=s[o],c=a.length,l=0;l<c;++l)if(u=a[l]){for(var f,d=t.call(u,u.__data__,l,a),v=XC(u,n),p=0,y=d.length;p<y;++p)(f=d[p])&&HC(f,i,n,p,d,v);e.push(d),h.push(u)}return new uI(e,h,i,n)},filter:function(t){"function"!=typeof t&&(t=aE(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h=i[r],o=h.length,u=s[r]=[],a=0;a<o;++a)(e=h[a])&&t.call(e,e.__data__,a,h)&&u.push(e);return new uI(s,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,n=t._groups,s=i.length,r=Math.min(s,n.length),e=new Array(s),h=0;h<r;++h)for(var o,u=i[h],a=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=u[f]||a[f])&&(l[f]=o);for(;h<s;++h)e[h]=i[h];return new uI(e,this._parents,this._name,this._id)},selection:function(){return new eI(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,n=aI(),s=this._groups,r=s.length,e=0;e<r;++e)for(var h,o=s[e],u=o.length,a=0;a<u;++a)if(h=o[a]){var c=XC(h,i);HC(h,t,n,a,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new uI(s,this._parents,t,n)},call:cI.call,nodes:cI.nodes,node:cI.node,size:cI.size,empty:cI.empty,each:cI.each,on:function(t,i){var n=this._id;return arguments.length<2?XC(this.node(),n).on.on(t):this.each(rI(n,t,i))},attr:function(t,i){var n=iE(t),s="transform"===n?A$:FC;return this.attrTween(t,"function"==typeof i?(n.local?UC:BC)(n,s,PC(this,"attr."+t,i)):null==i?(n.local?VC:GC)(n):(n.local?KC:YC)(n,s,i+""))},attrTween:function(t,i){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;var s=iE(t);return this.tween(n,(s.local?ZC:JC)(s,i))},style:function(t,i,n){var s="transform"==(t+="")?k$:FC;return null==i?this.styleTween(t,function(t,i){var n,s,r;return function(){var e=WE(this,t),h=(this.style.removeProperty(t),WE(this,t));return e===h?null:e===n&&h===s?r:r=i(n=e,s=h)}}(t,s)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,n){var s,r,e;return function(){var h=WE(this,t),o=n(this);return null==o&&(this.style.removeProperty(t),o=WE(this,t)),h===o?null:h===s&&o===r?e:e=i(s=h,r=o)}}(t,s,PC(this,"style."+t,i)):function(t,i,n){var s,r;return function(){var e=WE(this,t);return e===n?null:e===s?r:r=i(s=e,n)}}(t,s,i+""),n)},styleTween:function(t,i,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;return this.tween(s,hI(t,i,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(PC(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var n in this.__transition)if(+n!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var n=this._id;if(t+="",arguments.length<2){for(var s,r=XC(this.node(),n).tween,e=0,h=r.length;e<h;++e)if((s=r[e]).name===t)return s.value;return null}return this.each((null==i?RC:jC)(n,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?QC:tI)(i,t)):XC(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?iI:nI)(i,t)):XC(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(sI(i,t)):XC(this.node(),i).ease}};var lI={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function fI(t,i){for(var n;!(n=t.__transition)||!(n=n[i]);)if(!(t=t.parentNode))return lI.time=LC(),lI;return n}oD.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var n,s,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(n=e[r]).name===i?(s=n.state>2&&n.state<5,n.state=6,n.timer.stop(),s&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},oD.prototype.transition=function(t){var i,n;t instanceof uI?(i=t._id,t=t._name):(i=aI(),(n=lI).time=LC(),t=null==t?null:t+"");for(var s=this._groups,r=s.length,e=0;e<r;++e)for(var h,o=s[e],u=o.length,a=0;a<u;++a)(h=o[a])&&HC(h,t,i,a,o,n||fI(h,i));return new uI(s,this._parents,t,i)};const{initTooltipStyle:dI,drawAxis:vI,drawGrid:pI,drawTooltip:yI,formatStats:wI,getLicenses:gI,checkInteraction:mI,checkClicked:bI,checkHovered:MI,interactionStyle:kI,getColors:AI,outlineColor:xI,visaColors:WI}=r,NI=class{constructor(n){t(this,n),this.height=400,this.width=800,this.showDataLabel=!0,this.ordinalAccessor="label",this.valueAccessor="value",this.showTooltip=!0,this.dataLabel={visible:!0,placement:"top",content:"valueAccessor",format:"0,0.00"},this.referenceLines=[],this.layout="vertical",this.xAxis={visible:!0,gridVisible:!0,tickInterval:1},this.yAxis={visible:!0,gridVisible:!0,tickInterval:1},this.wrapLabel=!1,this.colorPalette="single_blue",this.hoverOpacity=1,this.cursor="default",this.sortOrder="",this.roundedCorner=0,this.margin={top:.01*this.height,bottom:.01*this.height,right:.01*this.width,left:.01*this.width},this.padding={top:20,bottom:60,right:80,left:80},this.hideDataTable=!1,this.paretoStroke="#767676",this.paretoHighlight="#15195A",this.paretoDot=3,this.clickHighlight=[],this.shouldUpdateChart=!1,this.shouldUpdateBarStyle=!1,this.placeDataLabels=(t,i)=>{let n,s,r,e,h="0em";return"vertical"===this.layout?"top"===(this.dataLabel.placement||"top")?(n=this.x(t[this.ordinalAccessor])+this.x.bandwidth()/2,s=this.y(Math.max(0,t[this.valueAccessor])),r="-.3em",e="middle"):"bottom"===(this.dataLabel.placement||"top")&&(n=this.x(t[this.ordinalAccessor])+this.x.bandwidth()/2,s=this.y(0)-5,r="-.2em",e="middle"):"horizontal"===this.layout&&("top"===(this.dataLabel.placement||"top")?(s=this.y(t[this.ordinalAccessor])+this.y.bandwidth()/2+4,n=this.x(t[this.valueAccessor])+4,r=".2em",e="start"):"bottom"===(this.dataLabel.placement||"top")?(s=this.y(t[this.ordinalAccessor])+this.y.bandwidth()/2+4,n=this.x(0),r=".2em",e="start"):"bottomAbove"===(this.dataLabel.placement||"top")?(s=this.y(t[this.ordinalAccessor]),n=this.x(0),r=".2em",h="-.2em",e="start"):"bottomBelow"===(this.dataLabel.placement||"top")&&(s=this.y(t[this.ordinalAccessor])+this.y.bandwidth(),n=this.x(0),r=".2em",h="1em",e="start")),"x"===i?n:"y"===i?s:"em"===i?r:"em2"===i?h:"anchor"===i?e:null},this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}idWatcher(t,i){this.chartID=t,this.barChartEl.id=this.chartID}dataWatcher(t,i){this.shouldUpdateChart=!0}highlightWatcher(t,i){this.shouldUpdateBarStyle=!0}componentWillLoad(){this.chartID=this.uniqueID||"bar-chart-"+cC(),this.barChartEl.id=this.chartID,this.updateChartVariable()}componentDidLoad(){this.updateData(),this.drawChart(),this.setTooltipInitialStyle()}componentWillUpdate(){this.updateChartVariable()}componentDidUpdate(){"asc"===this.sortOrder?this.data.sort((t,i)=>Number(t[this.valueAccessor])-Number(i[this.valueAccessor])):"desc"===this.sortOrder&&this.data.sort((t,i)=>Number(i[this.valueAccessor])-Number(t[this.valueAccessor])),this.shouldUpdateBarStyle?(this.shouldUpdateBarStyle=!1,this.updateBarSytle(this.bars)):(this.shouldUpdateChart=!1,this.updateData(),this.drawChart())}updateData(){var t=0;this.data.map((i,n)=>{i[this.valueAccessor]=parseFloat(i[this.valueAccessor]),i[this.valueAccessor]=+i[this.valueAccessor],t+=i[this.valueAccessor],i.CumulativeAmount=0===n?i[this.valueAccessor]:i[this.valueAccessor]+this.data[n-1].CumulativeAmount}),this.data.map(i=>{i.CumulativePercentage=i.CumulativeAmount/t})}updateChartVariable(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!("vertical"===this.layout)&&this.xAxis.gridVisible}),this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:"vertical"===this.layout&&this.yAxis.gridVisible}),this.innerXAxis.visible||(this.padding.bottom=.05*this.height),this.innerYAxis.visible||(this.padding.left=.05*this.width),!this.interactionKeys&&(this.interactionKeys=[this.groupAccessor||this.ordinalAccessor]),this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}updateBarSytle(t){t.attr("fill",t=>this.clickHighlight.length>0&&bI(t,this.clickHighlight,this.interactionKeys)&&this.clickStyle.color?WI[this.clickStyle.color]||this.clickStyle.color:this.hoverHighlight&&MI(t,this.hoverHighlight,this.interactionKeys)&&this.hoverStyle.color?WI[this.hoverStyle.color]||this.hoverStyle.color:this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])).attr("style",t=>kI({data:t,clickHighlight:this.clickHighlight,hoverHighlight:this.hoverHighlight,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle,interactionKeys:this.interactionKeys,defaultStroke:xI(this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])),defaultStrokeWidth:3})).attr("opacity",t=>mI(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.interactionKeys))}drawChart(){if(this.reSetRoot(),"vertical"===this.layout){if(this.y=K$().domain([0,this.maxValueOverride||yD(this.data,t=>t[this.valueAccessor])]).range([this.innerPaddedHeight,0]),1==this.yAxis.gridVisible){var t=Math.ceil(10*yD(this.data,t=>t[this.valueAccessor]))/10;this.y=K$().domain([0,t]).range([this.innerPaddedHeight,0])}this.x=WD().domain(this.data.map(t=>t[this.ordinalAccessor])).range([0,this.innerPaddedWidth]).padding(.2),this.yCum=K$().domain([0,1]).range([this.innerPaddedHeight,0])}else"horizontal"===this.layout&&(this.x=K$().domain([0,this.maxValueOverride||yD(this.data,t=>t[this.valueAccessor])]).range([0,this.innerPaddedWidth]),this.y=WD().domain(this.data.map(t=>t[this.ordinalAccessor])).range([this.innerPaddedHeight,0]).padding(.2));this.line=function(){var t=sC,i=rC,n=tC(!0),s=null,r=nC,e=null;function h(h){var o,u,a,c=h.length,l=!1;for(null==s&&(e=r(a=Q$())),o=0;o<=c;++o)!(o<c&&n(u=h[o],o,h))===l&&((l=!l)?e.lineStart():e.lineEnd()),l&&e.point(+t(u,o,h),+i(u,o,h));if(a)return e=null,a+""||null}return h.x=function(i){return arguments.length?(t="function"==typeof i?i:tC(+i),h):t},h.y=function(t){return arguments.length?(i="function"==typeof t?t:tC(+t),h):i},h.defined=function(t){return arguments.length?(n="function"==typeof t?t:tC(!!t),h):n},h.curve=function(t){return arguments.length?(r=t,null!=s&&(e=r(s)),h):r},h.context=function(t){return arguments.length?(null==t?s=e=null:e=r(s=t),h):s},h}().x(t=>this.x(t[this.ordinalAccessor])+this.x.bandwidth()/2).y(t=>this.yCum(t.CumulativePercentage));const i=function(t,i){var n,s,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(n=t[e])&&n>=n)for(s=n;++e<r;)null!=(n=t[e])&&s>n&&(s=n)}else for(;++e<r;)if(null!=(n=i(t[e]))&&n>=n)for(s=n;++e<r;)null!=(n=i(t[e]))&&s>n&&(s=n);return s}(this.data,t=>t[this.valueAccessor]),n=yD(this.data,t=>t[this.valueAccessor]);this.colorArr=AI(this.colors||this.colorPalette,this.groupAccessor?xD().domain(this.data.map(t=>t[this.groupAccessor])).domain():[i,n]),this.hoverStyle=this.hoverStyle?this.hoverStyle:this.colorPalette.includes("single")?{color:"comp_blue",strokeWidth:3}:{strokeWidth:3},this.clickStyle=this.clickStyle?this.clickStyle:this.colorPalette.includes("single")?{color:"supp_purple",strokeWidth:3}:{strokeWidth:3},this.drawGrid(),this.drawAxis(),this.drawBars(),this.line&&this.drawLine(),this.drawDataLabels(),this.drawReferenceLines()}reSetRoot(){this.svg&&this.svg.remove(),this.svg=uD(this.barChartEl).select("#visa-viz-d3-pareto-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g").attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g").attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),this.tooltipG=uD(this.barChartEl).select(".pareto-tooltip")}drawAxis(){vI({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,wrapLabel:this.wrapLabel&&"vertical"===this.layout?this.x.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible}),vI({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible}),vI({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.yCum,right:!0,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.formatCum||"0.0%",hide:!this.innerYAxis.visible})}formatDataLabel(t){return"ordinalAccessor"===this.dataLabel.content?t[this.ordinalAccessor]:this.dataLabel.format?wI(t[this.valueAccessor],this.dataLabel.format):t[this.valueAccessor]}drawDataLabels(){this.dataLabel.visible&&(this.rootG.selectAll("text.dataLabel").remove(),this.rootG.append("g").attr("class","bar-dataLabel-group").attr("id","bar-dataLabel-group").selectAll(".text").data(this.data).enter().append("text").attr("x",t=>this.placeDataLabels(t,"x")).attr("y",t=>this.placeDataLabels(t,"y")).attr("vertical"===this.layout?"dy":"dx",t=>this.placeDataLabels(t,"em")).attr("vertical"===this.layout?"dx":"dy",t=>this.placeDataLabels(t,"em2")).attr("text-anchor",t=>this.placeDataLabels(t,"anchor")).attr("class","bar-dataLabel-"+this.layout).text(t=>this.formatDataLabel(t)).on("click",t=>this.onClickHandler(t)).on("mouseover",t=>this.onHoverHandler(t)).on("mouseout",()=>this.onMouseOutHandler()))}drawGrid(){pI(this.rootG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,!1,!this.innerXAxis.gridVisible,this.xAxis.tickInterval),pI(this.rootG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,!0,!this.innerYAxis.gridVisible,this.yAxis.tickInterval)}drawBars(){"vertical"===this.layout?this.bars=this.rootG.append("g").attr("class","bar-group").selectAll(".bar").data(this.data).enter().append("rect").attr("class","bar").attr("tabindex",(t,i)=>0===i?"0":"-1").attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).attr("x",t=>this.x(t[this.ordinalAccessor])).attr("y",t=>this.y(Math.max(0,t[this.valueAccessor]))).attr("height",t=>Math.abs(this.y(0)-this.y(t[this.valueAccessor]))).attr("width",this.x.bandwidth()).attr("cursor",this.cursor).attr("fill",t=>this.clickHighlight.length>0&&bI(t,this.clickHighlight,this.interactionKeys)&&this.clickStyle.color?WI[this.clickStyle.color]||this.clickStyle.color:this.hoverHighlight&&MI(t,this.hoverHighlight,this.interactionKeys)&&this.hoverStyle.color?WI[this.hoverStyle.color]||this.hoverStyle.color:this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])).attr("style",t=>kI({data:t,clickHighlight:this.clickHighlight,hoverHighlight:this.hoverHighlight,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle,interactionKeys:this.interactionKeys,defaultStroke:xI(this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])),defaultStrokeWidth:3})).attr("opacity",t=>mI(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.interactionKeys)).on("click",t=>this.onClickHandler(t)).on("mouseover",t=>this.onHoverHandler(t)).on("mouseout",()=>this.onMouseOutHandler()):"horizontal"===this.layout&&(this.bars=this.rootG.append("g").attr("class","bar-group").selectAll(".bar").data(this.data).enter().append("rect").attr("class",t=>this.clickHighlight.includes(t[this.ordinalAccessor])?"bar highlight":"bar").attr("tabindex",(t,i)=>0===i?"0":"-1").attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).attr("x",t=>this.x(Math.min(0,t[this.valueAccessor]))).attr("y",t=>this.y(t[this.ordinalAccessor])).attr("height",this.y.bandwidth()).attr("width",t=>Math.abs(this.x(t[this.valueAccessor])-this.x(0))).attr("cursor",this.cursor).attr("fill",t=>this.clickHighlight.length>0&&bI(t,this.clickHighlight,this.interactionKeys)&&this.clickStyle.color?WI[this.clickStyle.color]||this.clickStyle.color:this.hoverHighlight&&MI(t,this.hoverHighlight,this.interactionKeys)&&this.hoverStyle.color?WI[this.hoverStyle.color]||this.hoverStyle.color:this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])).attr("style",t=>kI({data:t,clickHighlight:this.clickHighlight,hoverHighlight:this.hoverHighlight,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle,interactionKeys:this.interactionKeys,defaultStroke:xI(this.colorArr(this.groupAccessor?t[this.groupAccessor]:t[this.valueAccessor])),defaultStrokeWidth:3})).on("click",t=>this.onClickHandler(t)).on("mouseover",t=>this.onHoverHandler(t)).on("mouseout",()=>this.onMouseOutHandler()))}drawLine(){let t,i=!1;for(let s=0;s<this.data.length;s++)!i&&this.data[s].CumulativePercentage>this.paretoThreshold&&(t=s,i=!0);const n=this.rootG.append("g").attr("class","pareto-line");n.append("path").datum(this.data).attr("d",this.line).attr("class","pareto-line-path").attr("x",this.x.bandwidth()/2).attr("fill","none").attr("stroke",this.paretoStroke).attr("stroke-width",1),n.selectAll(".pareto-background-dot").data([this.data[t]]).enter().append("circle").attr("class","pareto-background-dot").attr("fill","#fff").attr("stroke",this.paretoHighlight).attr("stroke-width","1px").attr("r",this.paretoDot+6).attr("cx",t=>this.x(t[this.ordinalAccessor])+this.x.bandwidth()/2).attr("cy",t=>this.yCum(t.CumulativePercentage)),n.selectAll(".pareto-dot").data(this.data).enter().append("circle").attr("class","pareto-dot").attr("fill",(i,n)=>n===t?this.paretoHighlight:this.paretoStroke).attr("r",(i,n)=>t===n?this.paretoDot+3:this.paretoDot).attr("cx",t=>this.x(t[this.ordinalAccessor])+this.x.bandwidth()/2).attr("cy",t=>this.yCum(t.CumulativePercentage)),n.selectAll("text").data(this.data).enter().append("text").attr("x",t=>this.placeDataLabels(t,"x")).attr("y",t=>this.yCum(t.CumulativePercentage)).attr("dy","-1em").attr("text-anchor","middle").attr("class","pareto-label").attr("fill",this.paretoHighlight).text((i,n)=>t===n?wI(i.CumulativePercentage,"0.0%"):"")}drawReferenceLines(){this.referenceLines.length>0&&("vertical"===this.layout?(this.rootG.append("g").attr("class","bar-reference-line-group").selectAll(".bar-reference-line").data(this.referenceLines).enter().append("line").attr("id",t=>t.referenceID).attr("class","bar-reference-line").attr("x1",0).attr("x2",this.innerPaddedWidth).attr("y1",t=>this.y(t.referenceData.referenceValue)).attr("y2",t=>this.y(t.referenceData.referenceValue)).style("stroke",t=>t.referenceData.strokeColor).style("stroke-width",t=>t.referenceData.strokeWidth).style("opacity",t=>t.referenceData.strokeOpacity),this.rootG.select(".bar-reference-line-group").selectAll(".bar-reference-line-label").data(this.referenceLines).enter().append("text").attr("id",t=>t.referenceID+"-label").attr("class","bar-reference-line-label").attr("text-anchor",t=>"right"===(t.referenceData.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.referenceData.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("dx",t=>"right"===(t.referenceData.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("y",t=>this.y(t.referenceData.referenceValue)).attr("dy","0.3em").text(t=>t.referenceData.labelValue).style("fill",t=>t.referenceData.strokeColor)):"horizontal"===this.layout&&(this.rootG.append("g").attr("class","bar-reference-line-group").selectAll(".bar-reference-line").data(this.referenceLines).enter().append("line").attr("id",t=>t.referenceID).attr("class","bar-reference-line").attr("y1",0).attr("y2",this.innerPaddedHeight).attr("x1",t=>this.x(t.referenceData.referenceValue)).attr("x2",t=>this.x(t.referenceData.referenceValue)).style("stroke",t=>t.referenceData.strokeColor).style("stroke-width",t=>t.referenceData.strokeWidth).style("opacity",t=>t.referenceData.strokeOpacity),this.rootG.select(".bar-reference-line-group").selectAll(".bar-reference-line-label").data(this.referenceLines).enter().append("text").attr("id",t=>t.referenceID+"-label").attr("class","bar-reference-line-label").attr("text-anchor","middle").attr("x",t=>this.x(t.referenceData.referenceValue)).attr("y",t=>"top"===(t.referenceData.labelPlacementVertical||"top")?0:this.innerPaddedHeight).attr("dy",t=>"top"===(t.referenceData.labelPlacementVertical||"top")?"-0.3em":"1em").text(t=>t.referenceData.labelValue).style("fill",t=>t.referenceData.strokeColor)),this.rootG.exit().remove())}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){this.hoverFunc.emit(t),this.showTooltip&&this.eventsTooltip({data:t,evt:UE,isToShow:!0})}onMouseOutHandler(){this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){dI(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:n}){yI({root:this.tooltipG,data:t,event:i,isToShow:n,tooltipLabel:void 0,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"bar"})}render(){return n("div",{class:`o-layout is--${this.layout} light`},n("div",{class:"o-layout--chart"},n("h1",{class:"visa-ui-header--4"},this.mainTitle),n("p",{class:"visa-ui-text--instructions"},this.subTitle),n("div",{class:"pareto-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),n("div",{id:"visa-viz-d3-pareto-container"})))}get barChartEl(){return s(this)}static get watchers(){return{uniqueID:["idWatcher"],data:["dataWatcher"],hoverHighlight:["highlightWatcher"],clickHighlight:["highlightWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}pareto-chart .axis{font-size:12px}pareto-chart .axis text{font:0.65rem;fill:#767676}pareto-chart .axis-label{text-anchor:middle;font:1rem sans-serif}pareto-chart .axis path{stroke:#767676}pareto-chart .patero-line path{stroke:#767676}pareto-chart .patero-line .patero-highlight{fill:black}pareto-chart .grid line{stroke:#767676;stroke-opacity:0.6;shape-rendering:crispEdges;stroke-dasharray:4, 4}pareto-chart .grid path{stroke-width:0;stroke:#767676}pareto-chart .y.axis path{stroke:#767676;opacity:0}pareto-chart .x.axis path{stroke:#767676}pareto-chart .o-layout--chart .bar-dataLabel-vertical{fill:#767676;text-anchor:middle}pareto-chart .o-layout--chart .bar-dataLabel-horizontal{fill:#767676;text-anchor:start}"}};window.VisaChartsLibOSSLicenses=gI();var LI="http://www.w3.org/1999/xhtml";const SI={svg:"http://www.w3.org/2000/svg",xhtml:LI,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function TI(t){var i=t+="",n=i.indexOf(":");return n>=0&&"xmlns"!==(i=t.slice(0,n))&&(t=t.slice(n+1)),SI.hasOwnProperty(i)?{space:SI[i],local:t}:t}function EI(t){return function(){var i=this.ownerDocument,n=this.namespaceURI;return n===LI&&i.documentElement.namespaceURI===LI?i.createElement(t):i.createElementNS(n,t)}}function DI(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function $I(t){var i=TI(t);return(i.local?DI:EI)(i)}function CI(){}function II(t){return null==t?CI:function(){return this.querySelector(t)}}function OI(){return[]}function zI(t){return null==t?OI:function(){return this.querySelectorAll(t)}}function HI(t){return function(){return this.matches(t)}}function _I(t){return new Array(t.length)}function qI(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function XI(t,i,n,s,r,e){for(var h,o=0,u=i.length,a=e.length;o<a;++o)(h=i[o])?(h.__data__=e[o],s[o]=h):n[o]=new qI(t,e[o]);for(;o<u;++o)(h=i[o])&&(r[o]=h)}function RI(t,i,n,s,r,e,h){var o,u,a,c={},l=i.length,f=e.length,d=new Array(l);for(o=0;o<l;++o)(u=i[o])&&(d[o]=a="$"+h.call(u,u.__data__,o,i),a in c?r[o]=u:c[a]=u);for(o=0;o<f;++o)(u=c[a="$"+h.call(t,e[o],o,e)])?(s[o]=u,u.__data__=e[o],c[a]=null):n[o]=new qI(t,e[o]);for(o=0;o<l;++o)(u=i[o])&&c[d[o]]===u&&(r[o]=u)}function jI(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function PI(t){return function(){this.removeAttribute(t)}}function FI(t){return function(){this.removeAttributeNS(t.space,t.local)}}function GI(t,i){return function(){this.setAttribute(t,i)}}function VI(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function YI(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function KI(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function BI(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function UI(t){return function(){this.style.removeProperty(t)}}function ZI(t,i,n){return function(){this.style.setProperty(t,i,n)}}function JI(t,i,n){return function(){var s=i.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function QI(t,i){return t.style.getPropertyValue(i)||BI(t).getComputedStyle(t,null).getPropertyValue(i)}function tO(t){return function(){delete this[t]}}function iO(t,i){return function(){this[t]=i}}function nO(t,i){return function(){var n=i.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function sO(t){return t.trim().split(/^|\s+/)}function rO(t){return t.classList||new eO(t)}function eO(t){this._node=t,this._names=sO(t.getAttribute("class")||"")}function hO(t,i){for(var n=rO(t),s=-1,r=i.length;++s<r;)n.add(i[s])}function oO(t,i){for(var n=rO(t),s=-1,r=i.length;++s<r;)n.remove(i[s])}function uO(t){return function(){hO(this,t)}}function aO(t){return function(){oO(this,t)}}function cO(t,i){return function(){(i.apply(this,arguments)?hO:oO)(this,t)}}function lO(){this.textContent=""}function fO(t){return function(){this.textContent=t}}function dO(t){return function(){var i=t.apply(this,arguments);this.textContent=null==i?"":i}}function vO(){this.innerHTML=""}function pO(t){return function(){this.innerHTML=t}}function yO(t){return function(){var i=t.apply(this,arguments);this.innerHTML=null==i?"":i}}function wO(){this.nextSibling&&this.parentNode.appendChild(this)}function gO(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mO(){return null}function bO(){var t=this.parentNode;t&&t.removeChild(this)}function MO(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function kO(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}qI.prototype={constructor:qI,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},eO.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var AO={},xO=null;function WO(t,i,n){return t=NO(t,i,n),function(i){var n=i.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,i)}}function NO(t,i,n){return function(s){var r=xO;xO=s;try{t.call(this,this.__data__,i,n)}finally{xO=r}}}function LO(t){return t.trim().split(/^|\s+/).map((function(t){var i="",n=t.indexOf(".");return n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),{type:t,name:i}}))}function SO(t){return function(){var i=this.__on;if(i){for(var n,s=0,r=-1,e=i.length;s<e;++s)n=i[s],t.type&&n.type!==t.type||n.name!==t.name?i[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?i.length=r:delete this.__on}}}function TO(t,i,n){var s=AO.hasOwnProperty(t.type)?WO:NO;return function(r,e,h){var o,u=this.__on,a=s(i,e,h);if(u)for(var c=0,l=u.length;c<l;++c)if((o=u[c]).type===t.type&&o.name===t.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=a,o.capture=n),void(o.value=i);this.addEventListener(t.type,a,n),o={type:t.type,name:t.name,value:i,listener:a,capture:n},u?u.push(o):this.__on=[o]}}function EO(t,i,n){var s=BI(t),r=s.CustomEvent;"function"==typeof r?r=new r(i,n):(r=s.document.createEvent("Event"),n?(r.initEvent(i,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(i,!1,!1)),t.dispatchEvent(r)}function DO(t,i){return function(){return EO(this,t,i)}}function $O(t,i){return function(){return EO(this,t,i.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(AO={mouseenter:"mouseover",mouseleave:"mouseout"}));var CO=[null];function IO(t,i){this._groups=t,this._parents=i}function OO(){return new IO([[document.documentElement]],CO)}function zO(t){return"string"==typeof t?new IO([[document.querySelector(t)]],[document.documentElement]):new IO([[t]],CO)}function HO(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}function _O(t){return 1===t.length&&(t=function(t){return function(i,n){return HO(t(i),n)}}(t)),{left:function(i,n,s,r){for(null==s&&(s=0),null==r&&(r=i.length);s<r;){var e=s+r>>>1;t(i[e],n)<0?s=e+1:r=e}return s},right:function(i,n,s,r){for(null==s&&(s=0),null==r&&(r=i.length);s<r;){var e=s+r>>>1;t(i[e],n)>0?r=e:s=e+1}return s}}}IO.prototype=OO.prototype={constructor:IO,select:function(t){"function"!=typeof t&&(t=II(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h,o=i[r],u=o.length,a=s[r]=new Array(u),c=0;c<u;++c)(e=o[c])&&(h=t.call(e,e.__data__,c,o))&&("__data__"in e&&(h.__data__=e.__data__),a[c]=h);return new IO(s,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=zI(t));for(var i=this._groups,n=i.length,s=[],r=[],e=0;e<n;++e)for(var h,o=i[e],u=o.length,a=0;a<u;++a)(h=o[a])&&(s.push(t.call(h,h.__data__,a,o)),r.push(h));return new IO(s,r)},filter:function(t){"function"!=typeof t&&(t=HI(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h=i[r],o=h.length,u=s[r]=[],a=0;a<o;++a)(e=h[a])&&t.call(e,e.__data__,a,h)&&u.push(e);return new IO(s,this._parents)},data:function(t,i){if(!t)return d=new Array(this.size()),a=-1,this.each((function(t){d[++a]=t})),d;var n=i?RI:XI,s=this._parents,r=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var e=r.length,h=new Array(e),o=new Array(e),u=new Array(e),a=0;a<e;++a){var c=s[a],l=r[a],f=l.length,d=t.call(c,c&&c.__data__,a,s),v=d.length,p=o[a]=new Array(v),y=h[a]=new Array(v);n(c,l,p,y,u[a]=new Array(f),d,i);for(var w,g,m=0,b=0;m<v;++m)if(w=p[m]){for(m>=b&&(b=m+1);!(g=y[b])&&++b<v;);w._next=g||null}}return(h=new IO(h,s))._enter=o,h._exit=u,h},enter:function(){return new IO(this._enter||this._groups.map(_I),this._parents)},exit:function(){return new IO(this._exit||this._groups.map(_I),this._parents)},join:function(t,i,n){var s=this.enter(),r=this,e=this.exit();return s="function"==typeof t?t(s):s.append(t+""),null!=i&&(r=i(r)),null==n?e.remove():n(e),s&&r?s.merge(r).order():r},merge:function(t){for(var i=this._groups,n=t._groups,s=i.length,r=Math.min(s,n.length),e=new Array(s),h=0;h<r;++h)for(var o,u=i[h],a=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=u[f]||a[f])&&(l[f]=o);for(;h<s;++h)e[h]=i[h];return new IO(e,this._parents)},order:function(){for(var t=this._groups,i=-1,n=t.length;++i<n;)for(var s,r=t[i],e=r.length-1,h=r[e];--e>=0;)(s=r[e])&&(h&&4^s.compareDocumentPosition(h)&&h.parentNode.insertBefore(s,h),h=s);return this},sort:function(t){function i(i,n){return i&&n?t(i.__data__,n.__data__):!i-!n}t||(t=jI);for(var n=this._groups,s=n.length,r=new Array(s),e=0;e<s;++e){for(var h,o=n[e],u=o.length,a=r[e]=new Array(u),c=0;c<u;++c)(h=o[c])&&(a[c]=h);a.sort(i)}return new IO(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),i=-1;return this.each((function(){t[++i]=this})),t},node:function(){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var s=t[i],r=0,e=s.length;r<e;++r){var h=s[r];if(h)return h}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var i=this._groups,n=0,s=i.length;n<s;++n)for(var r,e=i[n],h=0,o=e.length;h<o;++h)(r=e[h])&&t.call(r,r.__data__,h,e);return this},attr:function(t,i){var n=TI(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((null==i?n.local?FI:PI:"function"==typeof i?n.local?KI:YI:n.local?VI:GI)(n,i))},style:function(t,i,n){return arguments.length>1?this.each((null==i?UI:"function"==typeof i?JI:ZI)(t,i,null==n?"":n)):QI(this.node(),t)},property:function(t,i){return arguments.length>1?this.each((null==i?tO:"function"==typeof i?nO:iO)(t,i)):this.node()[t]},classed:function(t,i){var n=sO(t+"");if(arguments.length<2){for(var s=rO(this.node()),r=-1,e=n.length;++r<e;)if(!s.contains(n[r]))return!1;return!0}return this.each(("function"==typeof i?cO:i?uO:aO)(n,i))},text:function(t){return arguments.length?this.each(null==t?lO:("function"==typeof t?dO:fO)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?vO:("function"==typeof t?yO:pO)(t)):this.node().innerHTML},raise:function(){return this.each(wO)},lower:function(){return this.each(gO)},append:function(t){var i="function"==typeof t?t:$I(t);return this.select((function(){return this.appendChild(i.apply(this,arguments))}))},insert:function(t,i){var n="function"==typeof t?t:$I(t),s=null==i?mO:"function"==typeof i?i:II(i);return this.select((function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)}))},remove:function(){return this.each(bO)},clone:function(t){return this.select(t?kO:MO)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,i,n){var s,r,e=LO(t+""),h=e.length;if(!(arguments.length<2)){for(o=i?TO:SO,null==n&&(n=!1),s=0;s<h;++s)this.each(o(e[s],i,n));return this}var o=this.node().__on;if(o)for(var u,a=0,c=o.length;a<c;++a)for(s=0,u=o[a];s<h;++s)if((r=e[s]).type===u.type&&r.name===u.name)return u.value},dispatch:function(t,i){return this.each(("function"==typeof i?$O:DO)(t,i))}};var qO=_O(HO).right;function XO(t,i,n){t=+t,i=+i,n=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+n;for(var s=-1,r=0|Math.max(0,Math.ceil((i-t)/n)),e=new Array(r);++s<r;)e[s]=t+s*n;return e}var RO=Math.sqrt(50),jO=Math.sqrt(10),PO=Math.sqrt(2);function FO(t,i,n){var s=(i-t)/Math.max(0,n),r=Math.floor(Math.log(s)/Math.LN10),e=s/Math.pow(10,r);return r>=0?(e>=RO?10:e>=jO?5:e>=PO?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(e>=RO?10:e>=jO?5:e>=PO?2:1)}function GO(t,i,n){var s=Math.abs(i-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),e=s/r;return e>=RO?r*=10:e>=jO?r*=5:e>=PO&&(r*=2),i<t?-r:r}function VO(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}function YO(){}function KO(t,i){var n=new YO;if(t instanceof YO)t.each((function(t,i){n.set(i,t)}));else if(Array.isArray(t)){var s,r=-1,e=t.length;if(null==i)for(;++r<e;)n.set(r,t[r]);else for(;++r<e;)n.set(i(s=t[r],r,t),s)}else if(t)for(var h in t)n.set(h,t[h]);return n}function BO(){return{}}function UO(t,i,n){t[i]=n}function ZO(){return KO()}function JO(t,i,n){t.set(i,n)}YO.prototype=KO.prototype={constructor:YO,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,i){return this["$"+t]=i,this},remove:function(t){var i="$"+t;return i in this&&delete this[i]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)"$"===i[0]&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)"$"===i[0]&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)"$"===i[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var i in this)"$"===i[0]&&t(this[i],i.slice(1),this)}};var QO=Array.prototype,tz=QO.map,iz=QO.slice,nz={name:"implicit"};function sz(){var t=KO(),i=[],n=[],s=nz;function r(r){var e=r+"",h=t.get(e);if(!h){if(s!==nz)return s;t.set(e,h=i.push(r))}return n[(h-1)%n.length]}return r.domain=function(n){if(!arguments.length)return i.slice();i=[],t=KO();for(var s,e,h=-1,o=n.length;++h<o;)t.has(e=(s=n[h])+"")||t.set(e,i.push(s));return r},r.range=function(t){return arguments.length?(n=iz.call(t),r):n.slice()},r.unknown=function(t){return arguments.length?(s=t,r):s},r.copy=function(){return sz(i,n).unknown(s)},VO.apply(r,arguments),r}function rz(){var t,i,n=sz().unknown(void 0),s=n.domain,r=n.range,e=[0,1],h=!1,o=0,u=0,a=.5;function c(){var n=s().length,c=e[1]<e[0],l=e[c-0],f=e[1-c];t=(f-l)/Math.max(1,n-o+2*u),h&&(t=Math.floor(t)),l+=(f-l-t*(n-o))*a,i=t*(1-o),h&&(l=Math.round(l),i=Math.round(i));var d=XO(n).map((function(i){return l+t*i}));return r(c?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(s(t),c()):s()},n.range=function(t){return arguments.length?(e=[+t[0],+t[1]],c()):e.slice()},n.rangeRound=function(t){return e=[+t[0],+t[1]],h=!0,c()},n.bandwidth=function(){return i},n.step=function(){return t},n.round=function(t){return arguments.length?(h=!!t,c()):h},n.padding=function(t){return arguments.length?(o=Math.min(1,u=+t),c()):o},n.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),c()):o},n.paddingOuter=function(t){return arguments.length?(u=+t,c()):u},n.align=function(t){return arguments.length?(a=Math.max(0,Math.min(1,t)),c()):a},n.copy=function(){return rz(s(),e).round(h).paddingInner(o).paddingOuter(u).align(a)},VO.apply(c(),arguments)}function ez(t,i,n){t.prototype=i.prototype=n,n.constructor=t}function hz(t,i){var n=Object.create(t.prototype);for(var s in i)n[s]=i[s];return n}function oz(){}var uz="\\s*([+-]?\\d+)\\s*",az="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",cz="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lz=/^#([0-9a-f]{3,8})$/,fz=new RegExp("^rgb\\("+[uz,uz,uz]+"\\)$"),dz=new RegExp("^rgb\\("+[cz,cz,cz]+"\\)$"),vz=new RegExp("^rgba\\("+[uz,uz,uz,az]+"\\)$"),pz=new RegExp("^rgba\\("+[cz,cz,cz,az]+"\\)$"),yz=new RegExp("^hsl\\("+[az,cz,cz]+"\\)$"),wz=new RegExp("^hsla\\("+[az,cz,cz,az]+"\\)$"),gz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function mz(){return this.rgb().formatHex()}function bz(){return this.rgb().formatRgb()}function Mz(t){var i,n;return t=(t+"").trim().toLowerCase(),(i=lz.exec(t))?(n=i[1].length,i=parseInt(i[1],16),6===n?kz(i):3===n?new Nz(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===n?Az(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===n?Az(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=fz.exec(t))?new Nz(i[1],i[2],i[3],1):(i=dz.exec(t))?new Nz(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=vz.exec(t))?Az(i[1],i[2],i[3],i[4]):(i=pz.exec(t))?Az(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=yz.exec(t))?Ez(i[1],i[2]/100,i[3]/100,1):(i=wz.exec(t))?Ez(i[1],i[2]/100,i[3]/100,i[4]):gz.hasOwnProperty(t)?kz(gz[t]):"transparent"===t?new Nz(NaN,NaN,NaN,0):null}function kz(t){return new Nz(t>>16&255,t>>8&255,255&t,1)}function Az(t,i,n,s){return s<=0&&(t=i=n=NaN),new Nz(t,i,n,s)}function xz(t){return t instanceof oz||(t=Mz(t)),t?new Nz((t=t.rgb()).r,t.g,t.b,t.opacity):new Nz}function Wz(t,i,n,s){return 1===arguments.length?xz(t):new Nz(t,i,n,null==s?1:s)}function Nz(t,i,n,s){this.r=+t,this.g=+i,this.b=+n,this.opacity=+s}function Lz(){return"#"+Tz(this.r)+Tz(this.g)+Tz(this.b)}function Sz(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Tz(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ez(t,i,n,s){return s<=0?t=i=n=NaN:n<=0||n>=1?t=i=NaN:i<=0&&(t=NaN),new $z(t,i,n,s)}function Dz(t){if(t instanceof $z)return new $z(t.h,t.s,t.l,t.opacity);if(t instanceof oz||(t=Mz(t)),!t)return new $z;if(t instanceof $z)return t;var i=(t=t.rgb()).r/255,n=t.g/255,s=t.b/255,r=Math.min(i,n,s),e=Math.max(i,n,s),h=NaN,o=e-r,u=(e+r)/2;return o?(h=i===e?(n-s)/o+6*(n<s):n===e?(s-i)/o+2:(i-n)/o+4,o/=u<.5?e+r:2-e-r,h*=60):o=u>0&&u<1?0:h,new $z(h,o,u,t.opacity)}function $z(t,i,n,s){this.h=+t,this.s=+i,this.l=+n,this.opacity=+s}function Cz(t,i,n){return 255*(t<60?i+(n-i)*t/60:t<180?n:t<240?i+(n-i)*(240-t)/60:i)}function Iz(t){return function(){return t}}function Oz(t,i){var n=i-t;return n?function(t,i){return function(n){return t+n*i}}(t,n):Iz(isNaN(t)?i:t)}ez(oz,Mz,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:mz,formatHex:mz,formatHsl:function(){return Dz(this).formatHsl()},formatRgb:bz,toString:bz}),ez(Nz,Wz,hz(oz,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Nz(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Nz(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lz,formatHex:Lz,formatRgb:Sz,toString:Sz})),ez($z,(function(t,i,n,s){return 1===arguments.length?Dz(t):new $z(t,i,n,null==s?1:s)}),hz(oz,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new $z(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new $z(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*i,r=2*n-s;return new Nz(Cz(t>=240?t-240:t+120,r,s),Cz(t,r,s),Cz(t<120?t+240:t-120,r,s),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const zz=function t(i){var n=function(t){return 1==(t=+t)?Oz:function(i,n){return n-i?function(t,i,n){return t=Math.pow(t,n),i=Math.pow(i,n)-t,n=1/n,function(s){return Math.pow(t+s*i,n)}}(i,n,t):Iz(isNaN(i)?n:i)}}(i);function s(t,i){var s=n((t=Wz(t)).r,(i=Wz(i)).r),r=n(t.g,i.g),e=n(t.b,i.b),h=Oz(t.opacity,i.opacity);return function(i){return t.r=s(i),t.g=r(i),t.b=e(i),t.opacity=h(i),t+""}}return s.gamma=t,s}(1);function Hz(t,i){i||(i=[]);var n,s=t?Math.min(i.length,t.length):0,r=i.slice();return function(e){for(n=0;n<s;++n)r[n]=t[n]*(1-e)+i[n]*e;return r}}function _z(t,i){var n,s=i?i.length:0,r=t?Math.min(s,t.length):0,e=new Array(r),h=new Array(s);for(n=0;n<r;++n)e[n]=Gz(t[n],i[n]);for(;n<s;++n)h[n]=i[n];return function(t){for(n=0;n<r;++n)h[n]=e[n](t);return h}}function qz(t,i){var n=new Date;return t=+t,i=+i,function(s){return n.setTime(t*(1-s)+i*s),n}}function Xz(t,i){return t=+t,i=+i,function(n){return t*(1-n)+i*n}}function Rz(t,i){var n,s={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==i&&"object"==typeof i||(i={}),i)n in t?s[n]=Gz(t[n],i[n]):r[n]=i[n];return function(t){for(n in s)r[n]=s[n](t);return r}}var jz=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pz=new RegExp(jz.source,"g");function Fz(t,i){var n,s,r,e=jz.lastIndex=Pz.lastIndex=0,h=-1,o=[],u=[];for(t+="",i+="";(n=jz.exec(t))&&(s=Pz.exec(i));)(r=s.index)>e&&(r=i.slice(e,r),o[h]?o[h]+=r:o[++h]=r),(n=n[0])===(s=s[0])?o[h]?o[h]+=s:o[++h]=s:(o[++h]=null,u.push({i:h,x:Xz(n,s)})),e=Pz.lastIndex;return e<i.length&&(r=i.slice(e),o[h]?o[h]+=r:o[++h]=r),o.length<2?u[0]?function(t){return function(i){return t(i)+""}}(u[0].x):function(t){return function(){return t}}(i):(i=u.length,function(t){for(var n,s=0;s<i;++s)o[(n=u[s]).i]=n.x(t);return o.join("")})}function Gz(t,i){var n,s=typeof i;return null==i||"boolean"===s?Iz(i):("number"===s?Xz:"string"===s?(n=Mz(i))?(i=n,zz):Fz:i instanceof Mz?zz:i instanceof Date?qz:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(i)?Hz:Array.isArray(i)?_z:"function"!=typeof i.valueOf&&"function"!=typeof i.toString||isNaN(i)?Rz:Xz)(t,i)}function Vz(t,i){return t=+t,i=+i,function(n){return Math.round(t*(1-n)+i*n)}}var Yz,Kz,Bz,Uz,Zz=180/Math.PI,Jz={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qz(t,i,n,s,r,e){var h,o,u;return(h=Math.sqrt(t*t+i*i))&&(t/=h,i/=h),(u=t*n+i*s)&&(n-=t*u,s-=i*u),(o=Math.sqrt(n*n+s*s))&&(n/=o,s/=o,u/=o),t*s<i*n&&(t=-t,i=-i,u=-u,h=-h),{translateX:r,translateY:e,rotate:Math.atan2(i,t)*Zz,skewX:Math.atan(u)*Zz,scaleX:h,scaleY:o}}function tH(t,i,n,s){function r(t){return t.length?t.pop()+" ":""}return function(e,h){var o=[],u=[];return e=t(e),h=t(h),function(t,s,r,e,h,o){if(t!==r||s!==e){var u=h.push("translate(",null,i,null,n);o.push({i:u-4,x:Xz(t,r)},{i:u-2,x:Xz(s,e)})}else(r||e)&&h.push("translate("+r+i+e+n)}(e.translateX,e.translateY,h.translateX,h.translateY,o,u),function(t,i,n,e){t!==i?(t-i>180?i+=360:i-t>180&&(t+=360),e.push({i:n.push(r(n)+"rotate(",null,s)-2,x:Xz(t,i)})):i&&n.push(r(n)+"rotate("+i+s)}(e.rotate,h.rotate,o,u),function(t,i,n,e){t!==i?e.push({i:n.push(r(n)+"skewX(",null,s)-2,x:Xz(t,i)}):i&&n.push(r(n)+"skewX("+i+s)}(e.skewX,h.skewX,o,u),function(t,i,n,s,e,h){if(t!==n||i!==s){var o=e.push(r(e)+"scale(",null,",",null,")");h.push({i:o-4,x:Xz(t,n)},{i:o-2,x:Xz(i,s)})}else 1===n&&1===s||e.push(r(e)+"scale("+n+","+s+")")}(e.scaleX,e.scaleY,h.scaleX,h.scaleY,o,u),e=h=null,function(t){for(var i,n=-1,s=u.length;++n<s;)o[(i=u[n]).i]=i.x(t);return o.join("")}}}var iH=tH((function(t){return"none"===t?Jz:(Yz||(Yz=document.createElement("DIV"),Kz=document.documentElement,Bz=document.defaultView),Yz.style.transform=t,t=Bz.getComputedStyle(Kz.appendChild(Yz),null).getPropertyValue("transform"),Kz.removeChild(Yz),Qz(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),nH=tH((function(t){return null==t?Jz:(Uz||(Uz=document.createElementNS("http://www.w3.org/2000/svg","g")),Uz.setAttribute("transform",t),(t=Uz.transform.baseVal.consolidate())?Qz((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Jz)}),", ",")",")");function sH(t){return+t}var rH=[0,1];function eH(t){return t}function hH(t,i){return(i-=t=+t)?function(n){return(n-t)/i}:function(t){return function(){return t}}(isNaN(i)?NaN:.5)}function oH(t){var i,n=t[0],s=t[t.length-1];return n>s&&(i=n,n=s,s=i),function(t){return Math.max(n,Math.min(s,t))}}function uH(t,i,n){var s=t[0],r=t[1],e=i[0],h=i[1];return r<s?(s=hH(r,s),e=n(h,e)):(s=hH(s,r),e=n(e,h)),function(t){return e(s(t))}}function aH(t,i,n){var s=Math.min(t.length,i.length)-1,r=new Array(s),e=new Array(s),h=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),i=i.slice().reverse());++h<s;)r[h]=hH(t[h],t[h+1]),e[h]=n(i[h],i[h+1]);return function(i){var n=qO(t,i,1,s)-1;return e[n](r[n](i))}}function cH(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function lH(t,i){return function(){var t,i,n,s,r,e,h=rH,o=rH,u=Gz,a=eH;function c(){return s=Math.min(h.length,o.length)>2?aH:uH,r=e=null,l}function l(i){return isNaN(i=+i)?n:(r||(r=s(h.map(t),o,u)))(t(a(i)))}return l.invert=function(n){return a(i((e||(e=s(o,h.map(t),Xz)))(n)))},l.domain=function(t){return arguments.length?(h=tz.call(t,sH),a===eH||(a=oH(h)),c()):h.slice()},l.range=function(t){return arguments.length?(o=iz.call(t),c()):o.slice()},l.rangeRound=function(t){return o=iz.call(t),u=Vz,c()},l.clamp=function(t){return arguments.length?(a=t?oH(h):eH,l):a!==eH},l.interpolate=function(t){return arguments.length?(u=t,c()):u},l.unknown=function(t){return arguments.length?(n=t,l):n},function(n,s){return t=n,i=s,c()}}()(t,i)}function fH(t,i){if((n=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0)return null;var n,s=t.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+t.slice(n+1)]}function dH(t){return(t=fH(Math.abs(t)))?t[1]:NaN}var vH,pH=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yH(t){if(!(i=pH.exec(t)))throw new Error("invalid format: "+t);var i;return new wH({fill:i[1],align:i[2],sign:i[3],symbol:i[4],zero:i[5],width:i[6],comma:i[7],precision:i[8]&&i[8].slice(1),trim:i[9],type:i[10]})}function wH(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function gH(t,i){var n=fH(t,i);if(!n)return t+"";var s=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+s:s.length>r+1?s.slice(0,r+1)+"."+s.slice(r+1):s+new Array(r-s.length+2).join("0")}yH.prototype=wH.prototype,wH.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const mH={"%":function(t,i){return(100*t).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return gH(100*t,i)},r:gH,s:function(t,i){var n=fH(t,i);if(!n)return t+"";var s=n[0],r=n[1],e=r-(vH=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,h=s.length;return e===h?s:e>h?s+new Array(e-h+1).join("0"):e>0?s.slice(0,e)+"."+s.slice(e):"0."+new Array(1-e).join("0")+fH(t,Math.max(0,i+e-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function bH(t){return t}var MH,kH,AH,xH=Array.prototype.map,WH=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function NH(t){var i=t.domain;return t.ticks=function(t){var n=i();return function(t,i,n){var s,r,e,h,o=-1;if(n=+n,(t=+t)==(i=+i)&&n>0)return[t];if((s=i<t)&&(r=t,t=i,i=r),0===(h=FO(t,i,n))||!isFinite(h))return[];if(h>0)for(t=Math.ceil(t/h),i=Math.floor(i/h),e=new Array(r=Math.ceil(i-t+1));++o<r;)e[o]=(t+o)*h;else for(t=Math.floor(t*h),i=Math.ceil(i*h),e=new Array(r=Math.ceil(t-i+1));++o<r;)e[o]=(t-o)/h;return s&&e.reverse(),e}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var s=i();return function(t,i,n,s){var r,e=GO(t,i,n);switch((s=yH(null==s?",f":s)).type){case"s":var h=Math.max(Math.abs(t),Math.abs(i));return null!=s.precision||isNaN(r=function(t,i){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(dH(i)/3)))-dH(Math.abs(t)))}(e,h))||(s.precision=r),AH(s,h);case"":case"e":case"g":case"p":case"r":null!=s.precision||isNaN(r=function(t,i){return t=Math.abs(t),i=Math.abs(i)-t,Math.max(0,dH(i)-dH(t))+1}(e,Math.max(Math.abs(t),Math.abs(i))))||(s.precision=r-("e"===s.type));break;case"f":case"%":null!=s.precision||isNaN(r=function(t){return Math.max(0,-dH(Math.abs(t)))}(e))||(s.precision=r-2*("%"===s.type))}return kH(s)}(s[0],s[s.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var s,r=i(),e=0,h=r.length-1,o=r[e],u=r[h];return u<o&&(s=o,o=u,u=s,s=e,e=h,h=s),(s=FO(o,u,n))>0?s=FO(o=Math.floor(o/s)*s,u=Math.ceil(u/s)*s,n):s<0&&(s=FO(o=Math.ceil(o*s)/s,u=Math.floor(u*s)/s,n)),s>0?(r[e]=Math.floor(o/s)*s,r[h]=Math.ceil(u/s)*s,i(r)):s<0&&(r[e]=Math.ceil(o*s)/s,r[h]=Math.floor(u*s)/s,i(r)),t},t}function LH(){var t=lH(eH,eH);return t.copy=function(){return cH(t,LH())},VO.apply(t,arguments),NH(t)}MH=function(t){var i,n,s=void 0===t.grouping||void 0===t.thousands?bH:(i=xH.call(t.grouping,Number),n=t.thousands+"",function(t,s){for(var r=t.length,e=[],h=0,o=i[0],u=0;r>0&&o>0&&(u+o+1>s&&(o=Math.max(1,s-u)),e.push(t.substring(r-=o,r+o)),!((u+=o+1)>s));)o=i[h=(h+1)%i.length];return e.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",e=void 0===t.currency?"":t.currency[1]+"",h=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?bH:function(t){return function(i){return i.replace(/[0-9]/g,(function(i){return t[+i]}))}}(xH.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",a=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function l(t){var i=(t=yH(t)).fill,n=t.align,l=t.sign,f=t.symbol,d=t.zero,v=t.width,p=t.comma,y=t.precision,w=t.trim,g=t.type;"n"===g?(p=!0,g="g"):mH[g]||(void 0===y&&(y=12),w=!0,g="g"),(d||"0"===i&&"="===n)&&(d=!0,i="0",n="=");var m="$"===f?r:"#"===f&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===f?e:/[%p]/.test(g)?u:"",M=mH[g],k=/[defgprs%]/.test(g);function A(t){var r,e,u,f=m,A=b;if("c"===g)A=M(t)+A,t="";else{var x=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:M(Math.abs(t),y),w&&(t=function(t){t:for(var i,n=t.length,s=1,r=-1;s<n;++s)switch(t[s]){case".":r=i=s;break;case"0":0===r&&(r=s),i=s;break;default:if(!+t[s])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}(t)),x&&0==+t&&"+"!==l&&(x=!1),f=(x?"("===l?l:a:"-"===l||"("===l?"":l)+f,A=("s"===g?WH[8+vH/3]:"")+A+(x&&"("===l?")":""),k)for(r=-1,e=t.length;++r<e;)if(48>(u=t.charCodeAt(r))||u>57){A=(46===u?h+t.slice(r+1):t.slice(r))+A,t=t.slice(0,r);break}}p&&!d&&(t=s(t,1/0));var W=f.length+t.length+A.length,N=W<v?new Array(v-W+1).join(i):"";switch(p&&d&&(t=s(N+t,N.length?v-A.length:1/0),N=""),n){case"<":t=f+t+A+N;break;case"=":t=f+N+t+A;break;case"^":t=N.slice(0,W=N.length>>1)+f+t+A+N.slice(W);break;default:t=N+f+t+A}return o(t)}return y=void 0===y?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),A.toString=function(){return t+""},A}return{format:l,formatPrefix:function(t,i){var n=l(((t=yH(t)).type="f",t)),s=3*Math.max(-8,Math.min(8,Math.floor(dH(i)/3))),r=Math.pow(10,-s),e=WH[8+s/3];return function(t){return n(r*t)+e}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),kH=MH.format,AH=MH.formatPrefix;var SH=new Date,TH=new Date;function EH(t,i,n,s){function r(i){return t(i=0===arguments.length?new Date:new Date(+i)),i}return r.floor=function(i){return t(i=new Date(+i)),i},r.ceil=function(n){return t(n=new Date(n-1)),i(n,1),t(n),n},r.round=function(t){var i=r(t),n=r.ceil(t);return t-i<n-t?i:n},r.offset=function(t,n){return i(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,s,e){var h,o=[];if(n=r.ceil(n),e=null==e?1:Math.floor(e),!(n<s&&e>0))return o;do{o.push(h=new Date(+n)),i(n,e),t(n)}while(h<n&&n<s);return o},r.filter=function(n){return EH((function(i){if(i>=i)for(;t(i),!n(i);)i.setTime(i-1)}),(function(t,s){if(t>=t)if(s<0)for(;++s<=0;)for(;i(t,-1),!n(t););else for(;--s>=0;)for(;i(t,1),!n(t););}))},n&&(r.count=function(i,s){return SH.setTime(+i),TH.setTime(+s),t(SH),t(TH),Math.floor(n(SH,TH))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(s?function(i){return s(i)%t==0}:function(i){return r.count(0,i)%t==0}):r:null}),r}var DH=EH((function(){}),(function(t,i){t.setTime(+t+i)}),(function(t,i){return i-t}));DH.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?EH((function(i){i.setTime(Math.floor(i/t)*t)}),(function(i,n){i.setTime(+i+n*t)}),(function(i,n){return(n-i)/t})):DH:null};var $H=EH((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,i){t.setTime(+t+1e3*i)}),(function(t,i){return(i-t)/1e3}),(function(t){return t.getUTCSeconds()})),CH=EH((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,i){t.setTime(+t+6e4*i)}),(function(t,i){return(i-t)/6e4}),(function(t){return t.getMinutes()})),IH=EH((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,i){t.setTime(+t+36e5*i)}),(function(t,i){return(i-t)/36e5}),(function(t){return t.getHours()})),OH=EH((function(t){t.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}));function zH(t){return EH((function(i){i.setDate(i.getDate()-(i.getDay()+7-t)%7),i.setHours(0,0,0,0)}),(function(t,i){t.setDate(t.getDate()+7*i)}),(function(t,i){return(i-t-6e4*(i.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}var HH=zH(0),_H=zH(1),qH=(zH(2),zH(3),zH(4)),XH=(zH(5),zH(6),EH((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,i){t.setMonth(t.getMonth()+i)}),(function(t,i){return i.getMonth()-t.getMonth()+12*(i.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),RH=EH((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,i){t.setFullYear(t.getFullYear()+i)}),(function(t,i){return i.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));RH.every=function(t){return isFinite(t=Math.floor(t))&&t>0?EH((function(i){i.setFullYear(Math.floor(i.getFullYear()/t)*t),i.setMonth(0,1),i.setHours(0,0,0,0)}),(function(i,n){i.setFullYear(i.getFullYear()+n*t)})):null};var jH=EH((function(t){t.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCDate(t.getUTCDate()+i)}),(function(t,i){return(i-t)/864e5}),(function(t){return t.getUTCDate()-1}));function PH(t){return EH((function(i){i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-t)%7),i.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCDate(t.getUTCDate()+7*i)}),(function(t,i){return(i-t)/6048e5}))}var FH=PH(0),GH=PH(1),VH=(PH(2),PH(3),PH(4)),YH=(PH(5),PH(6),EH((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,i){t.setUTCFullYear(t.getUTCFullYear()+i)}),(function(t,i){return i.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));function KH(t){if(0<=t.y&&t.y<100){var i=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return i.setFullYear(t.y),i}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function BH(t){if(0<=t.y&&t.y<100){var i=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return i.setUTCFullYear(t.y),i}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function UH(t,i,n){return{y:t,m:i,d:n,H:0,M:0,S:0,L:0}}YH.every=function(t){return isFinite(t=Math.floor(t))&&t>0?EH((function(i){i.setUTCFullYear(Math.floor(i.getUTCFullYear()/t)*t),i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)}),(function(i,n){i.setUTCFullYear(i.getUTCFullYear()+n*t)})):null};var ZH,JH,QH={"-":"",_:" ",0:"0"},t_=/^\s*\d+/,i_=/^%/,n_=/[\\^$*+?|[\]().{}]/g;function s_(t,i,n){var s=t<0?"-":"",r=(s?-t:t)+"",e=r.length;return s+(e<n?new Array(n-e+1).join(i)+r:r)}function r_(t){return t.replace(n_,"\\$&")}function e_(t){return new RegExp("^(?:"+t.map(r_).join("|")+")","i")}function h_(t){for(var i={},n=-1,s=t.length;++n<s;)i[t[n].toLowerCase()]=n;return i}function o_(t,i,n){var s=t_.exec(i.slice(n,n+1));return s?(t.w=+s[0],n+s[0].length):-1}function u_(t,i,n){var s=t_.exec(i.slice(n,n+1));return s?(t.u=+s[0],n+s[0].length):-1}function a_(t,i,n){var s=t_.exec(i.slice(n,n+2));return s?(t.U=+s[0],n+s[0].length):-1}function c_(t,i,n){var s=t_.exec(i.slice(n,n+2));return s?(t.V=+s[0],n+s[0].length):-1}function l_(t,i,n){var s=t_.exec(i.slice(n,n+2));return s?(t.W=+s[0],n+s[0].length):-1}function f_(t,i,n){var s=t_.exec(i.slice(n,n+4));return s?(t.y=+s[0],n+s[0].length):-1}function d_(t,i,n){var s=t_.exec(i.slice(n,n+2));return s?(t.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function v_(t,i,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(i.slice(n,n+6));return s?(t.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function p_(t,i,n){var s=t_.exec(i.slice(n,n+1));return s?(t.q=3*s[0]-3,n+s[0].length):-1}function y_(t,i,n){var s=t_.exec(i.slice(n,n+2));return s?(t.m=s[0]-1,n+s[0].length):-1}function w_(t,i,n){var s=t_.exec(i.slice(n,n+2));return s?(t.d=+s[0],n+s[0].length):-1}function g_(t,i,n){var s=t_.exec(i.slice(n,n+3));return s?(t.m=0,t.d=+s[0],n+s[0].length):-1}function m_(t,i,n){var s=t_.exec(i.slice(n,n+2));return s?(t.H=+s[0],n+s[0].length):-1}function b_(t,i,n){var s=t_.exec(i.slice(n,n+2));return s?(t.M=+s[0],n+s[0].length):-1}function M_(t,i,n){var s=t_.exec(i.slice(n,n+2));return s?(t.S=+s[0],n+s[0].length):-1}function k_(t,i,n){var s=t_.exec(i.slice(n,n+3));return s?(t.L=+s[0],n+s[0].length):-1}function A_(t,i,n){var s=t_.exec(i.slice(n,n+6));return s?(t.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function x_(t,i,n){var s=i_.exec(i.slice(n,n+1));return s?n+s[0].length:-1}function W_(t,i,n){var s=t_.exec(i.slice(n));return s?(t.Q=+s[0],n+s[0].length):-1}function N_(t,i,n){var s=t_.exec(i.slice(n));return s?(t.s=+s[0],n+s[0].length):-1}function L_(t,i){return s_(t.getDate(),i,2)}function S_(t,i){return s_(t.getHours(),i,2)}function T_(t,i){return s_(t.getHours()%12||12,i,2)}function E_(t,i){return s_(1+OH.count(RH(t),t),i,3)}function D_(t,i){return s_(t.getMilliseconds(),i,3)}function $_(t,i){return D_(t,i)+"000"}function C_(t,i){return s_(t.getMonth()+1,i,2)}function I_(t,i){return s_(t.getMinutes(),i,2)}function O_(t,i){return s_(t.getSeconds(),i,2)}function z_(t){var i=t.getDay();return 0===i?7:i}function H_(t,i){return s_(HH.count(RH(t)-1,t),i,2)}function __(t){var i=t.getDay();return i>=4||0===i?qH(t):qH.ceil(t)}function q_(t,i){return t=__(t),s_(qH.count(RH(t),t)+(4===RH(t).getDay()),i,2)}function X_(t){return t.getDay()}function R_(t,i){return s_(_H.count(RH(t)-1,t),i,2)}function j_(t,i){return s_(t.getFullYear()%100,i,2)}function P_(t,i){return s_((t=__(t)).getFullYear()%100,i,2)}function F_(t,i){return s_(t.getFullYear()%1e4,i,4)}function G_(t,i){var n=t.getDay();return s_((t=n>=4||0===n?qH(t):qH.ceil(t)).getFullYear()%1e4,i,4)}function V_(t){var i=t.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+s_(i/60|0,"0",2)+s_(i%60,"0",2)}function Y_(t,i){return s_(t.getUTCDate(),i,2)}function K_(t,i){return s_(t.getUTCHours(),i,2)}function B_(t,i){return s_(t.getUTCHours()%12||12,i,2)}function U_(t,i){return s_(1+jH.count(YH(t),t),i,3)}function Z_(t,i){return s_(t.getUTCMilliseconds(),i,3)}function J_(t,i){return Z_(t,i)+"000"}function Q_(t,i){return s_(t.getUTCMonth()+1,i,2)}function tq(t,i){return s_(t.getUTCMinutes(),i,2)}function iq(t,i){return s_(t.getUTCSeconds(),i,2)}function nq(t){var i=t.getUTCDay();return 0===i?7:i}function sq(t,i){return s_(FH.count(YH(t)-1,t),i,2)}function rq(t){var i=t.getUTCDay();return i>=4||0===i?VH(t):VH.ceil(t)}function eq(t,i){return t=rq(t),s_(VH.count(YH(t),t)+(4===YH(t).getUTCDay()),i,2)}function hq(t){return t.getUTCDay()}function oq(t,i){return s_(GH.count(YH(t)-1,t),i,2)}function uq(t,i){return s_(t.getUTCFullYear()%100,i,2)}function aq(t,i){return s_((t=rq(t)).getUTCFullYear()%100,i,2)}function cq(t,i){return s_(t.getUTCFullYear()%1e4,i,4)}function lq(t,i){var n=t.getUTCDay();return s_((t=n>=4||0===n?VH(t):VH.ceil(t)).getUTCFullYear()%1e4,i,4)}function fq(){return"+0000"}function dq(){return"%"}function vq(t){return+t}function pq(t){return Math.floor(+t/1e3)}function yq(t){return new Date(t)}function wq(t){return t instanceof Date?+t:+new Date(+t)}function gq(t,i,n,s,r,e,h,o,u){var a=lH(eH,eH),c=a.invert,l=a.domain,f=u(".%L"),d=u(":%S"),v=u("%I:%M"),p=u("%I %p"),y=u("%a %d"),w=u("%b %d"),g=u("%B"),m=u("%Y"),b=[[h,1,1e3],[h,5,5e3],[h,15,15e3],[h,30,3e4],[e,1,6e4],[e,5,3e5],[e,15,9e5],[e,30,18e5],[r,1,36e5],[r,3,108e5],[r,6,216e5],[r,12,432e5],[s,1,864e5],[s,2,1728e5],[n,1,6048e5],[i,1,2592e6],[i,3,7776e6],[t,1,31536e6]];function M(o){return(h(o)<o?f:e(o)<o?d:r(o)<o?v:s(o)<o?p:i(o)<o?n(o)<o?y:w:t(o)<o?g:m)(o)}function k(i,n,s,r){if(null==i&&(i=10),"number"==typeof i){var e=Math.abs(s-n)/i,h=_O((function(t){return t[2]})).right(b,e);h===b.length?(r=GO(n/31536e6,s/31536e6,i),i=t):h?(r=(h=b[e/b[h-1][2]<b[h][2]/e?h-1:h])[1],i=h[0]):(r=Math.max(GO(n,s,i),1),i=o)}return null==r?i:i.every(r)}return a.invert=function(t){return new Date(c(t))},a.domain=function(t){return arguments.length?l(tz.call(t,wq)):l().map(yq)},a.ticks=function(t,i){var n,s=l(),r=s[0],e=s[s.length-1],h=e<r;return h&&(n=r,r=e,e=n),n=(n=k(t,r,e,i))?n.range(r,e+1):[],h?n.reverse():n},a.tickFormat=function(t,i){return null==i?M:u(i)},a.nice=function(t,i){var n=l();return(t=k(t,n[0],n[n.length-1],i))?l(function(t,i){var n,s=0,r=(t=t.slice()).length-1,e=t[s],h=t[r];return h<e&&(n=s,s=r,r=n,n=e,e=h,h=n),t[s]=i.floor(e),t[r]=i.ceil(h),t}(n,t)):a},a.copy=function(){return cH(a,gq(t,i,n,s,r,e,h,o,u))},a}function mq(t){return 1-Math.sqrt(1-t*t)}ZH=function(t){var i=t.dateTime,n=t.date,s=t.time,r=t.periods,e=t.days,h=t.shortDays,o=t.months,u=t.shortMonths,a=e_(r),c=h_(r),l=e_(e),f=h_(e),d=e_(h),v=h_(h),p=e_(o),y=h_(o),w=e_(u),g=h_(u),m={a:function(t){return h[t.getDay()]},A:function(t){return e[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return o[t.getMonth()]},c:null,d:L_,e:L_,f:$_,g:P_,G:G_,H:S_,I:T_,j:E_,L:D_,m:C_,M:I_,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:vq,s:pq,S:O_,u:z_,U:H_,V:q_,w:X_,W:R_,x:null,X:null,y:j_,Y:F_,Z:V_,"%":dq},b={a:function(t){return h[t.getUTCDay()]},A:function(t){return e[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return o[t.getUTCMonth()]},c:null,d:Y_,e:Y_,f:J_,g:aq,G:lq,H:K_,I:B_,j:U_,L:Z_,m:Q_,M:tq,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:vq,s:pq,S:iq,u:nq,U:sq,V:eq,w:hq,W:oq,x:null,X:null,y:uq,Y:cq,Z:fq,"%":dq},M={a:function(t,i,n){var s=d.exec(i.slice(n));return s?(t.w=v[s[0].toLowerCase()],n+s[0].length):-1},A:function(t,i,n){var s=l.exec(i.slice(n));return s?(t.w=f[s[0].toLowerCase()],n+s[0].length):-1},b:function(t,i,n){var s=w.exec(i.slice(n));return s?(t.m=g[s[0].toLowerCase()],n+s[0].length):-1},B:function(t,i,n){var s=p.exec(i.slice(n));return s?(t.m=y[s[0].toLowerCase()],n+s[0].length):-1},c:function(t,n,s){return x(t,i,n,s)},d:w_,e:w_,f:A_,g:d_,G:f_,H:m_,I:m_,j:g_,L:k_,m:y_,M:b_,p:function(t,i,n){var s=a.exec(i.slice(n));return s?(t.p=c[s[0].toLowerCase()],n+s[0].length):-1},q:p_,Q:W_,s:N_,S:M_,u:u_,U:a_,V:c_,w:o_,W:l_,x:function(t,i,s){return x(t,n,i,s)},X:function(t,i,n){return x(t,s,i,n)},y:d_,Y:f_,Z:v_,"%":x_};function k(t,i){return function(n){var s,r,e,h=[],o=-1,u=0,a=t.length;for(n instanceof Date||(n=new Date(+n));++o<a;)37===t.charCodeAt(o)&&(h.push(t.slice(u,o)),null!=(r=QH[s=t.charAt(++o)])?s=t.charAt(++o):r="e"===s?" ":"0",(e=i[s])&&(s=e(n,r)),h.push(s),u=o+1);return h.push(t.slice(u,o)),h.join("")}}function A(t,i){return function(n){var s,r,e=UH(1900,void 0,1);if(x(e,t,n+="",0)!=n.length)return null;if("Q"in e)return new Date(e.Q);if("s"in e)return new Date(1e3*e.s+("L"in e?e.L:0));if(!i||"Z"in e||(e.Z=0),"p"in e&&(e.H=e.H%12+12*e.p),void 0===e.m&&(e.m="q"in e?e.q:0),"V"in e){if(e.V<1||e.V>53)return null;"w"in e||(e.w=1),"Z"in e?(r=(s=BH(UH(e.y,0,1))).getUTCDay(),s=r>4||0===r?GH.ceil(s):GH(s),s=jH.offset(s,7*(e.V-1)),e.y=s.getUTCFullYear(),e.m=s.getUTCMonth(),e.d=s.getUTCDate()+(e.w+6)%7):(r=(s=KH(UH(e.y,0,1))).getDay(),s=r>4||0===r?_H.ceil(s):_H(s),s=OH.offset(s,7*(e.V-1)),e.y=s.getFullYear(),e.m=s.getMonth(),e.d=s.getDate()+(e.w+6)%7)}else("W"in e||"U"in e)&&("w"in e||(e.w="u"in e?e.u%7:"W"in e?1:0),r="Z"in e?BH(UH(e.y,0,1)).getUTCDay():KH(UH(e.y,0,1)).getDay(),e.m=0,e.d="W"in e?(e.w+6)%7+7*e.W-(r+5)%7:e.w+7*e.U-(r+6)%7);return"Z"in e?(e.H+=e.Z/100|0,e.M+=e.Z%100,BH(e)):KH(e)}}function x(t,i,n,s){for(var r,e,h=0,o=i.length,u=n.length;h<o;){if(s>=u)return-1;if(37===(r=i.charCodeAt(h++))){if(r=i.charAt(h++),!(e=M[r in QH?i.charAt(h++):r])||(s=e(t,n,s))<0)return-1}else if(r!=n.charCodeAt(s++))return-1}return s}return(m.x=k(n,m),m.X=k(s,m),m.c=k(i,m),b.x=k(n,b),b.X=k(s,b),b.c=k(i,b),{format:function(t){var i=k(t+="",m);return i.toString=function(){return t},i},parse:function(t){var i=A(t+="",!1);return i.toString=function(){return t},i},utcFormat:function(t){var i=k(t+="",b);return i.toString=function(){return t},i},utcParse:function(t){var i=A(t+="",!0);return i.toString=function(){return t},i}})}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),JH=ZH.format;var bq={value:function(){}};function Mq(){for(var t,i=0,n=arguments.length,s={};i<n;++i){if(!(t=arguments[i]+"")||t in s||/[\s.]/.test(t))throw new Error("illegal type: "+t);s[t]=[]}return new kq(s)}function kq(t){this._=t}function Aq(t,i){return t.trim().split(/^|\s+/).map((function(t){var n="",s=t.indexOf(".");if(s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),t&&!i.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function xq(t,i){for(var n,s=0,r=t.length;s<r;++s)if((n=t[s]).name===i)return n.value}function Wq(t,i,n){for(var s=0,r=t.length;s<r;++s)if(t[s].name===i){t[s]=bq,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=n&&t.push({name:i,value:n}),t}kq.prototype=Mq.prototype={constructor:kq,on:function(t,i){var n,s=this._,r=Aq(t+"",s),e=-1,h=r.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++e<h;)if(n=(t=r[e]).type)s[n]=Wq(s[n],t.name,i);else if(null==i)for(n in s)s[n]=Wq(s[n],t.name,null);return this}for(;++e<h;)if((n=(t=r[e]).type)&&(n=xq(s[n],t.name)))return n},copy:function(){var t={},i=this._;for(var n in i)t[n]=i[n].slice();return new kq(t)},call:function(t,i){if((n=arguments.length-2)>0)for(var n,s,r=new Array(n),e=0;e<n;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(e=0,n=(s=this._[t]).length;e<n;++e)s[e].value.apply(i,r)},apply:function(t,i,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],r=0,e=s.length;r<e;++r)s[r].value.apply(i,n)}};var Nq,Lq,Sq=0,Tq=0,Eq=0,Dq=0,$q=0,Cq=0,Iq="object"==typeof performance&&performance.now?performance:Date,Oq="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function zq(){return $q||(Oq(Hq),$q=Iq.now()+Cq)}function Hq(){$q=0}function _q(){this._call=this._time=this._next=null}function qq(t,i,n){var s=new _q;return s.restart(t,i,n),s}function Xq(){$q=(Dq=Iq.now())+Cq,Sq=Tq=0;try{!function(){zq(),++Sq;for(var t,i=Nq;i;)(t=$q-i._time)>=0&&i._call.call(null,t),i=i._next;--Sq}()}finally{Sq=0,function(){for(var t,i,n=Nq,s=1/0;n;)n._call?(s>n._time&&(s=n._time),t=n,n=n._next):(i=n._next,n._next=null,n=t?t._next=i:Nq=i);Lq=t,jq(s)}(),$q=0}}function Rq(){var t=Iq.now(),i=t-Dq;i>1e3&&(Cq-=i,Dq=t)}function jq(t){Sq||(Tq&&(Tq=clearTimeout(Tq)),t-$q>24?(t<1/0&&(Tq=setTimeout(Xq,t-Iq.now()-Cq)),Eq&&(Eq=clearInterval(Eq))):(Eq||(Dq=Iq.now(),Eq=setInterval(Rq,1e3)),Sq=1,Oq(Xq)))}function Pq(t,i,n){var s=new _q;return s.restart((function(n){s.stop(),t(n+i)}),i=null==i?0:+i,n),s}_q.prototype=qq.prototype={constructor:_q,restart:function(t,i,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?zq():+n)+(null==i?0:+i),this._next||Lq===this||(Lq?Lq._next=this:Nq=this,Lq=this),this._call=t,this._time=n,jq()},stop:function(){this._call&&(this._call=null,this._time=1/0,jq())}};var Fq=Mq("start","end","interrupt"),Gq=[];function Vq(t,i,n,s,r,e){var h=t.__transition;if(h){if(n in h)return}else t.__transition={};!function(t,i,n){var s,r=t.__transition;function e(u){var a,c,l,f;if(1!==n.state)return o();for(a in r)if((f=r[a]).name===n.name){if(3===f.state)return Pq(e);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[a]):+a<i&&(f.state=6,f.timer.stop(),delete r[a])}if(Pq((function(){3===n.state&&(n.state=4,n.timer.restart(h,n.delay,n.time),h(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,s=new Array(l=n.tween.length),a=0,c=-1;a<l;++a)(f=n.tween[a].value.call(t,t.__data__,n.index,n.group))&&(s[++c]=f);s.length=c+1}}function h(i){for(var r=i<n.duration?n.ease.call(null,i/n.duration):(n.timer.restart(o),n.state=5,1),e=-1,h=s.length;++e<h;)s[e].call(null,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){for(var s in n.state=6,n.timer.stop(),delete r[i],r)return;delete t.__transition}r[i]=n,n.timer=qq((function(t){n.state=1,n.timer.restart(e,n.delay,n.time),n.delay<=t&&e(t-n.delay)}),0,n.time)}(t,n,{name:i,index:s,group:r,on:Fq,tween:Gq,time:e.time,delay:e.delay,duration:e.duration,ease:e.ease,timer:null,state:0})}function Yq(t,i){var n=Bq(t,i);if(n.state>0)throw new Error("too late; already scheduled");return n}function Kq(t,i){var n=Bq(t,i);if(n.state>2)throw new Error("too late; already started");return n}function Bq(t,i){var n=t.__transition;if(!n||!(n=n[i]))throw new Error("transition not found");return n}function Uq(t,i){var n,s;return function(){var r=Kq(this,t),e=r.tween;if(e!==n)for(var h=0,o=(s=n=e).length;h<o;++h)if(s[h].name===i){(s=s.slice()).splice(h,1);break}r.tween=s}}function Zq(t,i,n){var s,r;if("function"!=typeof n)throw new Error;return function(){var e=Kq(this,t),h=e.tween;if(h!==s){r=(s=h).slice();for(var o={name:i,value:n},u=0,a=r.length;u<a;++u)if(r[u].name===i){r[u]=o;break}u===a&&r.push(o)}e.tween=r}}function Jq(t,i,n){var s=t._id;return t.each((function(){var t=Kq(this,s);(t.value||(t.value={}))[i]=n.apply(this,arguments)})),function(t){return Bq(t,s).value[i]}}function Qq(t,i){var n;return("number"==typeof i?Xz:i instanceof Mz?zz:(n=Mz(i))?(i=n,zz):Fz)(t,i)}function tX(t){return function(){this.removeAttribute(t)}}function iX(t){return function(){this.removeAttributeNS(t.space,t.local)}}function nX(t,i,n){var s,r;return function(){var e=this.getAttribute(t);return e===n?null:e===s?r:r=i(s=e,n)}}function sX(t,i,n){var s,r;return function(){var e=this.getAttributeNS(t.space,t.local);return e===n?null:e===s?r:r=i(s=e,n)}}function rX(t,i,n){var s,r,e;return function(){var h,o=n(this);if(null!=o)return(h=this.getAttribute(t))===o?null:h===s&&o===r?e:e=i(s=h,r=o);this.removeAttribute(t)}}function eX(t,i,n){var s,r,e;return function(){var h,o=n(this);if(null!=o)return(h=this.getAttributeNS(t.space,t.local))===o?null:h===s&&o===r?e:e=i(s=h,r=o);this.removeAttributeNS(t.space,t.local)}}function hX(t,i){function n(){var n=this,s=i.apply(n,arguments);return s&&function(i){n.setAttributeNS(t.space,t.local,s(i))}}return n._value=i,n}function oX(t,i){function n(){var n=this,s=i.apply(n,arguments);return s&&function(i){n.setAttribute(t,s(i))}}return n._value=i,n}function uX(t,i){return function(){Yq(this,t).delay=+i.apply(this,arguments)}}function aX(t,i){return i=+i,function(){Yq(this,t).delay=i}}function cX(t,i){return function(){Kq(this,t).duration=+i.apply(this,arguments)}}function lX(t,i){return i=+i,function(){Kq(this,t).duration=i}}function fX(t,i){if("function"!=typeof i)throw new Error;return function(){Kq(this,t).ease=i}}function dX(t,i,n){var s,r,e=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||"start"===t}))}(i)?Yq:Kq;return function(){var h=e(this,t),o=h.on;o!==s&&(r=(s=o).copy()).on(i,n),h.on=r}}var vX=OO.prototype.constructor;function pX(t,i,n){function s(){var s=this,r=i.apply(s,arguments);return r&&function(i){s.style.setProperty(t,r(i),n)}}return s._value=i,s}var yX=0;function wX(t,i,n,s){this._groups=t,this._parents=i,this._name=n,this._id=s}function gX(){return++yX}var mX=OO.prototype;wX.prototype=function(t){return OO().transition(t)}.prototype={constructor:wX,select:function(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=II(t));for(var s=this._groups,r=s.length,e=new Array(r),h=0;h<r;++h)for(var o,u,a=s[h],c=a.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=a[f])&&(u=t.call(o,o.__data__,f,a))&&("__data__"in o&&(u.__data__=o.__data__),l[f]=u,Vq(l[f],i,n,f,l,Bq(o,n)));return new wX(e,this._parents,i,n)},selectAll:function(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=zI(t));for(var s=this._groups,r=s.length,e=[],h=[],o=0;o<r;++o)for(var u,a=s[o],c=a.length,l=0;l<c;++l)if(u=a[l]){for(var f,d=t.call(u,u.__data__,l,a),v=Bq(u,n),p=0,y=d.length;p<y;++p)(f=d[p])&&Vq(f,i,n,p,d,v);e.push(d),h.push(u)}return new wX(e,h,i,n)},filter:function(t){"function"!=typeof t&&(t=HI(t));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var e,h=i[r],o=h.length,u=s[r]=[],a=0;a<o;++a)(e=h[a])&&t.call(e,e.__data__,a,h)&&u.push(e);return new wX(s,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,n=t._groups,s=i.length,r=Math.min(s,n.length),e=new Array(s),h=0;h<r;++h)for(var o,u=i[h],a=n[h],c=u.length,l=e[h]=new Array(c),f=0;f<c;++f)(o=u[f]||a[f])&&(l[f]=o);for(;h<s;++h)e[h]=i[h];return new wX(e,this._parents,this._name,this._id)},selection:function(){return new vX(this._groups,this._parents)},transition:function(){for(var t=this._name,i=this._id,n=gX(),s=this._groups,r=s.length,e=0;e<r;++e)for(var h,o=s[e],u=o.length,a=0;a<u;++a)if(h=o[a]){var c=Bq(h,i);Vq(h,t,n,a,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new wX(s,this._parents,t,n)},call:mX.call,nodes:mX.nodes,node:mX.node,size:mX.size,empty:mX.empty,each:mX.each,on:function(t,i){var n=this._id;return arguments.length<2?Bq(this.node(),n).on.on(t):this.each(dX(n,t,i))},attr:function(t,i){var n=TI(t),s="transform"===n?nH:Qq;return this.attrTween(t,"function"==typeof i?(n.local?eX:rX)(n,s,Jq(this,"attr."+t,i)):null==i?(n.local?iX:tX)(n):(n.local?sX:nX)(n,s,i+""))},attrTween:function(t,i){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;var s=TI(t);return this.tween(n,(s.local?hX:oX)(s,i))},style:function(t,i,n){var s="transform"==(t+="")?iH:Qq;return null==i?this.styleTween(t,function(t,i){var n,s,r;return function(){var e=QI(this,t),h=(this.style.removeProperty(t),QI(this,t));return e===h?null:e===n&&h===s?r:r=i(n=e,s=h)}}(t,s)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof i?function(t,i,n){var s,r,e;return function(){var h=QI(this,t),o=n(this);return null==o&&(this.style.removeProperty(t),o=QI(this,t)),h===o?null:h===s&&o===r?e:e=i(s=h,r=o)}}(t,s,Jq(this,"style."+t,i)):function(t,i,n){var s,r;return function(){var e=QI(this,t);return e===n?null:e===s?r:r=i(s=e,n)}}(t,s,i+""),n)},styleTween:function(t,i,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;return this.tween(s,pX(t,i,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var i=t(this);this.textContent=null==i?"":i}}(Jq(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(t){return function(){var i=this.parentNode;for(var n in this.__transition)if(+n!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function(t,i){var n=this._id;if(t+="",arguments.length<2){for(var s,r=Bq(this.node(),n).tween,e=0,h=r.length;e<h;++e)if((s=r[e]).name===t)return s.value;return null}return this.each((null==i?Uq:Zq)(n,t,i))},delay:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?uX:aX)(i,t)):Bq(this.node(),i).delay},duration:function(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?cX:lX)(i,t)):Bq(this.node(),i).duration},ease:function(t){var i=this._id;return arguments.length?this.each(fX(i,t)):Bq(this.node(),i).ease}};var bX={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function MX(t,i){for(var n;!(n=t.__transition)||!(n=n[i]);)if(!(t=t.parentNode))return bX.time=zq(),bX;return n}OO.prototype.interrupt=function(t){return this.each((function(){!function(t,i){var n,s,r,e=t.__transition,h=!0;if(e){for(r in i=null==i?null:i+"",e)(n=e[r]).name===i?(s=n.state>2&&n.state<5,n.state=6,n.timer.stop(),s&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete e[r]):h=!1;h&&delete t.__transition}}(this,t)}))},OO.prototype.transition=function(t){var i,n;t instanceof wX?(i=t._id,t=t._name):(i=gX(),(n=bX).time=zq(),t=null==t?null:t+"");for(var s=this._groups,r=s.length,e=0;e<r;++e)for(var h,o=s[e],u=o.length,a=0;a<u;++a)(h=o[a])&&Vq(h,t,i,a,o,n||MX(h,i));return new wX(s,this._parents,t,i)};var kX="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),AX=new Uint8Array(16);function xX(){if(!kX)throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.");return kX(AX)}for(var WX=[],NX=0;NX<256;++NX)WX[NX]=(NX+256).toString(16).substr(1);function LX(t,i,n){var s=i&&n||0;"string"==typeof t&&(i="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||xX)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,i)for(var e=0;e<16;++e)i[s+e]=r[e];return i||function(t){var i=0;return[WX[t[i++]],WX[t[i++]],WX[t[i++]],WX[t[i++]],"-",WX[t[i++]],WX[t[i++]],"-",WX[t[i++]],WX[t[i++]],"-",WX[t[i++]],WX[t[i++]],"-",WX[t[i++]],WX[t[i++]],WX[t[i++]],WX[t[i++]],WX[t[i++]],WX[t[i++]]].join("")}(r)}const{propDefaultValues:SX}=r;class TX{}TX.mainTitle="Stacked Bar Chart Title",TX.subTitle="This is the stacked bar chart's subtitle",TX.height=280,TX.width=700,TX.margin={top:4,bottom:4,right:4,left:4},TX.padding={top:20,bottom:50,right:50,left:50},TX.normalized=!1,TX.showTotalValue=!0,TX.showZeroLabels=!1,TX.ordinalAccessor="label",TX.valueAccessor="value",TX.groupAccessor="item",TX.layout=SX.layout,TX.accessibility=SX.accessibility,TX.highestHeadingLevel=SX.highestHeadingLevel,TX.sortOrder=SX.sortOrder,TX.xAxis=SX.xAxis,TX.yAxis=SX.yAxis,TX.wrapLabel=SX.wrapLabel,TX.colorPalette=SX.colorPaletteCategorical,TX.hoverStyle=SX.hoverStyle,TX.clickStyle=SX.clickStyle,TX.referenceStyle=SX.referenceStyle,TX.cursor=SX.cursor,TX.roundedCorner=SX.roundedCorner,TX.barIntervalRatio=SX.barIntervalRatio,TX.hoverOpacity=SX.hoverOpacity,TX.dataLabel=SX.dataLabelMiddle,TX.legend=SX.categoryLegend,TX.tooltipLabel=SX.tooltipLabel,TX.showTooltip=SX.showTooltip,TX.suppressEvents=SX.suppressEvents,TX.referenceLines=SX.referenceLines,TX.annotations=SX.annotations,TX.clickHighlight=SX.clickHighlight;const{getBrowser:EX,verifyTextHasSpace:DX,checkAttributeTransitions:$X,createTextStrokeFilter:CX,drawHoverStrokes:IX,removeHoverStrokes:OX,buildStrokes:zX,convertColorsToTextures:HX,findTagLevel:_X,initializeDescriptionRoot:qX,initializeElementAccess:XX,setElementFocusHandler:RX,setElementAccessID:jX,setAccessibilityController:PX,hideNonessentialGroups:FX,setAccessTitle:GX,setAccessSubtitle:VX,setAccessLongDescription:YX,setAccessExecutiveSummary:KX,setAccessPurpose:BX,setAccessContext:UX,setAccessStatistics:ZX,setAccessChartCounts:JX,setAccessXAxis:QX,setAccessYAxis:tR,setAccessStructure:iR,setAccessAnnotation:nR,retainAccessFocus:sR,checkAccessFocus:rR,setElementInteractionAccessState:eR,setAccessibilityDescriptionWidth:hR,autoTextColor:oR,annotate:uR,chartAccessors:aR,checkInteraction:cR,checkClicked:lR,checkHovered:fR,convertVisaColor:dR,drawAxis:vR,drawGrid:pR,drawLegend:yR,setLegendInteractionState:wR,drawTooltip:gR,formatStats:mR,formatDate:bR,formatDataLabel:MR,getPadding:kR,getColors:AR,getLicenses:xR,getScopedData:WR,initTooltipStyle:NR,overrideTitleTooltip:LR,placeDataLabels:SR,transitionEndAll:TR,scopeDataKeys:ER,visaColors:DR,validateAccessibilityProps:$R}=r,CR=class{constructor(n){t(this,n),this.mainTitle=TX.mainTitle,this.subTitle=TX.subTitle,this.height=TX.height,this.width=TX.width,this.layout=TX.layout,this.highestHeadingLevel=TX.highestHeadingLevel,this.margin=TX.margin,this.padding=TX.padding,this.ordinalAccessor=TX.ordinalAccessor,this.valueAccessor=TX.valueAccessor,this.groupAccessor=TX.groupAccessor,this.sortOrder=TX.sortOrder,this.xAxis=TX.xAxis,this.yAxis=TX.yAxis,this.wrapLabel=TX.wrapLabel,this.normalized=TX.normalized,this.colorPalette=TX.colorPalette,this.hoverStyle=TX.hoverStyle,this.clickStyle=TX.clickStyle,this.referenceStyle=TX.referenceStyle,this.cursor=TX.cursor,this.roundedCorner=TX.roundedCorner,this.barIntervalRatio=TX.barIntervalRatio,this.hoverOpacity=TX.hoverOpacity,this.dataLabel=TX.dataLabel,this.showTotalValue=TX.showTotalValue,this.showTooltip=TX.showTooltip,this.tooltipLabel=TX.tooltipLabel,this.accessibility=TX.accessibility,this.legend=TX.legend,this.annotations=TX.annotations,this.showZeroLabels=TX.showZeroLabels,this.referenceLines=TX.referenceLines,this.suppressEvents=TX.suppressEvents,this.clickHighlight=TX.clickHighlight,this.shouldValidateAccessibility=!0,this.series=[],this.extent=[],this.datakeys=[],this.updated=!0,this.shouldValidateInteractionKeys=!1,this.shouldValidate=!1,this.shouldUpdateData=!1,this.shouldSetDimensions=!1,this.shouldUpdateTableData=!1,this.shouldSetColors=!1,this.shouldValidateAxes=!1,this.shouldValidateClickHighlight=!1,this.shouldUpdateScales=!1,this.shouldUpdateAnnotations=!1,this.shouldResetRoot=!1,this.shouldEnterUpdateExit=!1,this.shouldSetGlobalSelections=!1,this.shouldUpdateGeometries=!1,this.shouldCheckValueAxis=!1,this.shouldCheckLabelAxis=!1,this.shouldUpdateXAxis=!1,this.shouldUpdateYAxis=!1,this.shouldUpdateXGrid=!1,this.shouldUpdateYGrid=!1,this.shouldUpdateBaseline=!1,this.shouldSetSelectionClass=!1,this.shouldUpdateCursor=!1,this.shouldUpdateCorners=!1,this.shouldUpdateLegendData=!1,this.shouldValidateLabelPlacement=!1,this.shouldValidateDataLabelAccessor=!1,this.shouldUpdateLegend=!1,this.shouldUpdateLegendInteractivity=!1,this.shouldUpdateReferenceLines=!1,this.shouldDrawInteractionState=!1,this.shouldBindInteractivity=!1,this.shouldSetLabelOpacity=!1,this.shouldUpdateLabels=!1,this.shouldUpdateTotalLabels=!1,this.shouldCheckLabelColor=!1,this.shouldUpdateDescriptionWrapper=!1,this.shouldSetChartAccessibilityTitle=!1,this.shouldSetChartAccessibilitySubtitle=!1,this.shouldSetChartAccessibilityLongDescription=!1,this.shouldSetChartAccessibilityExecutiveSummary=!1,this.shouldSetChartAccessibilityStatisticalNotes=!1,this.shouldSetChartAccessibilityStructureNotes=!1,this.shouldSetParentSVGAccessibility=!1,this.shouldSetGeometryAccessibilityAttributes=!1,this.shouldSetGeometryAriaLabels=!1,this.shouldSetGroupAccessibilityLabel=!1,this.shouldSetChartAccessibilityPurpose=!1,this.shouldSetChartAccessibilityContext=!1,this.shouldRedrawWrapper=!1,this.shouldSetTagLevels=!1,this.shouldSetChartAccessibilityCount=!1,this.shouldSetYAxisAccessibility=!1,this.shouldSetXAxisAccessibility=!1,this.shouldSetAnnotationAccessibility=!1,this.shouldSetTextures=!1,this.shouldSetStrokes=!1,this.isSafari="Safari"===EX(),this.strokes={},this.textStrokes={},this.topLevel="h2",this.bottomLevel="p",this.textTreatmentHandler=(t,i,n)=>{const s=zO(n[i]),r=this.clickHighlight&&this.clickHighlight.length>0&&lR(t,this.clickHighlight,this.innerInteractionKeys)&&this.clickStyle.color?DR[this.clickStyle.color]||this.clickStyle.color:this.hoverHighlight&&fR(t,this.hoverHighlight,this.innerInteractionKeys)&&this.hoverStyle.color?DR[this.hoverStyle.color]||this.hoverStyle.color:this.preparedColors[i],e=oR(r);if(s.classed("textIsMoving"))s.attr("filter",null);else{const t=this.textStrokes[r];t!==s.attr("filter")&&(this.isSafari?(s.attr("filter",null),setTimeout(()=>{s.attr("filter",t)},0)):s.attr("filter",t))}return e},this.clickFunc=i(this,"clickFunc",7),this.hoverFunc=i(this,"hoverFunc",7),this.mouseOutFunc=i(this,"mouseOutFunc",7)}dataWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldValidateClickHighlight=!0,this.shouldSetColors=!0,this.shouldSetTextures=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateScales=!0,this.shouldUpdateTableData=!0,this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateLegendData=!0,this.shouldValidate=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateLabels=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetStrokes=!0}idWatcher(t,i){this.chartID=t,this.stackedBarChartEl.id=this.chartID,this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateLegend=!0,this.shouldSetTextures=!0,this.shouldCheckLabelColor=!0,this.shouldDrawInteractionState=!0,this.shouldSetStrokes=!0}headingWatcher(t,i){this.shouldRedrawWrapper=!0,this.shouldSetTagLevels=!0,this.shouldSetChartAccessibilityCount=!0,this.shouldSetYAxisAccessibility=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetAnnotationAccessibility=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}titleWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0}subtitleWatcher(t,i){this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetParentSVGAccessibility=!0}dimensionWatcher(t,i){this.shouldSetDimensions=!0,this.shouldUpdateScales=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetLabelOpacity=!0}layoutWatcher(t,i){this.interpolating=!1,this.shouldValidateLabelPlacement=!0,this.shouldUpdateScales=!0,this.shouldValidateAxes=!0,this.shouldResetRoot=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateXGrid=!0,this.shouldUpdateYGrid=!0,this.shouldUpdateXAxis=!0,this.shouldUpdateYAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateLegend=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetLabelOpacity=!0}ordinalAccessorWatcher(t,i){this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateScales=!0,this.shouldUpdateData=!0,this.shouldUpdateTableData=!0,this.shouldUpdateLegendData=!0,this.shouldSetColors=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateLegend=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0),this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0,this.shouldCheckValueAxis=!0}valueAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldValidateClickHighlight=!0,this.shouldUpdateScales=!0,this.shouldSetColors=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldValidateDataLabelAccessor=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateTableData=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0,this.shouldSetGlobalSelections=!0,this.shouldCheckValueAxis=!0}groupAccessorWatcher(t,i){this.shouldUpdateData=!0,this.shouldValidateClickHighlight=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldCheckLabelAxis=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateReferenceLines=!0,this.interactionKeys&&this.interactionKeys.length||(this.shouldValidateInteractionKeys=!0,this.shouldSetSelectionClass=!0),this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGroupAccessibilityLabel=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0}sortWatcher(t,i){this.updated=!0,this.shouldUpdateData=!0,this.shouldSetGlobalSelections=!0,this.shouldEnterUpdateExit=!0,this.shouldUpdateTableData=!0,this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAccessibilityAttributes=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldCheckLabelAxis=!0}xAxisWatcher(t,i){this.shouldValidateAxes=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXAxis=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateXGrid=!0)}yAxisWatcher(t,i){this.shouldValidateAxes=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYAxis=!0,(t&&t.gridVisible)===(i&&i.gridVisible)&&(t&&t.tickInterval?t.tickInterval:0)===(i&&i.tickInterval?i.tickInterval:0)||(this.shouldUpdateYGrid=!0)}wrapLabelWatcher(t,i){this.shouldCheckLabelAxis=!0}normalizedWatcher(t,i){this.shouldUpdateData=!0,this.shouldValidateClickHighlight=!0,this.shouldUpdateScales=!0,this.shouldSetColors=!0,this.shouldUpdateGeometries=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldCheckValueAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateTableData=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateAnnotations=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetGroupAccessibilityLabel=!0}paletteWatcher(t,i){this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldCheckLabelColor=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0}colorsWatcher(t,i){this.shouldSetColors=!0,this.shouldDrawInteractionState=!0,this.shouldUpdateLegend=!0,this.shouldCheckLabelColor=!0,this.shouldSetStrokes=!0,this.shouldSetTextures=!0}hoverStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0}clickStyleWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldSetSelectionClass=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldSetStrokes=!0}referenceWatcher(t,i){this.shouldUpdateReferenceLines=!0}cursorWatcher(t,i){this.shouldUpdateCursor=!0}cornerWatcher(t,i){this.shouldUpdateCorners=!0}intervalRatioWatcher(t,i){this.shouldUpdateScales=!0,this.shouldUpdateGeometries=!0,this.shouldSetLabelOpacity=!0,this.shouldCheckLabelAxis=!0,this.shouldUpdateLabels=!0,this.shouldUpdateAnnotations=!0}hoverOpacityWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0}labelWatcher(t,i){this.shouldUpdateLabels=!0,this.shouldUpdateTableData=!0;const n=!(!t||!t.placement)&&t.placement,s=!(!i||!i.placement)&&i.placement,r=!(!t||!t.labelAccessor)&&t.labelAccessor,e=!(!i||!i.labelAccessor)&&i.labelAccessor;(t&&t.visible)!==(i&&i.visible)&&(this.shouldSetLabelOpacity=!0),n!==s&&(this.shouldSetLabelOpacity=!0,this.shouldValidateLabelPlacement=!0,this.shouldCheckLabelColor=!0),r!==e&&(this.shouldValidateDataLabelAccessor=!0)}showTotalValueWatcher(t,i){this.shouldUpdateTotalLabels=!0,this.shouldUpdateTableData=!0,this.shouldSetGroupAccessibilityLabel=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldSetGeometryAriaLabels=!0}showTooltipWatcher(t,i){this.shouldDrawInteractionState=!0}tooltipLabelWatcher(t,i){this.shouldUpdateTableData=!0}accessibilityWatcher(t,i){this.shouldValidate=!0,(!(!t||!t.title)&&t.title)!==(!(!i||!i.title)&&i.title)&&(this.shouldUpdateDescriptionWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.executiveSummary)&&t.executiveSummary)!==(!(!i||!i.executiveSummary)&&i.executiveSummary)&&(this.shouldSetChartAccessibilityExecutiveSummary=!0),(!(!t||!t.purpose)&&t.purpose)!==(!(!i||!i.purpose)&&i.purpose)&&(this.shouldSetChartAccessibilityPurpose=!0),(!(!t||!t.longDescription)&&t.longDescription)!==(!(!i||!i.longDescription)&&i.longDescription)&&(this.shouldSetChartAccessibilityLongDescription=!0),(!(!t||!t.contextExplanation)&&t.contextExplanation)!==(!(!i||!i.contextExplanation)&&i.contextExplanation)&&(this.shouldSetChartAccessibilityContext=!0),(!(!t||!t.statisticalNotes)&&t.statisticalNotes)!==(!(!i||!i.statisticalNotes)&&i.statisticalNotes)&&(this.shouldSetChartAccessibilityStatisticalNotes=!0),(!(!t||!t.structureNotes)&&t.structureNotes)!==(!(!i||!i.structureNotes)&&i.structureNotes)&&(this.shouldSetChartAccessibilityStructureNotes=!0);const n=t&&t.includeDataKeyNames,s=i&&i.includeDataKeyNames;n===s&&(!(!t||!t.elementDescriptionAccessor)&&t.elementDescriptionAccessor)===(!(!i||!i.elementDescriptionAccessor)&&i.elementDescriptionAccessor)||(n!==s&&(this.shouldSetGroupAccessibilityLabel=!0),this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0),(!(!t||!t.hideTextures)&&t.hideTextures)!==(!(!i||!i.hideTextures)&&i.hideTextures)&&(this.shouldSetTextures=!0,this.shouldUpdateLegend=!0,this.shouldDrawInteractionState=!0),(!(!t||!t.showSmallLabels)&&t.showSmallLabels)!==(!(!i||!i.showSmallLabels)&&i.showSmallLabels)&&(this.shouldSetLabelOpacity=!0),(!(!t||!t.hideStrokes)&&t.hideStrokes)!==(!(!i||!i.hideStrokes)&&i.hideStrokes)&&(this.shouldSetStrokes=!0,this.shouldUpdateLegend=!0,this.shouldDrawInteractionState=!0);const r=!(!t||!t.elementsAreInterface)&&t.elementsAreInterface,e=!(!i||!i.elementsAreInterface)&&i.elementsAreInterface;(!!(t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled)&&t.keyboardNavConfig.disabled)===(!!(i&&i.keyboardNavConfig&&i.keyboardNavConfig.disabled)&&i.keyboardNavConfig.disabled)&&r===e||(this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0),r!==e&&(this.shouldSetSelectionClass=!0)}showZeroLabelsWatcher(t,i){this.shouldUpdateLabels=!0}legendWatcher(t,i){this.shouldUpdateLegend=!0,(t&&t.interactive)!==(i&&i.interactive)&&(this.shouldUpdateLegendInteractivity=!0)}annotationsWatcher(t,i){this.shouldValidate=!0,this.shouldUpdateAnnotations=!0,this.shouldSetAnnotationAccessibility=!0}valueOverrideWatcher(t,i){this.shouldUpdateScales=!0,this.shouldCheckValueAxis=!0,this.shouldUpdateGeometries=!0,this.shouldUpdateLabels=!0,this.shouldUpdateTotalLabels=!0,this.shouldUpdateReferenceLines=!0,this.shouldUpdateBaseline=!0,this.shouldUpdateAnnotations=!0}interactionWatcher(t,i){this.shouldValidateInteractionKeys=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0,this.shouldSetSelectionClass=!0,this.shouldUpdateTableData=!0,this.shouldSetGeometryAriaLabels=!0}hoverWatcher(t,i){this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0}clickWatcher(t,i){this.shouldValidateClickHighlight=!0,this.shouldDrawInteractionState=!0,this.shouldCheckLabelColor=!0,this.shouldSetLabelOpacity=!0}suppressWatcher(t,i){this.shouldBindInteractivity=!0,this.shouldUpdateCursor=!0,this.shouldUpdateLegendInteractivity=!0,this.shouldSetGeometryAriaLabels=!0,this.shouldSetParentSVGAccessibility=!0,this.shouldUpdateDescriptionWrapper=!0,this.shouldRedrawWrapper=!0,this.shouldValidate=!0,this.shouldSetChartAccessibilityTitle=!0,this.shouldSetChartAccessibilitySubtitle=!0,this.shouldSetChartAccessibilityLongDescription=!0,this.shouldSetChartAccessibilityContext=!0,this.shouldSetChartAccessibilityExecutiveSummary=!0,this.shouldSetChartAccessibilityPurpose=!0,this.shouldSetChartAccessibilityStatisticalNotes=!0,this.shouldSetChartAccessibilityStructureNotes=!0}componentWillLoad(){return new Promise(t=>{this.duration=0,this.defaults=!0,this.chartID=this.uniqueID||"stacked-bar-chart-"+LX(),this.stackedBarChartEl.id=this.chartID,this.setTagLevels(),this.prepareData(),this.prepareLegendData(),this.setDimensions(),this.prepareScales(),this.validateClickHighlight(),this.validateInteractionKeys(),this.validateDataLabelAccessor(),this.validateAxes(),this.setTableData(),this.shouldValidateAccessibilityProps(),this.setColors(),t("component will load")})}componentWillUpdate(){return new Promise(t=>{t("component will update")})}componentDidLoad(){return new Promise(t=>{this.renderRootElements(),this.setTooltipInitialStyle(),this.setChartDescriptionWrapper(),this.setChartAccessibilityTitle(),this.setChartAccessibilitySubtitle(),this.setChartAccessibilityLongDescription(),this.setChartAccessibilityExecutiveSummary(),this.setChartAccessibilityPurpose(),this.setChartAccessibilityContext(),this.setChartAccessibilityStatisticalNotes(),this.setChartAccessibilityStructureNotes(),this.setParentSVGAccessibility(),this.reSetRoot(),this.setTextures(),this.setStrokes(),this.drawXGrid(),this.drawYGrid(),this.setGlobalSelections(),this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.enterTotalDataLabels(),this.updateTotalDataLabels(),this.exitTotalDataLabels(),this.setRoundedCorners(),this.drawGeometries(),this.setChartCountAccessibility(),this.setGeometryAccessibilityAttributes(),this.setGeometryAriaLabels(),this.drawLegendElements(),this.bindLegendInteractivity(),this.validateLabelPlacement(),this.drawDataLabels(),this.drawTotalDataLabels(),this.drawReferenceLines(),this.setSelectedClass(),this.updateInteractionState(),this.setLabelOpacity(),this.checkLabelColorAgainstBackground(),this.updateCursor(),this.bindInteractivity(),this.drawAnnotations(),this.setAnnotationAccessibility(),this.drawXAxis(),this.setXAxisAccessibility(),this.drawYAxis(),this.setYAxisAccessibility(),this.drawBaseline(),FX(this.root.node(),this.barG.node()),this.setGroupAccessibilityID(),this.onChangeHandler(),this.duration=750,this.defaults=!1,t("component did load")})}componentDidUpdate(){return new Promise(t=>{this.shouldUpdateDescriptionWrapper&&(this.setChartDescriptionWrapper(),this.shouldUpdateDescriptionWrapper=!1),this.shouldSetChartAccessibilityCount&&(this.setChartCountAccessibility(),this.shouldSetChartAccessibilityCount=!1),this.shouldSetChartAccessibilityTitle&&(this.setChartAccessibilityTitle(),this.shouldSetChartAccessibilityTitle=!1),this.shouldSetChartAccessibilitySubtitle&&(this.setChartAccessibilitySubtitle(),this.shouldSetChartAccessibilitySubtitle=!1),this.shouldSetChartAccessibilityLongDescription&&(this.setChartAccessibilityLongDescription(),this.shouldSetChartAccessibilityLongDescription=!1),this.shouldSetChartAccessibilityExecutiveSummary&&(this.setChartAccessibilityExecutiveSummary(),this.shouldSetChartAccessibilityExecutiveSummary=!1),this.shouldSetChartAccessibilityPurpose&&(this.setChartAccessibilityPurpose(),this.shouldSetChartAccessibilityPurpose=!1),this.shouldSetChartAccessibilityContext&&(this.setChartAccessibilityContext(),this.shouldSetChartAccessibilityContext=!1),this.shouldSetChartAccessibilityStatisticalNotes&&(this.setChartAccessibilityStatisticalNotes(),this.shouldSetChartAccessibilityStatisticalNotes=!1),this.shouldSetChartAccessibilityStructureNotes&&(this.setChartAccessibilityStructureNotes(),this.shouldSetChartAccessibilityStructureNotes=!1),this.shouldSetParentSVGAccessibility&&(this.setParentSVGAccessibility(),this.shouldSetParentSVGAccessibility=!1),this.shouldResetRoot&&(this.reSetRoot(),this.shouldResetRoot=!1),this.shouldSetTextures&&(this.setTextures(),this.shouldSetTextures=!1),this.shouldSetStrokes&&(this.setStrokes(),this.shouldSetStrokes=!1),this.shouldSetGlobalSelections&&(this.setGlobalSelections(),this.shouldSetGlobalSelections=!1),this.shouldUpdateXGrid&&(this.drawXGrid(),this.shouldUpdateXGrid=!1),this.shouldUpdateYGrid&&(this.drawYGrid(),this.shouldUpdateYGrid=!1),this.shouldEnterUpdateExit&&(this.enterGeometries(),this.updateGeometries(),this.exitGeometries(),this.enterDataLabels(),this.updateDataLabels(),this.exitDataLabels(),this.enterTotalDataLabels(),this.updateTotalDataLabels(),this.exitTotalDataLabels(),this.shouldEnterUpdateExit=!1),this.shouldUpdateGeometries&&(this.drawGeometries(),this.shouldUpdateGeometries=!1),this.shouldSetGeometryAccessibilityAttributes&&(this.setGeometryAccessibilityAttributes(),this.shouldSetGeometryAccessibilityAttributes=!1),this.shouldSetGeometryAriaLabels&&(this.setGeometryAriaLabels(),this.shouldSetGeometryAriaLabels=!1),this.shouldSetGroupAccessibilityLabel&&(this.setGroupAccessibilityID(),this.shouldSetGroupAccessibilityLabel=!1),this.shouldUpdateCorners&&(this.setRoundedCorners(),this.shouldUpdateCorners=!1),this.shouldUpdateLegend&&(this.drawLegendElements(),this.shouldUpdateLegend=!1),this.shouldUpdateLabels&&(this.drawDataLabels(),this.shouldUpdateLabels=!1),this.shouldUpdateTotalLabels&&(this.drawTotalDataLabels(),this.shouldUpdateTotalLabels=!1),this.shouldUpdateReferenceLines&&(this.drawReferenceLines(),this.shouldUpdateReferenceLines=!1),this.shouldDrawInteractionState&&(this.updateInteractionState(),this.shouldDrawInteractionState=!1),this.shouldSetLabelOpacity&&(this.setLabelOpacity(),this.shouldSetLabelOpacity=!1),this.shouldCheckLabelColor&&(this.checkLabelColorAgainstBackground(),this.shouldCheckLabelColor=!1),this.shouldSetSelectionClass&&(this.setSelectedClass(),this.shouldSetSelectionClass=!1),this.shouldUpdateLegendInteractivity&&(this.bindLegendInteractivity(),this.shouldUpdateLegendInteractivity=!1),this.shouldUpdateCursor&&(this.updateCursor(),this.shouldUpdateCursor=!1),this.shouldBindInteractivity&&(this.bindInteractivity(),this.shouldBindInteractivity=!1),this.shouldUpdateAnnotations&&(this.drawAnnotations(),this.shouldUpdateAnnotations=!1),this.shouldSetAnnotationAccessibility&&(this.setAnnotationAccessibility(),this.shouldSetAnnotationAccessibility=!1),this.shouldUpdateXAxis&&(this.drawXAxis(),this.shouldUpdateXAxis=!1),this.shouldSetXAxisAccessibility&&(this.setXAxisAccessibility(),this.shouldSetXAxisAccessibility=!1),this.shouldUpdateYAxis&&(this.drawYAxis(),this.shouldUpdateYAxis=!1),this.shouldSetYAxisAccessibility&&(this.setYAxisAccessibility(),this.shouldSetYAxisAccessibility=!1),this.shouldUpdateBaseline&&(this.drawBaseline(),this.shouldUpdateBaseline=!1),this.onChangeHandler(),t("component did update")})}shouldValidateAccessibilityProps(){this.shouldValidateAccessibility&&!this.accessibility.disableValidation&&(this.shouldValidateAccessibility=!1,$R(this.chartID,this.accessibility,{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:this.suppressEvents?void 0:this.clickFunc.emit,tooltipLabel:this.tooltipLabel,dataLabel:this.dataLabel,valueAccessor:this.valueAccessor},misc:{normalized:this.normalized}}))}validateLabelPlacement(){"vertical"===this.layout?"top"!==this.dataLabel.placement&&"middle"!==this.dataLabel.placement&&"bottom"!==this.dataLabel.placement&&(this.dataLabel.placement="middle"):"end"!==this.dataLabel.placement&&"middle"!==this.dataLabel.placement&&"base"!==this.dataLabel.placement&&(this.dataLabel.placement="middle")}validateInteractionKeys(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor]}validateDataLabelAccessor(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor}validateAxes(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!("vertical"===this.layout)&&this.xAxis.gridVisible}),this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:"vertical"===this.layout&&this.yAxis.gridVisible})}setDimensions(){this.padding="string"==typeof this.padding?kR(this.padding):this.padding,this.innerHeight=this.height-this.margin.top-this.margin.bottom,this.innerWidth=this.width-this.margin.left-this.margin.right,this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom,this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right}prepareData(){this.extent=[0,0];const t=[];this.data.forEach(i=>{const n=Object.keys(i),s={};n.forEach(t=>{s[t]=i[t]instanceof Date?new Date(i[t].getTime()):i[t]}),t.push(s)});const i=function(){var t,i,n,s=[],r=[];function e(n,r,h,o){if(r>=s.length)return null!=t&&n.sort(t),null!=i?i(n):n;for(var u,a,c,l=-1,f=n.length,d=s[r++],v=KO(),p=h();++l<f;)(c=v.get(u=d(a=n[l])+""))?c.push(a):v.set(u,[a]);return v.each((function(t,i){o(p,i,e(t,r,h,o))})),p}return n={object:function(t){return e(t,0,BO,UO)},map:function(t){return e(t,0,ZO,JO)},entries:function(t){return function t(n,e){if(++e>s.length)return n;var h,o=r[e-1];return null!=i&&e>=s.length?h=n.entries():(h=[],n.each((function(i,n){h.push({key:n,values:t(i,e)})}))),null!=o?h.sort((function(t,i){return o(t.key,i.key)})):h}(e(t,0,ZO,JO),0)},key:function(t){return s.push(t),n},sortKeys:function(t){return r[s.length-1]=t,n},sortValues:function(i){return t=i,n},rollup:function(t){return i=t,n}}}().key(t=>(t[this.valueAccessor]=parseFloat(t[this.valueAccessor]),t[this.groupAccessor]=t[this.groupAccessor]instanceof Date?bR({date:t[this.groupAccessor],format:"vertical"===this.layout?this.xAxis.format:this.yAxis.format,offsetTimezone:!0}):t[this.groupAccessor],t[this.groupAccessor])).entries(t);this.interpolating=this.series.length?this.series:"",this.interpolating&&(this.interpolating.stackOrder=this.stackOrder);const n={},s=t=>{let i=0;const s=t.length,r=[];for(this.stackOrder={},i=0;i<s;i++){const s=Object.assign({},t[i]);let e=0,h=0,o=0;const u={positive:0,negative:0},a=t[i].values,c=a.length;s.values=[];let l=0;for(e=0;e<c;e++){const t=Object.assign({},a[e]),i=t[this.valueAccessor];i>=0?(t.stackEnd=u.positive,u.positive+=i,t.stackStart=u.positive):(t.stackStart=u.negative,u.negative+=i,t.stackEnd=u.negative);let r=this.stackOrder[t[this.groupAccessor]];if(r||(this.stackOrder[t[this.groupAccessor]]={},r=this.stackOrder[t[this.groupAccessor]]),r[t[this.ordinalAccessor]]||(r[t[this.ordinalAccessor]]={previous:l,value:i,stackStart:t.stackStart,stackEnd:t.stackEnd}),t.enteringStackStart=!1,this.interpolating&&this.interpolating.stackOrder[t[this.groupAccessor]]){const n=this.interpolating.stackOrder[t[this.groupAccessor]],s=t=>{if(0===t)return 0;if(n[t]){if(i>=0&&n[t].value>=0)return n[t].stackStart;if(i<0&&n[t].value<0)return n[t].stackEnd}return s(r[t].previous)};n[t[this.ordinalAccessor]]||(t.enteringStackStart=s(l))}l=t[this.ordinalAccessor],t.getSum=()=>s.sum,h+=i,i>0&&(o+=i),n[t[this.ordinalAccessor]]||(n[t[this.ordinalAccessor]]=1),s.values.push(t)}u.positive>this.extent[1]&&(this.extent[1]=u.positive),u.negative<this.extent[0]&&(this.extent[0]=u.negative),s.sum=h,s.sumMessage="Sum "+h,s.sumAboveZero=o,r.push(s)}return r};s(i),this.datakeys=Object.keys(n),this.series=s(i),"asc"===this.sortOrder?this.series=[...this.series].sort((t,i)=>t.sum-i.sum):"desc"===this.sortOrder&&(this.series=[...this.series].sort((t,i)=>i.sum-t.sum))}prepareLegendData(){this.legendData=this.series[0].values}validateClickHighlight(){this.clickHighlight.map(t=>{t[this.groupAccessor]=t[this.groupAccessor]instanceof Date?bR({date:t[this.groupAccessor],format:"vertical"===this.layout?this.xAxis.format:this.yAxis.format,offsetTimezone:!0}):t[this.groupAccessor]})}setTableData(){const t=[];this.series.forEach(i=>{i.values.forEach(i=>{t.push(i)})});const i=ER(this,aR,"stacked-bar-chart");this.tableData=WR(t,i),this.tableColumns=Object.keys(i)}setColors(){this.preparedColors=this.colors?dR(this.colors):AR(this.colorPalette,this.datakeys.length)}setTextures(){const t=this.preparedColors.range?this.preparedColors.range():this.preparedColors;if(this.accessibility.hideTextures||t.length>6)this.colorArr=this.preparedColors;else{const i=HX({colors:t,rootSVG:this.svg.node(),id:this.chartID,scheme:"categorical"});this.colorArr=this.preparedColors.range?this.preparedColors.copy().range(i):i}}setStrokes(){const t=this.preparedColors.range?this.preparedColors.range():this.preparedColors;this.strokes=zX({root:this.svg.node(),id:this.chartID,colors:t,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle,stacked:!0}),this.textStrokes={},t.forEach(t=>{this.textStrokes[t]=CX({root:this.svg.node(),id:this.chartID,color:t})}),this.clickStyle&&this.clickStyle.color&&(this.textStrokes[this.clickStyle.color]=CX({root:this.svg.node(),id:this.chartID,color:this.clickStyle.color})),this.hoverStyle&&this.hoverStyle.color&&(this.textStrokes[this.hoverStyle.color]=CX({root:this.svg.node(),id:this.chartID,color:this.hoverStyle.color}))}prepareScales(){const t=this.normalized?[0,1]:[this.minValueOverride&&this.minValueOverride<this.extent[0]?this.minValueOverride:this.extent[0],this.maxValueOverride||this.extent[1]];this.interpolating&&(this.interpolating.oldXDomain=this.x.domain(),this.interpolating.oldXRange=this.x.range(),this.interpolating.oldYDomain=this.y.domain(),this.interpolating.oldYRange=this.y.range()),"vertical"===this.layout?(this.interpolating&&(this.interpolating.padding=this.x.padding(),this.interpolating.x=rz().domain(this.interpolating.oldXDomain).range(this.interpolating.oldXRange).padding(this.interpolating.padding),this.interpolating.y=LH().domain(this.interpolating.oldYDomain).range(this.interpolating.oldYRange)),this.y=LH().domain(t).range([this.innerPaddedHeight,0]),this.x=rz().domain(this.series.map(t=>t.key)).range([0,this.innerPaddedWidth]).padding(this.barIntervalRatio)):"horizontal"===this.layout&&(this.interpolating&&(this.interpolating.padding=this.y.padding(),this.interpolating.x=LH().domain(this.interpolating.oldXDomain).range(this.interpolating.oldXRange),this.interpolating.y=rz().domain(this.interpolating.oldYDomain).range(this.interpolating.oldYRange).padding(this.interpolating.padding)),this.x=LH().domain(t).range([0,this.innerPaddedWidth]),this.y=rz().domain(this.series.map(t=>t.key)).range([0,this.innerPaddedHeight]).padding(this.barIntervalRatio))}renderRootElements(){this.svg=zO(this.stackedBarChartEl).select(".visa-viz-d3-stacked-bar-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID),this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID),this.gridG=this.rootG.append("g").attr("class","grid-group"),this.barG=this.rootG.append("g").attr("class","stacked-bar-group"),this.labelG=this.rootG.append("g").attr("class","stacked-bar-dataLabel-group"),this.totalLabels=this.rootG.append("g").attr("class","bar-dataLabel-group"),this.legendG=zO(this.stackedBarChartEl).select(".stacked-bar-legend").append("svg"),this.tooltipG=zO(this.stackedBarChartEl).select(".stacked-bar-tooltip")}reSetRoot(){this.svg.transition("root_reset").duration(this.duration).ease(mq).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height),this.root.transition("root_reset").duration(this.duration).ease(mq).attr("transform",`translate(${this.margin.left}, ${this.margin.top})`),this.rootG.transition("root_reset").duration(this.duration).ease(mq).attr("transform",`translate(${this.padding.left}, ${this.padding.top})`),hR(this.chartID,this.width)}drawXAxis(){vR({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,wrapLabel:this.wrapLabel&&"vertical"===this.layout?this.x.bandwidth():"",format:this.xAxis.format,dateFormat:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible})}drawYAxis(){vR({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,dateFormat:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible})}setXAxisAccessibility(){QX({rootEle:this.stackedBarChartEl,hasXAxis:!!this.innerXAxis&&this.innerXAxis.visible,xAxis:"vertical"===this.layout?this.x||!1:this.y||!1,xAxisLabel:this.xAxis.label?this.xAxis.label:""})}setYAxisAccessibility(){tR({rootEle:this.stackedBarChartEl,hasYAxis:!!this.innerYAxis&&this.innerYAxis.visible,yAxis:"vertical"===this.layout?this.y||!1:this.x||!1,yAxisLabel:this.yAxis.label?this.yAxis.label:""})}drawBaseline(){"vertical"===this.layout&&vR({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:!1,padding:this.padding,markOffset:this.y(0)||-1}),"horizontal"===this.layout&&vR({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:!0,padding:this.padding,markOffset:this.x(0)||-1})}drawXGrid(){pR(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,!1,!this.innerXAxis.gridVisible,this.xAxis.tickInterval)}drawYGrid(){pR(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,!0,!this.innerYAxis.gridVisible,this.yAxis.tickInterval)}setGlobalSelections(){const t=this.barG.selectAll(".stacked-bar-series").data(this.series,t=>t.key);this.enterBarWrappers=t.enter().append("g"),this.exitBarWrappers=t.exit(),this.updateBarWrappers=t.merge(this.enterBarWrappers);const i=this.updateBarWrappers.selectAll(".stacked-bar").data(t=>t.values,t=>t[this.ordinalAccessor]);this.enter=i.enter().append("rect"),this.exit=i.exit(),this.update=i.merge(this.enter),this.exitSize=this.exit.size(),this.enterSize=this.enter.size();const n=this.labelG.selectAll(".stacked-bar-dataLabel-series").data(this.series,t=>t.key);this.enterLabelWrappers=n.enter().append("g"),this.exitLabelWrappers=n.exit(),this.updateLabelWrappers=n.merge(this.enterLabelWrappers);const s=this.updateLabelWrappers.selectAll(".stacked-bar-dataLabel").data(t=>t.values,t=>t[this.ordinalAccessor]);this.enterLabels=s.enter().append("text"),this.exitLabels=s.exit(),this.updateLabels=s.merge(this.enterLabels);const r=this.totalLabels.selectAll(".bar-dataLabel-group text").data(this.series,t=>t.key);this.enterTotalLabels=r.enter().append("text"),this.exitTotalLabels=r.exit(),this.updateTotalLabels=r.merge(this.enterTotalLabels)}enterGeometries(){this.enter.interrupt();const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",n="vertical"===this.layout?"y":"x",s="vertical"===this.layout?"height":"width",r="vertical"===this.layout?"innerPaddedWidth":"innerPaddedHeight";this.enter.attr("class","stacked-bar").attr("cursor",this.suppressEvents?null:this.cursor).each((t,i,n)=>{XX(n[i])}).on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler()).attr(n,t=>{let i=this[n];this.interpolating&&(i=this.interpolating[n]);let s=t.stackEnd;return t.stackEnd<0&&(s=t.stackStart),"number"==typeof t.enteringStackStart&&(s=t.enteringStackStart),i(s/(this.normalized?t.getSum():1))}).attr(s,0).attr(t,i=>{let n=this[t];return this.interpolating&&(n=this.interpolating[t]),n(i[this.groupAccessor])}).attr(i,()=>{let i=this[t];return this.interpolating&&(i=this.interpolating[t]),i.bandwidth()}),this.enterBarWrappers.attr("class","stacked-bar-series entering").each((t,i,n)=>{XX(n[i])}).selectAll(".stacked-bar").attr(s,t=>{const i=this.normalized?t.getSum():1;return"vertical"===this.layout?this.y(t.stackEnd/i)-this.y(t.stackStart/i):this.x(t.stackStart/i)-this.x(t.stackEnd/i)}),this.defaults?this.enter.attr("opacity",t=>cR(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)):(this.enter.attr("opacity",0),this.enterBarWrappers.selectAll(".stacked-bar").attr(n,t=>{const i=this.normalized?t.getSum():1;return"vertical"===this.layout?this.y(t.stackStart/i):this.x(t.stackEnd/i)}).attr(t,i=>{let n=this[t](i[this.groupAccessor])+this[t].bandwidth()/2;return n=this[t](i[this.groupAccessor])+this[t].bandwidth()/2*(n/(this[r]/2)),n}).attr(i,0)),this.enterBarWrappers.order(),this.enter.order()}updateGeometries(){this.update.interrupt(),this.update.transition("opacity").duration((t,i,n)=>zO(n[i]).classed("entering")?(zO(n[i]).classed("entering",!1),this.duration):0).ease(mq).attr("opacity",t=>cR(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)).call(TR,()=>{this.update.classed("entering",!1)})}exitGeometries(){this.exit.interrupt();const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",n="vertical"===this.layout?"y":"x",s="vertical"===this.layout?"height":"width",r="vertical"===this.layout?"innerPaddedWidth":"innerPaddedHeight";this.exit.attr("filter",null).transition("exit").duration(this.duration).ease(mq).attr(s,0).attr(n,t=>{let i=t.stackEnd;t.stackEnd<0&&(i=t.stackStart);const s=this.normalized?t.getSum():1;return this[n](i/s)}).attr(t,i=>this[t](i[this.groupAccessor])),this.exitBarWrappers.selectAll(".stacked-bar").attr("filter",null).transition("exit").duration(this.duration).ease(mq).attr("opacity",0).attr(n,(t,i,s)=>zO(s[i]).attr(n)).attr(t,(n,s,e)=>{const h=zO(e[s]);let o=+h.attr(t)+ +h.attr(i)/2;return o=+h.attr(t)+ +h.attr(i)/2*(o/(this[r]/2)),o}).attr(s,(t,i,n)=>zO(n[i]).attr(s)).attr(i,0),this.update.transition("accessibilityAfterExit").duration(this.duration).ease(mq).call(TR,()=>{const t=rR(this.rootG.node());this.exit.remove(),this.exitBarWrappers.remove(),this.setChartCountAccessibility(),this.setGroupAccessibilityID(),this.setGeometryAriaLabels(),sR({parentGNode:this.rootG.node(),focusDidExist:t})})}drawGeometries(){const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"width":"height",n="vertical"===this.layout?"y":"x",s="vertical"===this.layout?"height":"width";this.updateBarWrappers.transition("update").duration(this.duration).ease(mq).call(TR,()=>{this.updateBarWrappers.classed("entering",!1)}),this.update.classed("geometryIsMoving",(r,e,h)=>{const o=this.normalized?r.getSum():1;return $X(zO(h[e]),[{attr:t,numeric:!0,newValue:this[t](r[this.groupAccessor])},{attr:i,numeric:!0,newValue:this[t].bandwidth()},{attr:n,numeric:!0,newValue:"vertical"===this.layout?this.y(r.stackStart/o):this.x(r.stackEnd/o)},{attr:s,numeric:!0,newValue:"vertical"===this.layout?this.y(r.stackEnd/o)-this.y(r.stackStart/o):this.x(r.stackStart/o)-this.x(r.stackEnd/o)}])}).transition("update").duration(this.duration).ease(mq).attr(n,t=>{const i=this.normalized?t.getSum():1;return"vertical"===this.layout?this.y(t.stackStart/i):this.x(t.stackEnd/i)}).attr(s,t=>{const i=this.normalized?t.getSum():1;return"vertical"===this.layout?this.y(t.stackEnd/i)-this.y(t.stackStart/i):this.x(t.stackStart/i)-this.x(t.stackEnd/i)}).attr(t,i=>this[t](i[this.groupAccessor])).attr(i,this[t].bandwidth()).call(TR,()=>{setTimeout(()=>{this.update.classed("geometryIsMoving",!1),this.updateInteractionState(),this.updateLabels.classed("textIsMoving",!1),this.checkLabelColorAgainstBackground()},0),sR({parentGNode:this.rootG.node()})})}updateInteractionState(){OX(this.svg.node()),this.update.interrupt("opacity"),this.updateLabels.interrupt("opacity"),this.update.attr("opacity",t=>cR(t,1,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)).attr("fill",(t,i)=>{const n=this.clickHighlight&&this.clickHighlight.length>0&&lR(t,this.clickHighlight,this.innerInteractionKeys),s=this.hoverHighlight&&fR(t,this.hoverHighlight,this.innerInteractionKeys),r=this.colorArr[i];return n&&this.clickStyle.color?DR[this.clickStyle.color]||this.clickStyle.color:n?r:s&&this.hoverStyle.color?DR[this.hoverStyle.color]||this.hoverStyle.color:r}).each((t,i,n)=>{const s=zO(n[i]);if(this.accessibility.hideStrokes||s.classed("geometryIsMoving"))s.attr("filter",null);else{const r=this.clickHighlight&&this.clickHighlight.length>0&&lR(t,this.clickHighlight,this.innerInteractionKeys),e=this.hoverHighlight&&fR(t,this.hoverHighlight,this.innerInteractionKeys),h=this.preparedColors[i],o=r?"click":e?"hover":"rest",u=r&&this.clickStyle.color?DR[this.clickStyle.color]||this.clickStyle.color:r?h:e&&this.hoverStyle.color?DR[this.hoverStyle.color]||this.hoverStyle.color:h;"hover"===o&&IX({inputElement:n[i],id:this.chartID,key:t[this.ordinalAccessor]+t[this.groupAccessor],strokeWidth:this.hoverStyle.strokeWidth,fill:u});const a=this.strokes[o+u];a!==s.attr("filter")&&(this.isSafari?(s.attr("filter",null),setTimeout(()=>{s.attr("filter",a)},0)):s.attr("filter",a))}}),sR({parentGNode:this.rootG.node()}),wR({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}setLabelOpacity(){this.processLabelOpacity(this.updateLabels),this.updateTotalLabels.attr("opacity",this.showTotalValue&&!this.normalized?1:0)}processLabelOpacity(t){const i=this.dataLabel.visible?1:0,n="vertical"===this.layout?"x":"y",s="vertical"===this.layout?"width":"height",r="vertical"===this.layout?"height":"width";t.attr("opacity",t=>{const e=this.normalized?t.getSum():1,h={};return h[s]=this[n].bandwidth(),h[r]="vertical"===this.layout?this.y(t.stackEnd/e)-this.y(t.stackStart/e):this.x(t.stackStart/e)-this.x(t.stackEnd/e),this.accessibility.showSmallLabels||DX({text:MR(t,this.innerLabelAccessor,this.dataLabel.format,this.normalized),dimensions:h,fontSize:14})?cR(t,i,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1:0})}checkLabelColorAgainstBackground(){this.updateLabels.attr("fill",(t,i,n)=>this.textTreatmentHandler(t,i,n))}bindInteractivity(){this.update.on("click",this.suppressEvents?null:t=>this.onClickHandler(t)).on("mouseover",this.suppressEvents?null:t=>this.onHoverHandler(t)).on("mouseout",this.suppressEvents?null:()=>this.onMouseOutHandler())}setRoundedCorners(){this.update.transition("shared_update").duration(this.duration).ease(mq).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner)}setSelectedClass(){this.update.classed("highlight",(t,i,n)=>{let s=cR(t,!0,!1,"",this.clickHighlight,this.innerInteractionKeys);return s=!(!this.clickHighlight||!this.clickHighlight.length)&&s,eR(n[i],s,this.accessibility.elementsAreInterface),s})}updateCursor(){this.update.attr("cursor",this.suppressEvents?null:this.cursor),zO(this.stackedBarChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?this.cursor:null)}enterDataLabels(){this.enterLabelWrappers.attr("class","stacked-bar-dataLabel-series entering"),this.enterLabels.attr("class","stacked-bar-dataLabel entering").style("pointer-events","none").classed("stacked-bar-dataLabel-"+this.layout,!0).attr("opacity",0).attr("fill",this.textTreatmentHandler),SR({root:this.enterLabels,xScale:this.x,yScale:this.y,ordinalAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"stacked",normalized:this.normalized})}updateDataLabels(){this.updateLabels.interrupt();const t=this.dataLabel.visible?1:0;this.updateLabelWrappers.transition("update").duration(this.duration).ease(mq).call(TR,()=>{this.updateLabelWrappers.classed("entering",!1)}),this.updateLabels.transition("opacity").ease(mq).duration((t,i,n)=>zO(n[i]).classed("entering")?(zO(n[i]).classed("entering",!1),this.duration):0).attr("opacity",i=>cR(i,t,this.hoverOpacity,this.hoverHighlight,this.clickHighlight,this.innerInteractionKeys)<1?0:1).call(TR,()=>{this.updateLabels.classed("entering",!1)})}exitDataLabels(){this.exitLabelWrappers.selectAll("text").attr("filter",null).transition("exit").ease(mq).duration(this.duration/2).attr("opacity",0).call(TR,()=>{this.exitLabelWrappers.remove()}),this.exitLabels.attr("filter",null).transition("exit").ease(mq).duration(this.duration/2).attr("opacity",0).remove()}drawDataLabels(){this.updateLabels.classed("stacked-bar-dataLabel-horizontal",!1).classed("stacked-bar-dataLabel-vertical",!1).classed("stacked-bar-dataLabel-"+this.layout,!0).text(t=>0!==t[this.valueAccessor]||this.showZeroLabels?MR(t,this.innerLabelAccessor,this.dataLabel.format,this.normalized):""),this.updateLabelWrappers.transition("update").duration(this.duration).ease(mq).call(TR,()=>{this.updateLabelWrappers.classed("entering",!1)});const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"y":"x",n="vertical"===this.layout?"stackStart":"stackEnd",s=this.updateLabels.classed("textIsMoving",s=>{if(!this.interpolating)return!1;const r=this.normalized?s.getSum():1;return this.interpolating[t](s[this.groupAccessor])!==this[t](s[this.groupAccessor])||this.interpolating[i](s[n]/r)!==this[i](s[n]/r)}).transition("update").ease(mq).duration(this.duration);SR({root:s,xScale:this.x,yScale:this.y,ordinalAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"stacked",normalized:this.normalized})}enterTotalDataLabels(){const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"y":"x";this.enterTotalLabels.attr("class","bar-dataLabel-"+this.layout).attr("opacity",0).attr("fill",DR.dark_text).attr(t,i=>this[t](i.key)+this[t].bandwidth()/2).attr(i,t=>this[i](t.sumAboveZero)+4)}updateTotalDataLabels(){const t=this.showTotalValue&&!this.normalized?1:0;this.updateTotalLabels.transition("total_opacity").ease(mq).duration(this.duration).attr("opacity",t)}exitTotalDataLabels(){this.exitTotalLabels.transition("exit").ease(mq).duration(this.duration/2).attr("opacity",0).remove()}drawTotalDataLabels(){const t="vertical"===this.layout?"x":"y",i="vertical"===this.layout?"y":"x",n=this.showTotalValue&&!this.normalized?1:0;this.updateTotalLabels.text(t=>mR(t.sum,this.dataLabel.format)).attr("text-anchor","vertical"===this.layout?"middle":"start"),this.updateTotalLabels.classed("bar-dataLabel-horizontal",!1).classed("bar-dataLabel-vertical",!1).classed("bar-dataLabel-"+this.layout,!0).transition("update").ease(mq).duration(this.duration).attr("opacity",n).attr(t,i=>this[t](i.key)+this[t].bandwidth()/2).attr(i,t=>this[i](t.sumAboveZero)).attr("dx","vertical"===this.layout?"0":"0.3em").attr("dy","vertical"===this.layout?"-0.3em":".3em")}drawReferenceLines(){this.references||(this.references=this.rootG.append("g").attr("class","stacked-bar-reference-line-group"));const t=this.references.selectAll("g").data(this.referenceLines,t=>t.label),i=t.enter().append("g").attr("class",".stacked-bar-reference").attr("opacity",1),n=i.append("line");n.attr("class","stacked-bar-reference-line").attr("opacity",0);const s=i.append("text");s.attr("class","stacked-bar-reference-line-label").attr("opacity",0);const r=t.merge(i),e=r.selectAll(".stacked-bar-reference-line").data(t=>[t]).transition("merge").ease(mq).duration(this.duration),h=r.selectAll(".stacked-bar-reference-line-label").data(t=>[t]).transition("merge").ease(mq).duration(this.duration).text(t=>t.label);t.exit().transition("exit").ease(mq).duration(this.duration).attr("opacity",0).remove(),"vertical"===this.layout?(i.attr("transform",t=>"translate(0,"+this.y(t.value)+")"),r.transition("merge").ease(mq).duration(this.duration).attr("transform",t=>"translate(0,"+this.y(t.value)+")"),n.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),s.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em"),e.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth),h.attr("text-anchor",t=>"right"===(t.labelPlacementHorizontal||"right")?"start":"end").attr("x",t=>"right"===(t.labelPlacementHorizontal||"right")?this.innerPaddedWidth:0).attr("y",0).attr("dx",t=>"right"===(t.labelPlacementHorizontal||"right")?"0.1em":"-0.1em").attr("dy","0.3em")):"horizontal"===this.layout&&(i.attr("transform",t=>"translate("+this.x(t.value)+",0)"),r.transition("merge").ease(mq).duration(this.duration).attr("transform",t=>"translate("+this.x(t.value)+",0)"),n.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0),e.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0),s.attr("text-anchor","middle").attr("x",0).attr("y",t=>"top"===(t.labelPlacementVertical||"top")?0:this.innerPaddedHeight).attr("dx",0).attr("dy",t=>"top"===(t.labelPlacementVertical||"top")?"-0.3em":"1em"),h.attr("text-anchor","middle").attr("x",0).attr("y",t=>"top"===(t.labelPlacementVertical||"top")?0:this.innerPaddedHeight).attr("dx",0).attr("dy",t=>"top"===(t.labelPlacementVertical||"top")?"-0.3em":"1em")),e.style("stroke",DR[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity),h.style("fill",DR[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)}drawAnnotations(){let t="horizontal"!==this.layout?this.x:this.y;const i="horizontal"!==this.layout?this.y:this.x;if(this.data[0][this.groupAccessor]instanceof Date){const i=function(t,i){var n,s,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(n=t[e])&&n>=n)for(s=n;++e<r;)null!=(n=t[e])&&n>s&&(s=n)}else for(;++e<r;)if(null!=(n=i(t[e]))&&n>=n)for(s=n;++e<r;)null!=(n=i(t[e]))&&n>s&&(s=n);return s}(this.data,t=>t[this.groupAccessor]),n=function(t,i){var n,s,r=t.length,e=-1;if(null==i){for(;++e<r;)if(null!=(n=t[e])&&n>=n)for(s=n;++e<r;)null!=(n=t[e])&&s>n&&(s=n)}else for(;++e<r;)if(null!=(n=i(t[e]))&&n>=n)for(s=n;++e<r;)null!=(n=i(t[e]))&&s>n&&(s=n);return s}(this.data,t=>t[this.groupAccessor]),s="horizontal"!==this.layout?[0,this.innerPaddedWidth]:[this.innerPaddedHeight,0];t=function(){return VO.apply(gq(RH,XH,HH,OH,IH,CH,$H,DH,JH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}().domain([n,i]).range(s)}uR({source:this.rootG.node(),data:this.annotations,xScale:"horizontal"!==this.layout?t:i,xAccessor:"horizontal"!==this.layout?this.groupAccessor:this.valueAccessor,yScale:"horizontal"!==this.layout?i:t,yAccessor:"horizontal"!==this.layout?this.valueAccessor:this.groupAccessor})}setAnnotationAccessibility(){nR(this.stackedBarChartEl,this.annotations)}drawLegendElements(){yR({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:this.preparedColors,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,labelKey:this.ordinalAccessor,label:this.legend.labels,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})}bindLegendInteractivity(){zO(this.stackedBarChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?this.cursor:null).on("click",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?t=>this.onClickHandler(t):null).on("mouseover",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?t=>this.hoverFunc.emit(t):null).on("mouseout",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?()=>this.onMouseOutHandler():null)}setTagLevels(){this.topLevel=_X(this.highestHeadingLevel),this.bottomLevel=_X(this.highestHeadingLevel,3)}setChartDescriptionWrapper(){qX({rootEle:this.stackedBarChartEl,geomType:"bar",title:this.accessibility.title||this.mainTitle,chartTag:"stacked-bar-chart",uniqueID:this.chartID,groupName:"stack",highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),this.shouldRedrawWrapper=!1}setParentSVGAccessibility(){PX({node:this.svg.node(),chartTag:"stacked-bar-chart",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:ER(this,aR,"stacked-bar-chart"),groupAccessor:this.groupAccessor,groupName:"stack",groupKeys:!!this.showTotalValue&&["sumMessage"],disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})}setGeometryAccessibilityAttributes(){this.update.each((t,i,n)=>{XX(n[i])})}setGeometryAriaLabels(){const t=ER(this,aR,"stacked-bar-chart");this.update.each((i,n,s)=>{RX({node:s[n],geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupKeys:!!this.showTotalValue&&["sumMessage"],groupName:"stack",uniqueID:this.chartID,disableKeyNav:this.suppressEvents&&!1===this.accessibility.elementsAreInterface&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled}),jX({node:s[n],uniqueID:this.chartID})})}setGroupAccessibilityID(){this.updateBarWrappers.each((t,i,n)=>{jX({node:n[i],uniqueID:this.chartID})})}setChartAccessibilityTitle(){GX(this.stackedBarChartEl,this.accessibility.title||this.mainTitle)}setChartAccessibilitySubtitle(){VX(this.stackedBarChartEl,this.subTitle)}setChartAccessibilityLongDescription(){YX(this.stackedBarChartEl,this.accessibility.longDescription)}setChartAccessibilityExecutiveSummary(){KX(this.stackedBarChartEl,this.accessibility.executiveSummary)}setChartAccessibilityPurpose(){BX(this.stackedBarChartEl,this.accessibility.purpose)}setChartAccessibilityContext(){UX(this.stackedBarChartEl,this.accessibility.contextExplanation)}setChartAccessibilityStatisticalNotes(){ZX(this.stackedBarChartEl,this.accessibility.statisticalNotes)}setChartCountAccessibility(){JX({rootEle:this.stackedBarChartEl,parentGNode:this.barG.node(),chartTag:"stacked-bar-chart",geomType:"bar",groupName:"stack"})}setChartAccessibilityStructureNotes(){iR(this.stackedBarChartEl,this.accessibility.structureNotes)}onChangeHandler(){this.accessibility&&"function"==typeof this.accessibility.onChangeFunc&&this.accessibility.onChangeFunc({updated:this.updated,added:this.enterSize,removed:this.exitSize}),this.updated=!1,this.enterSize=0,this.exitSize=0}onClickHandler(t){this.clickFunc.emit(t)}onHoverHandler(t){LR(this.chartID,!0),this.hoverFunc.emit(t),this.showTooltip&&t&&this.eventsTooltip({data:t,evt:xO,isToShow:!0})}onMouseOutHandler(){LR(this.chartID,!1),this.mouseOutFunc.emit(),this.showTooltip&&this.eventsTooltip({isToShow:!1})}setTooltipInitialStyle(){NR(this.tooltipG)}eventsTooltip({data:t,evt:i,isToShow:n}){gR({root:this.tooltipG,data:t,event:i,isToShow:n,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.groupAccessor,groupAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,normalized:this.normalized,chartType:"stacked"})}render(){return this.init(),this.shouldSetTagLevels&&(this.setTagLevels(),this.shouldSetTagLevels=!1),this.shouldCheckValueAxis&&("horizontal"===this.layout?(this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0,this.shouldUpdateXGrid=!0):"vertical"===this.layout&&(this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0,this.shouldUpdateYGrid=!0),this.shouldCheckValueAxis=!1),this.shouldCheckLabelAxis&&("vertical"===this.layout?(this.shouldUpdateXAxis=!0,this.shouldSetXAxisAccessibility=!0):"horizontal"===this.layout&&(this.shouldUpdateYAxis=!0,this.shouldSetYAxisAccessibility=!0),this.shouldCheckLabelAxis=!1),this.shouldUpdateData&&(this.prepareData(),this.shouldUpdateData=!1),this.shouldUpdateLegendData&&(this.prepareLegendData(),this.shouldUpdateLegendData=!1),this.shouldSetDimensions&&(this.setDimensions(),this.shouldSetDimensions=!1),this.shouldUpdateScales&&(this.prepareScales(),this.shouldUpdateScales=!1),this.shouldValidateClickHighlight&&(this.validateClickHighlight(),this.shouldValidateClickHighlight=!1),this.shouldValidateInteractionKeys&&(this.validateInteractionKeys(),this.shouldValidateInteractionKeys=!1),this.shouldValidateDataLabelAccessor&&(this.validateDataLabelAccessor(),this.shouldValidateDataLabelAccessor=!1),this.shouldValidateAxes&&(this.validateAxes(),this.shouldValidateAxes=!1),this.shouldUpdateTableData&&(this.setTableData(),this.shouldUpdateTableData=!1),this.shouldValidate&&(this.shouldValidateAccessibilityProps(),this.shouldValidate=!1),this.shouldSetColors&&(this.setColors(),this.shouldSetColors=!1),this.shouldValidateLabelPlacement&&(this.validateLabelPlacement(),this.shouldValidateLabelPlacement=!1),n("div",{class:`o-layout is--${this.layout} light`},n("div",{class:"o-layout--chart"},n(this.topLevel,{"data-testid":"main-title"},this.mainTitle),n(this.bottomLevel,{class:"visa-ui-text--instructions","data-testid":"sub-title"},this.subTitle),n("div",{class:"stacked-bar-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),n("div",{class:"visa-viz-d3-stacked-bar-container"}),n("div",{class:"stacked-bar-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),n("data-table",{uniqueID:this.chartID,isCompact:!0,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))}init(){const t=Object.keys(TX);let i=0;const n={mainTitle:{exception:""},subTitle:{exception:""},showTooltip:{exception:!1},wrapLabel:{exception:!1},showTotalValue:{exception:!1},barIntervalRatio:{exception:0},hoverOpacity:{exception:0}};for(i=0;i<t.length;i++){const s=!!n[t[i]]&&this[t[i]]===n[t[i]].exception;this[t[i]]=this[t[i]]||s?this[t[i]]:TX[t[i]]}}get stackedBarChartEl(){return s(this)}static get watchers(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],layout:["layoutWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],sortOrder:["sortWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],normalized:["normalizedWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],roundedCorner:["cornerWatcher"],barIntervalRatio:["intervalRatioWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],showTotalValue:["showTotalValueWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],showZeroLabels:["showZeroLabelsWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],interactionKeys:["interactionWatcher"],hoverHighlight:["hoverWatcher"],clickHighlight:["clickWatcher"],suppressEvents:["suppressWatcher"]}}static get style(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}stacked-bar-chart{cursor:default}stacked-bar-chart .annotations{pointer-events:none}stacked-bar-chart .annotations .handle{pointer-events:all}stacked-bar-chart .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}stacked-bar-chart .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}stacked-bar-chart .hidden{display:none}stacked-bar-chart #visa-viz-d3-stacked-bar-container{clear:both}stacked-bar-chart .stacked-bar-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap}stacked-bar-chart .stacked-bar-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;margin-right:10px}stacked-bar-chart .stacked-bar-legend .key-dot{margin:3px 8px}stacked-bar-chart .light .grid line{stroke:#767676;stroke-opacity:1;stroke-width:0.8;stroke-dasharray:4, 4}stacked-bar-chart .light .grid path{stroke-width:0}stacked-bar-chart .light .axis{font-size:12px}stacked-bar-chart .light .axis .tick text{fill:#767676}stacked-bar-chart .light .axis .tick line{stroke:#767676}stacked-bar-chart .light .axis-label{text-anchor:middle;font:1rem sans-serif}stacked-bar-chart .light .y.axis path{stroke:#767676;opacity:0}stacked-bar-chart .light .x.axis path{stroke:#767676}stacked-bar-chart .light .o-layout--chart .bar-dataLabel-vertical{font-size:1rem;fill:#767676;font-weight:550}stacked-bar-chart .light .o-layout--chart .bar-dataLabel-horizontal{font-size:1rem;fill:#767676;font-weight:550}stacked-bar-chart .dark .grid line{stroke:lightgrey;stroke-opacity:0.7;shape-rendering:crispEdges}stacked-bar-chart .dark .grid path{stroke-width:0}stacked-bar-chart .dark .axis{font-size:12px}stacked-bar-chart .dark .axis .tick line{stroke:lightgrey}stacked-bar-chart .dark .axis .tick text{fill:grey}stacked-bar-chart .dark .axis path{stroke:black}stacked-bar-chart .dark .axis-label{text-anchor:middle;font:1rem sans-serif}stacked-bar-chart .dark .o-layout--chart svg{background:black}stacked-bar-chart .dark .o-layout--chart svg .bar-dataLabel-vertical{fill:#767676;text-anchor:middle}stacked-bar-chart .dark .o-layout--chart svg .bar-dataLabel-horizontal{fill:#767676;text-anchor:start}"}};window.VisaChartsLibOSSLicenses=xR();export{rs as alluvial_diagram,Mu as clustered_bar_chart,Np as dumbbell_plot,Sp as group_charts,xb as heat_map,Ax as level_indicator_alternative,JT as parallel_plot,NI as pareto_chart,CR as stacked_bar_chart};