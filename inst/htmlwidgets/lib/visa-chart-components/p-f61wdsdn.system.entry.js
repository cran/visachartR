/**
 * Copyright (c) 2021 Visa, Inc.
 *
 * This source code is licensed under the MIT license
 * https://github.com/visa/visa-chart-components/blob/master/LICENSE
 *
 **/
var __spreadArrays=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var r=Array(t),n=0,e=0;e<i;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,n++)r[n]=s[a];return r};System.register(["./p-3a3b8b8a.system.js","./p-33784417.system.js"],(function(t){"use strict";var e,i,r,n,s;return{setters:[function(t){e=t.r;i=t.c;r=t.h;n=t.g},function(t){s=t.U}],execute:function(){var a="http://www.w3.org/1999/xhtml";var o={svg:"http://www.w3.org/2000/svg",xhtml:a,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function l(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return o.hasOwnProperty(e)?{space:o[e],local:t}:t}function u(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===a&&e.documentElement.namespaceURI===a?e.createElement(t):e.createElementNS(i,t)}}function h(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function c(t){var e=l(t);return(e.local?h:u)(e)}function d(){}function f(t){return t==null?d:function(){return this.querySelector(t)}}function p(t){if(typeof t!=="function")t=f(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new Kt(r,this._parents)}function y(){return[]}function v(t){return t==null?y:function(){return this.querySelectorAll(t)}}function g(t){if(typeof t!=="function")t=v(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new Kt(r,n)}function b(t){return function(){return this.matches(t)}}function m(t){if(typeof t!=="function")t=b(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new Kt(r,this._parents)}function A(t){return new Array(t.length)}function w(){return new Kt(this._enter||this._groups.map(A),this._parents)}function S(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}S.prototype={constructor:S,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function x(t){return function(){return t}}var k="$";function L(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new S(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function _(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=k+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=k+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new S(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function C(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?_:L,r=this._parents,n=this._groups;if(typeof t!=="function")t=x(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new Kt(a,r);a._enter=o;a._exit=l;return a}function D(){return new Kt(this._exit||this._groups.map(A),this._parents)}function M(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function U(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new Kt(a,this._parents)}function T(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function E(t){if(!t)t=I;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new Kt(n,this._parents).order()}function I(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function N(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function W(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function H(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function G(){var t=0;this.each((function(){++t}));return t}function P(){return!this.node()}function O(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function V(t){return function(){this.removeAttribute(t)}}function R(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Y(t,e){return function(){this.setAttribute(t,e)}}function z(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function X(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function F(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function B(t,e){var i=l(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?R:V:typeof e==="function"?i.local?F:X:i.local?z:Y)(i,e))}function K(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function q(t){return function(){this.style.removeProperty(t)}}function j(t,e,i){return function(){this.style.setProperty(t,e,i)}}function $(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function Z(t,e,i){return arguments.length>1?this.each((e==null?q:typeof e==="function"?$:j)(t,e,i==null?"":i)):Q(this.node(),t)}function Q(t,e){return t.style.getPropertyValue(e)||K(t).getComputedStyle(t,null).getPropertyValue(e)}function J(t){return function(){delete this[t]}}function tt(t,e){return function(){this[t]=e}}function et(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function it(t,e){return arguments.length>1?this.each((e==null?J:typeof e==="function"?et:tt)(t,e)):this.node()[t]}function rt(t){return t.trim().split(/^|\s+/)}function nt(t){return t.classList||new st(t)}function st(t){this._node=t;this._names=rt(t.getAttribute("class")||"")}st.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function at(t,e){var i=nt(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function ot(t,e){var i=nt(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function lt(t){return function(){at(this,t)}}function ut(t){return function(){ot(this,t)}}function ht(t,e){return function(){(e.apply(this,arguments)?at:ot)(this,t)}}function ct(t,e){var i=rt(t+"");if(arguments.length<2){var r=nt(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?ht:e?lt:ut)(i,e))}function dt(){this.textContent=""}function ft(t){return function(){this.textContent=t}}function pt(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function yt(t){return arguments.length?this.each(t==null?dt:(typeof t==="function"?pt:ft)(t)):this.node().textContent}function vt(){this.innerHTML=""}function gt(t){return function(){this.innerHTML=t}}function bt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function mt(t){return arguments.length?this.each(t==null?vt:(typeof t==="function"?bt:gt)(t)):this.node().innerHTML}function At(){if(this.nextSibling)this.parentNode.appendChild(this)}function wt(){return this.each(At)}function St(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xt(){return this.each(St)}function kt(t){var e=typeof t==="function"?t:c(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function Lt(){return null}function _t(t,e){var i=typeof t==="function"?t:c(t),r=e==null?Lt:typeof e==="function"?e:f(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function Ct(){var t=this.parentNode;if(t)t.removeChild(this)}function Dt(){return this.each(Ct)}function Mt(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ut(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Tt(t){return this.select(t?Ut:Mt)}function Et(t){return arguments.length?this.property("__data__",t):this.node().__data__}var It={};var Nt=null;if(typeof document!=="undefined"){var Wt=document.documentElement;if(!("onmouseenter"in Wt)){It={mouseenter:"mouseover",mouseleave:"mouseout"}}}function Ht(t,e,i){t=Gt(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function Gt(t,e,i){return function(r){var n=Nt;Nt=r;try{t.call(this,this.__data__,e,i)}finally{Nt=n}}}function Pt(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function Ot(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function Vt(t,e,i){var r=It.hasOwnProperty(t.type)?Ht:Gt;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function Rt(t,e,i){var r=Pt(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?Vt:Ot;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function Yt(t,e,i){var r=K(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function zt(t,e){return function(){return Yt(this,t,e)}}function Xt(t,e){return function(){return Yt(this,t,e.apply(this,arguments))}}function Ft(t,e){return this.each((typeof e==="function"?Xt:zt)(t,e))}var Bt=[null];function Kt(t,e){this._groups=t;this._parents=e}function qt(){return new Kt([[document.documentElement]],Bt)}Kt.prototype=qt.prototype={constructor:Kt,select:p,selectAll:g,filter:m,data:C,enter:w,exit:D,join:M,merge:U,order:T,sort:E,call:N,nodes:W,node:H,size:G,empty:P,each:O,attr:B,style:Z,property:it,classed:ct,text:yt,html:mt,raise:wt,lower:xt,append:kt,insert:_t,remove:Dt,clone:Tt,datum:Et,on:Rt,dispatch:Ft};function jt(t){return typeof t==="string"?new Kt([[document.querySelector(t)]],[document.documentElement]):new Kt([[t]],Bt)}function $t(t,e){var i;if(e===undefined){for(var r=0,n=t;r<n.length;r++){var s=n[r];if(s!=null&&(i<s||i===undefined&&s>=s)){i=s}}}else{var a=-1;for(var o=0,l=t;o<l.length;o++){var s=l[o];if((s=e(s,++a,t))!=null&&(i<s||i===undefined&&s>=s)){i=s}}}return i}function Zt(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function Qt(t){return 1-Math.sqrt(1-t*t)}var Jt=s.propDefaultValues;var te=function(){function t(){}return t}();te.highestHeadingLevel=Jt.highestHeadingLevel;te.mainTitle="Alluvial Diagram Title";te.subTitle="This is the alluvial diagram's subtitle";te.height=300;te.width=650;te.margin={top:300*.01,bottom:300*.01,right:650*.01,left:650*.01};te.padding={top:20,bottom:50,right:50,left:50};te.sourceAccessor="source";te.targetAccessor="target";te.valueAccessor="value";te.groupAccessor="group";te.labelAccessor="name";te.nodeIDAccessor="id";te.nodeConfig={fill:false,width:12,padding:20,alignment:"left",compare:false};te.linkConfig={visible:true,fillMode:"none",opacity:.3};te.accessibility=Jt.accessibility;te.colorPalette=Jt.colorPaletteCategorical;te.dataLabel=Jt.dataLabel;te.annotations=Jt.annotations;te.hoverStyle=Jt.hoverStyle;te.clickStyle=Jt.clickStyle;te.hoverOpacity=Jt.hoverOpacity;te.cursor=Jt.cursor;te.tooltipLabel=Jt.tooltipLabel;te.showTooltip=Jt.showTooltip;te.suppressEvents=Jt.suppressEvents;te.clickHighlight=Jt.clickHighlight;var ee=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var ie=new Uint8Array(16);function re(){if(!ee){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return ee(ie)}var ne=[];for(var se=0;se<256;++se){ne[se]=(se+256).toString(16).substr(1)}function ae(t,e){var i=e||0;var r=ne;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function oe(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||re)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||ae(n)}var le={value:function(){}};function ue(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new he(i)}function he(t){this._=t}function ce(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}he.prototype=ue.prototype={constructor:he,on:function(t,e){var i=this._,r=ce(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=de(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=fe(i[n],t.name,e);else if(e==null)for(n in i)i[n]=fe(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new he(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function de(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function fe(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=le,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var pe=0,ye=0,ve=0,ge=1e3,be,me,Ae=0,we=0,Se=0,xe=typeof performance==="object"&&performance.now?performance:Date,ke=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Le(){return we||(ke(_e),we=xe.now()+Se)}function _e(){we=0}function Ce(){this._call=this._time=this._next=null}Ce.prototype=De.prototype={constructor:Ce,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?Le():+i)+(e==null?0:+e);if(!this._next&&me!==this){if(me)me._next=this;else be=this;me=this}this._call=t;this._time=i;Ie()},stop:function(){if(this._call){this._call=null;this._time=Infinity;Ie()}}};function De(t,e,i){var r=new Ce;r.restart(t,e,i);return r}function Me(){Le();++pe;var t=be,e;while(t){if((e=we-t._time)>=0)t._call.call(null,e);t=t._next}--pe}function Ue(){we=(Ae=xe.now())+Se;pe=ye=0;try{Me()}finally{pe=0;Ee();we=0}}function Te(){var t=xe.now(),e=t-Ae;if(e>ge)Se-=e,Ae=t}function Ee(){var t,e=be,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:be=i}}me=t;Ie(r)}function Ie(t){if(pe)return;if(ye)ye=clearTimeout(ye);var e=t-we;if(e>24){if(t<Infinity)ye=setTimeout(Ue,t-xe.now()-Se);if(ve)ve=clearInterval(ve)}else{if(!ve)Ae=xe.now(),ve=setInterval(Te,ge);pe=1,ke(Ue)}}function Ne(t,e,i){var r=new Ce;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var We=ue("start","end","interrupt");var He=[];var Ge=0;var Pe=1;var Oe=2;var Ve=3;var Re=4;var Ye=5;var ze=6;function Xe(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;qe(t,i,{name:e,index:r,group:n,on:We,tween:He,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ge})}function Fe(t,e){var i=Ke(t,e);if(i.state>Ge)throw new Error("too late; already scheduled");return i}function Be(t,e){var i=Ke(t,e);if(i.state>Oe)throw new Error("too late; already started");return i}function Ke(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function qe(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=De(s,0,i.time);function s(t){i.state=Pe;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==Pe)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===Ve)return Ne(a);if(d.state===Re){d.state=ze;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=ze;d.timer.stop();delete r[u]}}Ne((function(){if(i.state===Ve){i.state=Re;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=Oe;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==Oe)return;i.state=Ve;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=Ye,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===Ye){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=ze;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function je(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>Oe&&r.state<Ye;r.state=ze;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function $e(t){return this.each((function(){je(this,t)}))}function Ze(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function Qe(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function Je(){}var ti=.7;var ei=1/ti;var ii="\\s*([+-]?\\d+)\\s*",ri="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ni="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",si=/^#([0-9a-f]{3,8})$/,ai=new RegExp("^rgb\\("+[ii,ii,ii]+"\\)$"),oi=new RegExp("^rgb\\("+[ni,ni,ni]+"\\)$"),li=new RegExp("^rgba\\("+[ii,ii,ii,ri]+"\\)$"),ui=new RegExp("^rgba\\("+[ni,ni,ni,ri]+"\\)$"),hi=new RegExp("^hsl\\("+[ri,ni,ni]+"\\)$"),ci=new RegExp("^hsla\\("+[ri,ni,ni,ri]+"\\)$");var di={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ze(Je,vi,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:fi,formatHex:fi,formatHsl:pi,formatRgb:yi,toString:yi});function fi(){return this.rgb().formatHex()}function pi(){return _i(this).formatHsl()}function yi(){return this.rgb().formatRgb()}function vi(t){var e,i;t=(t+"").trim().toLowerCase();return(e=si.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?gi(e):i===3?new wi(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?bi(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?bi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ai.exec(t))?new wi(e[1],e[2],e[3],1):(e=oi.exec(t))?new wi(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=li.exec(t))?bi(e[1],e[2],e[3],e[4]):(e=ui.exec(t))?bi(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=hi.exec(t))?Li(e[1],e[2]/100,e[3]/100,1):(e=ci.exec(t))?Li(e[1],e[2]/100,e[3]/100,e[4]):di.hasOwnProperty(t)?gi(di[t]):t==="transparent"?new wi(NaN,NaN,NaN,0):null}function gi(t){return new wi(t>>16&255,t>>8&255,t&255,1)}function bi(t,e,i,r){if(r<=0)t=e=i=NaN;return new wi(t,e,i,r)}function mi(t){if(!(t instanceof Je))t=vi(t);if(!t)return new wi;t=t.rgb();return new wi(t.r,t.g,t.b,t.opacity)}function Ai(t,e,i,r){return arguments.length===1?mi(t):new wi(t,e,i,r==null?1:r)}function wi(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}Ze(wi,Ai,Qe(Je,{brighter:function(t){t=t==null?ei:Math.pow(ei,t);return new wi(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?ti:Math.pow(ti,t);return new wi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:Si,formatHex:Si,formatRgb:xi,toString:xi}));function Si(){return"#"+ki(this.r)+ki(this.g)+ki(this.b)}function xi(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function ki(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function Li(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new Di(t,e,i,r)}function _i(t){if(t instanceof Di)return new Di(t.h,t.s,t.l,t.opacity);if(!(t instanceof Je))t=vi(t);if(!t)return new Di;if(t instanceof Di)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new Di(a,o,l,t.opacity)}function Ci(t,e,i,r){return arguments.length===1?_i(t):new Di(t,e,i,r==null?1:r)}function Di(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}Ze(Di,Ci,Qe(Je,{brighter:function(t){t=t==null?ei:Math.pow(ei,t);return new Di(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?ti:Math.pow(ti,t);return new Di(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new wi(Mi(t>=240?t-240:t+120,n,r),Mi(t,n,r),Mi(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Mi(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function Ui(t){return function(){return t}}function Ti(t,e){return function(i){return t+i*e}}function Ei(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function Ii(t){return(t=+t)===1?Ni:function(e,i){return i-e?Ei(e,i,t):Ui(isNaN(e)?i:e)}}function Ni(t,e){var i=e-t;return i?Ti(t,i):Ui(isNaN(t)?e:t)}var Wi=function t(e){var i=Ii(e);function r(t,e){var r=i((t=Ai(t)).r,(e=Ai(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=Ni(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function Hi(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}var Gi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pi=new RegExp(Gi.source,"g");function Oi(t){return function(){return t}}function Vi(t){return function(e){return t(e)+""}}function Ri(t,e){var i=Gi.lastIndex=Pi.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=Gi.exec(t))&&(n=Pi.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:Hi(r,n)})}i=Pi.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?Vi(l[0].x):Oi(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}var Yi=180/Math.PI;var zi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xi(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*Yi,skewX:Math.atan(l)*Yi,scaleX:a,scaleY:o}}var Fi,Bi,Ki,qi;function ji(t){if(t==="none")return zi;if(!Fi)Fi=document.createElement("DIV"),Bi=document.documentElement,Ki=document.defaultView;Fi.style.transform=t;t=Ki.getComputedStyle(Bi.appendChild(Fi),null).getPropertyValue("transform");Bi.removeChild(Fi);t=t.slice(7,-1).split(",");return Xi(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function $i(t){if(t==null)return zi;if(!qi)qi=document.createElementNS("http://www.w3.org/2000/svg","g");qi.setAttribute("transform",t);if(!(t=qi.transform.baseVal.consolidate()))return zi;t=t.matrix;return Xi(t.a,t.b,t.c,t.d,t.e,t.f)}function Zi(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:Hi(t,n)},{i:l-2,x:Hi(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:Hi(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:Hi(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:Hi(t,i)},{i:o-2,x:Hi(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var Qi=Zi(ji,"px, ","px)","deg)");var Ji=Zi($i,", ",")",")");function tr(t,e){var i,r;return function(){var n=Be(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function er(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=Be(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function ir(t,e){var i=this._id;t+="";if(arguments.length<2){var r=Ke(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?tr:er)(i,t,e))}function rr(t,e,i){var r=t._id;t.each((function(){var t=Be(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return Ke(t,r).value[e]}}function nr(t,e){var i;return(typeof e==="number"?Hi:e instanceof vi?Wi:(i=vi(e))?(e=i,Wi):Ri)(t,e)}function sr(t){return function(){this.removeAttribute(t)}}function ar(t){return function(){this.removeAttributeNS(t.space,t.local)}}function or(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function lr(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function ur(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function hr(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function cr(t,e){var i=l(t),r=i==="transform"?Ji:nr;return this.attrTween(t,typeof e==="function"?(i.local?hr:ur)(i,r,rr(this,"attr."+t,e)):e==null?(i.local?ar:sr)(i):(i.local?lr:or)(i,r,e+""))}function dr(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function fr(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function pr(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=l(t);return this.tween(i,(r.local?dr:fr)(r,e))}function yr(t,e){return function(){Fe(this,t).delay=+e.apply(this,arguments)}}function vr(t,e){return e=+e,function(){Fe(this,t).delay=e}}function gr(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?yr:vr)(e,t)):Ke(this.node(),e).delay}function br(t,e){return function(){Be(this,t).duration=+e.apply(this,arguments)}}function mr(t,e){return e=+e,function(){Be(this,t).duration=e}}function Ar(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?br:mr)(e,t)):Ke(this.node(),e).duration}function wr(t,e){if(typeof e!=="function")throw new Error;return function(){Be(this,t).ease=e}}function Sr(t){var e=this._id;return arguments.length?this.each(wr(e,t)):Ke(this.node(),e).ease}function xr(t){if(typeof t!=="function")t=b(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new Br(r,this._parents,this._name,this._id)}function kr(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new Br(a,this._parents,this._name,this._id)}function Lr(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function _r(t,e,i){var r,n,s=Lr(e)?Fe:Be;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function Cr(t,e){var i=this._id;return arguments.length<2?Ke(this.node(),i).on.on(t):this.each(_r(i,t,e))}function Dr(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function Mr(){return this.on("end.remove",Dr(this._id))}function Ur(t){var e=this._name,i=this._id;if(typeof t!=="function")t=f(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;Xe(u[d],e,i,d,u,Ke(h,i))}}}return new Br(s,this._parents,e,i)}function Tr(t){var e=this._name,i=this._id;if(typeof t!=="function")t=v(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=Ke(h,i),y=0,g=d.length;y<g;++y){if(f=d[y]){Xe(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new Br(s,a,e,i)}var Er=qt.prototype.constructor;function Ir(){return new Er(this._groups,this._parents)}function Nr(t,e){var i,r,n;return function(){var s=Q(this,t),a=(this.style.removeProperty(t),Q(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function Wr(t){return function(){this.style.removeProperty(t)}}function Hr(t,e,i){var r,n;return function(){var s=Q(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function Gr(t,e,i){var r,n,s;return function(){var a=Q(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),Q(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function Pr(t,e,i){var r=(t+="")==="transform"?Qi:nr;return e==null?this.styleTween(t,Nr(t,r)).on("end.style."+t,Wr(t)):this.styleTween(t,typeof e==="function"?Gr(t,r,rr(this,"style."+t,e)):Hr(t,r,e+""),i)}function Or(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function Vr(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,Or(t,e,i==null?"":i))}function Rr(t){return function(){this.textContent=t}}function Yr(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function zr(t){return this.tween("text",typeof t==="function"?Yr(rr(this,"text",t)):Rr(t==null?"":t+""))}function Xr(){var t=this._name,e=this._id,i=qr();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=Ke(l,e);Xe(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new Br(r,this._parents,t,i)}var Fr=0;function Br(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function Kr(t){return qt().transition(t)}function qr(){return++Fr}var jr=qt.prototype;Br.prototype=Kr.prototype={constructor:Br,select:Ur,selectAll:Tr,filter:xr,merge:kr,selection:Ir,transition:Xr,call:jr.call,nodes:jr.nodes,node:jr.node,size:jr.size,empty:jr.empty,each:jr.each,on:Cr,attr:cr,attrTween:pr,style:Pr,styleTween:Vr,text:zr,remove:Mr,tween:ir,delay:gr,duration:Ar,ease:Sr};var $r={time:null,delay:0,duration:250,ease:Zt};function Zr(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return $r.time=Le(),$r}}return i}function Qr(t){var e,i;if(t instanceof Br){e=t._id,t=t._name}else{e=qr(),(i=$r).time=Le(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){Xe(l,t,e,u,a,i||Zr(l,e))}}}return new Br(r,this._parents,t,e)}qt.prototype.interrupt=$e;qt.prototype.transition=Qr;var Jr=s.initializeDescriptionRoot,tn=s.setAccessibilityController,en=s.initializeElementAccess,rn=s.setElementFocusHandler,nn=s.setElementAccessID,sn=s.setAccessChartCounts,an=s.hideNonessentialGroups,on=s.setAccessTitle,ln=s.setAccessSubtitle,un=s.setAccessLongDescription,hn=s.setAccessExecutiveSummary,cn=s.setAccessPurpose,dn=s.setAccessContext,fn=s.setAccessStatistics,pn=s.setAccessStructure,yn=s.setAccessAnnotation,vn=s.retainAccessFocus,gn=s.checkAccessFocus,bn=s.setElementInteractionAccessState,mn=s.setAccessibilityDescriptionWidth,An=s.transitionEndAll,wn=s.annotate,Sn=s.checkClicked,xn=s.checkInteraction,kn=s.convertVisaColor,Ln=s.drawTooltip,_n=s.findTagLevel,Cn=s.getColors,Dn=s.getPadding,Mn=s.initTooltipStyle,Un=s.overrideTitleTooltip,Tn=s.scopeDataKeys,En=s.chartAccessors,In=s.sankey,Nn=s.sankeyCenter,Wn=s.sankeyJustify,Hn=s.sankeyLeft,Gn=s.sankeyLinkHorizontal,Pn=s.sankeyRight;var On=t("alluvial_diagram",function(){function t(t){e(this,t);this.mainTitle=te.mainTitle;this.subTitle=te.subTitle;this.height=te.height;this.width=te.width;this.highestHeadingLevel=te.highestHeadingLevel;this.margin=te.margin;this.padding=te.padding;this.sourceAccessor=te.sourceAccessor;this.targetAccessor=te.targetAccessor;this.valueAccessor=te.valueAccessor;this.groupAccessor=te.groupAccessor;this.nodeIDAccessor=te.nodeIDAccessor;this.nodeConfig=te.nodeConfig;this.linkConfig=te.linkConfig;this.colorPalette=te.colorPalette;this.hoverStyle=te.hoverStyle;this.clickStyle=te.clickStyle;this.cursor=te.cursor;this.hoverOpacity=te.hoverOpacity;this.dataLabel=te.dataLabel;this.showTooltip=te.showTooltip;this.tooltipLabel=te.tooltipLabel;this.accessibility=te.accessibility;this.annotations=te.annotations;this.suppressEvents=te.suppressEvents;this.clickHighlight=te.clickHighlight;this.unitTest=false;this.shouldValidateAccessibility=true;this.innerInteractionKeys=[];this.topLevel="h2";this.bottomLevel="p";this.sourceLinksString="sourceLinks";this.targetLinksString="targetLinks";this.shouldSetDimensions=false;this.shouldUpdateData=false;this.shouldSetColors=false;this.shouldSetTagLevels=false;this.shouldRedrawWrapper=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetSelectionClass=false;this.shouldSetAnnotationAccessibility=false;this.shouldSetGlobalSelections=false;this.shouldSetTestingAttributes=false;this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.linkDataWatcher=function(t,e){};t.prototype.nodeDataWatcher=function(t,e){};t.prototype.idWatcher=function(t,e){this.chartID=t||"alluvial-diagram-"+oe();this.alluvialDiagramEl.id=this.chartID};t.prototype.mainTitleWatcher=function(t,e){};t.prototype.subTitleWatcher=function(t,e){};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetAnnotationAccessibility=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.dimensionWatcher=function(t,e){this.shouldSetDimensions=true};t.prototype.sourceAccessorWatcher=function(t,e){};t.prototype.targetAccessorWatcher=function(t,e){};t.prototype.valueAccessorWatcher=function(t,e){};t.prototype.groupAccessorWatcher=function(t,e){};t.prototype.nodeIDAccessorWatcher=function(t,e){};t.prototype.nodeConfigWatcher=function(t,e){};t.prototype.linkConfigWatcher=function(t,e){};t.prototype.colorPaletteWatcher=function(t,e){};t.prototype.colorsWatcher=function(t,e){};t.prototype.clickStyleWatcher=function(t,e){};t.prototype.hoverStyleWatcher=function(t,e){};t.prototype.cursorWatcher=function(t,e){};t.prototype.hoverOpacityWatcher=function(t,e){};t.prototype.dataLabelWatcher=function(t,e){};t.prototype.tooltipLabelWatcher=function(t,e){};t.prototype.showTooltipWatcher=function(t,e){};t.prototype.accessibilityWatcher=function(t,e){var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}};t.prototype.annotationsWatcher=function(t,e){};t.prototype.clickWatcher=function(t,e){};t.prototype.hoverWatcher=function(t,e){};t.prototype.interactionWatcher=function(t,e){};t.prototype.suppressWatcher=function(t,e){};t.prototype.unitTestWatcher=function(t,e){this.shouldSetTestingAttributes=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.defaults=true;t.chartID=t.uniqueID||"alluvial-diagram-"+oe();t.alluvialDiagramEl.id=t.chartID;t.setTagLevels();t.setDimensions();t.prepareData();t.validateIdAccessor();t.validateLabelText();t.validateLinkFillMode();t.validateNodeAlignment();t.validateInteractionKeys();t.validateLinkGroups();t.setColors();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.renderRootElements();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.setTooltipInitialStyle();t.setNodesDimensions();t.callSankeyGenerator();t.setGlobalSelections();t.setTestingAttributes();t.drawNodes();t.drawLinks();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.setGroupAccessibilityID();t.setChartCountAccessibility();t.setSelectedClass();t.drawNodeLabels();t.drawAnnotations();t.setAnnotationAccessibility();an(t.root.node(),null);e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){t.reSetRoot();if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}t.setNodesDimensions();t.callSankeyGenerator();t.setGlobalSelections();if(t.shouldSetTestingAttributes){t.setTestingAttributes();t.shouldSetTestingAttributes=false}t.drawNodes();t.drawLinks();if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}t.drawNodeLabels();t.drawAnnotations();if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}e("component did update")}))};t.prototype.setDimensions=function(){this.padding=typeof this.padding==="string"?Dn(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.prepareData=function(){var t=this;this.nodeList=[];this.linkList=[];this.linkData.forEach((function(e,i){var r={source:e[t.sourceAccessor],target:e[t.targetAccessor],value:e[t.valueAccessor],data:e};r[t.groupAccessor]=e[t.groupAccessor];t.linkList[i]=r}));this.nodeData&&this.nodeData.length>1?this.nodeList=this.nodeData:this.createNodeList()};t.prototype.createNodeList=function(){var t=this;this.nodeList=[];this.linkData.map((function(e){if(!t.nodeList.some((function(i){return i.id===e[t.sourceAccessor]}))){var i={id:e[t.sourceAccessor]};t.nodeList.push(i)}if(!t.nodeList.some((function(i){return i.id===e[t.targetAccessor]}))){var r={id:e[t.targetAccessor]};t.nodeList.push(r)}}))};t.prototype.validateLabelText=function(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.innerIDAccessor};t.prototype.validateIdAccessor=function(){this.innerIDAccessor=this.nodeData&&this.nodeData.length>1?this.nodeList[0][this.nodeIDAccessor]?this.nodeIDAccessor:"id":"id"};t.prototype.validateLinkFillMode=function(){this.innerLinkFillMode=this.groupAccessor&&this.linkConfig.fillMode==="group"?"group":this.linkConfig.fillMode==="source"?"source":this.linkConfig.fillMode==="target"?"target":this.linkConfig.fillMode==="path"?"path":"none"};t.prototype.validateNodeAlignment=function(){this.innerNodeAlignment=this.nodeConfig.alignment==="right"?Pn:this.nodeConfig.alignment==="center"?Nn:this.nodeConfig.alignment==="justify"?Wn:Hn};t.prototype.validateInteractionKeys=function(){this.interactionKeysWithObjs=[];this.innerInteractionKeys=[];this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.sourceAccessor,this.targetAccessor]};t.prototype.validateLinkGroups=function(){var t=this;this.groupKeys=[];if(this.groupAccessor){this.groupKeys=this.linkData.map((function(e){return e[t.groupAccessor]})).filter((function(t,e,i){return i.indexOf(t)===e}))}};t.prototype.setNodesDimensions=function(){var t=this;this.alluvialProperties=In(this.nodeConfig.compare,this.linkConfig.visible).nodeId((function(e){return e[t.innerIDAccessor]})).nodeWidth(this.nodeConfig.width).nodePadding(this.nodeConfig.padding).nodeAlign(this.innerNodeAlignment).nodeSort(null).size([this.innerPaddedWidth,this.innerPaddedHeight])};t.prototype.callSankeyGenerator=function(){var t=this;var e=function(e,i){return t.alluvialProperties({nodes:e.map((function(t){return Object.assign({},t)})),links:i.map((function(t){return Object.assign({},t)}))})};this.preppedData=e(this.nodeList,this.linkList)};t.prototype.renderRootElements=function(){this.svg=jt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").append("svg").attr("width",this.width).attr("height",this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.nodeG=this.rootG.append("g").attr("class","alluvial-node-group");this.linkG=this.rootG.append("g").attr("class","alluvial-link-group");this.labelG=this.rootG.append("g").attr("class","alluvial-dataLabel-group");this.tooltipG=jt(this.alluvialDiagramEl).select(".alluvial-tooltip")};t.prototype.reSetRoot=function(){this.svg.transition("root_reset").duration(this.duration).ease(Qt).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root.transition("root_reset").duration(this.duration).ease(Qt).attr("transform","translate("+this.margin.left+", "+this.margin.top+")");this.rootG.transition("root_reset").duration(this.duration).ease(Qt).attr("transform","translate("+this.padding.left+", "+this.padding.top+")");mn(this.chartID,this.width)};t.prototype.setGlobalSelections=function(){var t=this;var e=this.nodeG.selectAll(".node-wrapper").data(this.preppedData.nodes,(function(e){return e[t.innerIDAccessor]}));this.enterNodes=e.enter().append("g").attr("class","node-wrapper").attr("data-offset-group","true");this.enterNodes.append("rect").attr("class","alluvial-node");this.exitNodes=e.exit();this.updateNodes=e.merge(this.enterNodes);this.updateNodes.selectAll(".alluvial-node").data((function(t){return[t]}));if(this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"){this.updateNodes.each((function(t,e,i){en(i[e])}));var i=this.preppedData.nodes;var r=this.linkG.selectAll(".alluvial-link-wrapper").data(i,(function(e){return e[t.innerIDAccessor]}));this.enterLinkGroups=r.enter().append("g").attr("class","alluvial-link-wrapper");this.exitLinkGroups=r.exit().remove();this.updateLinkGroups=r.merge(this.enterLinkGroups);var n=this.updateLinkGroups.selectAll(".alluvial-link").data((function(t){return t.sourceLinks}),(function(e){return e.data[t.sourceAccessor]+e.data[t.targetAccessor]}));this.enterLinks=n.enter().append("path").attr("class","alluvial-link");this.exitLinks=n.exit();this.updateLinks=n.merge(this.enterLinks).attr("data-offset-element",this.innerLinkFillMode)}else{this.updateNodes.attr("tabindex",null);var n=this.linkG.selectAll(".alluvial-link").data(this.preppedData.links,(function(e){return e.data[t.sourceAccessor]+e.data[t.targetAccessor]}));this.enterLinks=n.enter().append("path").attr("class","alluvial-link");this.exitLinks=n.exit();this.updateLinks=n.merge(this.enterLinks).attr("data-offset-element",null)}var s=this.labelG.selectAll("text").data(this.preppedData.nodes,(function(e){return e[t.nodeIDAccessor]}));this.enteringLabels=s.enter().append("text");this.exitingLabels=s.exit();this.updatingLabels=s.merge(this.enteringLabels)};t.prototype.setTestingAttributes=function(){var t=this;if(this.unitTest){jt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").attr("data-testid","chart-container");jt(this.alluvialDiagramEl).select(".alluvial-main-title").attr("data-testid","main-title");jt(this.alluvialDiagramEl).select(".alluvial-sub-title").attr("data-testid","sub-title");this.svg.attr("data-testid","root-svg");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.tooltipG.attr("data-testid","tooltip-container");this.updateNodes.attr("data-testid","node").attr("data-id",(function(e){return"node-"+e[t.innerIDAccessor]}));if(this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"){this.updateLinkGroups.attr("data-testid","alluvial-link-group").attr("data-id",(function(e){return"link-group-"+e[t.innerIDAccessor]}))}this.updateLinks.attr("data-testid","link").attr("data-id",(function(e){return"link-"+e.source[t.innerIDAccessor]+"-"+e.target[t.innerIDAccessor]}));this.updatingLabels.attr("data-testid","dataLabel").attr("data-id",(function(e){return"dataLabel-"+e[t.innerIDAccessor]}))}else{jt(this.alluvialDiagramEl).select(".visa-viz-d3-alluvial-container").attr("data-testid",null);jt(this.alluvialDiagramEl).select(".alluvial-main-title").attr("data-testid",null);jt(this.alluvialDiagramEl).select(".alluvial-sub-title").attr("data-testid",null);this.svg.attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.updateNodes.attr("data-testid",null).attr("data-id",null);if(this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"){this.updateLinkGroups.attr("data-testid",null).attr("data-id",null)}this.updateLinks.attr("data-testid",null).attr("data-id",null);this.updatingLabels.attr("data-testid",null).attr("data-id",null)}};t.prototype.drawLinks=function(){var t=this;this.removeTemporaryClickedLinks(this.svg.node());var e=this.linkConfig.visible?this.linkConfig.opacity:0;if(this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"){this.updateLinkGroups.classed("link-group offset-target",true)}this.updateLinks.on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr("cursor",!this.suppressEvents?this.cursor:null).attr("fill","none").attr("stroke-opacity",(function(i){return xn(i.data,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)})).attr("d",Gn()).attr("stroke",(function(e){return t.innerLinkFillMode==="group"?t.colorArr[t.groupKeys.indexOf(e[t.groupAccessor])]:t.innerLinkFillMode==="none"?t.colorArr[0]||"#E4E4E4":t.innerLinkFillMode==="path"?t.colorArr[e.index]:t.innerLinkFillMode==="source"?t.colorArr[e.source.index]:t.colorArr[e.target.index]})).attr("stroke-width",(function(t){return Math.max(1,t.width)})).each((function(e,i,r){var n=t.clickHighlight&&t.clickHighlight.length>0&&Sn(e.data,t.clickHighlight,t.innerInteractionKeys);if(n){t.drawDuplicateClickedLink(r[i])}}));this.updateLinks.transition("accessibilityAfterExit").duration(this.duration).ease(Qt).call(An,(function(){var e=gn(t.rootG.node());t.exitLinks.remove();t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();vn({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawDuplicateClickedLink=function(t){var e=t;var i="vcl-accessibility-focus";var r=e.parentNode;var n=e.cloneNode();jt(n).classed("alluvial-link",false).classed(i+"-highlight "+i+"-hover",true).classed("duplicated-clicked-link",true).attr("focusable",false).attr("aria-label",null).attr("aria-hidden",true).attr("role",null).style("pointer-events","none").attr("tabindex",null);if(this.innerLinkFillMode==="source"||this.innerLinkFillMode==="target"){var s=r.parentNode;var a=jt(s).selectAll(".link-group")._groups[0];var o=a[a.length-1];o.appendChild(n)}else{r.appendChild(n)}};t.prototype.removeTemporaryClickedLinks=function(t){jt(t).selectAll(".duplicated-clicked-link").remove()};t.prototype.drawNodes=function(){var t=this;this.updateNodes.select(".alluvial-node").attr("x",(function(t){return t.x0})).attr("y",(function(t){return t.y0})).attr("height",(function(t){return t.y1-t.y0})).attr("width",(function(t){return t.x1-t.x0})).attr("opacity",1).attr("fill",(function(e,i){return t.nodeConfig.fill?t.colorArr[i]||t.colorArr[0]:"#E4E4E4"})).attr("stroke","#717171")};t.prototype.drawNodeLabels=function(){var t=this;var e=this.dataLabel.visible?1:0;var i=$t(this.preppedData.nodes,(function(t){return t.layer}));this.widthAllNodesNoLinks=i*this.nodeConfig.width+i*this.nodeConfig.width;this.noLinksLeftPadding=(this.innerPaddedWidth-this.widthAllNodesNoLinks)/2;this.updatingLabels.attr("opacity",(function(r){if(t.linkConfig.visible){var n=true;if(r[t.sourceLinksString].length){n=r[t.sourceLinksString].some((function(i){return xn(i.data,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)>=1}))}if(r[t.targetLinksString].length){n=r[t.targetLinksString].some((function(i){return xn(i.data,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)>=1}))}return n?1:0}else{return r.layer===0?e:r.layer===i?e:0}})).attr("x",(function(e){if(t.linkConfig.visible){return t.dataLabel.placement==="outside"?e.x0<t.innerPaddedWidth/2?e.x0:e.x1:e.x0<t.innerPaddedWidth/2?e.x1:e.x0}else{return e.x0<t.innerPaddedWidth/2?t.noLinksLeftPadding:t.noLinksLeftPadding+t.widthAllNodesNoLinks+t.nodeConfig.width}})).attr("y",(function(t){return(t.y1+t.y0)/2})).attr("dx",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"-0.5em":"0.5em":e.x0<t.innerPaddedWidth/2?"0.5em":"-0.5em"})).attr("dy","0.4em").attr("text-anchor",(function(e){return t.dataLabel.placement==="outside"||!t.linkConfig.visible?e.x0<t.innerPaddedWidth/2?"end":"start":e.x0<t.innerPaddedWidth/2?"start":"end"})).text((function(e){return e[t.innerLabelAccessor]}))};t.prototype.drawAnnotations=function(){var t=this;var e=this.preppedData;var i=[];this.annotations.forEach((function(r){var n=Object.assign({},r);var s=r.data;if(e&&s){if(n.positionType==="node"&&n.data.hasOwnProperty(t.nodeIDAccessor)){var a=e.nodes.findIndex((function(e){return e[t.nodeIDAccessor]===n.data[t.nodeIDAccessor]}));s=e.nodes[a]}else if(n.positionType==="source"||n.positionType==="target"&&n.data.hasOwnProperty(t.sourceAccessor)&&n.data.hasOwnProperty(t.targetAccessor)){var a=e.links.findIndex((function(e){return e.data[t.sourceAccessor]===n.data[t.sourceAccessor]&&e.data[t.targetAccessor]===n.data[t.targetAccessor]}));s=e.links[a]}}if(n.positionType&&s){if(n.positionType==="target"&&s.target){n.x=s.target.x0;n.y=s.y1}else if(n.positionType==="source"&&s.source){n.x=s.source.x1;n.y=s.y0}else if(n.positionType==="node"){n.x=s.x1;n.y=(s.y1+s.y0)/2}}delete n.data;i.push(n)}));wn({source:this.rootG.node(),data:i,ignoreScales:true})};t.prototype.setColors=function(){this.colorArr=this.colors?kn(this.colors):Cn(this.colorPalette,this.nodeList.length)};t.prototype.setTagLevels=function(){this.topLevel=_n(this.highestHeadingLevel);this.bottomLevel=_n(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){Jr({rootEle:this.alluvialDiagramEl,geomType:"link",title:this.accessibility.title||this.mainTitle,chartTag:"alluvial-diagram",uniqueID:this.chartID,groupName:"node",highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){var t=Tn(this,En,"alluvial-diagram");tn({node:this.svg.node(),chartTag:"alluvial-diagram",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"link",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupAccessor:this.innerIDAccessor,groupKeys:["value"],groupName:"node"})};t.prototype.setGeometryAccessibilityAttributes=function(){this.updateLinks.each((function(t,e,i){en(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=Tn(this,En,"alluvial-diagram");this.updateLinks.each((function(i,r,n){rn({node:n[r],geomType:"link",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupName:"node",uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});nn({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityID=function(){var t=this;this.updateNodes.each((function(e,i,r){nn({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartCountAccessibility=function(){sn({rootEle:this.alluvialDiagramEl,parentGNode:this.linkG.node(),chartTag:"alluvial-diagram",geomType:"link",groupName:"node"})};t.prototype.setSelectedClass=function(){var t=this;this.updateLinks.classed("highlight",(function(e){var i=xn(e.data,true,false,"",t.clickHighlight,t.innerInteractionKeys);return t.clickHighlight&&t.clickHighlight.length?i:false})).each((function(e,i,r){var n=xn(e.data,true,false,"",t.clickHighlight,t.innerInteractionKeys);n=t.clickHighlight&&t.clickHighlight.length?n:false;var s=t.accessibility.elementsAreInterface;bn(r[i],n,s)}))};t.prototype.setChartAccessibilityTitle=function(){on(this.alluvialDiagramEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){ln(this.alluvialDiagramEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){un(this.alluvialDiagramEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){hn(this.alluvialDiagramEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){cn(this.alluvialDiagramEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){dn(this.alluvialDiagramEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){fn(this.alluvialDiagramEl,this.accessibility.statisticalNotes)};t.prototype.setChartAccessibilityStructureNotes=function(){pn(this.alluvialDiagramEl,this.accessibility.structureNotes)};t.prototype.setAnnotationAccessibility=function(){yn(this.alluvialDiagramEl,this.annotations)};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t.data)};t.prototype.onHoverHandler=function(t){Un(this.chartID,true);this.hoverFunc.emit(t.data);if(this.showTooltip){this.eventsTooltip({data:t,evt:Nt,isToShow:true})}};t.prototype.onMouseOutHandler=function(){Un(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){Mn(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;Ln({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,groupAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,ordinalAccessor:this.innerIDAccessor,chartType:"alluvial-diagram"})};t.prototype.render=function(){this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}this.setDimensions();this.prepareData();this.validateIdAccessor();this.validateLabelText();this.validateLinkFillMode();this.validateInteractionKeys();this.validateLinkGroups();this.setColors();return(r("div",null,r("div",{class:"o-layout"},r("div",{class:"o-layout--chart"},r(this.topLevel,{class:"alluvial-main-title vcl-main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions alluvial-sub-title vcl-sub-title"},this.subTitle),r("div",{class:"visa-viz-d3-alluvial-container"}),r("div",{class:"alluvial-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}})))))};t.prototype.init=function(){var t=Object.keys(te);var e=0;var i={hoverOpacity:{exception:0},showTooltip:{exception:false},mainTitle:{exception:""},subTitle:{exception:""},linkConfig:Object.assign({exception:false})};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:te[t[e]]}};Object.defineProperty(t.prototype,"alluvialDiagramEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{linkData:["linkDataWatcher"],nodeData:["nodeDataWatcher"],uniqueID:["idWatcher"],mainTitle:["mainTitleWatcher"],subTitle:["subTitleWatcher"],highestHeadingLevel:["headingWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],sourceAccessor:["sourceAccessorWatcher"],targetAccessor:["targetAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],nodeIDAccessor:["nodeIDAccessorWatcher"],nodeConfig:["nodeConfigWatcher"],linkConfig:["linkConfigWatcher"],colorPalette:["colorPaletteWatcher"],colors:["colorsWatcher"],clickStyle:["clickStyleWatcher"],hoverStyle:["hoverStyleWatcher"],cursor:["cursorWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["dataLabelWatcher"],tooltipLabel:["tooltipLabelWatcher"],showTooltip:["showTooltipWatcher"],accessibility:["accessibilityWatcher"],annotations:["annotationsWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}alluvial-diagram{cursor:default}alluvial-diagram .annotations{pointer-events:none}alluvial-diagram .annotations .handle{pointer-events:all}alluvial-diagram .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}alluvial-diagram .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}alluvial-diagram .hidden{display:none}alluvial-diagram .node rect{cursor:move}alluvial-diagram .node text{pointer-events:none;text-shadow:0 1px 0 #fff}alluvial-diagram .link{fill:none;stroke:#000;stroke-opacity:0.2}alluvial-diagram .link:hover{stroke-opacity:0.5}"},enumerable:true,configurable:true});return t}());var Vn="http://www.w3.org/1999/xhtml";var Rn={svg:"http://www.w3.org/2000/svg",xhtml:Vn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yn(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return Rn.hasOwnProperty(e)?{space:Rn[e],local:t}:t}function zn(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===Vn&&e.documentElement.namespaceURI===Vn?e.createElement(t):e.createElementNS(i,t)}}function Xn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Fn(t){var e=Yn(t);return(e.local?Xn:zn)(e)}function Bn(){}function Kn(t){return t==null?Bn:function(){return this.querySelector(t)}}function qn(t){if(typeof t!=="function")t=Kn(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new Ca(r,this._parents)}function jn(){return[]}function $n(t){return t==null?jn:function(){return this.querySelectorAll(t)}}function Zn(t){if(typeof t!=="function")t=$n(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new Ca(r,n)}function Qn(t){return function(){return this.matches(t)}}function Jn(t){if(typeof t!=="function")t=Qn(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new Ca(r,this._parents)}function ts(t){return new Array(t.length)}function es(){return new Ca(this._enter||this._groups.map(ts),this._parents)}function is(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}is.prototype={constructor:is,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function rs(t){return function(){return t}}var ns="$";function ss(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new is(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function as(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=ns+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=ns+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new is(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function os(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?as:ss,r=this._parents,n=this._groups;if(typeof t!=="function")t=rs(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new Ca(a,r);a._enter=o;a._exit=l;return a}function ls(){return new Ca(this._exit||this._groups.map(ts),this._parents)}function us(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function hs(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new Ca(a,this._parents)}function cs(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function ds(t){if(!t)t=fs;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new Ca(n,this._parents).order()}function fs(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ps(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function ys(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function vs(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function gs(){var t=0;this.each((function(){++t}));return t}function bs(){return!this.node()}function ms(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function As(t){return function(){this.removeAttribute(t)}}function ws(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ss(t,e){return function(){this.setAttribute(t,e)}}function xs(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ks(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function Ls(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function _s(t,e){var i=Yn(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?ws:As:typeof e==="function"?i.local?Ls:ks:i.local?xs:Ss)(i,e))}function Cs(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ds(t){return function(){this.style.removeProperty(t)}}function Ms(t,e,i){return function(){this.style.setProperty(t,e,i)}}function Us(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function Ts(t,e,i){return arguments.length>1?this.each((e==null?Ds:typeof e==="function"?Us:Ms)(t,e,i==null?"":i)):Es(this.node(),t)}function Es(t,e){return t.style.getPropertyValue(e)||Cs(t).getComputedStyle(t,null).getPropertyValue(e)}function Is(t){return function(){delete this[t]}}function Ns(t,e){return function(){this[t]=e}}function Ws(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function Hs(t,e){return arguments.length>1?this.each((e==null?Is:typeof e==="function"?Ws:Ns)(t,e)):this.node()[t]}function Gs(t){return t.trim().split(/^|\s+/)}function Ps(t){return t.classList||new Os(t)}function Os(t){this._node=t;this._names=Gs(t.getAttribute("class")||"")}Os.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function Vs(t,e){var i=Ps(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function Rs(t,e){var i=Ps(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function Ys(t){return function(){Vs(this,t)}}function zs(t){return function(){Rs(this,t)}}function Xs(t,e){return function(){(e.apply(this,arguments)?Vs:Rs)(this,t)}}function Fs(t,e){var i=Gs(t+"");if(arguments.length<2){var r=Ps(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?Xs:e?Ys:zs)(i,e))}function Bs(){this.textContent=""}function Ks(t){return function(){this.textContent=t}}function qs(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function js(t){return arguments.length?this.each(t==null?Bs:(typeof t==="function"?qs:Ks)(t)):this.node().textContent}function $s(){this.innerHTML=""}function Zs(t){return function(){this.innerHTML=t}}function Qs(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function Js(t){return arguments.length?this.each(t==null?$s:(typeof t==="function"?Qs:Zs)(t)):this.node().innerHTML}function ta(){if(this.nextSibling)this.parentNode.appendChild(this)}function ea(){return this.each(ta)}function ia(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ra(){return this.each(ia)}function na(t){var e=typeof t==="function"?t:Fn(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function sa(){return null}function aa(t,e){var i=typeof t==="function"?t:Fn(t),r=e==null?sa:typeof e==="function"?e:Kn(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function oa(){var t=this.parentNode;if(t)t.removeChild(this)}function la(){return this.each(oa)}function ua(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ha(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ca(t){return this.select(t?ha:ua)}function da(t){return arguments.length?this.property("__data__",t):this.node().__data__}var fa={};var pa=null;if(typeof document!=="undefined"){var ya=document.documentElement;if(!("onmouseenter"in ya)){fa={mouseenter:"mouseover",mouseleave:"mouseout"}}}function va(t,e,i){t=ga(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function ga(t,e,i){return function(r){var n=pa;pa=r;try{t.call(this,this.__data__,e,i)}finally{pa=n}}}function ba(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function ma(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function Aa(t,e,i){var r=fa.hasOwnProperty(t.type)?va:ga;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function wa(t,e,i){var r=ba(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?Aa:ma;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function Sa(t,e,i){var r=Cs(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function xa(t,e){return function(){return Sa(this,t,e)}}function ka(t,e){return function(){return Sa(this,t,e.apply(this,arguments))}}function La(t,e){return this.each((typeof e==="function"?ka:xa)(t,e))}var _a=[null];function Ca(t,e){this._groups=t;this._parents=e}function Da(){return new Ca([[document.documentElement]],_a)}Ca.prototype=Da.prototype={constructor:Ca,select:qn,selectAll:Zn,filter:Jn,data:os,enter:es,exit:ls,join:us,merge:hs,order:cs,sort:ds,call:ps,nodes:ys,node:vs,size:gs,empty:bs,each:ms,attr:_s,style:Ts,property:Hs,classed:Fs,text:js,html:Js,raise:ea,lower:ra,append:na,insert:aa,remove:la,clone:ca,datum:da,on:wa,dispatch:La};function Ma(t){return typeof t==="string"?new Ca([[document.querySelector(t)]],[document.documentElement]):new Ca([[t]],_a)}function Ua(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ta(t){if(t.length===1)t=Ea(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function Ea(t){return function(e,i){return Ua(t(e),i)}}var Ia=Ta(Ua);var Na=Ia.right;function Wa(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var Ha=Math.sqrt(50),Ga=Math.sqrt(10),Pa=Math.sqrt(2);function Oa(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=Va(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function Va(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=Ha?10:s>=Ga?5:s>=Pa?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=Ha?10:s>=Ga?5:s>=Pa?2:1)}function Ra(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=Ha)n*=10;else if(s>=Ga)n*=5;else if(s>=Pa)n*=2;return e<t?-n:n}function Ya(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function za(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}function Xa(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var Fa="$";function Ba(){}Ba.prototype=Ka.prototype={constructor:Ba,has:function(t){return Fa+t in this},get:function(t){return this[Fa+t]},set:function(t,e){this[Fa+t]=e;return this},remove:function(t){var e=Fa+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===Fa)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===Fa)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===Fa)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===Fa)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===Fa)++t;return t},empty:function(){for(var t in this)if(t[0]===Fa)return false;return true},each:function(t){for(var e in this)if(e[0]===Fa)t(this[e],e.slice(1),this)}};function Ka(t,e){var i=new Ba;if(t instanceof Ba)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}function qa(){var t=[],e=[],i,r,n;function s(e,n,a,o){if(n>=t.length){if(i!=null)e.sort(i);return r!=null?r(e):e}var l=-1,u=e.length,h=t[n++],c,d,f=Ka(),p,y=a();while(++l<u){if(p=f.get(c=h(d=e[l])+"")){p.push(d)}else{f.set(c,[d])}}f.each((function(t,e){o(y,e,s(t,n,a,o))}));return y}function a(i,n){if(++n>t.length)return i;var s,o=e[n-1];if(r!=null&&n>=t.length)s=i.entries();else s=[],i.each((function(t,e){s.push({key:e,values:a(t,n)})}));return o!=null?s.sort((function(t,e){return o(t.key,e.key)})):s}return n={object:function(t){return s(t,0,ja,$a)},map:function(t){return s(t,0,Za,Qa)},entries:function(t){return a(s(t,0,Za,Qa),0)},key:function(e){t.push(e);return n},sortKeys:function(i){e[t.length-1]=i;return n},sortValues:function(t){i=t;return n},rollup:function(t){r=t;return n}}}function ja(){return{}}function $a(t,e,i){t[e]=i}function Za(){return Ka()}function Qa(t,e,i){t.set(e,i)}var Ja=Array.prototype;var to=Ja.map;var eo=Ja.slice;var io={name:"implicit"};function ro(){var t=Ka(),e=[],i=[],r=io;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==io)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=Ka();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=eo.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return ro(e,i).unknown(r)};Xa.apply(n,arguments);return n}function no(){var t=ro().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=Wa(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return no(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return Xa.apply(h(),arguments)}function so(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function ao(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function oo(){}var lo=.7;var uo=1/lo;var ho="\\s*([+-]?\\d+)\\s*",co="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",fo="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",po=/^#([0-9a-f]{3,8})$/,yo=new RegExp("^rgb\\("+[ho,ho,ho]+"\\)$"),vo=new RegExp("^rgb\\("+[fo,fo,fo]+"\\)$"),go=new RegExp("^rgba\\("+[ho,ho,ho,co]+"\\)$"),bo=new RegExp("^rgba\\("+[fo,fo,fo,co]+"\\)$"),mo=new RegExp("^hsl\\("+[co,fo,fo]+"\\)$"),Ao=new RegExp("^hsla\\("+[co,fo,fo,co]+"\\)$");var wo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};so(oo,Lo,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:So,formatHex:So,formatHsl:xo,formatRgb:ko,toString:ko});function So(){return this.rgb().formatHex()}function xo(){return Wo(this).formatHsl()}function ko(){return this.rgb().formatRgb()}function Lo(t){var e,i;t=(t+"").trim().toLowerCase();return(e=po.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?_o(e):i===3?new Uo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?Co(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?Co(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=yo.exec(t))?new Uo(e[1],e[2],e[3],1):(e=vo.exec(t))?new Uo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=go.exec(t))?Co(e[1],e[2],e[3],e[4]):(e=bo.exec(t))?Co(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=mo.exec(t))?No(e[1],e[2]/100,e[3]/100,1):(e=Ao.exec(t))?No(e[1],e[2]/100,e[3]/100,e[4]):wo.hasOwnProperty(t)?_o(wo[t]):t==="transparent"?new Uo(NaN,NaN,NaN,0):null}function _o(t){return new Uo(t>>16&255,t>>8&255,t&255,1)}function Co(t,e,i,r){if(r<=0)t=e=i=NaN;return new Uo(t,e,i,r)}function Do(t){if(!(t instanceof oo))t=Lo(t);if(!t)return new Uo;t=t.rgb();return new Uo(t.r,t.g,t.b,t.opacity)}function Mo(t,e,i,r){return arguments.length===1?Do(t):new Uo(t,e,i,r==null?1:r)}function Uo(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}so(Uo,Mo,ao(oo,{brighter:function(t){t=t==null?uo:Math.pow(uo,t);return new Uo(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?lo:Math.pow(lo,t);return new Uo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:To,formatHex:To,formatRgb:Eo,toString:Eo}));function To(){return"#"+Io(this.r)+Io(this.g)+Io(this.b)}function Eo(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Io(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function No(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new Go(t,e,i,r)}function Wo(t){if(t instanceof Go)return new Go(t.h,t.s,t.l,t.opacity);if(!(t instanceof oo))t=Lo(t);if(!t)return new Go;if(t instanceof Go)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new Go(a,o,l,t.opacity)}function Ho(t,e,i,r){return arguments.length===1?Wo(t):new Go(t,e,i,r==null?1:r)}function Go(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}so(Go,Ho,ao(oo,{brighter:function(t){t=t==null?uo:Math.pow(uo,t);return new Go(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?lo:Math.pow(lo,t);return new Go(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new Uo(Po(t>=240?t-240:t+120,n,r),Po(t,n,r),Po(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Po(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function Oo(t){return function(){return t}}function Vo(t,e){return function(i){return t+i*e}}function Ro(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function Yo(t){return(t=+t)===1?zo:function(e,i){return i-e?Ro(e,i,t):Oo(isNaN(e)?i:e)}}function zo(t,e){var i=e-t;return i?Vo(t,i):Oo(isNaN(t)?e:t)}var Xo=function t(e){var i=Yo(e);function r(t,e){var r=i((t=Mo(t)).r,(e=Mo(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=zo(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function Fo(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function Bo(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ko(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=il(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function qo(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function jo(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function $o(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=il(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var Zo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qo=new RegExp(Zo.source,"g");function Jo(t){return function(){return t}}function tl(t){return function(e){return t(e)+""}}function el(t,e){var i=Zo.lastIndex=Qo.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=Zo.exec(t))&&(n=Qo.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:jo(r,n)})}i=Qo.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?tl(l[0].x):Jo(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function il(t,e){var i=typeof e,r;return e==null||i==="boolean"?Oo(e):(i==="number"?jo:i==="string"?(r=Lo(e))?(e=r,Xo):el:e instanceof Lo?Xo:e instanceof Date?qo:Bo(e)?Fo:Array.isArray(e)?Ko:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?$o:jo)(t,e)}function rl(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var nl=180/Math.PI;var sl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function al(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*nl,skewX:Math.atan(l)*nl,scaleX:a,scaleY:o}}var ol,ll,ul,hl;function cl(t){if(t==="none")return sl;if(!ol)ol=document.createElement("DIV"),ll=document.documentElement,ul=document.defaultView;ol.style.transform=t;t=ul.getComputedStyle(ll.appendChild(ol),null).getPropertyValue("transform");ll.removeChild(ol);t=t.slice(7,-1).split(",");return al(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function dl(t){if(t==null)return sl;if(!hl)hl=document.createElementNS("http://www.w3.org/2000/svg","g");hl.setAttribute("transform",t);if(!(t=hl.transform.baseVal.consolidate()))return sl;t=t.matrix;return al(t.a,t.b,t.c,t.d,t.e,t.f)}function fl(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:jo(t,n)},{i:l-2,x:jo(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:jo(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:jo(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:jo(t,i)},{i:o-2,x:jo(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var pl=fl(cl,"px, ","px)","deg)");var yl=fl(dl,", ",")",")");function vl(t){return function(){return t}}function gl(t){return+t}var bl=[0,1];function ml(t){return t}function Al(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:vl(isNaN(e)?NaN:.5)}function wl(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function Sl(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=Al(n,r),s=i(a,s);else r=Al(r,n),s=i(s,a);return function(t){return s(r(t))}}function xl(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=Al(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=Na(t,e,1,r)-1;return s[i](n[i](e))}}function kl(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Ll(){var t=bl,e=bl,i=il,r,n,s,a=ml,o,l,u;function h(){o=Math.min(t.length,e.length)>2?xl:Sl;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),jo)))(i)))};c.domain=function(e){return arguments.length?(t=to.call(e,gl),a===ml||(a=wl(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=eo.call(t),h()):e.slice()};c.rangeRound=function(t){return e=eo.call(t),i=rl,h()};c.clamp=function(e){return arguments.length?(a=e?wl(t):ml,c):a!==ml};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function _l(t,e){return Ll()(t,e)}function Cl(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Dl(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function Ml(t){return t=Dl(Math.abs(t)),t?t[1]:NaN}function Ul(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function Tl(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var El=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Il(t){if(!(e=El.exec(t)))throw new Error("invalid format: "+t);var e;return new Nl({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Il.prototype=Nl.prototype;function Nl(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}Nl.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Wl(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var Hl;function Gl(t,e){var i=Dl(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(Hl=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Dl(t,Math.max(0,e+s-1))[0]}function Pl(t,e){var i=Dl(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var Ol={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:Cl,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Pl(t*100,e)},r:Pl,s:Gl,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Vl(t){return t}var Rl=Array.prototype.map,Yl=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function zl(t){var e=t.grouping===undefined||t.thousands===undefined?Vl:Ul(Rl.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?Vl:Tl(Rl.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=Il(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!Ol[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=Ol[b],S=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function x(t){var i=m,r=A,a,d,x;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var k=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=Wl(t);if(k&&+t===0&&c!=="+")k=false;i=(k?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?Yl[8+Hl/3]:"")+r+(k&&c==="("?")":"");if(S){a=-1,d=t.length;while(++a<d){if(x=t.charCodeAt(a),48>x||x>57){r=(x===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var L=i.length+t.length+r.length,_=L<p?new Array(p-L+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,L=_.length>>1)+i+t+r+_.slice(L);break;default:t=_+i+t+r;break}return s(t)}x.toString=function(){return t+""};return x}function h(t,e){var i=u((t=Il(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(Ml(e)/3)))*3,n=Math.pow(10,-r),s=Yl[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var Xl;var Fl;var Bl;Kl({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Kl(t){Xl=zl(t);Fl=Xl.format;Bl=Xl.formatPrefix;return Xl}function ql(t){return Math.max(0,-Ml(Math.abs(t)))}function jl(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ml(e)/3)))*3-Ml(Math.abs(t)))}function $l(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,Ml(e)-Ml(t))+1}function Zl(t,e,i,r){var n=Ra(t,e,i),s;r=Il(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=jl(n,a)))r.precision=s;return Bl(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=$l(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=ql(n)))r.precision=s-(r.type==="%")*2;break}}return Fl(r)}function Ql(t){var e=t.domain;t.ticks=function(t){var i=e();return Oa(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return Zl(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=Va(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=Va(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=Va(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function Jl(){var t=_l(ml,ml);t.copy=function(){return kl(t,Jl())};Xa.apply(t,arguments);return Ql(t)}function tu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function eu(t){return 1-Math.sqrt(1-t*t)}var iu=s.propDefaultValues;var ru=function(){function t(){}return t}();ru.mainTitle="Clustered Bar Chart Title";ru.subTitle="This is the clustered bar chart's subtitle";ru.height=250;ru.width=675;ru.margin={top:400*.01,bottom:400*.01,right:400*.01,left:400*.01};ru.padding={top:20,bottom:50,right:50,left:50};ru.ordinalAccessor="label";ru.valueAccessor="value";ru.groupAccessor="category";ru.reverseOrder=false;ru.layout=iu.layout;ru.xAxis=iu.xAxis;ru.yAxis=iu.yAxis;ru.wrapLabel=iu.wrapLabel;ru.colorPalette=iu.colorPaletteCategorical;ru.hoverStyle=iu.hoverStyle;ru.clickStyle=iu.clickStyle;ru.referenceStyle=iu.referenceStyle;ru.cursor=iu.cursor;ru.roundedCorner=iu.roundedCorner;ru.barIntervalRatio=iu.barIntervalRatio;ru.groupIntervalRatio=iu.barIntervalRatio;ru.hoverOpacity=iu.hoverOpacity;ru.dataLabel=iu.dataLabel;ru.legend=iu.categoryLegend;ru.tooltipLabel=iu.tooltipLabel;ru.showTooltip=iu.showTooltip;ru.accessibility=iu.accessibility;ru.highestHeadingLevel=iu.highestHeadingLevel;ru.referenceLines=iu.referenceLines;ru.annotations=iu.annotations;ru.clickHighlight=iu.clickHighlight;ru.suppressEvents=iu.suppressEvents;var nu={value:function(){}};function su(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new au(i)}function au(t){this._=t}function ou(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}au.prototype=su.prototype={constructor:au,on:function(t,e){var i=this._,r=ou(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=lu(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=uu(i[n],t.name,e);else if(e==null)for(n in i)i[n]=uu(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new au(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function lu(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function uu(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=nu,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var hu=0,cu=0,du=0,fu=1e3,pu,yu,vu=0,gu=0,bu=0,mu=typeof performance==="object"&&performance.now?performance:Date,Au=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function wu(){return gu||(Au(Su),gu=mu.now()+bu)}function Su(){gu=0}function xu(){this._call=this._time=this._next=null}xu.prototype=ku.prototype={constructor:xu,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?wu():+i)+(e==null?0:+e);if(!this._next&&yu!==this){if(yu)yu._next=this;else pu=this;yu=this}this._call=t;this._time=i;Mu()},stop:function(){if(this._call){this._call=null;this._time=Infinity;Mu()}}};function ku(t,e,i){var r=new xu;r.restart(t,e,i);return r}function Lu(){wu();++hu;var t=pu,e;while(t){if((e=gu-t._time)>=0)t._call.call(null,e);t=t._next}--hu}function _u(){gu=(vu=mu.now())+bu;hu=cu=0;try{Lu()}finally{hu=0;Du();gu=0}}function Cu(){var t=mu.now(),e=t-vu;if(e>fu)bu-=e,vu=t}function Du(){var t,e=pu,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:pu=i}}yu=t;Mu(r)}function Mu(t){if(hu)return;if(cu)cu=clearTimeout(cu);var e=t-gu;if(e>24){if(t<Infinity)cu=setTimeout(_u,t-mu.now()-bu);if(du)du=clearInterval(du)}else{if(!du)vu=mu.now(),du=setInterval(Cu,fu);hu=1,Au(_u)}}function Uu(t,e,i){var r=new xu;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var Tu=su("start","end","interrupt");var Eu=[];var Iu=0;var Nu=1;var Wu=2;var Hu=3;var Gu=4;var Pu=5;var Ou=6;function Vu(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;Xu(t,i,{name:e,index:r,group:n,on:Tu,tween:Eu,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Iu})}function Ru(t,e){var i=zu(t,e);if(i.state>Iu)throw new Error("too late; already scheduled");return i}function Yu(t,e){var i=zu(t,e);if(i.state>Wu)throw new Error("too late; already started");return i}function zu(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function Xu(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=ku(s,0,i.time);function s(t){i.state=Nu;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==Nu)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===Hu)return Uu(a);if(d.state===Gu){d.state=Ou;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=Ou;d.timer.stop();delete r[u]}}Uu((function(){if(i.state===Hu){i.state=Gu;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=Wu;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==Wu)return;i.state=Hu;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=Pu,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===Pu){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=Ou;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function Fu(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>Wu&&r.state<Pu;r.state=Ou;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function Bu(t){return this.each((function(){Fu(this,t)}))}function Ku(t,e){var i,r;return function(){var n=Yu(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function qu(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=Yu(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function ju(t,e){var i=this._id;t+="";if(arguments.length<2){var r=zu(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?Ku:qu)(i,t,e))}function $u(t,e,i){var r=t._id;t.each((function(){var t=Yu(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return zu(t,r).value[e]}}function Zu(t,e){var i;return(typeof e==="number"?jo:e instanceof Lo?Xo:(i=Lo(e))?(e=i,Xo):el)(t,e)}function Qu(t){return function(){this.removeAttribute(t)}}function Ju(t){return function(){this.removeAttributeNS(t.space,t.local)}}function th(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function eh(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function ih(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function rh(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function nh(t,e){var i=Yn(t),r=i==="transform"?yl:Zu;return this.attrTween(t,typeof e==="function"?(i.local?rh:ih)(i,r,$u(this,"attr."+t,e)):e==null?(i.local?Ju:Qu)(i):(i.local?eh:th)(i,r,e+""))}function sh(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function ah(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function oh(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=Yn(t);return this.tween(i,(r.local?sh:ah)(r,e))}function lh(t,e){return function(){Ru(this,t).delay=+e.apply(this,arguments)}}function uh(t,e){return e=+e,function(){Ru(this,t).delay=e}}function hh(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?lh:uh)(e,t)):zu(this.node(),e).delay}function ch(t,e){return function(){Yu(this,t).duration=+e.apply(this,arguments)}}function dh(t,e){return e=+e,function(){Yu(this,t).duration=e}}function fh(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?ch:dh)(e,t)):zu(this.node(),e).duration}function ph(t,e){if(typeof e!=="function")throw new Error;return function(){Yu(this,t).ease=e}}function yh(t){var e=this._id;return arguments.length?this.each(ph(e,t)):zu(this.node(),e).ease}function vh(t){if(typeof t!=="function")t=Qn(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new Oh(r,this._parents,this._name,this._id)}function gh(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new Oh(a,this._parents,this._name,this._id)}function bh(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function mh(t,e,i){var r,n,s=bh(e)?Ru:Yu;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function Ah(t,e){var i=this._id;return arguments.length<2?zu(this.node(),i).on.on(t):this.each(mh(i,t,e))}function wh(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function Sh(){return this.on("end.remove",wh(this._id))}function xh(t){var e=this._name,i=this._id;if(typeof t!=="function")t=Kn(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;Vu(u[d],e,i,d,u,zu(h,i))}}}return new Oh(s,this._parents,e,i)}function kh(t){var e=this._name,i=this._id;if(typeof t!=="function")t=$n(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=zu(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){Vu(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new Oh(s,a,e,i)}var Lh=Da.prototype.constructor;function _h(){return new Lh(this._groups,this._parents)}function Ch(t,e){var i,r,n;return function(){var s=Es(this,t),a=(this.style.removeProperty(t),Es(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function Dh(t){return function(){this.style.removeProperty(t)}}function Mh(t,e,i){var r,n;return function(){var s=Es(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function Uh(t,e,i){var r,n,s;return function(){var a=Es(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),Es(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function Th(t,e,i){var r=(t+="")==="transform"?pl:Zu;return e==null?this.styleTween(t,Ch(t,r)).on("end.style."+t,Dh(t)):this.styleTween(t,typeof e==="function"?Uh(t,r,$u(this,"style."+t,e)):Mh(t,r,e+""),i)}function Eh(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function Ih(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,Eh(t,e,i==null?"":i))}function Nh(t){return function(){this.textContent=t}}function Wh(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function Hh(t){return this.tween("text",typeof t==="function"?Wh($u(this,"text",t)):Nh(t==null?"":t+""))}function Gh(){var t=this._name,e=this._id,i=Rh();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=zu(l,e);Vu(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new Oh(r,this._parents,t,i)}var Ph=0;function Oh(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function Vh(t){return Da().transition(t)}function Rh(){return++Ph}var Yh=Da.prototype;Oh.prototype=Vh.prototype={constructor:Oh,select:xh,selectAll:kh,filter:vh,merge:gh,selection:_h,transition:Gh,call:Yh.call,nodes:Yh.nodes,node:Yh.node,size:Yh.size,empty:Yh.empty,each:Yh.each,on:Ah,attr:nh,attrTween:oh,style:Th,styleTween:Ih,text:Hh,remove:Sh,tween:ju,delay:hh,duration:fh,ease:yh};var zh={time:null,delay:0,duration:250,ease:tu};function Xh(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return zh.time=wu(),zh}}return i}function Fh(t){var e,i;if(t instanceof Oh){e=t._id,t=t._name}else{e=Rh(),(i=zh).time=wu(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){Vu(l,t,e,u,a,i||Xh(l,e))}}}return new Oh(r,this._parents,t,e)}Da.prototype.interrupt=Bu;Da.prototype.transition=Fh;var Bh=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var Kh=new Uint8Array(16);function qh(){if(!Bh){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return Bh(Kh)}var jh=[];for(var $h=0;$h<256;++$h){jh[$h]=($h+256).toString(16).substr(1)}function Zh(t,e){var i=e||0;var r=jh;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function Qh(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||qh)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||Zh(n)}var Jh=s.verifyTextHasSpace,tc=s.checkAttributeTransitions,ec=s.createTextStrokeFilter,ic=s.drawHoverStrokes,rc=s.removeHoverStrokes,nc=s.buildStrokes,sc=s.convertColorsToTextures,ac=s.initializeDescriptionRoot,oc=s.initializeElementAccess,lc=s.setElementFocusHandler,uc=s.setElementAccessID,hc=s.setAccessibilityController,cc=s.hideNonessentialGroups,dc=s.setAccessTitle,fc=s.setAccessSubtitle,pc=s.setAccessLongDescription,yc=s.setAccessExecutiveSummary,vc=s.setAccessPurpose,gc=s.setAccessContext,bc=s.setAccessStatistics,mc=s.setAccessChartCounts,Ac=s.setAccessXAxis,wc=s.setAccessYAxis,Sc=s.setAccessStructure,xc=s.setAccessAnnotation,kc=s.retainAccessFocus,Lc=s.checkAccessFocus,_c=s.setElementInteractionAccessState,Cc=s.setAccessibilityDescriptionWidth,Dc=s.autoTextColor,Mc=s.annotate,Uc=s.chartAccessors,Tc=s.convertVisaColor,Ec=s.checkInteraction,Ic=s.checkClicked,Nc=s.checkHovered,Wc=s.drawAxis,Hc=s.drawGrid,Gc=s.drawLegend,Pc=s.setLegendInteractionState,Oc=s.drawTooltip,Vc=s.formatDataLabel,Rc=s.formatDate,Yc=s.getColors,zc=s.getLicenses,Xc=s.getPadding,Fc=s.getScopedData,Bc=s.initTooltipStyle,Kc=s.overrideTitleTooltip,qc=s.placeDataLabels,jc=s.scopeDataKeys,$c=s.transitionEndAll,Zc=s.visaColors,Qc=s.validateAccessibilityProps,Jc=s.findTagLevel;var td=t("clustered_bar_chart",function(){function t(t){var r=this;e(this,t);this.mainTitle=ru.mainTitle;this.subTitle=ru.subTitle;this.height=ru.height;this.width=ru.width;this.layout=ru.layout;this.margin=ru.margin;this.padding=ru.padding;this.highestHeadingLevel=ru.highestHeadingLevel;this.ordinalAccessor=ru.ordinalAccessor;this.valueAccessor=ru.valueAccessor;this.groupAccessor=ru.groupAccessor;this.reverseOrder=ru.reverseOrder;this.xAxis=ru.xAxis;this.yAxis=ru.yAxis;this.wrapLabel=ru.wrapLabel;this.colorPalette=ru.colorPalette;this.hoverStyle=ru.hoverStyle;this.clickStyle=ru.clickStyle;this.referenceStyle=ru.referenceStyle;this.cursor=ru.cursor;this.roundedCorner=ru.roundedCorner;this.barIntervalRatio=ru.barIntervalRatio;this.groupIntervalRatio=ru.groupIntervalRatio;this.hoverOpacity=ru.hoverOpacity;this.dataLabel=ru.dataLabel;this.showTooltip=ru.showTooltip;this.tooltipLabel=ru.tooltipLabel;this.accessibility=ru.accessibility;this.legend=ru.legend;this.annotations=ru.annotations;this.referenceLines=ru.referenceLines;this.suppressEvents=ru.suppressEvents;this.clickHighlight=ru.clickHighlight;this.unitTest=false;this.shouldValidateAccessibility=true;this.nest=[];this.datakeys=[];this.legendData=[];this.updated=true;this.shouldValidate=false;this.shouldUpdateData=false;this.shouldSetDimensions=false;this.shouldUpdateScales=false;this.shouldValidateAxes=false;this.shouldUpdateAnnotations=false;this.shouldResetRoot=false;this.shouldUpdateTableData=false;this.shouldSetColors=false;this.shouldValidateLabelPlacement=false;this.shouldValidateDataLabelAccessor=false;this.shouldValidateInteractionKeys=false;this.shouldSetSelectionClass=false;this.shouldUpdateXAxis=false;this.shouldUpdateYAxis=false;this.shouldUpdateXGrid=false;this.shouldUpdateYGrid=false;this.shouldUpdateBaseline=false;this.shouldCheckValueAxis=false;this.shouldCheckLabelAxis=false;this.shouldSetGlobalSelections=false;this.shouldEnterUpdateExit=false;this.shouldUpdateGeometries=false;this.shouldUpdateCorners=false;this.shouldUpdateLegendData=false;this.shouldUpdateLegend=false;this.shouldUpdateLegendInteractivity=false;this.shouldSetLegendCursor=false;this.shouldUpdateReferenceLines=false;this.shouldUpdateLabels=false;this.shouldUpdateCursor=false;this.shouldDrawInteractionState=false;this.shouldSetLabelOpacity=false;this.shouldCheckLabelColor=false;this.shouldBindInteractivity=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldSetTestingAttributes=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.shouldSetTextures=false;this.shouldSetStrokes=false;this.strokes={};this.topLevel="h2";this.bottomLevel="p";this.textTreatmentHandler=function(t,e,i){var n=r.clickHighlight&&r.clickHighlight.length>0&&Ic(t,r.clickHighlight,r.innerInteractionKeys)&&r.clickStyle.color?Zc[r.clickStyle.color]||r.clickStyle.color:r.hoverHighlight&&Nc(t,r.hoverHighlight,r.innerInteractionKeys)&&r.hoverStyle.color?Zc[r.hoverStyle.color]||r.hoverStyle.color:r.preparedColors[e];var s=r.dataLabel.placement==="bottom"||r.dataLabel.placement==="left"?Dc(n):Zc.dark_text;var a=Ma(i[e]);a.attr("filter",!a.classed("textIsMoving")?ec({root:r.svg.node(),id:r.chartID,color:r.dataLabel.placement==="bottom"||r.dataLabel.placement==="left"?n:"#ffffff"}):null);return s};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.dataWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldSetTextures=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldUpdateTableData=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateLegendData=true;this.shouldUpdateScales=true;this.shouldValidate=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldSetLabelOpacity=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetStrokes=true};t.prototype.idWatcher=function(t,e){this.chartID=t||"clustered-bar-chart-"+Qh();this.clusteredBarChartEl.id=this.chartID;this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetParentSVGAccessibility=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldSetStrokes=true};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldSetAnnotationAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.titleWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.subtitleWatcher=function(t,e){this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.dimensionWatcher=function(t,e){this.shouldSetDimensions=true;this.shouldUpdateScales=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetLabelOpacity=true};t.prototype.layoutWatcher=function(t,e){this.shouldValidateLabelPlacement=true;this.shouldUpdateScales=true;this.shouldValidateAxes=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetTestingAttributes=true;this.shouldSetLabelOpacity=true};t.prototype.ordinalAccessorWatcher=function(t,e){this.shouldUpdateTableData=true;this.shouldUpdateLegendData=true;this.shouldUpdateScales=true;this.shouldSetColors=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true;this.shouldSetTextures=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}};t.prototype.valueAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldSetColors=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldCheckValueAxis=true;this.shouldValidateDataLabelAccessor=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetStrokes=true;this.shouldSetTextures=true};t.prototype.groupAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldUpdateLabels=true;this.shouldCheckLabelAxis=true;this.shouldUpdateBaseline=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldSetStrokes=true;this.shouldSetTextures=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}};t.prototype.reverseOrderWatcher=function(t,e){this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;if(this.layout==="vertical"){this.shouldValidateAxes=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true}else if(this.layout==="horizontal"){this.shouldValidateAxes=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true}};t.prototype.xAxisWatcher=function(t,e){this.shouldValidateAxes=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateXGrid=true}};t.prototype.yAxisWatcher=function(t,e){this.shouldValidateAxes=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateYGrid=true}};t.prototype.wrapLabelWatcher=function(t,e){this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true};t.prototype.paletteWatcher=function(t,e){this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldCheckLabelColor=true;this.shouldSetStrokes=true;this.shouldSetTextures=true};t.prototype.colorsWatcher=function(t,e){this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldCheckLabelColor=true;this.shouldSetStrokes=true;this.shouldSetTextures=true};t.prototype.hoverStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true};t.prototype.clickStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true};t.prototype.referenceWatcher=function(t,e){this.shouldUpdateReferenceLines=true};t.prototype.cursorWatcher=function(t,e){this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true};t.prototype.cornerWatcher=function(t,e){this.shouldUpdateCorners=true};t.prototype.intervalRatioWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldSetLabelOpacity=true;this.shouldCheckLabelAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateAnnotations=true};t.prototype.groupIntervalRatioWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateAnnotations=true};t.prototype.hoverOpacityWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true};t.prototype.labelWatcher=function(t,e){this.shouldUpdateLabels=true;this.shouldUpdateTableData=true;var i=t&&t.placement?t.placement:false;var r=e&&e.placement?e.placement:false;var n=t&&t.visible;var s=e&&e.visible;var a=t&&t.labelAccessor?t.labelAccessor:false;var o=e&&e.labelAccessor?e.labelAccessor:false;if(n!==s){this.shouldSetLabelOpacity=true}if(i!==r){this.shouldSetLabelOpacity=true;this.shouldValidateLabelPlacement=true;this.shouldCheckLabelColor=true}if(a!==o){this.shouldValidateDataLabelAccessor=true}};t.prototype.tooltipLabelWatcher=function(t,e){this.shouldUpdateTableData=true};t.prototype.accessibilityWatcher=function(t,e){this.shouldValidate=true;var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}var A=t&&t.hideTextures?t.hideTextures:false;var w=e&&e.hideTextures?e.hideTextures:false;if(A!==w){this.shouldSetTextures=true;this.shouldUpdateLegend=true;this.shouldDrawInteractionState=true}var S=t&&t.showSmallLabels?t.showSmallLabels:false;var x=e&&e.showSmallLabels?e.showSmallLabels:false;if(S!==x){this.shouldSetLabelOpacity=true}var k=t&&t.hideStrokes?t.hideStrokes:false;var L=e&&e.hideStrokes?e.hideStrokes:false;if(k!==L){this.shouldUpdateLegend=true;this.shouldSetStrokes=true;this.shouldDrawInteractionState=true}var _=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;var C=e&&e.keyboardNavConfig&&e.keyboardNavConfig.disabled?e.keyboardNavConfig.disabled:false;var D=t&&t.elementsAreInterface?t.elementsAreInterface:false;var M=e&&e.elementsAreInterface?e.elementsAreInterface:false;if(_!==C||D!==M){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(D!==M){this.shouldDrawInteractionState=true}};t.prototype.legendWatcher=function(t,e){this.shouldUpdateLegend=true;var i=t&&t.interactive;var r=e&&e.interactive;if(i!==r){this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true}};t.prototype.annotationsWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateAnnotations=true;this.shouldSetAnnotationAccessibility=true};t.prototype.valueOverrideWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldCheckValueAxis=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true};t.prototype.clickWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true};t.prototype.hoverWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true};t.prototype.interactionWatcher=function(t,e){this.shouldValidateInteractionKeys=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateTableData=true;this.shouldSetGeometryAriaLabels=true};t.prototype.suppressWatcher=function(t,e){this.shouldBindInteractivity=true;this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.unitTestWatcher=function(t,e){this.shouldSetTestingAttributes=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.defaults=true;t.chartID=t.uniqueID||"clustered-bar-chart-"+Qh();t.clusteredBarChartEl.id=t.chartID;t.setTagLevels();t.prepareData();t.prepareLegendData();t.setDimensions();t.prepareScales();t.validateInteractionKeys();t.validateDataLabelAccessor();t.validateAxes();t.validateLabelPlacement();t.setTableData();t.shouldValidateAccessibilityProps();t.setColors();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.shouldValidateAccessibilityProps();t.renderRootElements();t.setTooltipInitialStyle();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.setTextures();t.setStrokes();t.drawXGrid();t.drawYGrid();t.setGlobalSelections();t.setTestingAttributes();t.enterGeometries();t.updateGeometries();t.exitGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.drawGeometries();t.setChartCountAccessibility();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.drawLegendElements();t.bindLegendInteractivity();t.drawDataLabels();t.drawReferenceLines();t.setSelectedClass();t.updateInteractionState();t.setLabelOpacity();t.checkLabelColorAgainstBackground();t.updateCursor();t.bindInteractivity();t.drawAnnotations();t.setAnnotationAccessibility();t.drawXAxis();t.setXAxisAccessibility();t.drawYAxis();t.setYAxisAccessibility();t.drawBaseline();t.onChangeHandler();cc(t.root.node(),t.barG.node());t.setGroupAccessibilityID();t.duration=750;t.defaults=false;e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}if(t.shouldResetRoot){t.reSetRoot();t.shouldResetRoot=false}if(t.shouldSetTextures){t.setTextures();t.shouldSetTextures=false}if(t.shouldSetStrokes){t.setStrokes();t.shouldSetStrokes=false}if(t.shouldSetGlobalSelections){t.setGlobalSelections();t.shouldSetGlobalSelections=false}if(t.shouldSetTestingAttributes){t.setTestingAttributes();t.shouldSetTestingAttributes=false}if(t.shouldUpdateXGrid){t.drawXGrid();t.shouldUpdateXGrid=false}if(t.shouldUpdateYGrid){t.drawYGrid();t.shouldUpdateYGrid=false}if(t.shouldEnterUpdateExit){t.enterGeometries();t.updateGeometries();t.exitGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.shouldEnterUpdateExit=false}if(t.shouldUpdateGeometries){t.drawGeometries();t.shouldUpdateGeometries=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldUpdateCorners){t.setRoundedCorners();t.shouldUpdateCorners=false}if(t.shouldUpdateLegend){t.drawLegendElements();t.shouldUpdateLegend=false}if(t.shouldUpdateLabels){t.drawDataLabels();t.shouldUpdateLabels=false}if(t.shouldUpdateReferenceLines){t.drawReferenceLines();t.shouldUpdateReferenceLines=false}if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldSetLabelOpacity){t.setLabelOpacity();t.shouldSetLabelOpacity=false}if(t.shouldCheckLabelColor){t.checkLabelColorAgainstBackground();t.shouldCheckLabelColor=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}if(t.shouldUpdateLegendInteractivity){t.bindLegendInteractivity();t.shouldUpdateLegendInteractivity=false}if(t.shouldSetLegendCursor){t.setLegendCursor();t.shouldSetLegendCursor=false}if(t.shouldUpdateCursor){t.updateCursor();t.shouldUpdateCursor=false}if(t.shouldBindInteractivity){t.bindInteractivity();t.shouldBindInteractivity=false}if(t.shouldUpdateAnnotations){t.drawAnnotations();t.shouldUpdateAnnotations=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}if(t.shouldUpdateXAxis){t.drawXAxis();t.shouldUpdateXAxis=false}if(t.shouldSetXAxisAccessibility){t.setXAxisAccessibility();t.shouldSetXAxisAccessibility=false}if(t.shouldUpdateYAxis){t.drawYAxis();t.shouldUpdateYAxis=false}if(t.shouldSetYAxisAccessibility){t.setYAxisAccessibility();t.shouldSetYAxisAccessibility=false}if(t.shouldUpdateBaseline){t.drawBaseline();t.shouldUpdateBaseline=false}t.onChangeHandler();e("component did update")}))};t.prototype.shouldValidateAccessibilityProps=function(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;Qc(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:!this.suppressEvents?this.clickFunc.emit:undefined}})}};t.prototype.validateInteractionKeys=function(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor]};t.prototype.validateDataLabelAccessor=function(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor};t.prototype.validateLabelPlacement=function(){if(this.layout==="vertical"){if(this.dataLabel.placement!=="top"&&this.dataLabel.placement!=="bottom"){this.dataLabel.placement="top"}}else{if(this.dataLabel.placement==="top"||this.dataLabel.placement==="bottom"){this.dataLabel.placement="right"}}};t.prototype.setDimensions=function(){this.padding=typeof this.padding==="string"?Xc(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.prepareData=function(){var t=this;this.data.map((function(e){e[t.valueAccessor]=parseFloat(e[t.valueAccessor]);e[t.groupAccessor]=e[t.groupAccessor]instanceof Date?Rc({date:e[t.groupAccessor],format:t.layout==="vertical"?t.xAxis.format:t.yAxis.format,offsetTimezone:true}):e[t.groupAccessor]}));this.nest=qa().key((function(e){return e[t.groupAccessor]})).entries(this.data);this.datakeys=this.nest.map((function(t){return t.key}))};t.prototype.setTableData=function(){var t=jc(this,Uc,"clustered-bar-chart");this.tableData=Fc(this.data,t);this.tableColumns=Object.keys(t)};t.prototype.prepareScales=function(){var t=this;var e=this.minValueOverride&&this.minValueOverride<za(this.data,(function(e){return e[t.valueAccessor]}))?this.minValueOverride:za(this.data,(function(e){return e[t.valueAccessor]}));if(this.layout==="vertical"){this.y=Jl().domain([Math.min(0,e),this.maxValueOverride||Ya(this.data,(function(e){return e[t.valueAccessor]}))]).range([this.innerPaddedHeight,0]);this.x0=no().domain(this.datakeys).range(this.reverseOrder?[this.innerPaddedWidth,0]:[0,this.innerPaddedWidth]).padding(this.groupIntervalRatio);this.x1=no().domain(this.nest[0].values.map((function(e){return e[t.ordinalAccessor]}))).rangeRound([0,this.x0.bandwidth()]).padding(this.barIntervalRatio)}else if(this.layout==="horizontal"){this.x=Jl().domain([Math.min(0,e),this.maxValueOverride||Ya(this.data,(function(e){return e[t.valueAccessor]}))]).range([0,this.innerPaddedWidth]);this.y0=no().domain(this.datakeys).range(this.reverseOrder?[this.innerPaddedHeight,0]:[0,this.innerPaddedHeight]).padding(this.groupIntervalRatio);this.y1=no().domain(this.nest[0].values.map((function(e){return e[t.ordinalAccessor]}))).rangeRound([0,this.y0.bandwidth()]).padding(this.barIntervalRatio)}};t.prototype.validateAxes=function(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!(this.layout==="vertical")&&this.xAxis.gridVisible});this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:this.layout==="vertical"&&this.yAxis.gridVisible})};t.prototype.setColors=function(){this.preparedColors=this.colors?Tc(this.colors):Yc(this.colorPalette,this.nest[0].values.length)};t.prototype.setTextures=function(){var t=this.preparedColors.range?this.preparedColors.range():this.preparedColors;if(this.accessibility.hideTextures||t.length>6){this.colorArr=this.preparedColors}else{var e=t;var i=sc({colors:e,rootSVG:this.svg.node(),id:this.chartID,scheme:"categorical"});this.colorArr=this.preparedColors.range?this.preparedColors.copy().range(i):i}};t.prototype.setStrokes=function(){this.strokes=nc({root:this.svg.node(),id:this.chartID,colors:this.preparedColors.range?this.preparedColors.range():this.preparedColors,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle})};t.prototype.renderRootElements=function(){this.svg=Ma(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.gridG=this.rootG.append("g").attr("class","grid-group");this.barG=this.rootG.append("g").attr("class","clustered-bar-group");this.labelG=this.rootG.append("g").attr("class","clustered-bar-dataLabel-group");this.legendG=Ma(this.clusteredBarChartEl).select(".clustered-bar-legend").append("svg");this.tooltipG=Ma(this.clusteredBarChartEl).select(".clustered-bar-tooltip");this.references=this.rootG.append("g").attr("class","clustered-bar-reference-line-group")};t.prototype.setTestingAttributes=function(){var t=this;if(this.unitTest){Ma(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").attr("data-testid","chart-container");Ma(this.clusteredBarChartEl).select(".clustered-bar-main-title").attr("data-testid","main-title");Ma(this.clusteredBarChartEl).select(".clustered-bar-sub-title").attr("data-testid","sub-title");this.svg.attr("data-testid","root-svg");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.legendG.attr("data-testid","legend-container");this.tooltipG.attr("data-testid","tooltip-container");this.barG.attr("data-testid","clustered-bar-group");this.updateBarWrappers.attr("data-testid","clustered-bar-wrapper").attr("data-id",(function(t){return"clustered-bar-wrapper-"+t.key}));this.update.attr("data-testid","bar").attr("data-id",(function(e){return"bar-"+e[t.groupAccessor]+"-"+e[t.ordinalAccessor]}));this.labelG.attr("data-testid","clustered-bar-dataLabel-group");this.updateLabelWrappers.attr("data-testid","clustered-bar-dataLabel-wrapper").attr("data-id",(function(t){return"clustered-bar-dataLabel-wrapper-"+t.key}));this.updateLabels.attr("data-testid","dataLabel").attr("data-id",(function(e){return"dataLabel-"+e[t.groupAccessor]+"-"+e[t.ordinalAccessor]}));this.references.attr("data-testid","reference-line-group");this.svg.select("defs").attr("data-testid","pattern-defs");this.references.selectAll(".clustered-bar-reference-line").attr("data-testid","reference-line");this.references.selectAll(".clustered-bar-reference-line-label").attr("data-testid","reference-line-label")}else{Ma(this.clusteredBarChartEl).select(".visa-viz-d3-clustered-bar-container").attr("data-testid",null);Ma(this.clusteredBarChartEl).select(".clustered-bar-main-title").attr("data-testid",null);Ma(this.clusteredBarChartEl).select(".clustered-bar-sub-title").attr("data-testid",null);this.svg.attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.legendG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.barG.attr("data-testid",null);this.updateBarWrappers.attr("data-testid",null).attr("data-id",null);this.update.attr("data-testid",null).attr("data-id",null);this.labelG.attr("data-testid",null);this.updateLabelWrappers.attr("data-testid",null).attr("data-id",null);this.updateLabels.attr("data-testid",null).attr("data-id",null);this.references.attr("data-testid",null);this.svg.select("defs").attr("data-testid",null);this.references.selectAll(".clustered-bar-reference-line").attr("data-testid",null);this.references.selectAll(".clustered-bar-reference-line-label").attr("data-testid",null)}};t.prototype.reSetRoot=function(){this.svg.transition("root_reset").duration(this.duration).ease(eu).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root.transition("root_reset").duration(this.duration).ease(eu).attr("transform","translate("+this.margin.left+", "+this.margin.top+")");this.rootG.transition("root_reset").duration(this.duration).ease(eu).attr("transform","translate("+this.padding.left+", "+this.padding.top+")");Cc(this.chartID,this.width)};t.prototype.drawXAxis=function(){Wc({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.layout==="vertical"?this.x0:this.x,left:false,wrapLabel:this.wrapLabel&&this.layout==="vertical"?this.x0.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible})};t.prototype.drawYAxis=function(){Wc({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.layout==="vertical"?this.y:this.y0,left:true,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible})};t.prototype.setXAxisAccessibility=function(){Ac({rootEle:this.clusteredBarChartEl,hasXAxis:this.innerXAxis?this.innerXAxis.visible:false,xAxis:this.layout==="vertical"?this.x0||false:this.x||false,xAxisLabel:this.xAxis.label?this.xAxis.label:""})};t.prototype.setYAxisAccessibility=function(){wc({rootEle:this.clusteredBarChartEl,hasYAxis:this.innerYAxis?this.innerYAxis.visible:false,yAxis:this.layout==="vertical"?this.y||false:this.y0||false,yAxisLabel:this.yAxis.label?this.yAxis.label:""})};t.prototype.drawBaseline=function(){Wc({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.layout==="vertical"?this.x0:this.x,left:false,padding:this.padding,markOffset:this.layout==="vertical"?this.y(0)||-1:this.y0(0)||-1,hide:!(this.layout==="vertical")});Wc({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.layout==="vertical"?this.y:this.y0,left:true,padding:this.padding,markOffset:this.layout==="vertical"?this.x0(0)||-1:this.x(0)||-1,hide:this.layout==="vertical"})};t.prototype.drawXGrid=function(){Hc(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.layout==="vertical"?this.x0:this.x,false,!this.innerXAxis.gridVisible,this.xAxis.tickInterval)};t.prototype.drawYGrid=function(){Hc(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.layout==="vertical"?this.y:this.y0,true,!this.innerYAxis.gridVisible,this.yAxis.tickInterval)};t.prototype.setGlobalSelections=function(){var t=this;var e=this.barG.selectAll(".clustered-bar-wrapper").data(this.nest,(function(t){return t.key}));this.enterBarWrappers=e.enter().append("g");this.exitBarWrappers=e.exit();this.updateBarWrappers=e.merge(this.enterBarWrappers);var i=this.updateBarWrappers.selectAll(".clustered-bar").data((function(t){return t.values}),(function(e){return e[t.ordinalAccessor]}));this.enter=i.enter().append("rect");this.exit=i.exit();this.update=i.merge(this.enter);this.enterSize=this.enter.size();this.exitSize=this.exit.size();var r=this.labelG.selectAll("g").data(this.nest,(function(t){return t.key}));this.enterLabelWrappers=r.enter().append("g");this.exitLabelWrappers=r.exit();this.updateLabelWrappers=r.merge(this.enterLabelWrappers);var n=this.updateLabelWrappers.selectAll("text").data((function(t){return t.values}),(function(e){return e[t.ordinalAccessor]}));this.enterLabels=n.enter().append("text");this.exitLabels=n.exit();this.updateLabels=n.merge(this.enterLabels)};t.prototype.enterGeometries=function(){var t=this;this.enter.interrupt();var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r=this.layout==="vertical"?"y":"x";var n=this.layout==="vertical"?"height":"width";var s=this.layout==="vertical"?"max":"min";this.enterBarWrappers.attr("class","clustered-bar-wrapper").classed("entering",true).attr("transform",(function(e){return t.layout==="vertical"?"translate("+t.x0(e.key)+",0)":"translate(0,"+t.y0(e.key)+")"})).each((function(t,e,i){oc(i[e])}));this.enter.attr("class","clustered-bar").attr("cursor",!this.suppressEvents?this.cursor:null).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).each((function(t,e,i){oc(i[e])})).on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr(r,(function(e){return t[r](Math[s](0,e[t.valueAccessor]))})).attr(n,(function(e){return Math.abs(t.layout==="vertical"?t[r](0)-t[r](e[t.valueAccessor]):t[r](e[t.valueAccessor])-t[r](0))})).attr(e,(function(i){return t[e+"1"](i[t.ordinalAccessor])})).attr(i,this[e+"1"].bandwidth());if(this.defaults){this.enter.attr("opacity",(function(e){return Ec(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))}else{this.enter.classed("entering",true).attr(e,(function(i,r,n){var s=Ma(n[r].parentNode);var a=s.classed("entering");var o=a?t[e+"0"](s.datum().key):t[e+"1"](i[t.ordinalAccessor]);var l=a?t[e+"0"].bandwidth()/2:t[e+"1"].bandwidth()/2;var u=(o+l)/(t.innerPaddedWidth/2);o=a?0:o;var h=o+l*u;return h})).attr(i,0)}this.enterBarWrappers.order();this.enter.order()};t.prototype.updateGeometries=function(){var t=this;this.update.interrupt();this.update.transition("opacity").duration((function(e,i,r){if(Ma(r[i]).classed("entering")){Ma(r[i]).classed("entering",false);return t.duration}return 0})).ease(eu).attr("opacity",(function(e){return Ec(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))};t.prototype.exitGeometries=function(){var t=this;this.exitBarWrappers.interrupt();this.exit.interrupt();var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r="innerPadded"+i[0].toUpperCase()+i.substring(1);this.exit.transition("exit").duration(this.duration).ease(eu).attr("opacity",0).attr(e,(function(n,s,a){var o=Ma(a[s]);var l=+o.attr(e)+ +o.attr(i)/2;l=+o.attr(e)+ +o.attr(i)/2*(l/(t[r]/2));return l})).attr(i,0);this.exitSize+=this.exitBarWrappers.selectAll(".clustered-bar").size();this.exitBarWrappers.selectAll(".clustered-bar").transition("exit_wrappers").duration(this.duration*.75).ease(eu).attr("opacity",0).attr(e,(function(i,n,s){var a=s[n].parentNode;var o=a.transform.baseVal.consolidate().matrix.e;var l=t[e+"0"].bandwidth()/2;var u=(o+l)/(t[r]/2);var h=l*u;return h})).attr(i,0);this.update.transition("accessibilityAfterExit").duration(this.duration).ease(eu).call($c,(function(){var e=Lc(t.rootG.node());t.exit.remove();t.exitBarWrappers.remove();t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();kc({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawGeometries=function(){var t=this;var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r=this.layout==="vertical"?"y":"x";var n=this.layout==="vertical"?"height":"width";var s=this.layout==="vertical"?"max":"min";this.updateBarWrappers.transition("update").duration(this.duration).ease(eu).attr("transform",(function(e){return t.layout==="vertical"?"translate("+t.x0(e.key)+",0)":"translate(0,"+t.y0(e.key)+")"})).call($c,(function(){t.updateBarWrappers.classed("entering",false)}));this.update.classed("geometryIsMoving",(function(a,o,l){var u=tc(Ma(l[o]),[{attr:e,numeric:true,newValue:t[e+"1"](a[t.ordinalAccessor])},{attr:i,numeric:true,newValue:t[e+"1"].bandwidth()},{attr:r,numeric:true,newValue:t[r](Math[s](0,a[t.valueAccessor]))},{attr:n,numeric:true,newValue:Math.abs(t.layout==="vertical"?t[r](0)-t[r](a[t.valueAccessor]):t[r](a[t.valueAccessor])-t[r](0))}]);return u})).transition("update").duration((function(e,i,r){return Ma(r[i]).classed("entering")?t.duration/2:t.duration})).delay((function(e,i,r){return Ma(r[i]).classed("entering")?t.duration/2:0})).ease(eu).attr(r,(function(e){return t[r](Math[s](0,e[t.valueAccessor]))})).attr(n,(function(e){return Math.abs(t.layout==="vertical"?t[r](0)-t[r](e[t.valueAccessor]):t[r](e[t.valueAccessor])-t[r](0))})).attr(e,(function(i){return t[e+"1"](i[t.ordinalAccessor])})).attr(i,this[e+"1"].bandwidth()).call($c,(function(){t.update.classed("geometryIsMoving",false);t.updateInteractionState();kc({parentGNode:t.rootG.node()})}))};t.prototype.updateInteractionState=function(){var t=this;rc(this.svg.node());this.update.interrupt("opacity");this.updateLabels.interrupt("opacity");this.update.attr("opacity",(function(e){return Ec(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)})).attr("fill",(function(e,i){var r=t.clickHighlight&&t.clickHighlight.length>0&&Ic(e,t.clickHighlight,t.innerInteractionKeys);var n=t.hoverHighlight&&Nc(e,t.hoverHighlight,t.innerInteractionKeys);var s=t.colorArr[i];return r&&t.clickStyle.color?Zc[t.clickStyle.color]||t.clickStyle.color:r?s:n&&t.hoverStyle.color?Zc[t.hoverStyle.color]||t.hoverStyle.color:s})).attr("filter",(function(e,i,r){if(!t.accessibility.hideStrokes&&!Ma(r[i]).classed("geometryIsMoving")){var n=t.clickHighlight&&t.clickHighlight.length>0&&Ic(e,t.clickHighlight,t.innerInteractionKeys);var s=t.hoverHighlight&&Nc(e,t.hoverHighlight,t.innerInteractionKeys);var a=t.preparedColors[i];var o=n?"click":s&&!Ma(r[i]).classed("geometryIsMoving")?"hover":"rest";var l=n&&t.clickStyle.color?Zc[t.clickStyle.color]||t.clickStyle.color:n?a:s&&t.hoverStyle.color?Zc[t.hoverStyle.color]||t.hoverStyle.color:a;if(o==="hover"){ic({inputElement:r[i],id:t.chartID,key:e[t.ordinalAccessor]+e[t.groupAccessor],strokeWidth:t.hoverStyle.strokeWidth,fill:l})}return t.strokes[o+l]}return null}));kc({parentGNode:this.rootG.node()});Pc({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.setLabelOpacity=function(){this.processLabelOpacity(this.updateLabels)};t.prototype.processLabelOpacity=function(t){var e=this;var i=this.dataLabel.visible?1:0;var r=this.layout==="vertical"?"x":"y";var n=this.layout==="vertical"?"width":"height";var s=this.layout==="vertical"?"y":"x";var a=this.layout==="vertical"?"height":"width";var o=this[r+"0"].bandwidth()/this.nest[0].values.length;t.attr("opacity",(function(t){var l={};l[n]=e.dataLabel.placement==="left"||e.dataLabel.placement==="bottom"?e[r+"1"].bandwidth():o;if(e.dataLabel.placement==="left"||e.dataLabel.placement==="bottom"){l[a]=Math.abs(e.layout==="vertical"?e[s](0)-e[s](t[e.valueAccessor]):e[s](t[e.valueAccessor])-e[s](0))}var u=e.accessibility.showSmallLabels||Jh({text:Vc(t,e.innerLabelAccessor,e.dataLabel.format),dimensions:l,fontSize:14});return u?Ec(t,i,e.hoverOpacity,e.hoverHighlight,e.clickHighlight,e.innerInteractionKeys)<1?0:1:0}))};t.prototype.checkLabelColorAgainstBackground=function(){var t=this;this.updateLabels.attr("fill",(function(e,i,r){return t.textTreatmentHandler(e,i,r)}))};t.prototype.setRoundedCorners=function(){this.update.transition("corners").duration(this.duration).ease(eu).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner)};t.prototype.setSelectedClass=function(){var t=this;this.update.classed("highlight",(function(e,i,r){var n=Ec(e,true,false,"",t.clickHighlight,t.innerInteractionKeys);n=t.clickHighlight&&t.clickHighlight.length?n:false;var s=t.accessibility.elementsAreInterface;_c(r[i],n,s);return n}))};t.prototype.updateCursor=function(){this.update.attr("cursor",!this.suppressEvents?this.cursor:null);this.updateLabels.attr("cursor",!this.suppressEvents?this.cursor:null)};t.prototype.enterDataLabels=function(){var t=this;var e=this.layout==="vertical"?"x":"y";this.enterLabelWrappers.attr("class","clustered-bar-label-wrapper").classed("entering",true).attr("transform",(function(e){return t.layout==="vertical"?"translate("+t.x0(e.key)+",0)":"translate(0,"+t.y0(e.key)+")"}));this.enterLabels.attr("opacity",0).attr("class","clustered-bar-dataLabel entering").attr("cursor",!this.suppressEvents?this.cursor:null).classed("clustered-bar-dataLabel-horizontal",false).classed("clustered-bar-dataLabel-vertical",false).classed("clustered-bar-dataLabel-"+this.layout,true).attr("fill",this.textTreatmentHandler).on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);qc({root:this.enterLabels,xScale:this.layout==="vertical"?this.x1:this.x,yScale:this.layout==="vertical"?this.y:this.y1,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"bar"});this.enterLabels.attr(e,(function(i,r,n){var s=e+"0";var a=e+"1";var o=e==="x"?"innerPaddedWidth":"innerPaddedHeight";var l=Ma(n[r].parentNode);var u=l.classed("entering");var h=u?t[s](l.datum().key):t[a](i[t.ordinalAccessor]);var c=u?t[s].bandwidth()/2:t[a].bandwidth()/2;var d=(h+c)/(t[o]/2);h=u?0:h;var f=h+c*d;return f}))};t.prototype.updateDataLabels=function(){var t=this;this.updateLabels.interrupt();var e=this.dataLabel.visible?1:0;this.updateLabels.transition("opacity").duration((function(e,i,r){if(Ma(r[i]).classed("entering")){Ma(r[i]).classed("entering",false);return t.duration/2}return 0})).ease(eu).attr("opacity",(function(i){return Ec(i,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1})).call($c,(function(){t.updateLabels.classed("entering",false)}))};t.prototype.exitDataLabels=function(){var t=this;this.exitLabelWrappers.selectAll("text").transition("exit").ease(eu).duration(this.duration/3).attr("opacity",0).call($c,(function(){t.exitLabelWrappers.remove()}));this.exitLabels.transition("exit").ease(eu).duration(this.duration/3).attr("opacity",0).remove()};t.prototype.drawDataLabels=function(){var t=this;this.updateLabels.text((function(e){return Vc(e,t.innerLabelAccessor,t.dataLabel.format)}));this.updateLabelWrappers.classed("clustered-bar-dataLabel-horizontal",false).classed("clustered-bar-dataLabel-vertical",false).classed("clustered-bar-dataLabel-"+this.layout,true).transition("update").duration(this.duration).ease(eu).attr("transform",(function(e){return t.layout==="vertical"?"translate("+t.x0(e.key)+",0)":"translate(0,"+t.y0(e.key)+")"})).call($c,(function(){t.updateLabelWrappers.classed("entering",false)}));var e=this.updateLabels.transition("update").ease(eu).duration(this.duration);qc({root:e,xScale:this.layout==="vertical"?this.x1:this.x,yScale:this.layout==="vertical"?this.y:this.y1,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"bar"})};t.prototype.drawReferenceLines=function(){var t=this;var e=this.references.selectAll("g").data(this.referenceLines,(function(t){return t.label}));var i=e.enter().append("g").attr("class","clustered-bar-reference").attr("opacity",1);var r=i.append("line");r.attr("class","clustered-bar-reference-line").attr("opacity",0);var n=i.append("text");n.attr("class","clustered-bar-reference-line-label").attr("opacity",0);var s=e.merge(i);var a=s.selectAll(".clustered-bar-reference-line").data((function(t){return[t]})).transition("merge").ease(eu).duration(this.duration);var o=s.selectAll(".clustered-bar-reference-line-label").data((function(t){return[t]})).transition("merge").ease(eu).duration(this.duration).text((function(t){return t.label}));var l=e.exit();l.transition("exit").ease(eu).duration(this.duration).attr("opacity",0).remove();if(this.layout==="vertical"){i.attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));s.transition("merge").ease(eu).duration(this.duration).attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));r.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);n.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);o.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em")}else if(this.layout==="horizontal"){i.attr("transform",(function(e){return"translate("+t.x(e.value)+",0)"}));s.transition("merge").ease(eu).duration(this.duration).attr("transform",(function(e){return"translate("+t.x(e.value)+",0)"}));r.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0);a.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0);n.attr("text-anchor","middle").attr("x",0).attr("y",(function(e){return(e.labelPlacementVertical||"top")==="top"?0:t.innerPaddedHeight})).attr("dx",0).attr("dy",(function(t){return(t.labelPlacementVertical||"top")==="top"?"-0.3em":"1em"}));o.attr("text-anchor","middle").attr("x",0).attr("y",(function(e){return(e.labelPlacementVertical||"top")==="top"?0:t.innerPaddedHeight})).attr("dx",0).attr("dy",(function(t){return(t.labelPlacementVertical||"top")==="top"?"-0.3em":"1em"}))}a.style("stroke",Zc[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity);o.style("fill",Zc[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)};t.prototype.prepareLegendData=function(){this.legendData=this.nest[0].values};t.prototype.drawLegendElements=function(){Gc({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:this.preparedColors,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,labelKey:this.ordinalAccessor,label:this.legend.labels,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.bindLegendInteractivity=function(){var t=this;Ma(this.clusteredBarChartEl).selectAll(".legend").style("cursor",this.legend.interactive&&!this.suppressEvents?this.cursor:"").on("click",this.legend.interactive&&!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",this.legend.interactive&&!this.suppressEvents?function(e){return t.hoverFunc.emit(e)}:null).on("mouseout",this.legend.interactive&&!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.setLegendCursor=function(){Ma(this.clusteredBarChartEl).selectAll(".legend").style("cursor",this.legend.interactive&&!this.suppressEvents?this.cursor:null)};t.prototype.bindInteractivity=function(){var t=this;this.update.on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.updateLabels.on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.drawAnnotations=function(){Mc({source:this.rootG.node(),data:this.annotations,xScale:this.layout!=="horizontal"?this.x0:this.x,xAccessor:this.layout!=="horizontal"?this.groupAccessor:this.valueAccessor,yScale:this.layout!=="horizontal"?this.y:this.y0,yAccessor:this.layout!=="horizontal"?this.valueAccessor:this.groupAccessor})};t.prototype.setAnnotationAccessibility=function(){xc(this.clusteredBarChartEl,this.annotations)};t.prototype.setTagLevels=function(){this.topLevel=Jc(this.highestHeadingLevel);this.bottomLevel=Jc(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){ac({rootEle:this.clusteredBarChartEl,geomType:"bar",title:this.accessibility.title||this.mainTitle,chartTag:"clustered-bar-chart",uniqueID:this.chartID,groupName:"cluster",highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){hc({node:this.svg.node(),chartTag:"clustered-bar-chart",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:jc(this,Uc,"clustered-bar-chart"),groupAccessor:this.groupAccessor,groupName:"cluster",disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})};t.prototype.setGeometryAccessibilityAttributes=function(){this.update.each((function(t,e,i){oc(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=jc(this,Uc,"clustered-bar-chart");this.update.each((function(i,r,n){lc({node:n[r],geomType:"bar",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupName:"cluster",uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});uc({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityID=function(){var t=this;this.updateBarWrappers.each((function(e,i,r){uc({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartAccessibilityTitle=function(){dc(this.clusteredBarChartEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){fc(this.clusteredBarChartEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){pc(this.clusteredBarChartEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){yc(this.clusteredBarChartEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){vc(this.clusteredBarChartEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){gc(this.clusteredBarChartEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){bc(this.clusteredBarChartEl,this.accessibility.statisticalNotes)};t.prototype.setChartCountAccessibility=function(){mc({rootEle:this.clusteredBarChartEl,parentGNode:this.barG.node(),chartTag:"clustered-bar-chart",geomType:"bar",groupName:"cluster"})};t.prototype.setChartAccessibilityStructureNotes=function(){Sc(this.clusteredBarChartEl,this.accessibility.structureNotes)};t.prototype.onChangeHandler=function(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){var t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.updated=false;this.enterSize=0;this.exitSize=0};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){Kc(this.chartID,true);this.hoverFunc.emit(t);if(this.showTooltip&&t[this.ordinalAccessor]){this.eventsTooltip({data:t,evt:pa,isToShow:true})}};t.prototype.onMouseOutHandler=function(){Kc(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){Bc(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;Oc({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.groupAccessor,groupAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"clustered"})};t.prototype.render=function(){var t="light";this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldCheckValueAxis){if(this.layout==="horizontal"){this.shouldUpdateXAxis=true;this.shouldUpdateXGrid=true}else if(this.layout==="vertical"){this.shouldUpdateYAxis=true;this.shouldUpdateYGrid=true}this.shouldCheckValueAxis=false}if(this.shouldCheckLabelAxis){if(this.layout==="vertical"){this.shouldUpdateXAxis=true;this.shouldUpdateXGrid=true;this.shouldSetXAxisAccessibility=true}else if(this.layout==="horizontal"){this.shouldUpdateYAxis=true;this.shouldUpdateYGrid=true;this.shouldSetYAxisAccessibility=true}this.shouldCheckLabelAxis=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldUpdateLegendData){this.prepareLegendData();this.shouldUpdateLegendData=false}if(this.shouldSetDimensions){this.setDimensions();this.shouldSetDimensions=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldValidateDataLabelAccessor){this.validateDataLabelAccessor();this.shouldValidateDataLabelAccessor=false}if(this.shouldValidateAxes){this.validateAxes();this.shouldValidateAxes=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidate=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}if(this.shouldValidateLabelPlacement){this.validateLabelPlacement();this.shouldValidateLabelPlacement=false}return r("div",{class:"o-layout is--"+this.layout+" "+t},r("div",{class:"o-layout--chart"},r(this.topLevel,{"data-testid":"main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions","data-testid":"sub-title"},this.subTitle),r("div",{class:"clustered-bar-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),r("div",{class:"visa-viz-d3-clustered-bar-container"}),r("div",{class:"clustered-bar-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("data-table",{uniqueID:this.chartID,isCompact:true,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))};t.prototype.init=function(){var t=Object.keys(ru);var e=0;var i={mainTitle:{exception:""},subTitle:{exception:""},barIntervalRatio:{exception:0},groupIntervalRatio:{exception:0},showTooltip:{exception:false},wrapLabel:{exception:false},hoverOpacity:{exception:0}};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:ru[t[e]]}};Object.defineProperty(t.prototype,"clusteredBarChartEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],layout:["layoutWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],reverseOrder:["reverseOrderWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],roundedCorner:["cornerWatcher"],barIntervalRatio:["intervalRatioWatcher"],groupIntervalRatio:["groupIntervalRatioWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}clustered-bar-chart{cursor:default}clustered-bar-chart .annotations{pointer-events:none}clustered-bar-chart .annotations .handle{pointer-events:all}clustered-bar-chart .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}clustered-bar-chart .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}clustered-bar-chart .hidden{display:none}clustered-bar-chart #visa-viz-d3-clustered-bar-container{clear:both}clustered-bar-chart .clustered-bar-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap}clustered-bar-chart .clustered-bar-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;margin-right:10px}clustered-bar-chart .clustered-bar-legend .key-dot{margin:3px 8px}clustered-bar-chart .light .grid line{stroke:#767676;stroke-opacity:1;stroke-width:0.8;stroke-dasharray:4, 4}clustered-bar-chart .light .grid path{stroke-width:0}clustered-bar-chart .light .axis{font-size:12px}clustered-bar-chart .light .axis .tick text{fill:#767676}clustered-bar-chart .light .axis .tick line{stroke:#767676}clustered-bar-chart .light .axis-label{text-anchor:middle;font:1rem sans-serif}clustered-bar-chart .light .y.axis path{stroke:#767676;opacity:0}clustered-bar-chart .light .x.axis path{stroke:#767676}clustered-bar-chart .dark .grid line{stroke:lightgrey;stroke-opacity:0.7;shape-rendering:crispEdges}clustered-bar-chart .dark .grid path{stroke-width:0}clustered-bar-chart .dark .axis{font-size:12px}clustered-bar-chart .dark .axis .tick line{stroke:lightgrey}clustered-bar-chart .dark .axis .tick text{fill:grey}clustered-bar-chart .dark .axis path{stroke:black}clustered-bar-chart .dark .axis-label{text-anchor:middle;font:1rem sans-serif}clustered-bar-chart .dark .o-layout--chart svg{background:black}clustered-bar-chart .dark .o-layout--chart svg .clustered-bar-dataLabel-vertical{text-anchor:middle}clustered-bar-chart .dark .o-layout--chart svg .clustered-bar-dataLabel-horizontal{text-anchor:start}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=zc();var ed="http://www.w3.org/1999/xhtml";var id={svg:"http://www.w3.org/2000/svg",xhtml:ed,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rd(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return id.hasOwnProperty(e)?{space:id[e],local:t}:t}function nd(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===ed&&e.documentElement.namespaceURI===ed?e.createElement(t):e.createElementNS(i,t)}}function sd(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ad(t){var e=rd(t);return(e.local?sd:nd)(e)}function od(){}function ld(t){return t==null?od:function(){return this.querySelector(t)}}function ud(t){if(typeof t!=="function")t=ld(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new zf(r,this._parents)}function hd(){return[]}function cd(t){return t==null?hd:function(){return this.querySelectorAll(t)}}function dd(t){if(typeof t!=="function")t=cd(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new zf(r,n)}function fd(t){return function(){return this.matches(t)}}function pd(t){if(typeof t!=="function")t=fd(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new zf(r,this._parents)}function yd(t){return new Array(t.length)}function vd(){return new zf(this._enter||this._groups.map(yd),this._parents)}function gd(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}gd.prototype={constructor:gd,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function bd(t){return function(){return t}}var md="$";function Ad(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new gd(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function wd(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=md+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=md+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new gd(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function Sd(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?wd:Ad,r=this._parents,n=this._groups;if(typeof t!=="function")t=bd(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new zf(a,r);a._enter=o;a._exit=l;return a}function xd(){return new zf(this._exit||this._groups.map(yd),this._parents)}function kd(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function Ld(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new zf(a,this._parents)}function _d(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function Cd(t){if(!t)t=Dd;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new zf(n,this._parents).order()}function Dd(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Md(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function Ud(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function Td(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function Ed(){var t=0;this.each((function(){++t}));return t}function Id(){return!this.node()}function Nd(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function Wd(t){return function(){this.removeAttribute(t)}}function Hd(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Gd(t,e){return function(){this.setAttribute(t,e)}}function Pd(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Od(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function Vd(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function Rd(t,e){var i=rd(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?Hd:Wd:typeof e==="function"?i.local?Vd:Od:i.local?Pd:Gd)(i,e))}function Yd(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function zd(t){return function(){this.style.removeProperty(t)}}function Xd(t,e,i){return function(){this.style.setProperty(t,e,i)}}function Fd(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function Bd(t,e,i){return arguments.length>1?this.each((e==null?zd:typeof e==="function"?Fd:Xd)(t,e,i==null?"":i)):Kd(this.node(),t)}function Kd(t,e){return t.style.getPropertyValue(e)||Yd(t).getComputedStyle(t,null).getPropertyValue(e)}function qd(t){return function(){delete this[t]}}function jd(t,e){return function(){this[t]=e}}function $d(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function Zd(t,e){return arguments.length>1?this.each((e==null?qd:typeof e==="function"?$d:jd)(t,e)):this.node()[t]}function Qd(t){return t.trim().split(/^|\s+/)}function Jd(t){return t.classList||new tf(t)}function tf(t){this._node=t;this._names=Qd(t.getAttribute("class")||"")}tf.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function ef(t,e){var i=Jd(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function rf(t,e){var i=Jd(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function nf(t){return function(){ef(this,t)}}function sf(t){return function(){rf(this,t)}}function af(t,e){return function(){(e.apply(this,arguments)?ef:rf)(this,t)}}function of(t,e){var i=Qd(t+"");if(arguments.length<2){var r=Jd(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?af:e?nf:sf)(i,e))}function lf(){this.textContent=""}function uf(t){return function(){this.textContent=t}}function hf(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function cf(t){return arguments.length?this.each(t==null?lf:(typeof t==="function"?hf:uf)(t)):this.node().textContent}function df(){this.innerHTML=""}function ff(t){return function(){this.innerHTML=t}}function pf(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function yf(t){return arguments.length?this.each(t==null?df:(typeof t==="function"?pf:ff)(t)):this.node().innerHTML}function vf(){if(this.nextSibling)this.parentNode.appendChild(this)}function gf(){return this.each(vf)}function bf(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mf(){return this.each(bf)}function Af(t){var e=typeof t==="function"?t:ad(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function wf(){return null}function Sf(t,e){var i=typeof t==="function"?t:ad(t),r=e==null?wf:typeof e==="function"?e:ld(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function xf(){var t=this.parentNode;if(t)t.removeChild(this)}function kf(){return this.each(xf)}function Lf(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function _f(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Cf(t){return this.select(t?_f:Lf)}function Df(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Mf={};var Uf=null;if(typeof document!=="undefined"){var Tf=document.documentElement;if(!("onmouseenter"in Tf)){Mf={mouseenter:"mouseover",mouseleave:"mouseout"}}}function Ef(t,e,i){t=If(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function If(t,e,i){return function(r){var n=Uf;Uf=r;try{t.call(this,this.__data__,e,i)}finally{Uf=n}}}function Nf(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function Wf(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function Hf(t,e,i){var r=Mf.hasOwnProperty(t.type)?Ef:If;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function Gf(t,e,i){var r=Nf(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?Hf:Wf;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function Pf(t,e,i){var r=Yd(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function Of(t,e){return function(){return Pf(this,t,e)}}function Vf(t,e){return function(){return Pf(this,t,e.apply(this,arguments))}}function Rf(t,e){return this.each((typeof e==="function"?Vf:Of)(t,e))}var Yf=[null];function zf(t,e){this._groups=t;this._parents=e}function Xf(){return new zf([[document.documentElement]],Yf)}zf.prototype=Xf.prototype={constructor:zf,select:ud,selectAll:dd,filter:pd,data:Sd,enter:vd,exit:xd,join:kd,merge:Ld,order:_d,sort:Cd,call:Md,nodes:Ud,node:Td,size:Ed,empty:Id,each:Nd,attr:Rd,style:Bd,property:Zd,classed:of,text:cf,html:yf,raise:gf,lower:mf,append:Af,insert:Sf,remove:kf,clone:Cf,datum:Df,on:Gf,dispatch:Rf};function Ff(t){return typeof t==="string"?new zf([[document.querySelector(t)]],[document.documentElement]):new zf([[t]],Yf)}function Bf(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Kf(t){if(t.length===1)t=qf(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function qf(t){return function(e,i){return Bf(t(e),i)}}var jf=Kf(Bf);var $f=jf.right;function Zf(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var Qf=Math.sqrt(50),Jf=Math.sqrt(10),tp=Math.sqrt(2);function ep(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=ip(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function ip(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=Qf?10:s>=Jf?5:s>=tp?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=Qf?10:s>=Jf?5:s>=tp?2:1)}function rp(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=Qf)n*=10;else if(s>=Jf)n*=5;else if(s>=tp)n*=2;return e<t?-n:n}function np(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function sp(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}var ap=new Date,op=new Date;function lp(t,e,i,r){function n(e){return t(e=arguments.length===0?new Date:new Date(+e)),e}n.floor=function(e){return t(e=new Date(+e)),e};n.ceil=function(i){return t(i=new Date(i-1)),e(i,1),t(i),i};n.round=function(t){var e=n(t),i=n.ceil(t);return t-e<i-t?e:i};n.offset=function(t,i){return e(t=new Date(+t),i==null?1:Math.floor(i)),t};n.range=function(i,r,s){var a=[],o;i=n.ceil(i);s=s==null?1:Math.floor(s);if(!(i<r)||!(s>0))return a;do{a.push(o=new Date(+i)),e(i,s),t(i)}while(o<i&&i<r);return a};n.filter=function(i){return lp((function(e){if(e>=e)while(t(e),!i(e))e.setTime(e-1)}),(function(t,r){if(t>=t){if(r<0)while(++r<=0){while(e(t,-1),!i(t)){}}else while(--r>=0){while(e(t,+1),!i(t)){}}}}))};if(i){n.count=function(e,r){ap.setTime(+e),op.setTime(+r);t(ap),t(op);return Math.floor(i(ap,op))};n.every=function(t){t=Math.floor(t);return!isFinite(t)||!(t>0)?null:!(t>1)?n:n.filter(r?function(e){return r(e)%t===0}:function(e){return n.count(0,e)%t===0})}}return n}var up=lp((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));up.every=function(t){t=Math.floor(t);if(!isFinite(t)||!(t>0))return null;if(!(t>1))return up;return lp((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,i){e.setTime(+e+i*t)}),(function(e,i){return(i-e)/t}))};var hp=1e3;var cp=6e4;var dp=36e5;var fp=864e5;var pp=6048e5;var yp=lp((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*hp)}),(function(t,e){return(e-t)/hp}),(function(t){return t.getUTCSeconds()}));var vp=lp((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*hp)}),(function(t,e){t.setTime(+t+e*cp)}),(function(t,e){return(e-t)/cp}),(function(t){return t.getMinutes()}));var gp=lp((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*hp-t.getMinutes()*cp)}),(function(t,e){t.setTime(+t+e*dp)}),(function(t,e){return(e-t)/dp}),(function(t){return t.getHours()}));var bp=lp((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*cp)/fp}),(function(t){return t.getDate()-1}));function mp(t){return lp((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7);e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e*7)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*cp)/pp}))}var Ap=mp(0);var wp=mp(1);var Sp=mp(2);var xp=mp(3);var kp=mp(4);var Lp=mp(5);var _p=mp(6);var Cp=lp((function(t){t.setDate(1);t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12}),(function(t){return t.getMonth()}));var Dp=lp((function(t){t.setMonth(0,1);t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Dp.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:lp((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t);e.setMonth(0,1);e.setHours(0,0,0,0)}),(function(e,i){e.setFullYear(e.getFullYear()+i*t)}))};var Mp=lp((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/fp}),(function(t){return t.getUTCDate()-1}));function Up(t){return lp((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7);e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e*7)}),(function(t,e){return(e-t)/pp}))}var Tp=Up(0);var Ep=Up(1);var Ip=Up(2);var Np=Up(3);var Wp=Up(4);var Hp=Up(5);var Gp=Up(6);var Pp=lp((function(t){t.setUTCMonth(0,1);t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Pp.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:lp((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t);e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)}),(function(e,i){e.setUTCFullYear(e.getUTCFullYear()+i*t)}))};function Op(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var Vp="$";function Rp(){}Rp.prototype=Yp.prototype={constructor:Rp,has:function(t){return Vp+t in this},get:function(t){return this[Vp+t]},set:function(t,e){this[Vp+t]=e;return this},remove:function(t){var e=Vp+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===Vp)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===Vp)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===Vp)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===Vp)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===Vp)++t;return t},empty:function(){for(var t in this)if(t[0]===Vp)return false;return true},each:function(t){for(var e in this)if(e[0]===Vp)t(this[e],e.slice(1),this)}};function Yp(t,e){var i=new Rp;if(t instanceof Rp)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}function zp(){var t=[],e=[],i,r,n;function s(e,n,a,o){if(n>=t.length){if(i!=null)e.sort(i);return r!=null?r(e):e}var l=-1,u=e.length,h=t[n++],c,d,f=Yp(),p,y=a();while(++l<u){if(p=f.get(c=h(d=e[l])+"")){p.push(d)}else{f.set(c,[d])}}f.each((function(t,e){o(y,e,s(t,n,a,o))}));return y}function a(i,n){if(++n>t.length)return i;var s,o=e[n-1];if(r!=null&&n>=t.length)s=i.entries();else s=[],i.each((function(t,e){s.push({key:e,values:a(t,n)})}));return o!=null?s.sort((function(t,e){return o(t.key,e.key)})):s}return n={object:function(t){return s(t,0,Xp,Fp)},map:function(t){return s(t,0,Bp,Kp)},entries:function(t){return a(s(t,0,Bp,Kp),0)},key:function(e){t.push(e);return n},sortKeys:function(i){e[t.length-1]=i;return n},sortValues:function(t){i=t;return n},rollup:function(t){r=t;return n}}}function Xp(){return{}}function Fp(t,e,i){t[e]=i}function Bp(){return Yp()}function Kp(t,e,i){t.set(e,i)}var qp=Array.prototype;var jp=qp.map;var $p=qp.slice;var Zp={name:"implicit"};function Qp(){var t=Yp(),e=[],i=[],r=Zp;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==Zp)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=Yp();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=$p.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return Qp(e,i).unknown(r)};Op.apply(n,arguments);return n}function Jp(){var t=Qp().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=Zf(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return Jp(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return Op.apply(h(),arguments)}function ty(t){var e=t.copy;t.padding=t.paddingOuter;delete t.paddingInner;delete t.paddingOuter;t.copy=function(){return ty(e())};return t}function ey(){return ty(Jp.apply(null,arguments).paddingInner(1))}function iy(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function ry(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function ny(){}var sy=.7;var ay=1/sy;var oy="\\s*([+-]?\\d+)\\s*",ly="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",uy="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hy=/^#([0-9a-f]{3,8})$/,cy=new RegExp("^rgb\\("+[oy,oy,oy]+"\\)$"),dy=new RegExp("^rgb\\("+[uy,uy,uy]+"\\)$"),fy=new RegExp("^rgba\\("+[oy,oy,oy,ly]+"\\)$"),py=new RegExp("^rgba\\("+[uy,uy,uy,ly]+"\\)$"),yy=new RegExp("^hsl\\("+[ly,uy,uy]+"\\)$"),vy=new RegExp("^hsla\\("+[ly,uy,uy,ly]+"\\)$");var gy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};iy(ny,wy,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:by,formatHex:by,formatHsl:my,formatRgb:Ay,toString:Ay});function by(){return this.rgb().formatHex()}function my(){return Ty(this).formatHsl()}function Ay(){return this.rgb().formatRgb()}function wy(t){var e,i;t=(t+"").trim().toLowerCase();return(e=hy.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?Sy(e):i===3?new _y(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?xy(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?xy(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=cy.exec(t))?new _y(e[1],e[2],e[3],1):(e=dy.exec(t))?new _y(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=fy.exec(t))?xy(e[1],e[2],e[3],e[4]):(e=py.exec(t))?xy(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=yy.exec(t))?Uy(e[1],e[2]/100,e[3]/100,1):(e=vy.exec(t))?Uy(e[1],e[2]/100,e[3]/100,e[4]):gy.hasOwnProperty(t)?Sy(gy[t]):t==="transparent"?new _y(NaN,NaN,NaN,0):null}function Sy(t){return new _y(t>>16&255,t>>8&255,t&255,1)}function xy(t,e,i,r){if(r<=0)t=e=i=NaN;return new _y(t,e,i,r)}function ky(t){if(!(t instanceof ny))t=wy(t);if(!t)return new _y;t=t.rgb();return new _y(t.r,t.g,t.b,t.opacity)}function Ly(t,e,i,r){return arguments.length===1?ky(t):new _y(t,e,i,r==null?1:r)}function _y(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}iy(_y,Ly,ry(ny,{brighter:function(t){t=t==null?ay:Math.pow(ay,t);return new _y(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?sy:Math.pow(sy,t);return new _y(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:Cy,formatHex:Cy,formatRgb:Dy,toString:Dy}));function Cy(){return"#"+My(this.r)+My(this.g)+My(this.b)}function Dy(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function My(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function Uy(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new Iy(t,e,i,r)}function Ty(t){if(t instanceof Iy)return new Iy(t.h,t.s,t.l,t.opacity);if(!(t instanceof ny))t=wy(t);if(!t)return new Iy;if(t instanceof Iy)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new Iy(a,o,l,t.opacity)}function Ey(t,e,i,r){return arguments.length===1?Ty(t):new Iy(t,e,i,r==null?1:r)}function Iy(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}iy(Iy,Ey,ry(ny,{brighter:function(t){t=t==null?ay:Math.pow(ay,t);return new Iy(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?sy:Math.pow(sy,t);return new Iy(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new _y(Ny(t>=240?t-240:t+120,n,r),Ny(t,n,r),Ny(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Ny(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function Wy(t){return function(){return t}}function Hy(t,e){return function(i){return t+i*e}}function Gy(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function Py(t){return(t=+t)===1?Oy:function(e,i){return i-e?Gy(e,i,t):Wy(isNaN(e)?i:e)}}function Oy(t,e){var i=e-t;return i?Hy(t,i):Wy(isNaN(t)?e:t)}var Vy=function t(e){var i=Py(e);function r(t,e){var r=i((t=Ly(t)).r,(e=Ly(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=Oy(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function Ry(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function Yy(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function zy(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=Qy(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function Xy(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function Fy(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function By(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=Qy(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var Ky=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qy=new RegExp(Ky.source,"g");function jy(t){return function(){return t}}function $y(t){return function(e){return t(e)+""}}function Zy(t,e){var i=Ky.lastIndex=qy.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=Ky.exec(t))&&(n=qy.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:Fy(r,n)})}i=qy.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?$y(l[0].x):jy(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function Qy(t,e){var i=typeof e,r;return e==null||i==="boolean"?Wy(e):(i==="number"?Fy:i==="string"?(r=wy(e))?(e=r,Vy):Zy:e instanceof wy?Vy:e instanceof Date?Xy:Yy(e)?Ry:Array.isArray(e)?zy:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?By:Fy)(t,e)}function Jy(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var tv=180/Math.PI;var ev={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function iv(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*tv,skewX:Math.atan(l)*tv,scaleX:a,scaleY:o}}var rv,nv,sv,av;function ov(t){if(t==="none")return ev;if(!rv)rv=document.createElement("DIV"),nv=document.documentElement,sv=document.defaultView;rv.style.transform=t;t=sv.getComputedStyle(nv.appendChild(rv),null).getPropertyValue("transform");nv.removeChild(rv);t=t.slice(7,-1).split(",");return iv(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function lv(t){if(t==null)return ev;if(!av)av=document.createElementNS("http://www.w3.org/2000/svg","g");av.setAttribute("transform",t);if(!(t=av.transform.baseVal.consolidate()))return ev;t=t.matrix;return iv(t.a,t.b,t.c,t.d,t.e,t.f)}function uv(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:Fy(t,n)},{i:l-2,x:Fy(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:Fy(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:Fy(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:Fy(t,i)},{i:o-2,x:Fy(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var hv=uv(ov,"px, ","px)","deg)");var cv=uv(lv,", ",")",")");function dv(t){return function(){return t}}function fv(t){return+t}var pv=[0,1];function yv(t){return t}function vv(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:dv(isNaN(e)?NaN:.5)}function gv(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function bv(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=vv(n,r),s=i(a,s);else r=vv(r,n),s=i(s,a);return function(t){return s(r(t))}}function mv(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=vv(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=$f(t,e,1,r)-1;return s[i](n[i](e))}}function Av(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function wv(){var t=pv,e=pv,i=Qy,r,n,s,a=yv,o,l,u;function h(){o=Math.min(t.length,e.length)>2?mv:bv;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),Fy)))(i)))};c.domain=function(e){return arguments.length?(t=jp.call(e,fv),a===yv||(a=gv(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=$p.call(t),h()):e.slice()};c.rangeRound=function(t){return e=$p.call(t),i=Jy,h()};c.clamp=function(e){return arguments.length?(a=e?gv(t):yv,c):a!==yv};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function Sv(t,e){return wv()(t,e)}function xv(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function kv(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function Lv(t){return t=kv(Math.abs(t)),t?t[1]:NaN}function _v(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function Cv(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var Dv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mv(t){if(!(e=Dv.exec(t)))throw new Error("invalid format: "+t);var e;return new Uv({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Mv.prototype=Uv.prototype;function Uv(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}Uv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Tv(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var Ev;function Iv(t,e){var i=kv(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(Ev=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+kv(t,Math.max(0,e+s-1))[0]}function Nv(t,e){var i=kv(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var Wv={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:xv,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Nv(t*100,e)},r:Nv,s:Iv,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Hv(t){return t}var Gv=Array.prototype.map,Pv=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ov(t){var e=t.grouping===undefined||t.thousands===undefined?Hv:_v(Gv.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?Hv:Cv(Gv.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=Mv(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!Wv[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=Wv[b],S=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function x(t){var i=m,r=A,a,d,x;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var k=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=Tv(t);if(k&&+t===0&&c!=="+")k=false;i=(k?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?Pv[8+Ev/3]:"")+r+(k&&c==="("?")":"");if(S){a=-1,d=t.length;while(++a<d){if(x=t.charCodeAt(a),48>x||x>57){r=(x===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var L=i.length+t.length+r.length,_=L<p?new Array(p-L+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,L=_.length>>1)+i+t+r+_.slice(L);break;default:t=_+i+t+r;break}return s(t)}x.toString=function(){return t+""};return x}function h(t,e){var i=u((t=Mv(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(Lv(e)/3)))*3,n=Math.pow(10,-r),s=Pv[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var Vv;var Rv;var Yv;zv({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function zv(t){Vv=Ov(t);Rv=Vv.format;Yv=Vv.formatPrefix;return Vv}function Xv(t){return Math.max(0,-Lv(Math.abs(t)))}function Fv(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lv(e)/3)))*3-Lv(Math.abs(t)))}function Bv(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,Lv(e)-Lv(t))+1}function Kv(t,e,i,r){var n=rp(t,e,i),s;r=Mv(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=Fv(n,a)))r.precision=s;return Yv(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=Bv(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=Xv(n)))r.precision=s-(r.type==="%")*2;break}}return Rv(r)}function qv(t){var e=t.domain;t.ticks=function(t){var i=e();return ep(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return Kv(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=ip(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=ip(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=ip(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function jv(){var t=Sv(yv,yv);t.copy=function(){return Av(t,jv())};Op.apply(t,arguments);return qv(t)}function $v(t,e){t=t.slice();var i=0,r=t.length-1,n=t[i],s=t[r],a;if(s<n){a=i,i=r,r=a;a=n,n=s,s=a}t[i]=e.floor(n);t[r]=e.ceil(s);return t}function Zv(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);e.setFullYear(t.y);return e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Qv(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));e.setUTCFullYear(t.y);return e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Jv(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}function tg(t){var e=t.dateTime,i=t.date,r=t.time,n=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths;var u=og(n),h=lg(n),c=og(s),d=lg(s),f=og(a),p=lg(a),y=og(o),v=lg(o),g=og(l),b=lg(l);var m={a:I,A:N,b:W,B:H,c:null,d:Mg,e:Mg,f:Ng,g:Fg,G:Kg,H:Ug,I:Tg,j:Eg,L:Ig,m:Wg,M:Hg,p:G,q:P,Q:vb,s:gb,S:Gg,u:Pg,U:Og,V:Rg,w:Yg,W:zg,x:null,X:null,y:Xg,Y:Bg,Z:qg,"%":yb};var A={a:O,A:V,b:R,B:Y,c:null,d:jg,e:jg,f:tb,g:cb,G:fb,H:$g,I:Zg,j:Qg,L:Jg,m:eb,M:ib,p:z,q:X,Q:vb,s:gb,S:rb,u:nb,U:sb,V:ob,w:lb,W:ub,x:null,X:null,y:hb,Y:db,Z:pb,"%":yb};var w={a:_,A:C,b:D,B:M,c:U,d:mg,e:mg,f:Lg,g:yg,G:pg,H:wg,I:wg,j:Ag,L:kg,m:bg,M:Sg,p:L,q:gg,Q:Cg,s:Dg,S:xg,u:hg,U:cg,V:dg,w:ug,W:fg,x:T,X:E,y:yg,Y:pg,Z:vg,"%":_g};m.x=S(i,m);m.X=S(r,m);m.c=S(e,m);A.x=S(i,A);A.X=S(r,A);A.c=S(e,A);function S(t,e){return function(i){var r=[],n=-1,s=0,a=t.length,o,l,u;if(!(i instanceof Date))i=new Date(+i);while(++n<a){if(t.charCodeAt(n)===37){r.push(t.slice(s,n));if((l=eg[o=t.charAt(++n)])!=null)o=t.charAt(++n);else l=o==="e"?" ":"0";if(u=e[o])o=u(i,l);r.push(o);s=n+1}}r.push(t.slice(s,n));return r.join("")}}function x(t,e){return function(i){var r=Jv(1900,undefined,1),n=k(r,t,i+="",0),s,a;if(n!=i.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(r.s*1e3+("L"in r?r.L:0));if(e&&!("Z"in r))r.Z=0;if("p"in r)r.H=r.H%12+r.p*12;if(r.m===undefined)r.m="q"in r?r.q:0;if("V"in r){if(r.V<1||r.V>53)return null;if(!("w"in r))r.w=1;if("Z"in r){s=Qv(Jv(r.y,0,1)),a=s.getUTCDay();s=a>4||a===0?Ep.ceil(s):Ep(s);s=Mp.offset(s,(r.V-1)*7);r.y=s.getUTCFullYear();r.m=s.getUTCMonth();r.d=s.getUTCDate()+(r.w+6)%7}else{s=Zv(Jv(r.y,0,1)),a=s.getDay();s=a>4||a===0?wp.ceil(s):wp(s);s=bp.offset(s,(r.V-1)*7);r.y=s.getFullYear();r.m=s.getMonth();r.d=s.getDate()+(r.w+6)%7}}else if("W"in r||"U"in r){if(!("w"in r))r.w="u"in r?r.u%7:"W"in r?1:0;a="Z"in r?Qv(Jv(r.y,0,1)).getUTCDay():Zv(Jv(r.y,0,1)).getDay();r.m=0;r.d="W"in r?(r.w+6)%7+r.W*7-(a+5)%7:r.w+r.U*7-(a+6)%7}if("Z"in r){r.H+=r.Z/100|0;r.M+=r.Z%100;return Qv(r)}return Zv(r)}}function k(t,e,i,r){var n=0,s=e.length,a=i.length,o,l;while(n<s){if(r>=a)return-1;o=e.charCodeAt(n++);if(o===37){o=e.charAt(n++);l=w[o in eg?e.charAt(n++):o];if(!l||(r=l(t,i,r))<0)return-1}else if(o!=i.charCodeAt(r++)){return-1}}return r}function L(t,e,i){var r=u.exec(e.slice(i));return r?(t.p=h[r[0].toLowerCase()],i+r[0].length):-1}function _(t,e,i){var r=f.exec(e.slice(i));return r?(t.w=p[r[0].toLowerCase()],i+r[0].length):-1}function C(t,e,i){var r=c.exec(e.slice(i));return r?(t.w=d[r[0].toLowerCase()],i+r[0].length):-1}function D(t,e,i){var r=g.exec(e.slice(i));return r?(t.m=b[r[0].toLowerCase()],i+r[0].length):-1}function M(t,e,i){var r=y.exec(e.slice(i));return r?(t.m=v[r[0].toLowerCase()],i+r[0].length):-1}function U(t,i,r){return k(t,e,i,r)}function T(t,e,r){return k(t,i,e,r)}function E(t,e,i){return k(t,r,e,i)}function I(t){return a[t.getDay()]}function N(t){return s[t.getDay()]}function W(t){return l[t.getMonth()]}function H(t){return o[t.getMonth()]}function G(t){return n[+(t.getHours()>=12)]}function P(t){return 1+~~(t.getMonth()/3)}function O(t){return a[t.getUTCDay()]}function V(t){return s[t.getUTCDay()]}function R(t){return l[t.getUTCMonth()]}function Y(t){return o[t.getUTCMonth()]}function z(t){return n[+(t.getUTCHours()>=12)]}function X(t){return 1+~~(t.getUTCMonth()/3)}return{format:function(t){var e=S(t+="",m);e.toString=function(){return t};return e},parse:function(t){var e=x(t+="",false);e.toString=function(){return t};return e},utcFormat:function(t){var e=S(t+="",A);e.toString=function(){return t};return e},utcParse:function(t){var e=x(t+="",true);e.toString=function(){return t};return e}}}var eg={"-":"",_:" ",0:"0"},ig=/^\s*\d+/,rg=/^%/,ng=/[\\^$*+?|[\]().{}]/g;function sg(t,e,i){var r=t<0?"-":"",n=(r?-t:t)+"",s=n.length;return r+(s<i?new Array(i-s+1).join(e)+n:n)}function ag(t){return t.replace(ng,"\\$&")}function og(t){return new RegExp("^(?:"+t.map(ag).join("|")+")","i")}function lg(t){var e={},i=-1,r=t.length;while(++i<r)e[t[i].toLowerCase()]=i;return e}function ug(t,e,i){var r=ig.exec(e.slice(i,i+1));return r?(t.w=+r[0],i+r[0].length):-1}function hg(t,e,i){var r=ig.exec(e.slice(i,i+1));return r?(t.u=+r[0],i+r[0].length):-1}function cg(t,e,i){var r=ig.exec(e.slice(i,i+2));return r?(t.U=+r[0],i+r[0].length):-1}function dg(t,e,i){var r=ig.exec(e.slice(i,i+2));return r?(t.V=+r[0],i+r[0].length):-1}function fg(t,e,i){var r=ig.exec(e.slice(i,i+2));return r?(t.W=+r[0],i+r[0].length):-1}function pg(t,e,i){var r=ig.exec(e.slice(i,i+4));return r?(t.y=+r[0],i+r[0].length):-1}function yg(t,e,i){var r=ig.exec(e.slice(i,i+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),i+r[0].length):-1}function vg(t,e,i){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),i+r[0].length):-1}function gg(t,e,i){var r=ig.exec(e.slice(i,i+1));return r?(t.q=r[0]*3-3,i+r[0].length):-1}function bg(t,e,i){var r=ig.exec(e.slice(i,i+2));return r?(t.m=r[0]-1,i+r[0].length):-1}function mg(t,e,i){var r=ig.exec(e.slice(i,i+2));return r?(t.d=+r[0],i+r[0].length):-1}function Ag(t,e,i){var r=ig.exec(e.slice(i,i+3));return r?(t.m=0,t.d=+r[0],i+r[0].length):-1}function wg(t,e,i){var r=ig.exec(e.slice(i,i+2));return r?(t.H=+r[0],i+r[0].length):-1}function Sg(t,e,i){var r=ig.exec(e.slice(i,i+2));return r?(t.M=+r[0],i+r[0].length):-1}function xg(t,e,i){var r=ig.exec(e.slice(i,i+2));return r?(t.S=+r[0],i+r[0].length):-1}function kg(t,e,i){var r=ig.exec(e.slice(i,i+3));return r?(t.L=+r[0],i+r[0].length):-1}function Lg(t,e,i){var r=ig.exec(e.slice(i,i+6));return r?(t.L=Math.floor(r[0]/1e3),i+r[0].length):-1}function _g(t,e,i){var r=rg.exec(e.slice(i,i+1));return r?i+r[0].length:-1}function Cg(t,e,i){var r=ig.exec(e.slice(i));return r?(t.Q=+r[0],i+r[0].length):-1}function Dg(t,e,i){var r=ig.exec(e.slice(i));return r?(t.s=+r[0],i+r[0].length):-1}function Mg(t,e){return sg(t.getDate(),e,2)}function Ug(t,e){return sg(t.getHours(),e,2)}function Tg(t,e){return sg(t.getHours()%12||12,e,2)}function Eg(t,e){return sg(1+bp.count(Dp(t),t),e,3)}function Ig(t,e){return sg(t.getMilliseconds(),e,3)}function Ng(t,e){return Ig(t,e)+"000"}function Wg(t,e){return sg(t.getMonth()+1,e,2)}function Hg(t,e){return sg(t.getMinutes(),e,2)}function Gg(t,e){return sg(t.getSeconds(),e,2)}function Pg(t){var e=t.getDay();return e===0?7:e}function Og(t,e){return sg(Ap.count(Dp(t)-1,t),e,2)}function Vg(t){var e=t.getDay();return e>=4||e===0?kp(t):kp.ceil(t)}function Rg(t,e){t=Vg(t);return sg(kp.count(Dp(t),t)+(Dp(t).getDay()===4),e,2)}function Yg(t){return t.getDay()}function zg(t,e){return sg(wp.count(Dp(t)-1,t),e,2)}function Xg(t,e){return sg(t.getFullYear()%100,e,2)}function Fg(t,e){t=Vg(t);return sg(t.getFullYear()%100,e,2)}function Bg(t,e){return sg(t.getFullYear()%1e4,e,4)}function Kg(t,e){var i=t.getDay();t=i>=4||i===0?kp(t):kp.ceil(t);return sg(t.getFullYear()%1e4,e,4)}function qg(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+sg(e/60|0,"0",2)+sg(e%60,"0",2)}function jg(t,e){return sg(t.getUTCDate(),e,2)}function $g(t,e){return sg(t.getUTCHours(),e,2)}function Zg(t,e){return sg(t.getUTCHours()%12||12,e,2)}function Qg(t,e){return sg(1+Mp.count(Pp(t),t),e,3)}function Jg(t,e){return sg(t.getUTCMilliseconds(),e,3)}function tb(t,e){return Jg(t,e)+"000"}function eb(t,e){return sg(t.getUTCMonth()+1,e,2)}function ib(t,e){return sg(t.getUTCMinutes(),e,2)}function rb(t,e){return sg(t.getUTCSeconds(),e,2)}function nb(t){var e=t.getUTCDay();return e===0?7:e}function sb(t,e){return sg(Tp.count(Pp(t)-1,t),e,2)}function ab(t){var e=t.getUTCDay();return e>=4||e===0?Wp(t):Wp.ceil(t)}function ob(t,e){t=ab(t);return sg(Wp.count(Pp(t),t)+(Pp(t).getUTCDay()===4),e,2)}function lb(t){return t.getUTCDay()}function ub(t,e){return sg(Ep.count(Pp(t)-1,t),e,2)}function hb(t,e){return sg(t.getUTCFullYear()%100,e,2)}function cb(t,e){t=ab(t);return sg(t.getUTCFullYear()%100,e,2)}function db(t,e){return sg(t.getUTCFullYear()%1e4,e,4)}function fb(t,e){var i=t.getUTCDay();t=i>=4||i===0?Wp(t):Wp.ceil(t);return sg(t.getUTCFullYear()%1e4,e,4)}function pb(){return"+0000"}function yb(){return"%"}function vb(t){return+t}function gb(t){return Math.floor(+t/1e3)}var bb;var mb;Ab({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ab(t){bb=tg(t);mb=bb.format;return bb}var wb=1e3,Sb=wb*60,xb=Sb*60,kb=xb*24,Lb=kb*7,_b=kb*30,Cb=kb*365;function Db(t){return new Date(t)}function Mb(t){return t instanceof Date?+t:+new Date(+t)}function Ub(t,e,i,r,n,s,a,o,l){var u=Sv(yv,yv),h=u.invert,c=u.domain;var d=l(".%L"),f=l(":%S"),p=l("%I:%M"),y=l("%I %p"),v=l("%a %d"),g=l("%b %d"),b=l("%B"),m=l("%Y");var A=[[a,1,wb],[a,5,5*wb],[a,15,15*wb],[a,30,30*wb],[s,1,Sb],[s,5,5*Sb],[s,15,15*Sb],[s,30,30*Sb],[n,1,xb],[n,3,3*xb],[n,6,6*xb],[n,12,12*xb],[r,1,kb],[r,2,2*kb],[i,1,Lb],[e,1,_b],[e,3,3*_b],[t,1,Cb]];function w(o){return(a(o)<o?d:s(o)<o?f:n(o)<o?p:r(o)<o?y:e(o)<o?i(o)<o?v:g:t(o)<o?b:m)(o)}function S(e,i,r,n){if(e==null)e=10;if(typeof e==="number"){var s=Math.abs(r-i)/e,a=Kf((function(t){return t[2]})).right(A,s);if(a===A.length){n=rp(i/Cb,r/Cb,e);e=t}else if(a){a=A[s/A[a-1][2]<A[a][2]/s?a-1:a];n=a[1];e=a[0]}else{n=Math.max(rp(i,r,e),1);e=o}}return n==null?e:e.every(n)}u.invert=function(t){return new Date(h(t))};u.domain=function(t){return arguments.length?c(jp.call(t,Mb)):c().map(Db)};u.ticks=function(t,e){var i=c(),r=i[0],n=i[i.length-1],s=n<r,a;if(s)a=r,r=n,n=a;a=S(t,r,n,e);a=a?a.range(r,n+1):[];return s?a.reverse():a};u.tickFormat=function(t,e){return e==null?w:l(e)};u.nice=function(t,e){var i=c();return(t=S(t,i[0],i[i.length-1],e))?c($v(i,t)):u};u.copy=function(){return Av(u,Ub(t,e,i,r,n,s,a,o,l))};return u}function Tb(){return Op.apply(Ub(Dp,Cp,Ap,bp,gp,vp,yp,up,mb).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var Eb=s.propDefaultValues;var Ib=function(){function t(){}return t}();Ib.mainTitle="Dumbbell Plot Title";Ib.subTitle="This is the dumbbell plot's subtitle";Ib.height=300;Ib.width=650;Ib.margin={top:300*.01,bottom:300*.01,right:650*.01,left:650*.01};Ib.padding={top:20,bottom:50,right:50,left:50};Ib.ordinalAccessor="date";Ib.valueAccessor="value";Ib.seriesAccessor="category";Ib.focusMarker={key:"",sizeFromBar:12};Ib.marker={visible:true,type:"dot",sizeFromBar:8};Ib.barStyle={opacity:1,width:1,colorRule:"default"};Ib.differenceLabel={visible:false,placement:"left",calculation:"difference",format:"0[.][0][0]a"};Ib.layout=Eb.layout;Ib.accessibility=Eb.accessibility;Ib.highestHeadingLevel=Eb.highestHeadingLevel;Ib.sortOrder=Eb.sortOrder;Ib.xAxis=Eb.xAxisDate;Ib.yAxis=Eb.yAxis;Ib.showBaselineX=Eb.showBaselineFalse;Ib.showBaselineY=Eb.showBaselineFalse;Ib.wrapLabel=Eb.wrapLabel;Ib.colorPalette=Eb.colorPaletteCategorical;Ib.hoverStyle=Eb.hoverStyle;Ib.clickStyle=Eb.clickStyle;Ib.referenceStyle=Eb.referenceStyle;Ib.cursor=Eb.cursor;Ib.roundedCorner=Eb.roundedCorner;Ib.barIntervalRatio=Eb.barIntervalRatio;Ib.hoverOpacity=Eb.hoverOpacity;Ib.dataLabel=Eb.dataLabelEnds;Ib.legend=Eb.hiddenLegend;Ib.tooltipLabel=Eb.tooltipLabel;Ib.showTooltip=Eb.showTooltip;Ib.suppressEvents=Eb.suppressEvents;Ib.referenceLines=Eb.referenceLines;Ib.annotations=Eb.annotations;Ib.clickHighlight=Eb.clickHighlight;Ib.seriesLabel=Eb.seriesLabel;function Nb(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function Wb(t){return 1-Math.sqrt(1-t*t)}var Hb={value:function(){}};function Gb(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new Pb(i)}function Pb(t){this._=t}function Ob(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}Pb.prototype=Gb.prototype={constructor:Pb,on:function(t,e){var i=this._,r=Ob(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=Vb(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=Rb(i[n],t.name,e);else if(e==null)for(n in i)i[n]=Rb(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new Pb(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function Vb(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function Rb(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=Hb,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var Yb=0,zb=0,Xb=0,Fb=1e3,Bb,Kb,qb=0,jb=0,$b=0,Zb=typeof performance==="object"&&performance.now?performance:Date,Qb=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Jb(){return jb||(Qb(tm),jb=Zb.now()+$b)}function tm(){jb=0}function em(){this._call=this._time=this._next=null}em.prototype=im.prototype={constructor:em,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?Jb():+i)+(e==null?0:+e);if(!this._next&&Kb!==this){if(Kb)Kb._next=this;else Bb=this;Kb=this}this._call=t;this._time=i;om()},stop:function(){if(this._call){this._call=null;this._time=Infinity;om()}}};function im(t,e,i){var r=new em;r.restart(t,e,i);return r}function rm(){Jb();++Yb;var t=Bb,e;while(t){if((e=jb-t._time)>=0)t._call.call(null,e);t=t._next}--Yb}function nm(){jb=(qb=Zb.now())+$b;Yb=zb=0;try{rm()}finally{Yb=0;am();jb=0}}function sm(){var t=Zb.now(),e=t-qb;if(e>Fb)$b-=e,qb=t}function am(){var t,e=Bb,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:Bb=i}}Kb=t;om(r)}function om(t){if(Yb)return;if(zb)zb=clearTimeout(zb);var e=t-jb;if(e>24){if(t<Infinity)zb=setTimeout(nm,t-Zb.now()-$b);if(Xb)Xb=clearInterval(Xb)}else{if(!Xb)qb=Zb.now(),Xb=setInterval(sm,Fb);Yb=1,Qb(nm)}}function lm(t,e,i){var r=new em;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var um=Gb("start","end","interrupt");var hm=[];var cm=0;var dm=1;var fm=2;var pm=3;var ym=4;var vm=5;var gm=6;function bm(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;Sm(t,i,{name:e,index:r,group:n,on:um,tween:hm,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:cm})}function mm(t,e){var i=wm(t,e);if(i.state>cm)throw new Error("too late; already scheduled");return i}function Am(t,e){var i=wm(t,e);if(i.state>fm)throw new Error("too late; already started");return i}function wm(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function Sm(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=im(s,0,i.time);function s(t){i.state=dm;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==dm)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===pm)return lm(a);if(d.state===ym){d.state=gm;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=gm;d.timer.stop();delete r[u]}}lm((function(){if(i.state===pm){i.state=ym;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=fm;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==fm)return;i.state=pm;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=vm,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===vm){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=gm;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function xm(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>fm&&r.state<vm;r.state=gm;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function km(t){return this.each((function(){xm(this,t)}))}function Lm(t,e){var i,r;return function(){var n=Am(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function _m(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=Am(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function Cm(t,e){var i=this._id;t+="";if(arguments.length<2){var r=wm(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?Lm:_m)(i,t,e))}function Dm(t,e,i){var r=t._id;t.each((function(){var t=Am(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return wm(t,r).value[e]}}function Mm(t,e){var i;return(typeof e==="number"?Fy:e instanceof wy?Vy:(i=wy(e))?(e=i,Vy):Zy)(t,e)}function Um(t){return function(){this.removeAttribute(t)}}function Tm(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Em(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function Im(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function Nm(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function Wm(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function Hm(t,e){var i=rd(t),r=i==="transform"?cv:Mm;return this.attrTween(t,typeof e==="function"?(i.local?Wm:Nm)(i,r,Dm(this,"attr."+t,e)):e==null?(i.local?Tm:Um)(i):(i.local?Im:Em)(i,r,e+""))}function Gm(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function Pm(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function Om(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=rd(t);return this.tween(i,(r.local?Gm:Pm)(r,e))}function Vm(t,e){return function(){mm(this,t).delay=+e.apply(this,arguments)}}function Rm(t,e){return e=+e,function(){mm(this,t).delay=e}}function Ym(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?Vm:Rm)(e,t)):wm(this.node(),e).delay}function zm(t,e){return function(){Am(this,t).duration=+e.apply(this,arguments)}}function Xm(t,e){return e=+e,function(){Am(this,t).duration=e}}function Fm(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?zm:Xm)(e,t)):wm(this.node(),e).duration}function Bm(t,e){if(typeof e!=="function")throw new Error;return function(){Am(this,t).ease=e}}function Km(t){var e=this._id;return arguments.length?this.each(Bm(e,t)):wm(this.node(),e).ease}function qm(t){if(typeof t!=="function")t=fd(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new gA(r,this._parents,this._name,this._id)}function jm(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new gA(a,this._parents,this._name,this._id)}function $m(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function Zm(t,e,i){var r,n,s=$m(e)?mm:Am;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function Qm(t,e){var i=this._id;return arguments.length<2?wm(this.node(),i).on.on(t):this.each(Zm(i,t,e))}function Jm(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function tA(){return this.on("end.remove",Jm(this._id))}function eA(t){var e=this._name,i=this._id;if(typeof t!=="function")t=ld(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;bm(u[d],e,i,d,u,wm(h,i))}}}return new gA(s,this._parents,e,i)}function iA(t){var e=this._name,i=this._id;if(typeof t!=="function")t=cd(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=wm(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){bm(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new gA(s,a,e,i)}var rA=Xf.prototype.constructor;function nA(){return new rA(this._groups,this._parents)}function sA(t,e){var i,r,n;return function(){var s=Kd(this,t),a=(this.style.removeProperty(t),Kd(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function aA(t){return function(){this.style.removeProperty(t)}}function oA(t,e,i){var r,n;return function(){var s=Kd(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function lA(t,e,i){var r,n,s;return function(){var a=Kd(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),Kd(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function uA(t,e,i){var r=(t+="")==="transform"?hv:Mm;return e==null?this.styleTween(t,sA(t,r)).on("end.style."+t,aA(t)):this.styleTween(t,typeof e==="function"?lA(t,r,Dm(this,"style."+t,e)):oA(t,r,e+""),i)}function hA(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function cA(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,hA(t,e,i==null?"":i))}function dA(t){return function(){this.textContent=t}}function fA(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function pA(t){return this.tween("text",typeof t==="function"?fA(Dm(this,"text",t)):dA(t==null?"":t+""))}function yA(){var t=this._name,e=this._id,i=mA();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=wm(l,e);bm(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new gA(r,this._parents,t,i)}var vA=0;function gA(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function bA(t){return Xf().transition(t)}function mA(){return++vA}var AA=Xf.prototype;gA.prototype=bA.prototype={constructor:gA,select:eA,selectAll:iA,filter:qm,merge:jm,selection:nA,transition:yA,call:AA.call,nodes:AA.nodes,node:AA.node,size:AA.size,empty:AA.empty,each:AA.each,on:Qm,attr:Hm,attrTween:Om,style:uA,styleTween:cA,text:pA,remove:tA,tween:Cm,delay:Ym,duration:Fm,ease:Km};var wA={time:null,delay:0,duration:250,ease:Nb};function SA(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return wA.time=Jb(),wA}}return i}function xA(t){var e,i;if(t instanceof gA){e=t._id,t=t._name}else{e=mA(),(i=wA).time=Jb(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){bm(l,t,e,u,a,i||SA(l,e))}}}return new gA(r,this._parents,t,e)}Xf.prototype.interrupt=km;Xf.prototype.transition=xA;var kA=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var LA=new Uint8Array(16);function _A(){if(!kA){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return kA(LA)}var CA=[];for(var DA=0;DA<256;++DA){CA[DA]=(DA+256).toString(16).substr(1)}function MA(t,e){var i=e||0;var r=CA;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function UA(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||_A)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||MA(n)}var TA=s.getAccessibleStrokes,EA=s.ensureTextContrast,IA=s.createTextStrokeFilter,NA=s.createUrl,WA=s.initializeDescriptionRoot,HA=s.initializeElementAccess,GA=s.setElementFocusHandler,PA=s.setElementAccessID,OA=s.setAccessibilityController,VA=s.hideNonessentialGroups,RA=s.setAccessTitle,YA=s.setAccessSubtitle,zA=s.setAccessLongDescription,XA=s.setAccessExecutiveSummary,FA=s.setAccessPurpose,BA=s.setAccessContext,KA=s.setAccessStatistics,qA=s.setAccessChartCounts,jA=s.setAccessXAxis,$A=s.setAccessYAxis,ZA=s.setAccessStructure,QA=s.setAccessAnnotation,JA=s.retainAccessFocus,tw=s.checkAccessFocus,ew=s.setElementInteractionAccessState,iw=s.setAccessibilityDescriptionWidth,rw=s.drawTooltip,nw=s.annotate,sw=s.chartAccessors,aw=s.checkInteraction,ow=s.checkClicked,lw=s.checkHovered,uw=s.convertVisaColor,hw=s.drawAxis,cw=s.drawGrid,dw=s.drawLegend,fw=s.setLegendInteractionState,pw=s.formatDataLabel,yw=s.getColors,vw=s.getLicenses,gw=s.getPadding,bw=s.getScopedData,mw=s.initTooltipStyle,Aw=s.overrideTitleTooltip,ww=s.placeDataLabels,Sw=s.scopeDataKeys,xw=s.visaColors,kw=s.transitionEndAll,Lw=s.validateAccessibilityProps,_w=s.findTagLevel;var Cw=t("dumbbell_plot",function(){function t(t){var r=this;e(this,t);this.mainTitle=Ib.mainTitle;this.subTitle=Ib.subTitle;this.height=Ib.height;this.width=Ib.width;this.margin=Ib.margin;this.padding=Ib.padding;this.highestHeadingLevel=Ib.highestHeadingLevel;this.ordinalAccessor=Ib.ordinalAccessor;this.valueAccessor=Ib.valueAccessor;this.seriesAccessor=Ib.seriesAccessor;this.sortOrder=Ib.sortOrder;this.xAxis=Ib.xAxis;this.yAxis=Ib.yAxis;this.wrapLabel=Ib.wrapLabel;this.layout=Ib.layout;this.showBaselineX=Ib.showBaselineX;this.showBaselineY=Ib.showBaselineY;this.colorPalette=Ib.colorPalette;this.hoverStyle=Ib.hoverStyle;this.hoverOpacity=Ib.hoverOpacity;this.clickStyle=Ib.clickStyle;this.referenceStyle=Ib.referenceStyle;this.cursor=Ib.cursor;this.focusMarker=Ib.focusMarker;this.marker=Ib.marker;this.barStyle=Ib.barStyle;this.dataLabel=Ib.dataLabel;this.seriesLabel=Ib.seriesLabel;this.differenceLabel=Ib.differenceLabel;this.showTooltip=Ib.showTooltip;this.tooltipLabel=Ib.tooltipLabel;this.accessibility=Ib.accessibility;this.legend=Ib.legend;this.annotations=Ib.annotations;this.referenceLines=Ib.referenceLines;this.suppressEvents=Ib.suppressEvents;this.clickHighlight=Ib.clickHighlight;this.unitTest=false;this.shouldValidateAccessibility=true;this.updated=true;this.time={timemillisecond:up,timesecond:yp,timeminute:vp,timehour:gp,timeday:bp,timeweek:Ap,timemonth:Cp,timeyear:Dp};this.shouldUpdateLayout=false;this.shouldValidate=false;this.shouldUpdateAnnotations=false;this.shouldUpdateReferenceLines=false;this.shouldResetRoot=false;this.shouldUpdateXAxis=false;this.shouldUpdateXGrid=false;this.shouldUpdateYAxis=false;this.shouldUpdateYGrid=false;this.shouldUpdateScales=false;this.shouldUpdateBaseline=false;this.shouldCheckValueAxis=false;this.shouldCheckLabelAxis=false;this.shouldSetColors=false;this.shouldUpdateLegend=false;this.shouldSetGlobalSelections=false;this.shouldSetSeriesSelections=false;this.shouldSetTestingAttributes=false;this.shouldUpdateData=false;this.shouldEnterUpdateExit=false;this.shouldEnterUpdateExitMarkers=false;this.shouldUpdateMarkerOpacity=false;this.shouldUpdateGeometries=false;this.shouldUpdateSeriesLabels=false;this.shouldUpdateDifferenceLabels=false;this.shouldUpdateLabels=false;this.shouldValidateInteractionKeys=false;this.shouldUpdateTableData=false;this.shouldValidateDataLabelPlacement=false;this.shouldValidateDataLabelAccessor=false;this.shouldAddStrokeUnder=false;this.shouldUpdateBaselineX=false;this.shouldUpdateBaselineY=false;this.shouldUpdateLegendData=false;this.shouldUpdateMarkerIDs=false;this.shouldValidateLayout=false;this.shouldValidateSeriesLabelPlacement=false;this.shouldValidateDiffLabelPlacement=false;this.shouldBindInteractivity=false;this.shouldBindLegendInteractivity=false;this.shouldBindSeriesInteractivity=false;this.shouldUpdateCursor=false;this.shouldSetLegendCursor=false;this.shouldSetSeriesCursor=false;this.shouldSetLabelOpacity=false;this.shouldSetSeriesLabelOpacity=false;this.shouldSetDifferenceLabelOpacity=false;this.shouldSetSelectionClass=false;this.shouldDrawInteractionState=false;this.shouldRenderMarkerGroup=false;this.shouldUpdateBarStyle=false;this.shouldUpdateMarkerSize=false;this.shouldUpdateDiffLabelColor=false;this.shouldUpdateMarkerStyle=false;this.shouldDrawMarkerGeometries=false;this.shouldUpdateMarkerData=false;this.shouldUpdateSeriesData=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityAttributes=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.topLevel="h2";this.bottomLevel="p";this.strokes={};this.handleMarkerColors=function(t,e,i){var n=r.rawColors[t.referenceIndex]||r.rawColors[0];var s=e<2&&r.clickHighlight.length?r.clickStyle.color||n:e<4?n:r.hoverStyle.color||n;var a=r.colorArr[t.referenceIndex]||r.colorArr[0];var o=e<2&&r.clickHighlight.length?r.clickStyle.color||a:e<4?a:r.hoverStyle.color||a;Ff(i[e]).attr("fill",o);return!r.accessibility.hideStrokes?r.strokes[s.toLowerCase()]:o};this.handleSeriesLabelColors=function(t,e){var i;var n;if(r.seriesInteraction){i=lw(t,r.hoverHighlight,r.innerInteractionKeys);n=ow(t,r.clickHighlight,r.innerInteractionKeys)}var s=r.rawColors[e]||r.rawColors[0];var a=r.seriesInteraction?n&&r.clickHighlight.length?r.clickStyle.color||s:i&&r.hoverHighlight?r.hoverStyle.color||s:s:s;return r.textColors[a.toLowerCase()]};this.handleLabelColors=function(t,e){var i=lw(t,r.hoverHighlight,r.innerInteractionKeys);var n=ow(t,r.clickHighlight,r.innerInteractionKeys);var s=r.rawColors[e]||r.rawColors[0];var a=n&&r.clickHighlight.length?r.clickStyle.color||s:i&&r.hoverHighlight?r.hoverStyle.color||s:s;return r.textColors[a.toLowerCase()]};this.handleBarColors=function(t,e,i){t.focusMarker=false;if(t.values[0][r.seriesAccessor]===r.focusMarker.key){t.focusMarker=0}else if(t.values[1][r.seriesAccessor]===r.focusMarker.key){t.focusMarker=1}var n=ow(t.values[0],r.clickHighlight,r.innerInteractionKeys)&&ow(t.values[1],r.clickHighlight,r.innerInteractionKeys);var s=lw(t.values[0],r.hoverHighlight,r.innerInteractionKeys)&&lw(t.values[1],r.hoverHighlight,r.innerInteractionKeys);var a=r.barStyle.colorRule==="focus"&&(t.focusMarker||t.focusMarker===0)?r.rawColors[t.focusMarker]:r.barStyle.colorRule==="greaterValue"?r.rawColors[t.greaterIndex]:r.rawColors[2];var o=n&&r.clickHighlight.length?r.clickStyle.color||a:s&&r.hoverHighlight?r.hoverStyle.color||a:a;var l=r.barStyle.colorRule==="focus"&&(t.focusMarker||t.focusMarker===0)?r.colorArr[t.focusMarker]:r.barStyle.colorRule==="greaterValue"?r.colorArr[t.greaterIndex]:r.colorArr[2];var u=n&&r.clickHighlight.length?r.clickStyle.color||l:s&&r.hoverHighlight?r.hoverStyle.color||l:l;Ff(i[e]).attr("fill",u);return!r.accessibility.hideStrokes?r.strokes[o.toLowerCase()]:u};this.handleBarOpacity=function(t,e,i){var n=aw(t.values[0],1,0,r.hoverHighlight,r.clickHighlight,r.innerInteractionKeys);var s=aw(t.values[1],1,0,r.hoverHighlight,r.clickHighlight,r.innerInteractionKeys);var a=n&&s?r.barStyle.opacity:r.hoverOpacity;Ff(i[e]).attr("stroke-opacity",a);return a};this.setBarSize=function(t,e,i){var n=ow(t.values[0],r.clickHighlight,r.innerInteractionKeys)&&ow(t.values[1],r.clickHighlight,r.innerInteractionKeys);var s=lw(t.values[0],r.hoverHighlight,r.innerInteractionKeys)&&lw(t.values[1],r.hoverHighlight,r.innerInteractionKeys);var a=r.dumbbellInteraction?n?parseFloat(r.clickStyle.strokeWidth+"")||r.barStyle.width:s?parseFloat(r.hoverStyle.strokeWidth+"")||r.barStyle.width:r.barStyle.width:r.barStyle.width;var o=r.x(t.values[0][r.xAccessor]);var l=r.y(t.values[0][r.yAccessor]);var u=r.x(t.values[1][r.xAccessor]);var h=r.y(t.values[1][r.yAccessor]);var c=r.layout==="vertical"?l>h?.001:-.001:0;var d=r.layout==="horizontal"?o>u?.001:-.001:0;var f=r.layout==="vertical"?a/2:0;var p=r.layout==="horizontal"?a/2:0;Ff(i[e]).attr("data-barSize",a).attr("data-centerX1",(function(t){return r.x(t.values[0][r.xAccessor])})).attr("data-centerY1",(function(t){return r.y(t.values[0][r.yAccessor])})).attr("data-centerX2",(function(t){return r.x(t.values[1][r.xAccessor])})).attr("data-centerY2",(function(t){return r.y(t.values[1][r.yAccessor])}));return"M "+(o+d)+" "+(l+c)+" L "+o+" "+l+" L "+(o+f)+" "+(l+p)+" L "+(u+f)+" "+(h+p)+" L "+u+" "+h+" L "+(u-f)+" "+(h-p)+" L "+(o-f)+" "+(l-p)+" L "+o+" "+l+" L "+(o+f)+" "+(l+p)+" L "+(u+f)+" "+(h+p)+" L "+u+" "+h+" L "+(u-d)+" "+(h-c)};this.setDiffLabelColor=function(t){t.focusMarker=false;if(t.values[0][r.seriesAccessor]===r.focusMarker.key){t.focusMarker=0}else if(t.values[1][r.seriesAccessor]===r.focusMarker.key){t.focusMarker=1}var e=r.barStyle.colorRule==="focus"&&(t.focusMarker||t.focusMarker===0)?r.rawColors[t.focusMarker]:r.barStyle.colorRule==="greaterValue"?r.rawColors[t.greaterIndex]:r.rawColors[2];var i;var n;if(r.dumbbellInteraction){n=ow(t.values[0],r.clickHighlight,r.innerInteractionKeys)&&ow(t.values[1],r.clickHighlight,r.innerInteractionKeys);i=lw(t.values[0],r.hoverHighlight,r.innerInteractionKeys)&&lw(t.values[1],r.hoverHighlight,r.innerInteractionKeys)}var s=r.dumbbellInteraction?n&&r.clickHighlight.length?r.clickStyle.color||e:i&&r.hoverHighlight?r.hoverStyle.color||e:e:e;return r.textColors[s.toLowerCase()]};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.mainTitleWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.subTitleWatcher=function(t,e){this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.dimensionWatcher=function(t,e){this.shouldUpdateLayout=true;this.shouldUpdateScales=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true};t.prototype.dataWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateMarkerIDs=true;this.shouldUpdateLegendData=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldValidate=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldSetLabelOpacity=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateBarStyle=true;this.shouldSetColors=true};t.prototype.idWatcher=function(t,e){this.chartID=t||"dumbbell-plot-"+UA();this.dumbbellPlotEl.id=this.chartID;this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateLegend=true;this.shouldAddStrokeUnder=true;this.shouldUpdateMarkerIDs=true};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldSetAnnotationAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.ordinalAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldUpdateGeometries=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateMarkerSize=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true;this.shouldCheckLabelAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}};t.prototype.valueAccessorWatcher=function(t,e){this.shouldUpdateTableData=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldSetGlobalSelections=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateMarkerSize=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldCheckValueAxis=true;this.shouldValidateDataLabelAccessor=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true};t.prototype.seriesAccessorWatcher=function(t,e){this.shouldUpdateTableData=true;this.shouldUpdateData=true;this.shouldSetGlobalSelections=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldUpdateLegendData=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldAddStrokeUnder=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateLegend=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateTableData=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}};t.prototype.sortWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldEnterUpdateExitMarkers=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldAddStrokeUnder=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true};t.prototype.xAxisWatcher=function(t,e){var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;var a=t&&t.format?t.format:false;var o=e&&e.format?e.format:false;var l=t&&t.unit?t.unit:false;var u=e&&e.unit?e.unit:false;if(i!==r||n!==s){this.shouldUpdateXGrid=true}if(a!==o||l!==u){this.shouldUpdateScales=true;if(l!==u){this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true}}this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true};t.prototype.yAxisWatcher=function(t,e){var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateYGrid=true}this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true};t.prototype.wrapLabelWatcher=function(t,e){this.shouldCheckLabelAxis=true};t.prototype.layoutWatcher=function(t,e){this.shouldValidateLayout=true;this.shouldValidateDataLabelPlacement=true;this.shouldValidateSeriesLabelPlacement=true;this.shouldUpdateSeriesData=true;this.shouldValidateDiffLabelPlacement=true;this.shouldUpdateScales=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldAddStrokeUnder=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true};t.prototype.showBaselineXWatcher=function(t,e){this.shouldUpdateBaselineX=true};t.prototype.showBaselineYWatcher=function(t,e){this.shouldUpdateBaselineY=true};t.prototype.paletteWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldSetColors=true;this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerStyle=true;this.shouldUpdateLegend=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDiffLabelColor=true};t.prototype.hoverStyleWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerSize=true;this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true};t.prototype.clickStyleWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerSize=true;this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true};t.prototype.hoverOpacityWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true};t.prototype.cursorWatcher=function(t,e){this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true;this.shouldSetSeriesCursor=true};t.prototype.focusMarkerWatcher=function(t,e){this.shouldDrawMarkerGeometries=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldUpdateMarkerIDs=true;this.shouldUpdateData=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldUpdateLabels=true;var i=t&&t.sizeFromBar?t.sizeFromBar:0;var r=e&&e.sizeFromBar?e.sizeFromBar:0;if(i!==r){this.shouldUpdateMarkerSize=true}var n=t&&t.key?t.key:false;var s=e&&e.key?e.key:false;if(n!==s){this.shouldUpdateDiffLabelColor=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateBarStyle=true}};t.prototype.markerWatcher=function(t,e){var i=t&&t.visible;var r=e&&e.visible;if(i!==r){this.shouldUpdateMarkerOpacity=true}var n=t&&t.type?t.type:false;var s=e&&e.type?e.type:false;if(n!==s){this.shouldRenderMarkerGroup=true;this.shouldEnterUpdateExitMarkers=true}this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldUpdateMarkerIDs=true;this.shouldUpdateMarkerData=true;this.shouldUpdateSeriesData=true;this.shouldUpdateData=true;this.shouldUpdateLabels=true;var a=t&&t.sizeFromBar?t.sizeFromBar:0;var o=e&&e.sizeFromBar?e.sizeFromBar:0;if(a!==o){this.shouldUpdateMarkerSize=true}};t.prototype.barStyleWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateDiffLabelColor=true;this.shouldDrawInteractionState=true;var i=t&&t.width?t.width:0;var r=e&&e.width?e.width:0;if(i!==r){this.shouldDrawInteractionState=true;this.shouldUpdateMarkerData=true;this.shouldUpdateData=true;this.shouldUpdateMarkerSize=true}};t.prototype.dataLabelWatcher=function(t,e){this.shouldUpdateLabels=true;this.shouldUpdateTableData=true;var i=t&&t.placement?t.placement:false;var r=e&&e.placement?e.placement:false;var n=t&&t.visible;var s=e&&e.visible;var a=t&&t.labelAccessor?t.labelAccessor:false;var o=e&&e.labelAccessor?e.labelAccessor:false;if(n!==s){this.shouldSetLabelOpacity=true}if(i!==r){this.shouldValidateDataLabelPlacement=true}if(a!==o){this.shouldValidateDataLabelAccessor=true}};t.prototype.seriesLabelWatcher=function(t,e){this.shouldValidateSeriesLabelPlacement=true;this.shouldUpdateSeriesLabels=true;this.shouldAddStrokeUnder=true;this.shouldUpdateTableData=true;var i=t&&t.visible;var r=e&&e.visible;if(i!==r){this.shouldSetSeriesLabelOpacity=true}var n=t&&t.placement?t.placement:false;var s=e&&e.placement?e.placement:false;if(n!==s){this.shouldUpdateSeriesData=true;this.shouldSetSeriesSelections=true}};t.prototype.differenceLabelWatcher=function(t,e){this.shouldUpdateDifferenceLabels=true;this.shouldUpdateDiffLabelColor=true;this.shouldAddStrokeUnder=true;this.shouldUpdateTableData=true;var i=t&&t.visible;var r=e&&e.visible;if(i!==r){this.shouldSetDifferenceLabelOpacity=true}var n=t&&t.placement?t.placement:false;var s=e&&e.placement?e.placement:false;if(n!==s){this.shouldValidateDiffLabelPlacement=true}};t.prototype.showTooltipWatcher=function(t,e){this.shouldDrawInteractionState=true};t.prototype.tooltipLabelWatcher=function(t,e){this.shouldUpdateTableData=true};t.prototype.accessibilityWatcher=function(t,e){this.shouldValidate=true;var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}var A=t&&t.hideStrokes?t.hideStrokes:false;var w=e&&e.hideStrokes?e.hideStrokes:false;if(A!==w){this.shouldUpdateBarStyle=true;this.shouldUpdateMarkerStyle=true;this.shouldAddStrokeUnder=true;this.shouldUpdateLegend=true}var S=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;var x=e&&e.keyboardNavConfig&&e.keyboardNavConfig.disabled?e.keyboardNavConfig.disabled:false;var k=t&&t.elementsAreInterface?t.elementsAreInterface:false;var L=e&&e.elementsAreInterface?e.elementsAreInterface:false;if(S!==x||k!==L){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(k!==L){this.shouldSetSelectionClass=true}};t.prototype.legendWatcher=function(t,e){this.shouldUpdateLegend=true;var i=t&&t.interactive;var r=e&&e.interactive;if(i!==r){this.shouldBindLegendInteractivity=true;this.shouldSetLegendCursor=true}};t.prototype.annotationsWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateAnnotations=true;this.shouldSetAnnotationAccessibility=true};t.prototype.valueOverrideWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldCheckValueAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateDifferenceLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaselineX=true;this.shouldUpdateBaselineY=true;this.shouldUpdateAnnotations=true};t.prototype.referenceWatcher=function(t,e){this.shouldUpdateReferenceLines=true};t.prototype.suppressWatcher=function(t,e){this.shouldBindInteractivity=true;this.shouldBindLegendInteractivity=true;this.shouldBindSeriesInteractivity=true;this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true;this.shouldSetSeriesCursor=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.hoverWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldDrawInteractionState=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateMarkerStyle=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true;this.shouldUpdateData=true;this.shouldUpdateLabels=true;this.shouldUpdateMarkerData=true;this.shouldSetGlobalSelections=true};t.prototype.clickWatcher=function(t,e){this.shouldUpdateMarkerIDs=true;this.shouldDrawInteractionState=true;this.shouldUpdateMarkerSize=true;this.shouldUpdateMarkerStyle=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true;this.shouldUpdateData=true;this.shouldUpdateLabels=true;this.shouldUpdateMarkerData=true;this.shouldSetGlobalSelections=true};t.prototype.interactionWatcher=function(t,e){this.shouldValidateInteractionKeys=true;this.shouldUpdateMarkerSize=true;this.shouldDrawInteractionState=true;this.shouldUpdateMarkerStyle=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetDifferenceLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateTableData=true;this.shouldUpdateData=true;this.shouldUpdateLabels=true;this.shouldUpdateMarkerData=true;this.shouldSetGlobalSelections=true;var i=t&&t.length===1?t[0]===this.seriesAccessor:false;var r=e&&e.length===1?e[0]===this.seriesAccessor:false;if(i!==r){this.shouldBindSeriesInteractivity=true;this.shouldSetSeriesCursor=true;this.shouldBindLegendInteractivity=true;this.shouldSetLegendCursor=true}};t.prototype.unitTestWatcher=function(t,e){this.shouldSetTestingAttributes=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.chartID=t.uniqueID||"dumbbell-plot-"+UA();t.dumbbellPlotEl.id=t.chartID;t.setTagLevels();t.checkIfSafari();t.validateLayout();t.validateDataLabelPlacement();t.validateSeriesLabelPlacement();t.validateDiffLabelPlacement();t.validateInteractionKeys();t.prepareData();t.prepareMarkerData();t.prepareSeriesData();t.prepareLegendData();t.setLayoutData();t.prepareScales();t.validateDataLabelAccessor();t.setTableData();t.shouldValidateAccessibilityProps();t.setColors();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.defaults=true;t.shouldValidateAccessibilityProps();t.renderRootElements();t.setTooltipInitialStyle();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.drawXGrid();t.drawYGrid();t.renderMarkerGroup();t.setGlobalSelections();t.setTestingAttributes();t.enterMarkerGeometries();t.updateMarkerGeometries();t.exitMarkerGeometries();t.updateMarkerSize();t.enterDumbbells();t.updateDumbbells();t.exitDumbbells();t.enterSeriesLabels();t.updateSeriesLabels();t.exitSeriesLabels();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.enterDifferenceLabels();t.updateDifferenceLabels();t.exitDifferenceLabels();t.updateMarkerIds();t.drawDumbbells();t.updateInteractionState();t.setChartCountAccessibility();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.drawLegendElements();t.drawDataLabels();t.drawSeriesLabels();t.drawDifferenceLabels();t.addStrokeUnder();t.drawReferenceLines();t.setSelectedClass();t.setLabelOpacity();t.bindLegendInteractivity();t.setLegendCursor();t.drawAnnotations();t.setAnnotationAccessibility();t.drawXAxis();t.setXAxisAccessibility();t.drawYAxis();t.setYAxisAccessibility();t.drawBaselineX();t.drawBaselineY();t.onChangeHandler();VA(t.root.node(),t.dumbbellG.node());t.setGroupAccessibilityAttributes();t.setGroupAccessibilityID();t.duration=750;t.defaults=false;e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}if(t.shouldResetRoot){t.reSetRoot();t.shouldResetRoot=false}if(t.shouldRenderMarkerGroup){t.renderMarkerGroup();t.shouldRenderMarkerGroup=false}if(t.shouldSetGlobalSelections){t.setGlobalSelections();t.shouldSetGlobalSelections=false}if(t.shouldSetSeriesSelections){t.setSeriesSelections();t.shouldSetSeriesSelections=false}if(t.shouldSetTestingAttributes){t.setTestingAttributes();t.shouldSetTestingAttributes=false}if(t.shouldUpdateXGrid){t.drawXGrid();t.shouldUpdateXGrid=false}if(t.shouldUpdateYGrid){t.drawYGrid();t.shouldUpdateYGrid=false}if(t.shouldEnterUpdateExitMarkers){t.enterMarkerGeometries();t.updateMarkerGeometries();t.exitMarkerGeometries();t.shouldEnterUpdateExitMarkers=false;t.shouldUpdateMarkerOpacity=false}if(t.shouldUpdateMarkerOpacity){t.updateMarkerGeometries();t.shouldUpdateMarkerOpacity=false}if(t.shouldEnterUpdateExit){t.enterDumbbells();t.updateDumbbells();t.exitDumbbells();t.enterSeriesLabels();t.updateSeriesLabels();t.exitSeriesLabels();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.enterDifferenceLabels();t.updateDifferenceLabels();t.exitDifferenceLabels();t.shouldEnterUpdateExit=false}if(t.shouldUpdateMarkerIDs){t.updateMarkerIds();t.shouldUpdateMarkerIDs=false}if(t.shouldUpdateGeometries){t.drawDumbbells();t.shouldUpdateGeometries=false}if(t.shouldUpdateBarStyle){t.updateBarStyle();t.shouldUpdateBarStyle=false}if(t.shouldUpdateMarkerStyle){t.updateMarkerStyle();t.shouldUpdateMarkerStyle=false}if(t.shouldUpdateMarkerSize){t.updateMarkerSize();t.shouldUpdateMarkerSize=false}if(t.shouldDrawMarkerGeometries){t.drawMarkerGeometries();t.shouldDrawMarkerGeometries=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldUpdateLegend){t.drawLegendElements();t.shouldUpdateLegend=false}if(t.shouldUpdateLabels){t.drawDataLabels();t.shouldUpdateLabels=false}if(t.shouldUpdateSeriesLabels){t.drawSeriesLabels();t.shouldUpdateSeriesLabels=false}if(t.shouldUpdateDifferenceLabels){t.drawDifferenceLabels();t.shouldUpdateDifferenceLabels=false}if(t.shouldAddStrokeUnder){t.addStrokeUnder();t.shouldAddStrokeUnder=false}if(t.shouldUpdateReferenceLines){t.drawReferenceLines();t.shouldUpdateReferenceLines=false}if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldSetLabelOpacity){t.setLabelOpacity();t.shouldSetLabelOpacity=false}if(t.shouldSetSeriesLabelOpacity){t.setSeriesLabelOpacity();t.shouldSetSeriesLabelOpacity=false}if(t.shouldSetDifferenceLabelOpacity){t.setDifferenceLabelOpacity();t.shouldSetDifferenceLabelOpacity=false}if(t.shouldUpdateDiffLabelColor){t.updateDiffLabelColor();t.shouldUpdateDiffLabelColor=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}if(t.shouldBindLegendInteractivity){t.bindLegendInteractivity();t.shouldBindLegendInteractivity=false}if(t.shouldBindSeriesInteractivity){t.bindSeriesInteractivity();t.shouldBindSeriesInteractivity=false}if(t.shouldSetLegendCursor){t.setLegendCursor();t.shouldSetLegendCursor=false}if(t.shouldSetSeriesCursor){t.setSeriesCursor();t.shouldSetSeriesCursor=false}if(t.shouldUpdateCursor){t.updateCursor();t.shouldUpdateCursor=false}if(t.shouldBindInteractivity){t.bindInteractivity();t.shouldBindInteractivity=false}if(t.shouldUpdateAnnotations){t.drawAnnotations();t.shouldUpdateAnnotations=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}if(t.shouldUpdateXAxis){t.drawXAxis();t.shouldUpdateXAxis=false}if(t.shouldSetXAxisAccessibility){t.setXAxisAccessibility();t.shouldSetXAxisAccessibility=false}if(t.shouldUpdateYAxis){t.drawYAxis();t.shouldUpdateYAxis=false}if(t.shouldSetYAxisAccessibility){t.setYAxisAccessibility();t.shouldSetYAxisAccessibility=false}if(t.shouldUpdateBaselineX){t.drawBaselineX();t.shouldUpdateBaseline=false}if(t.shouldUpdateBaselineY){t.drawBaselineY();t.shouldUpdateBaseline=false}t.onChangeHandler();e("component did update")}))};t.prototype.shouldValidateAccessibilityProps=function(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;Lw(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:!this.suppressEvents?this.clickFunc.emit:undefined}})}};t.prototype.validateInteractionKeys=function(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor];this.seriesInteraction=this.innerInteractionKeys.length===1&&this.innerInteractionKeys[0]===this.seriesAccessor;this.dumbbellInteraction=this.innerInteractionKeys.length===1&&this.innerInteractionKeys[0]===this.ordinalAccessor};t.prototype.validateDataLabelAccessor=function(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor};t.prototype.validateLayout=function(){this.layoutOverride=!this.layout||this.data[0][this.ordinalAccessor]instanceof Date?"vertical":this.layout;this.isVertical=this.layoutOverride==="vertical"};t.prototype.validateDataLabelPlacement=function(){this.placement=this.dataLabel.placement;if(this.layoutOverride==="vertical"){if(this.placement!=="left"&&this.placement!=="right"){this.placement="ends"}}else{if(this.placement!=="top"&&this.placement!=="bottom"){this.placement="ends"}}};t.prototype.validateSeriesLabelPlacement=function(){this.seriesLabelDetails=Object.assign({},this.seriesLabel);if(!this.seriesLabelDetails.placement){this.seriesLabelDetails.placement=this.isVertical?"right":"top"}if(this.isVertical&&(this.seriesLabelDetails.placement!=="right"&&this.seriesLabelDetails.placement!=="left")){this.seriesLabelDetails.placement="right"}else if(!this.isVertical&&(this.seriesLabelDetails.placement!=="top"&&this.seriesLabelDetails.placement!=="bottom")){this.seriesLabelDetails.placement="top"}if(!this.seriesLabelDetails.label||!this.seriesLabelDetails.label.length){this.seriesLabelDetails.label=""}};t.prototype.validateDiffLabelPlacement=function(){this.diffLabelDetails=Object.assign({},this.differenceLabel);if(!this.diffLabelDetails.placement){this.diffLabelDetails.placement=this.isVertical?"left":"top"}if(this.isVertical&&(this.diffLabelDetails.placement!=="right"&&this.diffLabelDetails.placement!=="left")){this.diffLabelDetails.placement="left"}else if(!this.isVertical&&(this.diffLabelDetails.placement!=="top"&&this.diffLabelDetails.placement!=="bottom")){this.diffLabelDetails.placement="top"}};t.prototype.checkIfSafari=function(){this.url=NA()};t.prototype.setColors=function(){var t=this;this.colors=this.colors?uw(this.colors):"";this.rawColors=this.colors||yw(this.colorPalette,3);this.colorArr=this.rawColors;this.textColors={};this.strokes={};this.rawColors.forEach((function(e){if(!t.accessibility.hideStrokes){var i=TA(e);var r=i.length===2?i[1]:i[0];t.strokes[e.toLowerCase()]=r}t.textColors[e.toLowerCase()]=EA(e,"#ffffff",4.5)}));if(this.hoverStyle&&this.hoverStyle.color){if(!this.accessibility.hideStrokes){var e=TA(this.hoverStyle.color);var i=e.length===2?e[1]:e[0];this.strokes[this.hoverStyle.color.toLowerCase()]=i}this.textColors[this.hoverStyle.color.toLowerCase()]=EA(this.hoverStyle.color,"#ffffff",4.5)}if(this.clickStyle&&this.clickStyle.color){if(!this.accessibility.hideStrokes){var e=TA(this.clickStyle.color);var i=e.length===2?e[1]:e[0];this.strokes[this.clickStyle.color.toLowerCase()]=i}this.textColors[this.clickStyle.color.toLowerCase()]=EA(this.clickStyle.color,"#ffffff",4.5)}};t.prototype.setLayoutData=function(){this.padding=typeof this.padding==="string"?gw(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.setTableData=function(){var t=Sw(this,sw,"dumbbell-plot");this.tableData=bw(this.data,t);this.tableColumns=Object.keys(t)};t.prototype.prepareData=function(){var t=this;var e=zp().key((function(e){return e[t.ordinalAccessor]})).entries(this.data);e.forEach((function(e){e.focusMarker=false;e.greaterIndex=1;var i="marker";var r="marker";if(e.values[0][t.seriesAccessor]===t.focusMarker.key){e.focusMarker=0;i="focusMarker"}else if(e.values[1][t.seriesAccessor]===t.focusMarker.key){e.focusMarker=1;r="focusMarker"}var n=ow(e.values[0],t.clickHighlight,t.innerInteractionKeys)?parseFloat(t.clickStyle.strokeWidth+"")||t.barStyle.width:lw(e.values[0],t.hoverHighlight,t.innerInteractionKeys)?parseFloat(t.hoverStyle.strokeWidth+"")||t.barStyle.width:t.barStyle.width;var s=ow(e.values[1],t.clickHighlight,t.innerInteractionKeys)?parseFloat(t.clickStyle.strokeWidth+"")||t.barStyle.width:lw(e.values[1],t.hoverHighlight,t.innerInteractionKeys)?parseFloat(t.hoverStyle.strokeWidth+"")||t.barStyle.width:t.barStyle.width;e.values[0].offset=e.focusMarker!==0&&!t.marker.visible?1:t.marker.type==="dot"?t[i].sizeFromBar*(n+1)/2:t.marker.type==="stroke"?t[i].sizeFromBar*(n+1)/5:!e.focusMarker?t[i].sizeFromBar*(n+1)/2:t[i].sizeFromBar*(n+1)/5;e.values[1].offset=e.focusMarker!==1&&!t.marker.visible?-1:t.marker.type==="dot"?-(t[r].sizeFromBar*(s+1))/2:t.marker.type==="stroke"?-(t[r].sizeFromBar*(s+1))/5:e.focusMarker?-(t[r].sizeFromBar*(s+1))/2:-(t[r].sizeFromBar*(s+1))/5;if(e.values[0][t.valueAccessor]>=e.values[1][t.valueAccessor]){e.greaterIndex=0;e.values[0].offset=-e.values[0].offset;e.values[1].offset=-e.values[1].offset}}));var i=function(e){var i={absoluteDiff:"Absolute Difference ",difference:"Difference "};var r=t.differenceLabel&&t.differenceLabel.calculation&&i[t.differenceLabel.calculation]?t.differenceLabel.calculation:"difference";var n=t.differenceLabel&&t.differenceLabel.format&&t.differenceLabel.visible?t.differenceLabel.format:t.differenceLabel&&t.dataLabel.format&&t.dataLabel.visible?t.dataLabel.format:"0[.][0][0]a";return i[r]+pw(e,r,n)};this.nest=e.sort((function(e,r){e.difference=e.values[0][t.valueAccessor]-e.values[1][t.valueAccessor];r.difference=r.values[0][t.valueAccessor]-r.values[1][t.valueAccessor];e.absoluteDiff=Math.abs(e.difference);r.absoluteDiff=Math.abs(r.difference);e.middle=(e.values[0][t.valueAccessor]+e.values[1][t.valueAccessor])/2;r.middle=(r.values[0][t.valueAccessor]+r.values[1][t.valueAccessor])/2;e.message=i(e);r.message=i(r);var n=e.focusMarker!==false?e.focusMarker:0;return e.values[0][t.ordinalAccessor]instanceof Date?0:t.sortOrder==="asc"||t.sortOrder==="diffAsc"?e.difference-r.difference:t.sortOrder==="desc"||t.sortOrder==="diffDesc"?r.difference-e.difference:t.sortOrder==="focusAsc"?e.values[n][t.valueAccessor]-r.values[n][t.valueAccessor]:t.sortOrder==="focusDesc"?r.values[n][t.valueAccessor]-e.values[n][t.valueAccessor]:t.sortOrder==="absoluteDiffAsc"?e.absoluteDiff-r.absoluteDiff:t.sortOrder==="absoluteDiffDesc"?r.absoluteDiff-e.absoluteDiff:0}))};t.prototype.prepareMarkerData=function(){this.markerData=[];var t={focus:false,label:this.nest[0].values[0][this.seriesAccessor]};var e={focus:false,label:this.nest[0].values[1][this.seriesAccessor]};if(this.nest[0].focusMarker){e.focus=true}else if(this.nest[0].focusMarker===0){t.focus=true}var i=Object.assign(Object.assign({},t),{limitOpacity:true});var r=Object.assign(Object.assign({},e),{limitOpacity:true});var n=Object.assign({},t);var s=Object.assign({},e);this.markerData.push(t);this.markerData.push(e);this.markerData.push(i);this.markerData.push(r);this.markerData.push(n);this.markerData.push(s);var a=0;this.markerData.forEach((function(t){t.index=a;t.referenceIndex=a<2?a:a<4?a-2:a-4;a++}))};t.prototype.prepareSeriesData=function(){var t,e;var i=this.layoutOverride==="vertical";var r=i?"right":"top";var n=this.seriesLabelDetails.placement.includes(r);var s=(t={label:this.nest[0].values[0][this.seriesAccessor]},t[this.seriesAccessor]=this.nest[0].values[0][this.seriesAccessor],t.value=n?this.nest[this.nest.length-1].values[0][this.valueAccessor]:this.nest[0].values[0][this.valueAccessor],t);var a=(e={label:this.nest[0].values[1][this.seriesAccessor]},e[this.seriesAccessor]=this.nest[0].values[1][this.seriesAccessor],e.value=n?this.nest[this.nest.length-1].values[1][this.valueAccessor]:this.nest[0].values[1][this.valueAccessor],e);this.seriesData=[s,a]};t.prototype.prepareLegendData=function(){var t,e;var i=(t={label:this.nest[0].values[0][this.seriesAccessor]},t[this.seriesAccessor]=this.nest[0].values[0][this.seriesAccessor],t);var r=(e={label:this.nest[0].values[1][this.seriesAccessor]},e[this.seriesAccessor]=this.nest[0].values[1][this.seriesAccessor],e);this.legendData=[i,r];this.ordinalLabel=this.legendData.map((function(t){return t.label}))};t.prototype.prepareScales=function(){var t=this;var e=sp(this.data,(function(e){return parseFloat(e[t.valueAccessor])}));var i=np(this.data,(function(e){return parseFloat(e[t.valueAccessor])}));if(this.layoutOverride==="vertical"){this.xAccessor=this.ordinalAccessor;this.yAccessor=this.valueAccessor;this.y=jv().domain([this.minValueOverride||this.minValueOverride===0?this.minValueOverride:e-(i-e)*.15,this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:i+(i-e)*.15]).range([this.innerPaddedHeight,0]);if(this.data[0][this.ordinalAccessor]instanceof Date){var r=np(this.data,(function(e){return e[t.ordinalAccessor]}));var n=sp(this.data,(function(e){return e[t.ordinalAccessor]}));this.x=Tb().domain([n,r]).range([0,this.innerPaddedWidth]);if(this.xAxis.unit){var s=this.time["time"+this.xAxis.unit];this.x.domain([s.offset(n,-1),s.offset(r,+1)])}}else{this.x=ey().domain(this.nest.map((function(t){return t.key}))).padding(.5).range([0,this.innerPaddedWidth])}}else if(this.layoutOverride==="horizontal"){this.xAccessor=this.valueAccessor;this.yAccessor=this.ordinalAccessor;this.x=jv().domain([this.minValueOverride||this.minValueOverride===0?this.minValueOverride:e-(i-e)*.15,this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:i+(i-e)*.15]).range([0,this.innerPaddedWidth]);this.y=ey().domain(this.nest.map((function(t){return t.key}))).padding(.5).range([this.innerPaddedHeight,0])}};t.prototype.addStrokeUnder=function(){var t=IA({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.seriesLabelWrapper.selectAll("text").attr("filter",!this.accessibility.hideStrokes?t:null);this.diffLabelWrapper.attr("filter",!this.accessibility.hideStrokes?t:null);this.labels.attr("filter",!this.accessibility.hideStrokes?t:null);this.labels.attr("filter",!this.accessibility.hideStrokes?t:null);this.dumbbellG.attr("filter",!this.accessibility.hideStrokes?t:null)};t.prototype.renderRootElements=function(){this.svg=Ff(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.defs=this.rootG.append("defs");this.baselineG=this.rootG.append("g").attr("class","baseline-group");this.gridG=this.rootG.append("g").attr("class","gridline-group");this.dumbbellG=this.rootG.append("g").attr("class","dumbbell-group");this.seriesLabelWrapper=this.rootG.select(".dumbbell-series-wrapper");this.seriesLabelWrapper=this.rootG.append("g").attr("class","dumbbell-series-wrapper");this.diffLabelWrapper=this.rootG.select(".dumbbell-diff-label-wrapper");this.diffLabelWrapper=this.rootG.append("g").attr("class","dumbbell-diff-label-wrapper");this.legendG=Ff(this.dumbbellPlotEl).select(".dumbbell-legend").append("svg");this.tooltipG=Ff(this.dumbbellPlotEl).select(".dumbbell-tooltip");this.labels=this.rootG.append("g").attr("class","dumbbell-dataLabel-group");this.references=this.rootG.append("g").attr("class","dumbbell-reference-line-group")};t.prototype.renderMarkerGroup=function(){this.markerG=this.defs.select("."+this.marker.type+"markers");if(!this.markerG.node()){this.defs.selectAll("g").remove();this.markerG=this.defs.append("g").attr("class",this.marker.type+"markers")}};t.prototype.setSeriesSelections=function(){var t=this.seriesLabelWrapper.selectAll(".dumbbell-series-label").data(this.seriesData,(function(t){return t.label}));this.enterSeriesLabel=t.enter().append("text");this.exitSeriesLabel=t.exit();this.updateSeriesLabel=t.merge(this.enterSeriesLabel)};t.prototype.setGlobalSelections=function(){var t=this;var e=this.dumbbellG.selectAll(".dumbbell-plot").data(this.nest,(function(t){return t.key}));this.enter=e.enter().append("path");this.exit=e.exit();this.update=e.merge(this.enter);this.exitSize=this.exit.size();this.enterSize=this.enter.size();var i=this.markerG.selectAll("marker").data(this.markerData,(function(t,e){return t.label+e}));this.enterMarkers=i.enter().append("marker");this.exitMarkers=i.exit();this.updateMarkers=i.merge(this.enterMarkers);this.setSeriesSelections();var r=this.diffLabelWrapper.selectAll(".dumbbell-diff-label").data(this.nest,(function(t){return t.key}));this.enterDiffLabel=r.enter().append("text");this.exitDiffLabel=r.exit();this.updateDiffLabel=r.merge(this.enterDiffLabel);var n=this.labels.selectAll("g").data(this.nest,(function(t){return t.key}));this.enterLabels=n.enter().append("g");this.exitLabels=n.exit();this.updateLabels=n.merge(this.enterLabels);var s=this.updateLabels.selectAll(".dumbbell-dataLabel").data((function(t){return[t.values[0],t.values[1]]}),(function(e){return e[t.seriesAccessor]}));this.enterLabelChildren=s.enter().append("text");this.exitLabelChildren=s.exit();this.updateLabelChildren=s.merge(this.enterLabelChildren)};t.prototype.setTestingAttributes=function(){var t=this;if(this.unitTest){Ff(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").attr("data-testid","chart-container");Ff(this.dumbbellPlotEl).select(".dumbbell-main-title").attr("data-testid","main-title");Ff(this.dumbbellPlotEl).select(".dumbbell-sub-title").attr("data-testid","sub-title");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.legendG.attr("data-testid","legend-container");this.tooltipG.attr("data-testid","tooltip-container");this.dumbbellG.attr("data-testid","dumbbell-group");this.baselineG.attr("data-testid","baseline-group");this.references.attr("data-testid","reference-line-group");this.updateLabels.attr("data-testid","dataLabel-wrapper");this.updateLabelChildren.attr("data-testid","dataLabel").attr("data-id",(function(e){return"label-"+e[t.ordinalAccessor]+"-"+e[t.seriesAccessor]}));this.updateDiffLabel.attr("data-testid","difference-label").attr("data-id",(function(t){return"difference-label-"+t.key}));this.updateSeriesLabel.attr("data-testid","series-label");this.updateMarkers.attr("data-testid","marker");this.update.attr("data-testid","line").attr("data-id",(function(t){return"line-"+t.key}))}else{Ff(this.dumbbellPlotEl).select(".visa-viz-d3-dumbbell-container").attr("data-testid",null);Ff(this.dumbbellPlotEl).select(".dumbbell-main-title").attr("data-testid",null);Ff(this.dumbbellPlotEl).select(".dumbbell-sub-title").attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.legendG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.dumbbellG.attr("data-testid",null);this.baselineG.attr("data-testid",null);this.references.attr("data-testid",null);this.updateLabels.attr("data-testid",null);this.updateLabelChildren.attr("data-testid",null).attr("data-id",null);this.updateDiffLabel.attr("data-testid",null).attr("data-id",null);this.updateSeriesLabel.attr("data-testid",null);this.updateMarkers.attr("data-testid",null);this.update.attr("data-testid",null).attr("data-id",null)}};t.prototype.reSetRoot=function(){this.svg.transition("root_reset").duration(this.duration).ease(Wb).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root.transition("root_reset").duration(this.duration).ease(Wb).attr("transform","translate("+this.margin.left+", "+this.margin.top+")");this.rootG.transition("root_reset").duration(this.duration).ease(Wb).attr("transform","translate("+this.padding.left+", "+this.padding.top+")");iw(this.chartID,this.width)};t.prototype.drawXAxis=function(){var t=this.innerPaddedWidth/this.nest.length*.7;hw({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,wrapLabel:this.wrapLabel?t:"",dateFormat:this.xAxis.format,format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.xAxis.visible})};t.prototype.drawYAxis=function(){hw({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,wrapLabel:this.wrapLabel?100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.yAxis.visible})};t.prototype.setXAxisAccessibility=function(){jA({rootEle:this.dumbbellPlotEl,hasXAxis:this.xAxis?this.xAxis.visible:false,xAxis:this.x?this.x:false,xAxisLabel:this.xAxis.label?this.xAxis.label:""})};t.prototype.setYAxisAccessibility=function(){$A({rootEle:this.dumbbellPlotEl,hasYAxis:this.yAxis?this.yAxis.visible:false,yAxis:this.y?this.y:false,yAxisLabel:this.yAxis.label?this.yAxis.label:""})};t.prototype.drawBaselineX=function(){hw({root:this.baselineG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,padding:this.padding,markOffset:this.x(0),hide:this.layout==="horizontal"?!this.showBaselineY:true})};t.prototype.drawBaselineY=function(){hw({root:this.baselineG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,padding:this.padding,markOffset:this.y(0),hide:this.layout==="vertical"?!this.showBaselineX:true})};t.prototype.drawXGrid=function(){cw(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,false,!this.xAxis.gridVisible,this.xAxis.tickInterval)};t.prototype.drawYGrid=function(){cw(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,true,!this.yAxis.gridVisible,this.yAxis.tickInterval)};t.prototype.enterMarkerGeometries=function(){var t=this;this.enterMarkers.attr("orient","auto").attr("markerUnits","userSpaceOnUse").attr("id",(function(e){return t.generateId(e,e.index)})).attr("class","marker-"+this.marker.type).attr("stroke",this.handleMarkerColors);if(this.marker.type==="dot"){this.enterMarkers.append("circle").attr("r",5)}else if(this.marker.type==="stroke"){this.enterMarkers.append("path")}else if(this.marker.type==="arrow"){this.enterMarkers.append("path")}this.updateMarkerSize(this.enterMarkers)};t.prototype.updateMarkerGeometries=function(){var t=this;this.updateMarkers.interrupt();this.updateMarkers.attr("opacity",(function(e){return(t.marker.visible||e.focus)&&!e.limitOpacity?1:t.marker.visible||e.focus?t.hoverOpacity:0}))};t.prototype.updateMarkerStyle=function(){this.updateMarkers.attr("stroke",this.handleMarkerColors)};t.prototype.exitMarkerGeometries=function(){this.exitMarkers.transition("exit").duration(this.duration).ease(Wb).remove()};t.prototype.enterDumbbells=function(){var t=this;this.enter.interrupt();this.enter.attr("class","dumbbell-plot").attr("d",(function(e){var i=t.x(e.values[0][t.xAccessor]);var r=t.y(e.values[0][t.yAccessor]);var n=t.x(e.values[1][t.xAccessor]);var s=t.y(e.values[1][t.yAccessor]);var a=t.layout==="vertical"?r>s?.001:-.001:0;var o=t.layout==="horizontal"?i>n?.001:-.001:0;return"M "+(i+o)+" "+(r+a)+" L "+i+" "+r+" L "+i+" "+r+" L "+n+" "+s+" L "+n+" "+s+" L "+n+" "+s+" L "+i+" "+r+" L "+i+" "+r+" L "+i+" "+r+" L "+n+" "+s+" L "+n+" "+s+" L "+(n-o)+" "+(s-a)})).attr("cursor",!this.suppressEvents?this.cursor:null).attr("opacity",0).each((function(t,e,i){HA(i[e])})).on("click",!this.suppressEvents?function(e,i,r){if(e.values){var n=r[i];var s=Uf;var a=t.findMarkerIndex(e,n,s);t.onClickHandler(e.values[a])}}:null).on("mouseover",!this.suppressEvents?function(e,i,r){var n=e;if(e.values){var s=r[i];var a=Uf;var o=t.findMarkerIndex(e,s,a);Aw(t.chartID,true);n=e.values[o];t.hoverFunc.emit(n)}t.showTooltip?t.eventsTooltip({data:t.tooltipLabel.labelAccessor&&t.tooltipLabel.labelAccessor.length?n:e,evt:Uf,isToShow:true}):""}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity);this.update.order()};t.prototype.updateBarStyle=function(){this.update.attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity)};t.prototype.updateMarkerSize=function(t){var e=this;var i=t||this.updateMarkers;i.each((function(t,i,r){var n=Ff(r[i]);var s=i<2&&e.clickHighlight.length?parseFloat(e.clickStyle.strokeWidth+""):i<4?e.barStyle.width:parseFloat(e.hoverStyle.strokeWidth+"");var a=t.focus?e.focusMarker.sizeFromBar:e.marker.sizeFromBar;var o=e.marker.type==="dot"?1:e.marker.type==="stroke"?2:t.focus&&e.focusMarker.key||!e.focusMarker.key&&t.referenceIndex===0?1:2;var l=a*o*(s+1);var u=l?10/l:0;n.attr("viewBox","0 0 "+(10+u)+" "+(10+u)).attr("refX",5+u/2).attr("refY",5+u/2).attr("stroke-width",u).attr("markerWidth",l).attr("markerHeight",l);if(e.marker.type==="dot"){n.select("circle").attr("cx",5+u/2).attr("cy",5+u/2)}else if(e.marker.type==="stroke"){n.select("path").attr("d","M 4.5 "+(0+u/2)+" L 4.5 "+(10+u/2)+" L 6 "+(10+u/2)+" L 6 "+(0+u/2)+" z")}else if(e.marker.type==="arrow"){n.select("path").attr("transform",t.focus&&e.focusMarker.key&&t.referenceIndex===1?"rotate(180,"+(5+u/2)+","+(5+u/2)+")":null).attr("d",t.focus&&e.focusMarker.key||!e.focusMarker.key&&t.referenceIndex===0?"M "+(0+u/2)+" "+(5+u/4)+" L "+(10+u/2)+" "+(0+u/2)+" L "+(10+u/2)+" "+(10+u/2)+" z":"M 4.5 "+(0+u/2)+" L 4.5 "+(10+u/2)+" L 6 "+(10+u/2)+" L 6 "+(0+u/2)+" z")}}))};t.prototype.drawMarkerGeometries=function(){var t=this;this.updateMarkers.selectAll(".marker-"+this.marker.type).data((function(t){return[t]}));if(this.marker.type==="arrow"){this.updateMarkers.selectAll("path").attr("d",(function(e,i,r){var n=i<2&&t.clickHighlight.length?parseFloat(t.clickStyle.strokeWidth+""):i<4?t.barStyle.width:parseFloat(t.hoverStyle.strokeWidth+"");var s=e.focus?t.focusMarker.sizeFromBar:t.marker.sizeFromBar;var a=t.marker.type==="dot"?1:t.marker.type==="stroke"?2:e.focus&&t.focusMarker.key||!t.focusMarker.key&&e.referenceIndex===0?1:2;var o=s*a*(n+1);var l=o?10/o:0;Ff(r[i]).attr("transform",e.focus&&t.focusMarker.key&&e.referenceIndex===1?"rotate(180,"+(5+l/2)+","+(5+l/2)+")":null);return e.focus&&t.focusMarker.key||!t.focusMarker.key&&e.referenceIndex===0?"M "+(0+l/2)+" "+(5+l/4)+" L "+(10+l/2)+" "+(0+l/2)+" L "+(10+l/2)+" "+(10+l/2)+" z":"M 4.5 "+(0+l/2)+" L 4.5 "+(10+l/2)+" L 6 "+(10+l/2)+" L 6 "+(0+l/2)+" z"}))}};t.prototype.updateDumbbells=function(){this.update.interrupt();this.enter.transition("opacity").duration(this.duration).ease(Wb).attr("opacity",1)};t.prototype.exitDumbbells=function(){var t=this;this.exit.interrupt();this.exit.transition("exit").ease(Wb).duration(this.duration/2).attr("opacity",0).attr("d",(function(e,i,r){var n=Ff(r[i]);var s=+n.attr("data-centerX1");var a=+n.attr("data-centerY1");var o=+n.attr("data-centerX2");var l=+n.attr("data-centerY2");var u=t.layout==="vertical"?a>l?.001:-.001:0;var h=t.layout==="horizontal"?s>o?.001:-.001:0;return"M "+(s+h)+" "+(a+u)+" L "+s+" "+a+" L "+s+" "+a+" L "+o+" "+l+" L "+o+" "+l+" L "+o+" "+l+" L "+s+" "+a+" L "+s+" "+a+" L "+s+" "+a+" L "+o+" "+l+" L "+o+" "+l+" L "+(o-h)+" "+(l-u)}));this.update.transition("accessibilityAfterExit").duration(this.duration).ease(Wb).call(kw,(function(){var e=tw(t.rootG.node());t.exit.remove();t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();JA({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawDumbbells=function(){var t=this;this.update.classed("moving",(function(e,i,r){var n=Ff(r[i]);var s=ow(e.values[0],t.clickHighlight,t.innerInteractionKeys)&&ow(e.values[1],t.clickHighlight,t.innerInteractionKeys);var a=lw(e.values[0],t.hoverHighlight,t.innerInteractionKeys)&&lw(e.values[1],t.hoverHighlight,t.innerInteractionKeys);var o=t.dumbbellInteraction?s?parseFloat(t.clickStyle.strokeWidth+"")||t.barStyle.width:a?parseFloat(t.hoverStyle.strokeWidth+"")||t.barStyle.width:t.barStyle.width:t.barStyle.width;var l=t.x(e.values[0][t.xAccessor]);var u=t.y(e.values[0][t.yAccessor]);var h=t.x(e.values[1][t.xAccessor]);var c=t.y(e.values[1][t.yAccessor]);var d=+n.attr("data-barSize");var f=+n.attr("data-centerX1");var p=+n.attr("data-centerY1");var y=+n.attr("data-centerX2");var v=+n.attr("data-centerY2");return o!==d||l!==f||u!==p||h!==y||c!==v})).transition("update").ease(Wb).duration(this.duration).attr("d",this.setBarSize).call(kw,(function(){t.update.classed("moving",false);JA({parentGNode:t.rootG.node()})}))};t.prototype.updateMarkerIds=function(){var t=this;this.updateMarkers.attr("id",(function(e){return t.generateId(e,e.index)}));this.update.attr("marker-start",(function(e){var i=aw(e.values[0],1,0,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys);var r=lw(e.values[0],t.hoverHighlight,t.innerInteractionKeys);var n=ow(e.values[0],t.clickHighlight,t.innerInteractionKeys);var s=r&&!n?t.updateMarkers._groups[0][4].id:n||i?t.updateMarkers._groups[0][0].id:t.updateMarkers._groups[0][2].id;return t.url+s+")"})).attr("marker-end",(function(e){var i=aw(e.values[1],1,0,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys);var r=lw(e.values[1],t.hoverHighlight,t.innerInteractionKeys);var n=ow(e.values[1],t.clickHighlight,t.innerInteractionKeys);var s=r&&!n?t.updateMarkers._groups[0][5].id:n||i?t.updateMarkers._groups[0][1].id:t.updateMarkers._groups[0][3].id;return t.url+s+")"}))};t.prototype.updateInteractionState=function(){var t=this;this.update.interrupt("opacity");this.updateLabelChildren.interrupt("opacity");this.updateMarkers.interrupt();this.updateMarkers.attr("opacity",(function(e){return(t.marker.visible||e.focus)&&!e.limitOpacity?1:t.marker.visible||e.focus?t.hoverOpacity:0}));this.update.attr("opacity",1).attr("stroke",this.handleBarColors).attr("fill-opacity",this.handleBarOpacity).each((function(e,i,r){var n=Ff(r[i]);if(!n.classed("moving")){n.attr("d",t.setBarSize)}}));this.drawDataLabels(true);JA({parentGNode:this.rootG.node()});fw({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.enterSeriesLabels=function(){var t=this;this.enterSeriesLabel.interrupt();var e=this.isVertical?"right":"top";var i=this.seriesLabelDetails.placement.includes(e);this.enterSeriesLabel.attr("opacity",0).attr("class","dumbbell-series-label").attr("fill",this.handleSeriesLabelColors).attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){return t.onHoverHandler(e,false)}:null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?function(){return t.onMouseOutHandler()}:null).attr("text-anchor",this.isVertical&&i?"start":this.isVertical?"end":"middle").attr("x",(function(e){return t.isVertical&&i?t.innerPaddedWidth:!t.isVertical?t.x(e.value):0})).attr("y",(function(e){return t.isVertical?t.y(e.value):!t.isVertical&&!i?t.innerPaddedHeight:0})).attr("dx",this.isVertical&&i?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")};t.prototype.updateSeriesLabels=function(){var t=this;this.updateSeriesLabel.interrupt();this.updateSeriesLabel.transition("opacity_series_labels").ease(Wb).duration(this.duration).attr("opacity",(function(e){var i=!t.seriesLabel.visible?0:1;if(!t.seriesInteraction){return i}else{return aw(e,i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}}))};t.prototype.exitSeriesLabels=function(){this.exitSeriesLabel.transition("exit_series_labels").ease(Wb).duration(this.duration).attr("opacity",0).remove()};t.prototype.drawSeriesLabels=function(){var t=this;var e=this.isVertical?"right":"top";var i=this.seriesLabelDetails.placement.includes(e);this.updateSeriesLabel.text((function(e,i){return t.seriesLabelDetails.label?t.seriesLabelDetails.label[i]:e.label})).attr("fill",this.handleSeriesLabelColors).transition("update_series_labels").ease(Wb).duration(this.duration).attr("text-anchor",this.isVertical&&i?"start":this.isVertical?"end":"middle").attr("x",(function(e){return t.isVertical&&i?t.innerPaddedWidth:!t.isVertical?t.x(e.value):0})).attr("y",(function(e){return t.isVertical?t.y(e.value):!t.isVertical&&!i?t.innerPaddedHeight:0})).attr("dx",this.isVertical&&i?"0.1em":this.isVertical?"-0.1em":"0").attr("dy",this.isVertical?"0.3em":"-0.1em")};t.prototype.setSeriesLabelOpacity=function(){var t=this;this.updateSeriesLabel.interrupt("opacity_series_labels");this.updateSeriesLabel.attr("opacity",(function(e){var i=!t.seriesLabel.visible?0:1;if(!t.seriesInteraction){return i}else{return aw(e,i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}}))};t.prototype.enterDifferenceLabels=function(){var t=this;this.enterDiffLabel.interrupt();var e=this.isVertical?"left":"top";var i=this.diffLabelDetails.placement.includes(e);this.enterDiffLabel.attr("class","dumbbell-diff-label").attr("opacity",0).attr("fill",this.setDiffLabelColor).attr("cursor",!this.suppressEvents&&this.dumbbellInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(e){return t.onHoverHandler(e,true)}:null).on("mouseout",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(){return t.onMouseOutHandler()}:null).attr("x",(function(e){return t.isVertical?t.x(e.values[0][t.ordinalAccessor]):t.x(e.middle)})).attr("y",(function(e){return!t.isVertical&&i?t.y(e.key)-t.barStyle.width/2-4:!t.isVertical?t.y(e.key)+t.barStyle.width/2+4:t.y(e.middle)})).attr("dx",this.isVertical&&i?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&i?"0":!this.isVertical?"0.6em":"0.3em")};t.prototype.updateDifferenceLabels=function(){var t=this;this.updateDiffLabel.interrupt();this.updateDiffLabel.transition("opacity_diff_labels").ease(Wb).duration(this.duration).attr("opacity",(function(e){var i=t.differenceLabel.visible?1:0;if(!t.dumbbellInteraction){return i}else{return aw(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}}))};t.prototype.exitDifferenceLabels=function(){this.exitDiffLabel.transition("exit_diff_label").ease(Wb).duration(this.duration).attr("opacity",0).remove()};t.prototype.drawDifferenceLabels=function(){var t=this;var e=this.isVertical?"left":"top";var i=this.diffLabelDetails.placement.includes(e);this.updateDiffLabel.text((function(e){return pw(e,t.differenceLabel.calculation,t.differenceLabel.format)})).transition("update_diff_label").ease(Wb).duration(this.duration).attr("text-anchor",this.isVertical&&i?"end":this.isVertical?"start":"middle").attr("x",(function(e){return t.isVertical?t.x(e.values[0][t.ordinalAccessor]):t.x(e.middle)})).attr("y",(function(e){return!t.isVertical&&i?t.y(e.key)-t.barStyle.width/2-4:!t.isVertical?t.y(e.key)+t.barStyle.width/2+4:t.y(e.middle)})).attr("dx",this.isVertical&&i?-this.barStyle.width/2-4:this.isVertical?this.barStyle.width/2+4:"0").attr("dy",!this.isVertical&&i?"0":!this.isVertical?"0.6em":"0.3em")};t.prototype.enterDataLabels=function(){var t=this;this.enterLabels.interrupt();this.enterLabels.attr("class","dumbbell-label-wrapper").attr("opacity",0).attr("fill",this.handleLabelColors);this.enterLabelChildren.attr("class","dumbbell-dataLabel").attr("opacity",0).attr("fill",this.handleLabelColors).attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null).on("click",!this.suppressEvents&&this.dataLabel.visible?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?function(e){return t.onHoverHandler(e,true)}:null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?function(){return t.onMouseOutHandler()}:null);ww({root:this.enterLabelChildren,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.placement,chartType:"dumbbell",layout:this.layoutOverride,labelOffset:this.markerData})};t.prototype.setDifferenceLabelOpacity=function(){var t=this;this.updateDiffLabel.interrupt("opacity_diff_labels");this.updateDiffLabel.attr("opacity",(function(e){var i=t.differenceLabel.visible?1:0;if(!t.dumbbellInteraction){return i}else{return aw(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}}))};t.prototype.updateDataLabels=function(){var t=this;this.updateLabelChildren.classed("transitioning",true);this.updateLabels.transition("opacity").ease(Wb).duration(this.duration).attr("opacity",(function(){var e=!t.dataLabel.visible?0:1;return e})).call(kw,(function(){t.updateLabelChildren.classed("transitioning",false)}))};t.prototype.exitDataLabels=function(){var t=this;this.exitLabels.interrupt();this.exitLabels.selectAll(".dumbbell-dataLabel").transition("exit").ease(Wb).duration(this.duration/2).attr("opacity",0).call(kw,(function(){t.exitLabels.remove()}));this.exitLabelChildren.transition("exit_dataLabel").ease(Wb).duration(this.duration).attr("opacity",0).remove()};t.prototype.drawDataLabels=function(t){var e=this;this.updateLabelChildren.text((function(t){return pw(t,e.innerLabelAccessor,e.dataLabel.format)}));var i=this.updateLabelChildren.attr("fill",this.handleLabelColors).transition("update_dataLabel").ease(Wb).duration((function(i,r,n){var s=lw(i,e.hoverHighlight,e.innerInteractionKeys);var a=ow(i,e.clickHighlight,e.innerInteractionKeys);if((s||a)&&t&&!Ff(n[r]).classed("transitioning")){return 0}return e.duration}));ww({root:i,xScale:this.x,yScale:this.y,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.placement,chartType:"dumbbell",layout:this.layoutOverride,labelOffset:this.markerData})};t.prototype.updateDiffLabelColor=function(){this.updateDiffLabel.attr("fill",this.setDiffLabelColor)};t.prototype.setLabelOpacity=function(){var t=this;this.updateLabels.attr("opacity",this.dataLabel.visible?1:0);this.updateLabelChildren.attr("opacity",(function(e){return aw(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}))};t.prototype.updateMarkerOpacity=function(){var t=this;this.updateMarkers.interrupt();this.updateMarkers.attr("opacity",(function(e){return(t.marker.visible||e.focus)&&!e.limitOpacity?1:t.marker.visible||e.focus?t.hoverOpacity:0}))};t.prototype.drawReferenceLines=function(){var t=this;var e=this.references.selectAll("g").data(this.referenceLines,(function(t){return t.label}));var i=e.enter().append("g").attr("class",".dumbbell-reference").attr("opacity",1);var r=i.append("line");r.attr("class","dumbbell-reference-line").attr("data-testid",this.unitTest?"reference-line":null).attr("opacity",0);var n=i.append("text");n.attr("class","dumbbell-reference-line-label").attr("opacity",0);var s=e.merge(i);var a=s.selectAll(".dumbbell-reference-line").data((function(t){return[t]})).transition("merge").ease(Wb).duration(this.duration);var o=s.selectAll(".dumbbell-reference-line-label").data((function(t){return[t]})).transition("merge").ease(Wb).duration(this.duration).text((function(t){return t.label}));var l=e.exit();l.transition("exit").ease(Wb).duration(this.duration).attr("opacity",0).remove();i.attr("transform",(function(e){var i=t.layoutOverride==="horizontal"?"x":"y";return"translate(0,"+t[i](e.value)+")"}));s.transition("merge").ease(Wb).duration(this.duration).attr("transform",(function(e){var i=t.layoutOverride==="horizontal"?"x":"y";return"translate(0,"+t[i](e.value)+")"}));r.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);n.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);o.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.style("stroke",xw[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity);o.style("fill",xw[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)};t.prototype.setSelectedClass=function(){var t=this;this.update.classed("highlight",(function(e,i,r){var n=aw(e.values[0],1,0,{},t.clickHighlight,t.innerInteractionKeys);var s=aw(e.values[1],1,0,{},t.clickHighlight,t.innerInteractionKeys);var a=n||s;a=t.clickHighlight&&t.clickHighlight.length?a:false;var o=t.accessibility.elementsAreInterface;ew(r[i],a,o);return a}))};t.prototype.drawAnnotations=function(){nw({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.layout!=="horizontal"?this.ordinalAccessor:this.valueAccessor,yScale:this.y,yAccessor:this.layout!=="horizontal"?this.valueAccessor:this.ordinalAccessor})};t.prototype.setAnnotationAccessibility=function(){QA(this.dumbbellPlotEl,this.annotations)};t.prototype.setTagLevels=function(){this.topLevel=_w(this.highestHeadingLevel);this.bottomLevel=_w(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){WA({rootEle:this.dumbbellPlotEl,geomType:"dumbbell",title:this.accessibility.title||this.mainTitle,chartTag:"dumbbell-plot",uniqueID:this.chartID,highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){var t=Sw(this,sw,"dumbbell-plot");delete t[this.ordinalAccessor];OA({node:this.svg.node(),chartTag:"dumbbell-plot",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"dumbbell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:t,groupKeys:["message"],nested:"values",disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})};t.prototype.setGeometryAccessibilityAttributes=function(){this.update.each((function(t,e,i){HA(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=Sw(this,sw,"dumbbell-plot");delete e[this.ordinalAccessor];this.update.each((function(i,r,n){GA({node:n[r],geomType:"dumbbell",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupKeys:["message"],nested:["values"],uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});PA({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityAttributes=function(){HA(this.dumbbellG.node())};t.prototype.setGroupAccessibilityID=function(){var t=this;this.dumbbellG.each((function(e,i,r){PA({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartAccessibilityTitle=function(){RA(this.dumbbellPlotEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){YA(this.dumbbellPlotEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){zA(this.dumbbellPlotEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){XA(this.dumbbellPlotEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){FA(this.dumbbellPlotEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){BA(this.dumbbellPlotEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){KA(this.dumbbellPlotEl,this.accessibility.statisticalNotes)};t.prototype.setChartCountAccessibility=function(){qA({rootEle:this.dumbbellPlotEl,parentGNode:this.dumbbellG.node(),chartTag:"dumbbell-plot",geomType:"dumbbell"})};t.prototype.setChartAccessibilityStructureNotes=function(){ZA(this.dumbbellPlotEl,this.accessibility.structureNotes)};t.prototype.onChangeHandler=function(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){var t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.updated=false;this.enterSize=0;this.exitSize=0};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t,e){Aw(this.chartID,true);this.hoverFunc.emit(t);if(this.showTooltip&&e){this.eventsTooltip({data:t,evt:Uf,isToShow:true})}};t.prototype.onMouseOutHandler=function(){Aw(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){mw(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;rw({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,groupAccessor:this.seriesAccessor,diffLabelDetails:this.diffLabelDetails,chartType:"dumbbell"})};t.prototype.updateCursor=function(){this.update.attr("cursor",!this.suppressEvents?this.cursor:null);this.updateDiffLabel.attr("cursor",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?this.cursor:null);this.updateLabelChildren.attr("cursor",!this.suppressEvents&&this.dataLabel.visible?this.cursor:null)};t.prototype.drawLegendElements=function(){dw({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:!this.accessibility.hideStrokes?this.rawColors:null,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,label:this.legend.labels||this.ordinalLabel,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.bindLegendInteractivity=function(){var t=this;Ff(this.dumbbellPlotEl).selectAll(".legend").on("click",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?function(e){return t.onHoverHandler(e,false)}:null).on("mouseout",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.setLegendCursor=function(){Ff(this.dumbbellPlotEl).selectAll(".legend").style("cursor",this.legend.interactive&&this.seriesInteraction&&!this.suppressEvents?this.cursor:null)};t.prototype.setSeriesCursor=function(){this.updateSeriesLabel.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null)};t.prototype.bindSeriesInteractivity=function(){var t=this;this.updateSeriesLabel.on("click",!this.suppressEvents&&this.seriesInteraction?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){return t.onHoverHandler(e,false)}:null).on("mouseout",!this.suppressEvents&&this.seriesInteraction?function(){return t.onMouseOutHandler()}:null)};t.prototype.bindInteractivity=function(){var t=this;this.update.on("click",!this.suppressEvents?function(e,i,r){if(e.values){var n=r[i];var s=Uf;var a=t.findMarkerIndex(e,n,s);t.onClickHandler(e.values[a])}}:null).on("mouseover",!this.suppressEvents?function(e,i,r){var n=e;if(e.values){var s=r[i];var a=Uf;var o=t.findMarkerIndex(e,s,a);Aw(t.chartID,true);n=e.values[o];t.hoverFunc.emit(n)}t.showTooltip?t.eventsTooltip({data:t.tooltipLabel.labelAccessor&&t.tooltipLabel.labelAccessor.length?n:e,evt:Uf,isToShow:true}):""}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.updateLabelChildren.on("click",!this.suppressEvents&&this.dataLabel.visible?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.dataLabel.visible?function(e){return t.onHoverHandler(e,true)}:null).on("mouseout",!this.suppressEvents&&this.dataLabel.visible?function(){return t.onMouseOutHandler()}:null);this.updateDiffLabel.on("click",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(e){return t.onHoverHandler(e,true)}:null).on("mouseout",!this.suppressEvents&&this.dumbbellInteraction&&this.differenceLabel.visible?function(){return t.onMouseOutHandler()}:null)};t.prototype.findMarkerIndex=function(t,e,i){var r=this.layoutOverride==="vertical"?this.findPosition(e,i)[1]:this.findPosition(e,i)[0];var n=this.layoutOverride==="vertical"?"Y":"X";var s=+Ff(e).attr("data-center"+n+"1");var a=+Ff(e).attr("data-center"+n+"2");var o=(a-s)/2+s;var l=t.values[0][this.valueAccessor]>=t.values[1][this.valueAccessor]?0:1;return r<=o?0+l:1-l};t.prototype.findPosition=function(t,e){var i=t.ownerSVGElement||t;var r=i.createSVGPoint();r.x=e.clientX;r.y=e.clientY;r=r.matrixTransform(t.getScreenCTM().inverse());return[r.x,r.y]};t.prototype.generateId=function(t,e){var i=this.marker.type==="dot"?1:this.marker.type==="stroke"?2:t.focus&&this.focusMarker.key||!this.focusMarker.key&&t.referenceIndex===0?1:2;i=t.focus?this.focusMarker.sizeFromBar*i:this.marker.sizeFromBar*i;var r=this.marker.visible||t.focus?1:0;var n=this.rawColors[t.referenceIndex][0]==="#"?this.rawColors[t.referenceIndex].substring(1):this.rawColors[t.referenceIndex];var s=(e<2&&this.clickHighlight.length?this.clickStyle.strokeWidth:e<4?this.barStyle.width:this.hoverStyle.strokeWidth).toString();s=""+s;s=s.replace(/\D/g,"n");var a="marker-"+this.chartID+e+this.marker.type+i+n+s+r;return a};t.prototype.render=function(){this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidate=false}if(this.shouldValidateLayout){this.validateLayout()}if(this.shouldValidateDataLabelPlacement){this.validateDataLabelPlacement();this.shouldValidateDataLabelPlacement=false}if(this.shouldValidateSeriesLabelPlacement){this.validateSeriesLabelPlacement();this.shouldValidateSeriesLabelPlacement=false}if(this.shouldValidateDiffLabelPlacement){this.validateDiffLabelPlacement();this.shouldValidateDiffLabelPlacement=false}if(this.shouldValidateDataLabelAccessor){this.validateDataLabelAccessor();this.shouldValidateDataLabelAccessor=false}if(this.shouldUpdateLayout){this.setLayoutData();this.shouldUpdateLayout=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldUpdateMarkerData){this.prepareMarkerData();this.shouldUpdateMarkerData=false}if(this.shouldUpdateSeriesData){this.prepareSeriesData();this.shouldUpdateSeriesData=false}if(this.shouldUpdateLegendData){this.prepareLegendData();this.shouldUpdateLegendData=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldCheckValueAxis){if(this.layout==="horizontal"){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXGrid=true}else if(this.layout==="vertical"||this.layoutOverride){this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYGrid=true}this.shouldCheckValueAxis=false}if(this.shouldCheckLabelAxis){if(this.layout==="vertical"||this.layoutOverride){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXGrid=true}else if(this.layout==="horizontal"){this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYGrid=true}this.shouldCheckLabelAxis=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}return r("div",{class:"o-layout"},r("div",{class:"o-layout--chart"},r(this.topLevel,{class:"dumbbell-main-title vcl-main-title","data-testid":"main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions dumbbell-sub-title vcl-sub-title","data-testid":"sub-title"},this.subTitle),r("div",{class:"dumbbell-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),r("div",{class:"visa-viz-d3-dumbbell-container"}),r("div",{class:"dumbbell-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("data-table",{uniqueID:this.chartID,isCompact:true,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))};t.prototype.init=function(){var t=Object.keys(Ib);var e=0;var i={wrapLabel:{exception:false},strokeWidth:{exception:0},showDots:{exception:false},dotRadius:{exception:0},hoverOpacity:{exception:0},showTooltip:{exception:false},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:false}};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:Ib[t[e]]}};Object.defineProperty(t.prototype,"dumbbellPlotEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{mainTitle:["mainTitleWatcher"],subTitle:["subTitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],seriesAccessor:["seriesAccessorWatcher"],sortOrder:["sortWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],layout:["layoutWatcher"],showBaselineX:["showBaselineXWatcher"],showBaselineY:["showBaselineYWatcher"],colorPalette:["paletteWatcher"],colors:["paletteWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],hoverOpacity:["hoverOpacityWatcher"],cursor:["cursorWatcher"],focusMarker:["focusMarkerWatcher"],marker:["markerWatcher"],barStyle:["barStyleWatcher"],dataLabel:["dataLabelWatcher"],seriesLabel:["seriesLabelWatcher"],differenceLabel:["differenceLabelWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],referenceStyle:["referenceWatcher"],referenceLines:["referenceWatcher"],suppressEvents:["suppressWatcher"],hoverHighlight:["hoverWatcher"],clickHighlight:["clickWatcher"],interactionKeys:["interactionWatcher"],unitTest:["unitTestWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}dumbbell-plot{cursor:default}dumbbell-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}dumbbell-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}dumbbell-plot .hidden{display:none}dumbbell-plot .axis{font-size:12px}dumbbell-plot .axis text{fill:#767676}dumbbell-plot .axis-label{text-anchor:middle;font:1rem sans-serif}dumbbell-plot .axis path{stroke:#767676}dumbbell-plot .grid line{stroke:#767676;stroke-opacity:0.6;shape-rendering:crispEdges;stroke-dasharray:4, 4}dumbbell-plot .grid path{stroke-width:0;stroke:#767676}dumbbell-plot .dumbbell-group{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear}dumbbell-plot .dumbbell-group__inactive{opacity:0}dumbbell-plot .dumbbell-group .dot{stroke:#ffffff}dumbbell-plot .dumbbell-group .dumbbell-series-label{font-size:1em}dumbbell-plot .dumbbell-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}dumbbell-plot .dumbbell-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}dumbbell-plot .annotations{pointer-events:none}dumbbell-plot .annotations .handle{pointer-events:all}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=vw();var Dw=undefined&&undefined.__rest||function(t,e){var i={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0)i[r]=t[r];if(t!=null&&typeof Object.getOwnPropertySymbols==="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++){if(e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n]))i[r[n]]=t[r[n]]}return i};var Mw=s.getLicenses;var Uw=t("group_charts",function(){function t(t){e(this,t);this.chartContent=[];this.selectionMode="multiple";this.onElementUpdate=new Function;this.filterAccessor="label";this.defaultClickElement=[];this.data=[];this.hoverElement="";this.clickElement=[]}t.prototype.componentWillLoad=function(){};t.prototype.componentWillUpdate=function(){if(!this.clickElement){this.clickElement=this.defaultClickElement}this.renderCharts()};t.prototype.onClick=function(t){this.handleClickElement(t)};t.prototype.handleClickElement=function(t){console.log("handleClickElement",t);if(this.selectionMode==="single"){this.clickElement.includes(t)?this.clickElement="":this.clickElement=[t]}else if(this.selectionMode==="multiple"){if(!this.clickElement.includes(t)){this.clickElement.push(t)}else{for(var e=this.clickElement.length-1;e>=0;e--){if(this.clickElement[e]===t){this.clickElement.splice(e,1)}}}}else{this.clickElement=[]}this.onElementUpdate(this.clickElement)};t.prototype.onHover=function(t){this.hoverElement=t};t.prototype.onMouseOut=function(){this.hoverElement=""};t.prototype.drawChart=function(t){var e=this;var i=Dw(t,["chartType","width"]);var n={onClickFunc:function(t){return e.onClick(t)},onHoverFunc:function(t){return e.onHover(t)},onMouseOutFunc:function(){return e.onMouseOut()},clickHighlight:this.clickElement,hoverHighlight:this.hoverElement};switch(t.chartType){case"bar-chart":return r("div",{class:"col--lg-"+t.width},r("bar-chart",Object.assign({width:t.width*100},n,i)));case"pie-chart":return r("div",{class:"col--lg-"+t.width},r("pie-chart",Object.assign({width:t.width*100},n,i)));case"scatter-plot":return r("div",{class:"col--lg-"+t.width},r("scatter-plot",Object.assign({width:t.width*100},n,i)));case"circle-packing":return r("div",{class:"col--lg-"+t.width},r("circle-packing",Object.assign({width:t.width*100},n,i)));case"clustered-force-layout":return r("div",{class:"col--lg-"+t.width},r("clustered-force-layout",Object.assign({width:t.width*100},n,i)));case"line-chart":return r("div",{class:"col--lg-"+t.width},r("line-chart",Object.assign({width:t.width*100},n,i)));case"world-map":return r("div",{class:"col--lg-"+t.width},r("world-map",Object.assign({width:t.width*100},n,i)));case"space":return r("div",{class:"col--lg-"+t.width});default:return}};t.prototype.renderCharts=function(){var t=this;return this.chartContent.map((function(e){return t.drawChart(e)}))};t.prototype.render=function(){return r("div",{class:"row"},this.renderCharts())};Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=Mw();var Tw="http://www.w3.org/1999/xhtml";var Ew={svg:"http://www.w3.org/2000/svg",xhtml:Tw,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Iw(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return Ew.hasOwnProperty(e)?{space:Ew[e],local:t}:t}function Nw(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===Tw&&e.documentElement.namespaceURI===Tw?e.createElement(t):e.createElementNS(i,t)}}function Ww(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Hw(t){var e=Iw(t);return(e.local?Ww:Nw)(e)}function Gw(){}function Pw(t){return t==null?Gw:function(){return this.querySelector(t)}}function Ow(t){if(typeof t!=="function")t=Pw(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new bx(r,this._parents)}function Vw(){return[]}function Rw(t){return t==null?Vw:function(){return this.querySelectorAll(t)}}function Yw(t){if(typeof t!=="function")t=Rw(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new bx(r,n)}function zw(t){return function(){return this.matches(t)}}function Xw(t){if(typeof t!=="function")t=zw(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new bx(r,this._parents)}function Fw(t){return new Array(t.length)}function Bw(){return new bx(this._enter||this._groups.map(Fw),this._parents)}function Kw(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}Kw.prototype={constructor:Kw,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function qw(t){return function(){return t}}var jw="$";function $w(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new Kw(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function Zw(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=jw+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=jw+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new Kw(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function Qw(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?Zw:$w,r=this._parents,n=this._groups;if(typeof t!=="function")t=qw(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new bx(a,r);a._enter=o;a._exit=l;return a}function Jw(){return new bx(this._exit||this._groups.map(Fw),this._parents)}function tS(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function eS(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new bx(a,this._parents)}function iS(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function rS(t){if(!t)t=nS;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new bx(n,this._parents).order()}function nS(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function sS(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function aS(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function oS(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function lS(){var t=0;this.each((function(){++t}));return t}function uS(){return!this.node()}function hS(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function cS(t){return function(){this.removeAttribute(t)}}function dS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fS(t,e){return function(){this.setAttribute(t,e)}}function pS(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function yS(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function vS(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function gS(t,e){var i=Iw(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?dS:cS:typeof e==="function"?i.local?vS:yS:i.local?pS:fS)(i,e))}function bS(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function mS(t){return function(){this.style.removeProperty(t)}}function AS(t,e,i){return function(){this.style.setProperty(t,e,i)}}function wS(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function SS(t,e,i){return arguments.length>1?this.each((e==null?mS:typeof e==="function"?wS:AS)(t,e,i==null?"":i)):xS(this.node(),t)}function xS(t,e){return t.style.getPropertyValue(e)||bS(t).getComputedStyle(t,null).getPropertyValue(e)}function kS(t){return function(){delete this[t]}}function LS(t,e){return function(){this[t]=e}}function _S(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function CS(t,e){return arguments.length>1?this.each((e==null?kS:typeof e==="function"?_S:LS)(t,e)):this.node()[t]}function DS(t){return t.trim().split(/^|\s+/)}function MS(t){return t.classList||new US(t)}function US(t){this._node=t;this._names=DS(t.getAttribute("class")||"")}US.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function TS(t,e){var i=MS(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function ES(t,e){var i=MS(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function IS(t){return function(){TS(this,t)}}function NS(t){return function(){ES(this,t)}}function WS(t,e){return function(){(e.apply(this,arguments)?TS:ES)(this,t)}}function HS(t,e){var i=DS(t+"");if(arguments.length<2){var r=MS(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?WS:e?IS:NS)(i,e))}function GS(){this.textContent=""}function PS(t){return function(){this.textContent=t}}function OS(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function VS(t){return arguments.length?this.each(t==null?GS:(typeof t==="function"?OS:PS)(t)):this.node().textContent}function RS(){this.innerHTML=""}function YS(t){return function(){this.innerHTML=t}}function zS(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function XS(t){return arguments.length?this.each(t==null?RS:(typeof t==="function"?zS:YS)(t)):this.node().innerHTML}function FS(){if(this.nextSibling)this.parentNode.appendChild(this)}function BS(){return this.each(FS)}function KS(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function qS(){return this.each(KS)}function jS(t){var e=typeof t==="function"?t:Hw(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function $S(){return null}function ZS(t,e){var i=typeof t==="function"?t:Hw(t),r=e==null?$S:typeof e==="function"?e:Pw(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function QS(){var t=this.parentNode;if(t)t.removeChild(this)}function JS(){return this.each(QS)}function tx(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ex(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ix(t){return this.select(t?ex:tx)}function rx(t){return arguments.length?this.property("__data__",t):this.node().__data__}var nx={};var sx=null;if(typeof document!=="undefined"){var ax=document.documentElement;if(!("onmouseenter"in ax)){nx={mouseenter:"mouseover",mouseleave:"mouseout"}}}function ox(t,e,i){t=lx(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function lx(t,e,i){return function(r){var n=sx;sx=r;try{t.call(this,this.__data__,e,i)}finally{sx=n}}}function ux(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function hx(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function cx(t,e,i){var r=nx.hasOwnProperty(t.type)?ox:lx;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function dx(t,e,i){var r=ux(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?cx:hx;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function fx(t,e,i){var r=bS(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function px(t,e){return function(){return fx(this,t,e)}}function yx(t,e){return function(){return fx(this,t,e.apply(this,arguments))}}function vx(t,e){return this.each((typeof e==="function"?yx:px)(t,e))}var gx=[null];function bx(t,e){this._groups=t;this._parents=e}function mx(){return new bx([[document.documentElement]],gx)}bx.prototype=mx.prototype={constructor:bx,select:Ow,selectAll:Yw,filter:Xw,data:Qw,enter:Bw,exit:Jw,join:tS,merge:eS,order:iS,sort:rS,call:sS,nodes:aS,node:oS,size:lS,empty:uS,each:hS,attr:gS,style:SS,property:CS,classed:HS,text:VS,html:XS,raise:BS,lower:qS,append:jS,insert:ZS,remove:JS,clone:ix,datum:rx,on:dx,dispatch:vx};function Ax(t){return typeof t==="string"?new bx([[document.querySelector(t)]],[document.documentElement]):new bx([[t]],gx)}function wx(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Sx(t){if(t.length===1)t=xx(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function xx(t){return function(e,i){return wx(t(e),i)}}var kx=Sx(wx);var Lx=kx.right;function _x(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var Cx=Math.sqrt(50),Dx=Math.sqrt(10),Mx=Math.sqrt(2);function Ux(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=Tx(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function Tx(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=Cx?10:s>=Dx?5:s>=Mx?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=Cx?10:s>=Dx?5:s>=Mx?2:1)}function Ex(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=Cx)n*=10;else if(s>=Dx)n*=5;else if(s>=Mx)n*=2;return e<t?-n:n}function Ix(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function Nx(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}function Wx(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var Hx="$";function Gx(){}Gx.prototype=Px.prototype={constructor:Gx,has:function(t){return Hx+t in this},get:function(t){return this[Hx+t]},set:function(t,e){this[Hx+t]=e;return this},remove:function(t){var e=Hx+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===Hx)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===Hx)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===Hx)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===Hx)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===Hx)++t;return t},empty:function(){for(var t in this)if(t[0]===Hx)return false;return true},each:function(t){for(var e in this)if(e[0]===Hx)t(this[e],e.slice(1),this)}};function Px(t,e){var i=new Gx;if(t instanceof Gx)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}function Ox(){var t=[],e=[],i,r,n;function s(e,n,a,o){if(n>=t.length){if(i!=null)e.sort(i);return r!=null?r(e):e}var l=-1,u=e.length,h=t[n++],c,d,f=Px(),p,y=a();while(++l<u){if(p=f.get(c=h(d=e[l])+"")){p.push(d)}else{f.set(c,[d])}}f.each((function(t,e){o(y,e,s(t,n,a,o))}));return y}function a(i,n){if(++n>t.length)return i;var s,o=e[n-1];if(r!=null&&n>=t.length)s=i.entries();else s=[],i.each((function(t,e){s.push({key:e,values:a(t,n)})}));return o!=null?s.sort((function(t,e){return o(t.key,e.key)})):s}return n={object:function(t){return s(t,0,Vx,Rx)},map:function(t){return s(t,0,Yx,zx)},entries:function(t){return a(s(t,0,Yx,zx),0)},key:function(e){t.push(e);return n},sortKeys:function(i){e[t.length-1]=i;return n},sortValues:function(t){i=t;return n},rollup:function(t){r=t;return n}}}function Vx(){return{}}function Rx(t,e,i){t[e]=i}function Yx(){return Px()}function zx(t,e,i){t.set(e,i)}var Xx=Array.prototype;var Fx=Xx.slice;var Bx={name:"implicit"};function Kx(){var t=Px(),e=[],i=[],r=Bx;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==Bx)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=Px();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=Fx.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return Kx(e,i).unknown(r)};Wx.apply(n,arguments);return n}function qx(){var t=Kx().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=_x(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return qx(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return Wx.apply(h(),arguments)}function jx(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function $x(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function Zx(){}var Qx=.7;var Jx=1/Qx;var tk="\\s*([+-]?\\d+)\\s*",ek="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ik="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rk=/^#([0-9a-f]{3,8})$/,nk=new RegExp("^rgb\\("+[tk,tk,tk]+"\\)$"),sk=new RegExp("^rgb\\("+[ik,ik,ik]+"\\)$"),ak=new RegExp("^rgba\\("+[tk,tk,tk,ek]+"\\)$"),ok=new RegExp("^rgba\\("+[ik,ik,ik,ek]+"\\)$"),lk=new RegExp("^hsl\\("+[ek,ik,ik]+"\\)$"),uk=new RegExp("^hsla\\("+[ek,ik,ik,ek]+"\\)$");var hk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jx(Zx,pk,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:ck,formatHex:ck,formatHsl:dk,formatRgb:fk,toString:fk});function ck(){return this.rgb().formatHex()}function dk(){return kk(this).formatHsl()}function fk(){return this.rgb().formatRgb()}function pk(t){var e,i;t=(t+"").trim().toLowerCase();return(e=rk.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?yk(e):i===3?new mk(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?vk(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?vk(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=nk.exec(t))?new mk(e[1],e[2],e[3],1):(e=sk.exec(t))?new mk(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ak.exec(t))?vk(e[1],e[2],e[3],e[4]):(e=ok.exec(t))?vk(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=lk.exec(t))?xk(e[1],e[2]/100,e[3]/100,1):(e=uk.exec(t))?xk(e[1],e[2]/100,e[3]/100,e[4]):hk.hasOwnProperty(t)?yk(hk[t]):t==="transparent"?new mk(NaN,NaN,NaN,0):null}function yk(t){return new mk(t>>16&255,t>>8&255,t&255,1)}function vk(t,e,i,r){if(r<=0)t=e=i=NaN;return new mk(t,e,i,r)}function gk(t){if(!(t instanceof Zx))t=pk(t);if(!t)return new mk;t=t.rgb();return new mk(t.r,t.g,t.b,t.opacity)}function bk(t,e,i,r){return arguments.length===1?gk(t):new mk(t,e,i,r==null?1:r)}function mk(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}jx(mk,bk,$x(Zx,{brighter:function(t){t=t==null?Jx:Math.pow(Jx,t);return new mk(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?Qx:Math.pow(Qx,t);return new mk(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:Ak,formatHex:Ak,formatRgb:wk,toString:wk}));function Ak(){return"#"+Sk(this.r)+Sk(this.g)+Sk(this.b)}function wk(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Sk(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function xk(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new _k(t,e,i,r)}function kk(t){if(t instanceof _k)return new _k(t.h,t.s,t.l,t.opacity);if(!(t instanceof Zx))t=pk(t);if(!t)return new _k;if(t instanceof _k)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new _k(a,o,l,t.opacity)}function Lk(t,e,i,r){return arguments.length===1?kk(t):new _k(t,e,i,r==null?1:r)}function _k(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}jx(_k,Lk,$x(Zx,{brighter:function(t){t=t==null?Jx:Math.pow(Jx,t);return new _k(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?Qx:Math.pow(Qx,t);return new _k(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new mk(Ck(t>=240?t-240:t+120,n,r),Ck(t,n,r),Ck(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Ck(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function Dk(t){return function(){return t}}function Mk(t,e){return function(i){return t+i*e}}function Uk(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function Tk(t){return(t=+t)===1?Ek:function(e,i){return i-e?Uk(e,i,t):Dk(isNaN(e)?i:e)}}function Ek(t,e){var i=e-t;return i?Mk(t,i):Dk(isNaN(t)?e:t)}var Ik=function t(e){var i=Tk(e);function r(t,e){var r=i((t=bk(t)).r,(e=bk(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=Ek(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function Nk(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}var Wk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Hk=new RegExp(Wk.source,"g");function Gk(t){return function(){return t}}function Pk(t){return function(e){return t(e)+""}}function Ok(t,e){var i=Wk.lastIndex=Hk.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=Wk.exec(t))&&(n=Hk.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:Nk(r,n)})}i=Hk.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?Pk(l[0].x):Gk(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}var Vk=180/Math.PI;var Rk={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Yk(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*Vk,skewX:Math.atan(l)*Vk,scaleX:a,scaleY:o}}var zk,Xk,Fk,Bk;function Kk(t){if(t==="none")return Rk;if(!zk)zk=document.createElement("DIV"),Xk=document.documentElement,Fk=document.defaultView;zk.style.transform=t;t=Fk.getComputedStyle(Xk.appendChild(zk),null).getPropertyValue("transform");Xk.removeChild(zk);t=t.slice(7,-1).split(",");return Yk(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function qk(t){if(t==null)return Rk;if(!Bk)Bk=document.createElementNS("http://www.w3.org/2000/svg","g");Bk.setAttribute("transform",t);if(!(t=Bk.transform.baseVal.consolidate()))return Rk;t=t.matrix;return Yk(t.a,t.b,t.c,t.d,t.e,t.f)}function jk(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:Nk(t,n)},{i:l-2,x:Nk(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:Nk(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:Nk(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:Nk(t,i)},{i:o-2,x:Nk(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var $k=jk(Kk,"px, ","px)","deg)");var Zk=jk(qk,", ",")",")");function Qk(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Jk(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function tL(t){return t=Jk(Math.abs(t)),t?t[1]:NaN}function eL(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function iL(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var rL=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nL(t){if(!(e=rL.exec(t)))throw new Error("invalid format: "+t);var e;return new sL({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}nL.prototype=sL.prototype;function sL(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}sL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function aL(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var oL;function lL(t,e){var i=Jk(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(oL=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Jk(t,Math.max(0,e+s-1))[0]}function uL(t,e){var i=Jk(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var hL={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:Qk,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return uL(t*100,e)},r:uL,s:lL,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function cL(t){return t}var dL=Array.prototype.map,fL=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function pL(t){var e=t.grouping===undefined||t.thousands===undefined?cL:eL(dL.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?cL:iL(dL.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=nL(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!hL[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=hL[b],S=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function x(t){var i=m,r=A,a,d,x;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var k=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=aL(t);if(k&&+t===0&&c!=="+")k=false;i=(k?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?fL[8+oL/3]:"")+r+(k&&c==="("?")":"");if(S){a=-1,d=t.length;while(++a<d){if(x=t.charCodeAt(a),48>x||x>57){r=(x===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var L=i.length+t.length+r.length,_=L<p?new Array(p-L+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,L=_.length>>1)+i+t+r+_.slice(L);break;default:t=_+i+t+r;break}return s(t)}x.toString=function(){return t+""};return x}function h(t,e){var i=u((t=nL(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(tL(e)/3)))*3,n=Math.pow(10,-r),s=fL[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var yL;var vL;var gL;bL({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function bL(t){yL=pL(t);vL=yL.format;gL=yL.formatPrefix;return yL}function mL(t){return Math.max(0,-tL(Math.abs(t)))}function AL(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(tL(e)/3)))*3-tL(Math.abs(t)))}function wL(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,tL(e)-tL(t))+1}function SL(t,e,i,r){var n=Ex(t,e,i),s;r=nL(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=AL(n,a)))r.precision=s;return gL(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=wL(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=mL(n)))r.precision=s-(r.type==="%")*2;break}}return vL(r)}function xL(t){var e=t.domain;t.ticks=function(t){var i=e();return Ux(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return SL(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=Tx(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=Tx(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=Tx(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function kL(){var t=0,e=1,i=1,r=[.5],n=[0,1],s;function a(t){return t<=t?n[Lx(r,t,0,i)]:s}function o(){var n=-1;r=new Array(i);while(++n<i)r[n]=((n+1)*e-(n-i)*t)/(i+1);return a}a.domain=function(i){return arguments.length?(t=+i[0],e=+i[1],o()):[t,e]};a.range=function(t){return arguments.length?(i=(n=Fx.call(t)).length-1,o()):n.slice()};a.invertExtent=function(s){var a=n.indexOf(s);return a<0?[NaN,NaN]:a<1?[t,r[0]]:a>=i?[r[i-1],e]:[r[a-1],r[a]]};a.unknown=function(t){return arguments.length?(s=t,a):a};a.thresholds=function(){return r.slice()};a.copy=function(){return kL().domain([t,e]).range(n).unknown(s)};return Wx.apply(xL(a),arguments)}function LL(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function _L(t){return 1-Math.sqrt(1-t*t)}var CL=s.propDefaultValues;var DL=function(){function t(){}return t}();DL.mainTitle="Heat Map Title";DL.subTitle="This is the heat map's subtitle";DL.height=250;DL.width=500;DL.margin={top:250*.01,bottom:250*.01,right:500*.01,left:500*.01};DL.padding={top:20,bottom:30,right:60,left:80};DL.xAccessor="date";DL.yAccessor="category";DL.valueAccessor="value";DL.shape="rect";DL.hideAxisPath=CL.showBaselineFalse;DL.accessibility=CL.accessibility;DL.highestHeadingLevel=CL.highestHeadingLevel;DL.xAxis=CL.xAxis;DL.yAxis=CL.yAxis;DL.wrapLabel=CL.wrapLabel;DL.strokeWidth=CL.strokeWidth2;DL.colorPalette=CL.colorPaletteSequential;DL.colorSteps=CL.colorSteps5;DL.hoverStyle=CL.hoverStyle;DL.clickStyle=CL.clickStyle;DL.cursor=CL.cursor;DL.hoverOpacity=CL.hoverOpacity;DL.dataLabel=CL.dataLabel;DL.legend=CL.legend;DL.tooltipLabel=CL.tooltipLabel;DL.showTooltip=CL.showTooltip;DL.suppressEvents=CL.suppressEvents;DL.referenceLines=CL.referenceLines;DL.annotations=CL.annotations;DL.clickHighlight=CL.clickHighlight;var ML={value:function(){}};function UL(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new TL(i)}function TL(t){this._=t}function EL(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}TL.prototype=UL.prototype={constructor:TL,on:function(t,e){var i=this._,r=EL(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=IL(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=NL(i[n],t.name,e);else if(e==null)for(n in i)i[n]=NL(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new TL(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function IL(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function NL(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=ML,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var WL=0,HL=0,GL=0,PL=1e3,OL,VL,RL=0,YL=0,zL=0,XL=typeof performance==="object"&&performance.now?performance:Date,FL=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function BL(){return YL||(FL(KL),YL=XL.now()+zL)}function KL(){YL=0}function qL(){this._call=this._time=this._next=null}qL.prototype=jL.prototype={constructor:qL,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?BL():+i)+(e==null?0:+e);if(!this._next&&VL!==this){if(VL)VL._next=this;else OL=this;VL=this}this._call=t;this._time=i;t_()},stop:function(){if(this._call){this._call=null;this._time=Infinity;t_()}}};function jL(t,e,i){var r=new qL;r.restart(t,e,i);return r}function $L(){BL();++WL;var t=OL,e;while(t){if((e=YL-t._time)>=0)t._call.call(null,e);t=t._next}--WL}function ZL(){YL=(RL=XL.now())+zL;WL=HL=0;try{$L()}finally{WL=0;JL();YL=0}}function QL(){var t=XL.now(),e=t-RL;if(e>PL)zL-=e,RL=t}function JL(){var t,e=OL,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:OL=i}}VL=t;t_(r)}function t_(t){if(WL)return;if(HL)HL=clearTimeout(HL);var e=t-YL;if(e>24){if(t<Infinity)HL=setTimeout(ZL,t-XL.now()-zL);if(GL)GL=clearInterval(GL)}else{if(!GL)RL=XL.now(),GL=setInterval(QL,PL);WL=1,FL(ZL)}}function e_(t,e,i){var r=new qL;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var i_=UL("start","end","interrupt");var r_=[];var n_=0;var s_=1;var a_=2;var o_=3;var l_=4;var u_=5;var h_=6;function c_(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;y_(t,i,{name:e,index:r,group:n,on:i_,tween:r_,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:n_})}function d_(t,e){var i=p_(t,e);if(i.state>n_)throw new Error("too late; already scheduled");return i}function f_(t,e){var i=p_(t,e);if(i.state>a_)throw new Error("too late; already started");return i}function p_(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function y_(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=jL(s,0,i.time);function s(t){i.state=s_;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==s_)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===o_)return e_(a);if(d.state===l_){d.state=h_;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=h_;d.timer.stop();delete r[u]}}e_((function(){if(i.state===o_){i.state=l_;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=a_;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==a_)return;i.state=o_;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=u_,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===u_){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=h_;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function v_(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>a_&&r.state<u_;r.state=h_;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function g_(t){return this.each((function(){v_(this,t)}))}function b_(t,e){var i,r;return function(){var n=f_(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function m_(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=f_(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function A_(t,e){var i=this._id;t+="";if(arguments.length<2){var r=p_(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?b_:m_)(i,t,e))}function w_(t,e,i){var r=t._id;t.each((function(){var t=f_(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return p_(t,r).value[e]}}function S_(t,e){var i;return(typeof e==="number"?Nk:e instanceof pk?Ik:(i=pk(e))?(e=i,Ik):Ok)(t,e)}function x_(t){return function(){this.removeAttribute(t)}}function k_(t){return function(){this.removeAttributeNS(t.space,t.local)}}function L_(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function __(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function C_(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function D_(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function M_(t,e){var i=Iw(t),r=i==="transform"?Zk:S_;return this.attrTween(t,typeof e==="function"?(i.local?D_:C_)(i,r,w_(this,"attr."+t,e)):e==null?(i.local?k_:x_)(i):(i.local?__:L_)(i,r,e+""))}function U_(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function T_(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function E_(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=Iw(t);return this.tween(i,(r.local?U_:T_)(r,e))}function I_(t,e){return function(){d_(this,t).delay=+e.apply(this,arguments)}}function N_(t,e){return e=+e,function(){d_(this,t).delay=e}}function W_(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?I_:N_)(e,t)):p_(this.node(),e).delay}function H_(t,e){return function(){f_(this,t).duration=+e.apply(this,arguments)}}function G_(t,e){return e=+e,function(){f_(this,t).duration=e}}function P_(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?H_:G_)(e,t)):p_(this.node(),e).duration}function O_(t,e){if(typeof e!=="function")throw new Error;return function(){f_(this,t).ease=e}}function V_(t){var e=this._id;return arguments.length?this.each(O_(e,t)):p_(this.node(),e).ease}function R_(t){if(typeof t!=="function")t=zw(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new hC(r,this._parents,this._name,this._id)}function Y_(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new hC(a,this._parents,this._name,this._id)}function z_(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function X_(t,e,i){var r,n,s=z_(e)?d_:f_;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function F_(t,e){var i=this._id;return arguments.length<2?p_(this.node(),i).on.on(t):this.each(X_(i,t,e))}function B_(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function K_(){return this.on("end.remove",B_(this._id))}function q_(t){var e=this._name,i=this._id;if(typeof t!=="function")t=Pw(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;c_(u[d],e,i,d,u,p_(h,i))}}}return new hC(s,this._parents,e,i)}function j_(t){var e=this._name,i=this._id;if(typeof t!=="function")t=Rw(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=p_(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){c_(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new hC(s,a,e,i)}var $_=mx.prototype.constructor;function Z_(){return new $_(this._groups,this._parents)}function Q_(t,e){var i,r,n;return function(){var s=xS(this,t),a=(this.style.removeProperty(t),xS(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function J_(t){return function(){this.style.removeProperty(t)}}function tC(t,e,i){var r,n;return function(){var s=xS(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function eC(t,e,i){var r,n,s;return function(){var a=xS(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),xS(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function iC(t,e,i){var r=(t+="")==="transform"?$k:S_;return e==null?this.styleTween(t,Q_(t,r)).on("end.style."+t,J_(t)):this.styleTween(t,typeof e==="function"?eC(t,r,w_(this,"style."+t,e)):tC(t,r,e+""),i)}function rC(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function nC(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,rC(t,e,i==null?"":i))}function sC(t){return function(){this.textContent=t}}function aC(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function oC(t){return this.tween("text",typeof t==="function"?aC(w_(this,"text",t)):sC(t==null?"":t+""))}function lC(){var t=this._name,e=this._id,i=dC();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=p_(l,e);c_(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new hC(r,this._parents,t,i)}var uC=0;function hC(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function cC(t){return mx().transition(t)}function dC(){return++uC}var fC=mx.prototype;hC.prototype=cC.prototype={constructor:hC,select:q_,selectAll:j_,filter:R_,merge:Y_,selection:Z_,transition:lC,call:fC.call,nodes:fC.nodes,node:fC.node,size:fC.size,empty:fC.empty,each:fC.each,on:F_,attr:M_,attrTween:E_,style:iC,styleTween:nC,text:oC,remove:K_,tween:A_,delay:W_,duration:P_,ease:V_};var pC={time:null,delay:0,duration:250,ease:LL};function yC(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return pC.time=BL(),pC}}return i}function vC(t){var e,i;if(t instanceof hC){e=t._id,t=t._name}else{e=dC(),(i=pC).time=BL(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){c_(l,t,e,u,a,i||yC(l,e))}}}return new hC(r,this._parents,t,e)}mx.prototype.interrupt=g_;mx.prototype.transition=vC;var gC=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var bC=new Uint8Array(16);function mC(){if(!gC){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return gC(bC)}var AC=[];for(var wC=0;wC<256;++wC){AC[wC]=(wC+256).toString(16).substr(1)}function SC(t,e){var i=e||0;var r=AC;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function xC(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||mC)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||SC(n)}var kC=s.calculateLuminance,LC=s.prepareStrokeColorsFromScheme,_C=s.verifyTextHasSpace,CC=s.checkAttributeTransitions,DC=s.createTextStrokeFilter,MC=s.drawHoverStrokes,UC=s.removeHoverStrokes,TC=s.buildStrokes,EC=s.convertColorsToTextures,IC=s.findTagLevel,NC=s.initializeDescriptionRoot,WC=s.initializeElementAccess,HC=s.setElementFocusHandler,GC=s.setElementAccessID,PC=s.setAccessibilityController,OC=s.hideNonessentialGroups,VC=s.setAccessTitle,RC=s.setAccessSubtitle,YC=s.setAccessLongDescription,zC=s.setAccessExecutiveSummary,XC=s.setAccessPurpose,FC=s.setAccessContext,BC=s.setAccessStatistics,KC=s.setAccessChartCounts,qC=s.setAccessXAxis,jC=s.setAccessYAxis,$C=s.setAccessStructure,ZC=s.setAccessAnnotation,QC=s.retainAccessFocus,JC=s.checkAccessFocus,tD=s.setElementInteractionAccessState,eD=s.setAccessibilityDescriptionWidth,iD=s.autoTextColor,rD=s.annotate,nD=s.chartAccessors,sD=s.checkInteraction,aD=s.checkClicked,oD=s.checkHovered,lD=s.convertVisaColor,uD=s.drawAxis,hD=s.drawLegend,cD=s.drawTooltip,dD=s.formatStats,fD=s.formatDate,pD=s.getColors,yD=s.getLicenses,vD=s.getPadding,gD=s.getScopedData,bD=s.initTooltipStyle,mD=s.overrideTitleTooltip,AD=s.placeDataLabels,wD=s.scopeDataKeys,SD=s.transitionEndAll,xD=s.validateAccessibilityProps;var kD=t("heat_map",function(){function t(t){var r=this;e(this,t);this.mainTitle=DL.mainTitle;this.subTitle=DL.subTitle;this.height=DL.height;this.width=DL.width;this.highestHeadingLevel=DL.highestHeadingLevel;this.margin=DL.margin;this.padding=DL.padding;this.xAccessor=DL.xAccessor;this.yAccessor=DL.yAccessor;this.valueAccessor=DL.valueAccessor;this.xAxis=DL.xAxis;this.yAxis=DL.yAxis;this.wrapLabel=DL.wrapLabel;this.hideAxisPath=DL.hideAxisPath;this.colorPalette=DL.colorPalette;this.colorSteps=DL.colorSteps;this.hoverStyle=DL.hoverStyle;this.clickStyle=DL.clickStyle;this.cursor=DL.cursor;this.shape=DL.shape;this.hoverOpacity=DL.hoverOpacity;this.strokeWidth=DL.strokeWidth;this.dataLabel=DL.dataLabel;this.showTooltip=DL.showTooltip;this.tooltipLabel=DL.tooltipLabel;this.accessibility=DL.accessibility;this.legend=DL.legend;this.annotations=DL.annotations;this.clickHighlight=DL.clickHighlight;this.suppressEvents=DL.suppressEvents;this.shouldValidateAccessibility=true;this.nest=[];this.datakeys=[];this.updated=true;this.shouldValidate=false;this.shouldUpdateData=false;this.shouldSetDimensions=false;this.shouldUpdateTableData=false;this.shouldUpdateScales=false;this.shouldResetRoot=false;this.shouldSetColors=false;this.shouldValidateInteractionKeys=false;this.shouldFormatClickHighlight=false;this.shouldFormatHoverHighlight=false;this.shouldUpdateAnnotations=false;this.shouldUpdateXAxis=false;this.shouldUpdateYAxis=false;this.shouldSetGlobalSelections=false;this.shouldEnterUpdateExit=false;this.shouldUpdateGeometries=false;this.shouldSetSelectionClass=false;this.shouldDrawInteractionState=false;this.shouldUpdateLegend=false;this.shouldUpdateCursor=false;this.shouldBindInteractivity=false;this.shouldUpdateLabels=false;this.shouldSetLabelOpacity=false;this.shouldSwapXAxis=false;this.shouldSwapYAxis=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.shouldSetTextures=false;this.shouldSetStrokes=false;this.strokes={};this.topLevel="h2";this.bottomLevel="p";this.textTreatmentHandler=function(t,e,i){var n=!r.accessibility.hideTextures&&r.accessibility.showExperimentalTextures?r.fillColors(t.valueAccessor):r.rawHeat(t.valueAccessor);var s=iD(n);var a=Ax(i[e]);a.attr("filter",!a.classed("textIsMoving")?DC({root:r.svg.node(),id:r.chartID,color:n}):null);return s};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.dataWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldSetGlobalSelections=true;this.shouldUpdateScales=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldValidate=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldDrawInteractionState=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetXAxisAccessibility=true;this.shouldSetYAxisAccessibility=true;this.shouldSetTextures=true;this.shouldSetStrokes=true;this.shouldSetLabelOpacity=true};t.prototype.idWatcher=function(t,e){this.chartID=t;this.heatMapEl.id=this.chartID;this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateLegend=true;this.shouldSetTextures=true;this.shouldDrawInteractionState=true;this.shouldSetStrokes=true};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetAnnotationAccessibility=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.titleWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.subtitleWatcher=function(t,e){this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.layoutWatcher=function(t,e){this.shouldSetDimensions=true;this.shouldUpdateScales=true;this.shouldSetTextures=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetLabelOpacity=true};t.prototype.xAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldFormatClickHighlight=true;this.shouldFormatHoverHighlight=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetXAxisAccessibility=true;this.shouldSetTextures=true;this.shouldSetStrokes=true;this.shouldSetLabelOpacity=true};t.prototype.yAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldFormatClickHighlight=true;this.shouldFormatHoverHighlight=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetYAxisAccessibility=true;this.shouldSetTextures=true;this.shouldSetStrokes=true;this.shouldSetLabelOpacity=true};t.prototype.groupAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldUpdateTableData=true;this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldSetLabelOpacity=true;this.shouldUpdateLabels=true;this.shouldSetGeometryAriaLabels=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldSetTextures=true;this.shouldSetStrokes=true};t.prototype.xKeyOrderWatcher=function(t,e){this.shouldUpdateData=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldDrawInteractionState=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetXAxisAccessibility=true;this.shouldSetTextures=true;this.shouldSetStrokes=true};t.prototype.yKeyOrderWatcher=function(t,e){this.shouldUpdateData=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldDrawInteractionState=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetYAxisAccessibility=true;this.shouldSetTextures=true;this.shouldSetStrokes=true};t.prototype.xAxisWatcher=function(t,e){var i=t&&t.format?t.format:false;var r=e&&e.format?e.format:false;var n=t&&t.placement?t.placement:false;var s=e&&e.placement?e.placement:false;if(i!==r){this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldSetTextures=true;this.shouldSetGlobalSelections=true;this.shouldFormatClickHighlight=true;this.shouldFormatHoverHighlight=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true}if(n!==s){this.shouldSwapXAxis=true}this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true};t.prototype.yAxisWatcher=function(t,e){var i=t&&t.format?t.format:false;var r=e&&e.format?e.format:false;var n=t&&t.placement?t.placement:false;var s=e&&e.placement?e.placement:false;if(i!==r){this.shouldUpdateData=true;this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldSetTextures=true;this.shouldSetGlobalSelections=true;this.shouldFormatClickHighlight=true;this.shouldFormatHoverHighlight=true;this.shouldDrawInteractionState=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true}if(n!==s){this.shouldSwapYAxis=true}this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true};t.prototype.wrapLabelWatcher=function(t,e){this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true};t.prototype.hideAxisPathWatcher=function(t,e){this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true};t.prototype.colorsWatcher=function(t,e){this.shouldSetColors=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateLegend=true;this.shouldDrawInteractionState=true;this.shouldSetTextures=true;this.shouldSetStrokes=true};t.prototype.hoverStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true};t.prototype.clickStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true};t.prototype.shapeWatcher=function(t,e){this.shouldUpdateGeometries=true};t.prototype.cursorWatcher=function(t,e){this.shouldUpdateCursor=true};t.prototype.strokeWidthWatcher=function(t,e){this.shouldUpdateGeometries=true;this.shouldUpdateScales=true;this.shouldSetTextures=true;this.shouldUpdateGeometries=true;this.shouldSetStrokes=true};t.prototype.hoverOpacityWatcher=function(t,e){this.shouldSetLabelOpacity=true;this.shouldDrawInteractionState=true};t.prototype.labelWatcher=function(t,e){this.shouldUpdateLabels=true;this.shouldUpdateTableData=true;var i=t&&t.visible;var r=e&&e.visible;if(i!==r){this.shouldSetLabelOpacity=true}};t.prototype.showTooltipWatcher=function(t,e){};t.prototype.tooltipLabelWatcher=function(t,e){this.shouldUpdateTableData=true};t.prototype.legendWatcher=function(t,e){this.shouldUpdateLegend=true};t.prototype.suppressWatcher=function(t,e){this.shouldBindInteractivity=true;this.shouldUpdateCursor=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.annotationsWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateAnnotations=true;this.shouldSetAnnotationAccessibility=true};t.prototype.accessibilityWatcher=function(t,e){this.shouldValidate=true;var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}var A=t&&t.hideTextures?t.hideTextures:false;var w=e&&e.hideTextures?e.hideTextures:false;var S=t&&t.showExperimentalTextures?t.showExperimentalTextures:false;var x=e&&e.showExperimentalTextures?e.showExperimentalTextures:false;if(A!==w||S!==x){this.shouldSetTextures=true;this.shouldUpdateLegend=true;this.shouldSetStrokes=true;this.shouldDrawInteractionState=true}var k=t&&t.showSmallLabels?t.showSmallLabels:false;var L=e&&e.showSmallLabels?e.showSmallLabels:false;if(k!==L){this.shouldSetLabelOpacity=true}var _=t&&t.hideStrokes?t.hideStrokes:false;var C=e&&e.hideStrokes?e.hideStrokes:false;if(_!==C){this.shouldUpdateLegend=true;this.shouldSetStrokes=true;this.shouldDrawInteractionState=true}var D=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;var M=e&&e.keyboardNavConfig&&e.keyboardNavConfig.disabled?e.keyboardNavConfig.disabled:false;var U=t&&t.elementsAreInterface?t.elementsAreInterface:false;var T=e&&e.elementsAreInterface?e.elementsAreInterface:false;if(D!==M||U!==T){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(U!==T){this.shouldSetSelectionClass=true}};t.prototype.valueOverrideWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateAnnotations=true;this.shouldSetTextures=true};t.prototype.clickWatcher=function(t,e){this.shouldFormatClickHighlight=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true};t.prototype.hoverWatcher=function(t,e){this.shouldFormatHoverHighlight=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true};t.prototype.interactionWatcher=function(t,e){this.shouldValidateInteractionKeys=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateTableData=true;this.shouldSetGeometryAriaLabels=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.defaults=true;t.chartID=t.uniqueID||"heat-map-"+xC();t.heatMapEl.id=t.chartID;t.setTagLevels();t.prepareData();t.setDimensions();t.setColors();t.prepareScales();t.validateInteractionKeys();t.setTableData();t.shouldValidateAccessibilityProps();t.formatClickHighlight();t.formatHoverHighlight();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.renderRootElements();t.setTooltipInitialStyle();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.setTextures();t.setStrokes();t.setGlobalSelections();t.enterGeometries();t.updateGeometries();t.exitGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.drawGeometries();t.setChartCountAccessibility();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.drawDataLabels();t.drawLegendElements();t.setSelectedClass();t.updateInteractionState();t.bindInteractivity();t.drawAnnotations();t.setAnnotationAccessibility();t.drawXAxis();t.setXAxisAccessibility();t.drawYAxis();t.setYAxisAccessibility();OC(t.root.node(),t.map.node());t.setGroupAccessibilityID();t.onChangeHandler();t.duration=750;t.defaults=false;e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}if(t.shouldResetRoot){t.reSetRoot();t.shouldResetRoot=false}if(t.shouldSetTextures){t.setTextures();t.shouldSetTextures=false}if(t.shouldSetStrokes){t.setStrokes();t.shouldSetStrokes=false}if(t.shouldSetGlobalSelections){t.setGlobalSelections();t.shouldSetGlobalSelections=false}if(t.shouldEnterUpdateExit){t.enterGeometries();t.updateGeometries();t.exitGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.shouldEnterUpdateExit=false}if(t.shouldUpdateGeometries){t.drawGeometries();t.shouldUpdateGeometries=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldUpdateLegend){t.drawLegendElements();t.shouldUpdateLegend=false}if(t.shouldUpdateLabels){t.drawDataLabels();t.shouldUpdateLabels=false}if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldSetLabelOpacity){t.setLabelOpacity();t.shouldSetLabelOpacity=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}if(t.shouldUpdateCursor){t.updateCursor();t.shouldUpdateCursor=false}if(t.shouldBindInteractivity){t.bindInteractivity();t.shouldBindInteractivity=false}if(t.shouldUpdateAnnotations){t.drawAnnotations();t.shouldUpdateAnnotations=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}if(t.shouldSwapXAxis){t.drawXAxis(true);t.shouldSwapXAxis=false}if(t.shouldSwapYAxis){t.drawYAxis(true);t.shouldSwapYAxis=false}if(t.shouldUpdateXAxis){t.drawXAxis();t.shouldUpdateXAxis=false}if(t.shouldSetXAxisAccessibility){t.setXAxisAccessibility();t.shouldSetXAxisAccessibility=false}if(t.shouldUpdateYAxis){t.drawYAxis();t.shouldUpdateYAxis=false}if(t.shouldSetYAxisAccessibility){t.setYAxisAccessibility();t.shouldSetYAxisAccessibility=false}t.onChangeHandler();e("component did update")}))};t.prototype.shouldValidateAccessibilityProps=function(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;xD(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:!this.suppressEvents?this.clickFunc.emit:undefined}})}};t.prototype.formatClickHighlight=function(){var t=this;if(this.clickHighlight){this.clickHighlight.map((function(e){if(!e["xAccessor"]||!e["yAccessor"]){e["xAccessor"]=e[t.xAccessor]instanceof Date?fD({date:e[t.xAccessor],format:t.xAxis.format,offsetTimezone:true}):e[t.xAccessor];e["yAccessor"]=e[t.yAccessor]instanceof Date?fD({date:e[t.yAccessor],format:t.yAxis.format,offsetTimezone:true}):e[t.yAccessor]}}))}};t.prototype.formatHoverHighlight=function(){if(this.hoverHighlight){if(!this.hoverHighlight["xAccessor"]||!this.hoverHighlight["yAccessor"]){this.hoverHighlight["xAccessor"]=this.hoverHighlight[this.xAccessor]instanceof Date?fD({date:this.hoverHighlight[this.xAccessor],format:this.xAxis.format,offsetTimezone:true}):this.hoverHighlight[this.xAccessor];this.hoverHighlight["yAccessor"]=this.hoverHighlight[this.yAccessor]instanceof Date?fD({date:this.hoverHighlight[this.yAccessor],format:this.yAxis.format,offsetTimezone:true}):this.hoverHighlight[this.yAccessor]}}};t.prototype.setDimensions=function(){this.padding=typeof this.padding==="string"?vD(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.validateInteractionKeys=function(){var t=this;if(this.interactionKeys&&this.interactionKeys.length){if(this.interactionKeys.includes(this.xAccessor)||this.interactionKeys.includes(this.yAccessor)){var e=[];this.interactionKeys.map((function(i){var r=i===t.xAccessor?"xAccessor":i===t.yAccessor?"yAccessor":i;e.push(r)}));this.innerInteractionKeys=e}}else{this.innerInteractionKeys=["xAccessor","yAccessor"]}};t.prototype.prepareScales=function(){var t=this;var e=(this.minValueOverride||this.minValueOverride===0)&&this.minValueOverride<Nx(this.preppedData,(function(t){return t.valueAccessor}))?this.minValueOverride:Nx(this.preppedData,(function(t){return t.valueAccessor}));var i=(this.maxValueOverride||this.maxValueOverride===0)&&this.maxValueOverride>Ix(this.preppedData,(function(t){return t.valueAccessor}))?this.maxValueOverride:Ix(this.preppedData,(function(t){return t.valueAccessor}));this.x=qx().domain(this.xKeyOrder?this.xKeyOrder:this.preppedData.map((function(t){return t.xAccessor}))).range([0,this.innerPaddedWidth]);this.x.padding(this.strokeWidth?this.strokeWidth/this.x.bandwidth():0);this.y=qx().domain(this.yKeyOrder?this.yKeyOrder:this.preppedData.map((function(t){return t.yAccessor}))).range([0,this.innerPaddedHeight]);this.y.padding(this.strokeWidth?this.strokeWidth/this.y.bandwidth():0);this.heat=kL().domain([e,i]);var r=[];var n=[];var s=0;var a=Math.ceil(this.preparedColors.length/2);var o=this.colorPalette&&this.colorPalette.includes("diverging");var l=this.colorPalette&&this.colorPalette.includes("dark");this.preparedColors.forEach((function(e){var i=LC(e,s,t.preparedColors,o?"diverging":"sequential");if(o){var u=kC(i.fillColor);var h=kC(i.textureColor);var c=u>h?i.textureColor:i.fillColor;var d=u<h?i.textureColor:i.fillColor;if(t.preparedColors.length%2&&s===(t.preparedColors.length-1)/2){n.push(l?c:d);r.push(l?d:c)}else{r.push(l?c:d);n.push(l?d:c)}}else{if(s+1<a){n.push(t.preparedColors[0]);r.push(t.preparedColors[t.preparedColors.length-1])}else{r.push(t.preparedColors[0]);n.push(t.preparedColors[t.preparedColors.length-1])}}s++}));this.fillColors=kL().domain([e,i]).range(n);this.strokeColors=kL().domain([e,i]).range(r);this.rawHeat=kL().domain([e,i]).range(this.preparedColors);this.updateCheck=true};t.prototype.setColors=function(){this.preparedColors=this.colors?lD(this.colors):pD(this.colorPalette,this.colorSteps)};t.prototype.setTextures=function(){var t=this.colorPalette&&this.colorPalette.includes("diverging")?"diverging":"sequential";var e=t==="diverging"?11:9;if(this.accessibility.hideTextures||this.colorSteps>e||!this.accessibility.showExperimentalTextures){this.colorArr=this.preparedColors}else{var i=EC({colors:this.preparedColors,rootSVG:this.svg.node(),id:this.chartID,scheme:t});this.colorArr=i}this.heat.range(this.colorArr)};t.prototype.setStrokes=function(){var t=Object.assign(Object.assign({},this.clickStyle),{color:undefined});var e=Object.assign(Object.assign({},this.hoverStyle),{color:undefined});this.strokes=TC({root:this.svg.node(),id:this.chartID,colors:!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.fillColors.range():this.preparedColors,clickStyle:t,hoverStyle:e,strokeOverride:!this.accessibility.hideTextures&&this.accessibility.showExperimentalTextures?this.strokeColors.range():undefined})};t.prototype.setTableData=function(){var t=wD(this,nD,"heat-map");this.tableData=gD(this.data,t);this.tableColumns=Object.keys(t)};t.prototype.prepareData=function(){var t=this;if(this.updateCheck){this.interpolating=this.preppedData;var e=this.x.domain();var i=this.x.range();var r=this.y.domain();var n=this.y.range();this.interpolating.x=qx().domain(e).range(i);this.interpolating.y=qx().domain(r).range(n)}this.preppedData=this.data.map((function(e){var i=Object.assign({},e);i["valueAccessor"]=parseFloat(e[t.valueAccessor]);i["xAccessor"]=e[t.xAccessor]instanceof Date?fD({date:e[t.xAccessor],format:t.xAxis.format,offsetTimezone:true}):e[t.xAccessor];i["yAccessor"]=e[t.yAccessor]instanceof Date?fD({date:e[t.yAccessor],format:t.yAxis.format,offsetTimezone:true}):e[t.yAccessor];return i}));this.nest=Ox().key((function(e){return e[t.yAccessor]})).entries(this.preppedData);this.datakeys=this.nest.map((function(t){return t.key}))};t.prototype.reSetRoot=function(){this.svg.transition("root_reset").duration(this.duration).ease(_L).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root.transition("root_reset").duration(this.duration).ease(_L).attr("transform","translate("+this.margin.left+", "+this.margin.top+")");this.rootG.transition("root_reset").duration(this.duration).ease(_L).attr("transform","translate("+this.padding.left+", "+this.padding.top+")");eD(this.chartID,this.width)};t.prototype.drawXAxis=function(t){uD({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,top:this.xAxis.placement==="top",wrapLabel:this.wrapLabel?this.x.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:t||!this.xAxis.visible,hidePath:this.hideAxisPath})};t.prototype.drawYAxis=function(t){uD({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:this.yAxis.placement!=="right",right:this.yAxis.placement==="right",format:this.yAxis.format,wrapLabel:this.wrapLabel?this.padding.left||100:"",tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:t||!this.yAxis.visible,hidePath:this.hideAxisPath})};t.prototype.setXAxisAccessibility=function(){qC({rootEle:this.heatMapEl,hasXAxis:this.xAxis?this.xAxis.visible:false,xAxis:this.x||false,xAxisLabel:this.xAxis?this.xAxis.label||"":""})};t.prototype.setYAxisAccessibility=function(){jC({rootEle:this.heatMapEl,hasYAxis:this.yAxis?this.yAxis.visible:false,yAxis:this.y||false,yAxisLabel:this.yAxis?this.yAxis.label||"":""})};t.prototype.renderRootElements=function(){this.svg=Ax(this.heatMapEl).select(".visa-viz-d3-heat-map-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.map=this.rootG.append("g").attr("class","map-group");this.labelG=this.rootG.append("g").attr("class","heat-map-dataLabel-group");this.legendG=Ax(this.heatMapEl).select(".heat-map-legend").append("svg");this.tooltipG=Ax(this.heatMapEl).select(".heat-map-tooltip")};t.prototype.setGlobalSelections=function(){this.xAxisElement=this.rootG.selectAll(".bottom");var t=this.map.selectAll(".row").data(this.nest,(function(t){return t.key}));this.enterRowWrappers=t.enter().append("g");this.exitRowWrappers=t.exit();this.updateRowWrappers=t.merge(this.enterRowWrappers);var e=this.updateRowWrappers.selectAll(".grid").data((function(t){return t.values}),(function(t){return t.xAccessor+t.yAccessor}));this.enter=e.enter().append("rect");this.exit=e.exit();this.update=e.merge(this.enter);this.exitSize=this.exit.size();this.enterSize=this.enter.size();this.exitSize+=this.exitRowWrappers.selectAll(".grid").size();var i=this.labelG.selectAll("g").data(this.nest,(function(t){return t.key}));this.enteringLabelGroups=i.enter().append("g");this.exitingLabelGroups=i.exit();this.updatingLabelGroups=i.merge(this.enteringLabelGroups);var r=this.updatingLabelGroups.selectAll("text").data((function(t){return t.values}),(function(t){return t.xAccessor+t.yAccessor}));this.enterLabels=r.enter().append("text");this.exitLabels=r.exit();this.updateLabels=r.merge(this.enterLabels)};t.prototype.enterGeometries=function(){var t=this;this.enter.interrupt();this.enterRowWrappers.attr("class","row").classed("entering",true).attr("cursor",!this.suppressEvents?this.cursor:null).each((function(t,e,i){WC(i[e])}));this.enter.attr("class","grid").each((function(t,e,i){WC(i[e])})).on("click",!this.suppressEvents?function(e){t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr("opacity",0).attr("y",(function(e){if(t.interpolating&&t.interpolating.y(e.yAccessor)===undefined){var i=t.y(e.yAccessor);i=i+t.y.bandwidth()*(i/t.y(t.y.domain()[0]));return i}else if(t.interpolating){return t.interpolating.y(e.yAccessor)}return t.y(e.yAccessor)})).attr("height",(function(e){if(t.interpolating&&t.interpolating.y(e.yAccessor)===undefined){return 0}else if(t.interpolating){return t.interpolating.y.bandwidth()}return t.y.bandwidth()})).attr("x",(function(e){if(t.interpolating&&t.interpolating.x(e.xAccessor)===undefined){var i=t.x(e.xAccessor);i=i+t.x.bandwidth()*(i/t.x(t.x.domain()[t.x.domain().length-1]));return i}else if(t.interpolating){return t.interpolating.x(e.xAccessor)}return t.x(e.xAccessor)})).attr("width",(function(e){if(t.interpolating&&t.interpolating.x(e.xAccessor)===undefined){return 0}else if(t.interpolating){return t.interpolating.x.bandwidth()}return t.x.bandwidth()})).attr("rx",this.shape==="circle"?this.x.bandwidth():0).attr("ry",this.shape==="circle"?this.y.bandwidth():0);this.update.order();this.enterRowWrappers.order()};t.prototype.updateGeometries=function(){var t=this;this.update.interrupt();this.update.transition("opacity").duration((function(e,i,r){if(Ax(r[i]).classed("entering")){Ax(r[i]).classed("entering",false);return t.duration}return 0})).ease(_L).attr("opacity",(function(e){return sD(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))};t.prototype.exitGeometries=function(){var t=this;this.exit.interrupt();this.exit.transition("exit").duration(this.duration).ease(_L).attr("opacity",0).attr("y",(function(e,i,r){if(t.y(e.yAccessor)===undefined){var n=Ax(r[i]);var s=+n.attr("y");s=s+ +n.attr("height")*(s/t.y(t.y.domain()[0]));return s}return t.y(e.yAccessor)})).attr("height",(function(e){if(t.y(e.yAccessor)===undefined){return 0}return t.y.bandwidth()})).attr("x",(function(e,i,r){if(t.x(e.xAccessor)===undefined){var n=Ax(r[i]);var s=+n.attr("x");s=s+ +n.attr("width")*(s/t.x(t.x.domain()[t.x.domain().length-1]));return s}return t.x(e.xAccessor)})).attr("width",(function(e){if(t.x(e.xAccessor)===undefined){return 0}return t.x.bandwidth()}));this.exitRowWrappers.selectAll(".grid").transition("exit").duration(this.duration).ease(_L).attr("opacity",0).attr("y",(function(e,i,r){var n=Ax(r[i]);var s=+n.attr("y");s=s+ +n.attr("height")*(s/t.y(t.y.domain()[0]));return s})).attr("height",0).attr("x",(function(e,i,r){if(t.x(e.xAccessor)===undefined){var n=Ax(r[i]);var s=+n.attr("x");s=s+ +n.attr("width")*(s/t.x(t.x.domain()[t.x.domain().length-1]));return s}return t.x(e.xAccessor)})).attr("width",(function(e){if(t.x(e.xAccessor)===undefined){return 0}return t.x.bandwidth()}));this.update.transition("accessibilityAfterExit").duration(this.duration).ease(_L).call(SD,(function(){var e=JC(t.rootG.node());t.exit.remove();t.exitRowWrappers.remove();t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();QC({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawGeometries=function(){var t=this;this.updateRowWrappers.transition("update").duration(this.duration).ease(_L).call(SD,(function(){t.updateRowWrappers.classed("entering",false)}));var e=this.update.classed("geometryIsMoving",(function(e,i,r){var n=CC(Ax(r[i]),[{attr:"y",numeric:true,newValue:t.y(e.yAccessor)},{attr:"height",numeric:true,newValue:t.y.bandwidth()},{attr:"x",numeric:true,newValue:t.x(e.xAccessor)},{attr:"width",numeric:true,newValue:t.x.bandwidth()},{attr:"rx",numeric:true,newValue:t.shape==="circle"?t.x.bandwidth():0},{attr:"ry",numeric:true,newValue:t.shape==="circle"?t.y.bandwidth():0}]);return n})).transition("update").duration(this.duration).ease(_L).attr("y",(function(e){return t.y(e.yAccessor)})).attr("height",this.y.bandwidth()).attr("x",(function(e){return t.x(e.xAccessor)})).attr("width",this.x.bandwidth()).attr("rx",this.shape==="circle"?this.x.bandwidth():0).attr("ry",this.shape==="circle"?this.y.bandwidth():0);if(this.accessibility.hideTextures||!this.accessibility.showExperimentalTextures){e.attr("fill",(function(e){return t.heat(e[t.valueAccessor])}))}e.call(SD,(function(){t.update.classed("geometryIsMoving",false);t.updateInteractionState();QC({parentGNode:t.rootG.node()})}))};t.prototype.updateInteractionState=function(){var t=this;UC(this.svg.node());this.update.attr("fill",(function(e){return t.heat(e[t.valueAccessor])})).attr("opacity",(function(e){return sD(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)})).attr("filter",(function(e,i,r){if(!t.accessibility.hideStrokes&&!Ax(r[i]).classed("geometryIsMoving")){var n=t.clickHighlight&&t.clickHighlight.length>0&&aD(e,t.clickHighlight,t.innerInteractionKeys);var s=t.hoverHighlight&&oD(e,t.hoverHighlight,t.innerInteractionKeys);var a=!t.accessibility.hideTextures&&t.accessibility.showExperimentalTextures?t.fillColors(e[t.valueAccessor]):t.rawHeat(e[t.valueAccessor]);var o=!t.accessibility.hideTextures&&t.accessibility.showExperimentalTextures?t.strokeColors(e[t.valueAccessor]):undefined;var l=n?"click":s&&!Ax(r[i]).classed("geometryIsMoving")?"hover":"rest";if(l==="hover"){MC({inputElement:r[i],id:t.chartID,key:e[t.xAccessor]+e[t.yAccessor],strokeWidth:t.hoverStyle.strokeWidth,fill:a,strokeOverride:o})}return t.strokes[l+a]}return null}));QC({parentGNode:this.rootG.node()});this.updateLabels.attr("fill",this.textTreatmentHandler)};t.prototype.setLabelOpacity=function(){this.processLabelOpacity(this.updateLabels)};t.prototype.processLabelOpacity=function(t,e){var i=this;var r=this.dataLabel.visible?1:0;var n={width:this.x.bandwidth(),height:this.y.bandwidth()};var s=function(t){var e=i.dataLabel.labelAccessor?t[i.dataLabel.labelAccessor]:t.valueAccessor;e=e instanceof Date?fD({date:e,format:i.dataLabel.format,offsetTimezone:true}):dD(e,i.dataLabel.format);var s=i.accessibility.showSmallLabels||_C({text:e,dimensions:n,fontSize:14});return s?sD(t,r,i.hoverOpacity,i.hoverHighlight,i.clickHighlight,i.innerInteractionKeys)<1?0:1:0};if(e){t.attr("opacity",s)}else{t.each((function(t,e,i){if(!Ax(i[e]).classed("entering")){Ax(i[e]).attr("opacity",(function(){return s(t)}))}}))}};t.prototype.setSelectedClass=function(){var t=this;this.update.classed("highlight",(function(e,i,r){var n=sD(e,true,false,"",t.clickHighlight,t.innerInteractionKeys);n=t.clickHighlight&&t.clickHighlight.length?n:false;var s=t.accessibility.elementsAreInterface;tD(r[i],n,s);return n}))};t.prototype.updateCursor=function(){this.update.attr("cursor",!this.suppressEvents?this.cursor:null);this.updateLabels.attr("cursor",!this.suppressEvents?this.cursor:null)};t.prototype.bindInteractivity=function(){var t=this;this.update.on("click",!this.suppressEvents?function(e){t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.updateLabels.on("click",this.dataLabel.visible&&!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",this.dataLabel.visible&&!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",this.dataLabel.visible&&!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.enterDataLabels=function(){var t=this;this.enteringLabelGroups.attr("class","heat-map-label-wrapper");this.enterLabels.attr("class","heat-map-dataLabel entering").attr("opacity",0).attr("fill",this.textTreatmentHandler).attr("cursor",!this.suppressEvents?this.cursor:null).on("click",this.dataLabel.visible&&!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",this.dataLabel.visible&&!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",this.dataLabel.visible&&!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);AD({root:this.enterLabels,xScale:this.x,yScale:this.y,ordinalAccessor:"xAccessor",valueAccessor:"yAccessor",chartType:"heat-map"})};t.prototype.updateDataLabels=function(){var t=this;var e=this.updateLabels.transition("opacity").ease(_L).duration((function(e,i,r){if(Ax(r[i]).classed("entering")){return t.duration/2}return 0})).delay((function(e,i,r){if(Ax(r[i]).classed("entering")){return t.duration/2}return 0}));this.processLabelOpacity(e,true);e.call(SD,(function(){t.updateLabels.classed("entering",false)}))};t.prototype.exitDataLabels=function(){var t=this;this.exitLabels.transition("exit").ease(_L).duration(this.duration/2).attr("opacity",0).remove();this.exitingLabelGroups.selectAll("text").transition("exit").ease(_L).duration(this.duration/2).attr("opacity",0).call(SD,(function(){t.exitingLabelGroups.remove()}))};t.prototype.drawDataLabels=function(){var t=this;this.updateLabels.attr("fill",this.textTreatmentHandler).text((function(e){var i=t.dataLabel.labelAccessor?e[t.dataLabel.labelAccessor]:e.valueAccessor;return i instanceof Date?fD({date:i,format:t.dataLabel.format,offsetTimezone:true}):dD(i,t.dataLabel.format)}));var e=this.updateLabels.transition("update").ease(_L).duration(this.duration);AD({root:e,xScale:this.x,yScale:this.y,ordinalAccessor:"xAccessor",valueAccessor:"yAccessor",chartType:"heat-map"})};t.prototype.drawLegendElements=function(){hD({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.bottom+60,colorArr:this.legend&&this.legend.type!=="gradient"?this.colorArr:this.preparedColors,baseColorArr:!(this.colorPalette&&this.colorPalette.includes("diverging"))?[this.preparedColors[this.preparedColors.length-1]]:this.strokeColors.range(),hideStrokes:this.accessibility.hideStrokes,scale:this.heat,steps:this.colorSteps,margin:this.margin,padding:this.padding,duration:this.duration,type:this.legend.type,fontSize:12,label:this.legend.labels,format:this.legend.format,hide:!this.legend.visible})};t.prototype.drawAnnotations=function(){rD({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.xAccessor,yScale:this.y,yAccessor:this.yAccessor})};t.prototype.setAnnotationAccessibility=function(){ZC(this.heatMapEl,this.annotations)};t.prototype.setTagLevels=function(){this.topLevel=IC(this.highestHeadingLevel);this.bottomLevel=IC(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){NC({rootEle:this.heatMapEl,geomType:"cell",title:this.accessibility.title||this.mainTitle,chartTag:"heat-map",uniqueID:this.chartID,groupName:"row",highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){PC({node:this.svg.node(),chartTag:"heat-map",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"cell",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:wD(this,nD,"heat-map"),groupAccessor:this.yAccessor,groupName:"row",disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})};t.prototype.setGeometryAccessibilityAttributes=function(){this.update.each((function(t,e,i){WC(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=wD(this,nD,"heat-map");this.update.each((function(i,r,n){HC({node:n[r],geomType:"cell",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupName:"row",uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});GC({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityID=function(){var t=this;this.updateRowWrappers.each((function(e,i,r){GC({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartAccessibilityTitle=function(){VC(this.heatMapEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){RC(this.heatMapEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){YC(this.heatMapEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){zC(this.heatMapEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){XC(this.heatMapEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){FC(this.heatMapEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){BC(this.heatMapEl,this.accessibility.statisticalNotes)};t.prototype.setChartCountAccessibility=function(){KC({rootEle:this.heatMapEl,parentGNode:this.map.node(),chartTag:"heat-map",geomType:"cell",groupName:"row"})};t.prototype.setChartAccessibilityStructureNotes=function(){$C(this.heatMapEl,this.accessibility.structureNotes)};t.prototype.onChangeHandler=function(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){var t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.updated=false;this.enterSize=0;this.exitSize=0};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){mD(this.chartID,true);this.hoverFunc.emit(t);if(this.showTooltip){this.eventsTooltip({data:t,evt:sx,isToShow:true})}};t.prototype.onMouseOutHandler=function(){mD(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){bD(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;cD({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,valueAccessor:this.valueAccessor,xAccessor:this.xAccessor,yAccessor:this.yAccessor,chartType:"heat-map"})};t.prototype.render=function(){this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldSetDimensions){this.setDimensions();this.shouldSetDimensions=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldFormatClickHighlight){this.formatClickHighlight();this.shouldFormatClickHighlight=false}if(this.shouldFormatHoverHighlight){this.formatHoverHighlight();this.shouldFormatHoverHighlight=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidate=false}return r("div",{class:"o-layout"},r("div",{class:"o-layout--chart"},r(this.topLevel,{"data-testid":"main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions","data-testid":"sub-title"},this.subTitle),r("div",{class:"heat-map-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),r("div",{class:"visa-viz-d3-heat-map-container"}),r("div",{class:"heat-map-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("data-table",{uniqueID:this.chartID,isCompact:true,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))};t.prototype.init=function(){var t=Object.keys(DL);var e=0;var i={strokeWidth:{exception:0},showTooltip:{exception:false},mainTitle:{exception:""},subTitle:{exception:""},wrapLabel:{exception:false},hoverOpacity:{exception:0}};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:DL[t[e]]}};Object.defineProperty(t.prototype,"heatMapEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["layoutWatcher"],width:["layoutWatcher"],padding:["layoutWatcher"],margin:["layoutWatcher"],xAccessor:["xAccessorWatcher"],yAccessor:["yAccessorWatcher"],valueAccessor:["groupAccessorWatcher"],xKeyOrder:["xKeyOrderWatcher"],yKeyOrder:["yKeyOrderWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],hideAxisPath:["hideAxisPathWatcher"],colorPalette:["colorsWatcher"],colors:["colorsWatcher"],colorSteps:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],shape:["shapeWatcher"],cursor:["cursorWatcher"],strokeWidth:["strokeWidthWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],legend:["legendWatcher"],suppressEvents:["suppressWatcher"],annotations:["annotationsWatcher"],accessibility:["accessibilityWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}heat-map{cursor:default}heat-map .annotations{pointer-events:none}heat-map .annotations .handle{pointer-events:all}heat-map .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}heat-map .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}heat-map .hidden{display:none}heat-map .axis{font-size:12px}heat-map .axis text{fill:#767676}heat-map .axis-label{text-anchor:middle;font:1rem sans-serif}heat-map .axis path{stroke:#767676}heat-map .axis .hidden{visibility:hidden}heat-map .heat-map-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}heat-map .heat-map-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=yD();var LD="http://www.w3.org/1999/xhtml";var _D={svg:"http://www.w3.org/2000/svg",xhtml:LD,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function CD(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return _D.hasOwnProperty(e)?{space:_D[e],local:t}:t}function DD(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===LD&&e.documentElement.namespaceURI===LD?e.createElement(t):e.createElementNS(i,t)}}function MD(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function UD(t){var e=CD(t);return(e.local?MD:DD)(e)}function TD(){}function ED(t){return t==null?TD:function(){return this.querySelector(t)}}function ID(t){if(typeof t!=="function")t=ED(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new dU(r,this._parents)}function ND(){return[]}function WD(t){return t==null?ND:function(){return this.querySelectorAll(t)}}function HD(t){if(typeof t!=="function")t=WD(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new dU(r,n)}function GD(t){return function(){return this.matches(t)}}function PD(t){if(typeof t!=="function")t=GD(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new dU(r,this._parents)}function OD(t){return new Array(t.length)}function VD(){return new dU(this._enter||this._groups.map(OD),this._parents)}function RD(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}RD.prototype={constructor:RD,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function YD(t){return function(){return t}}var zD="$";function XD(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new RD(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function FD(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=zD+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=zD+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new RD(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function BD(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?FD:XD,r=this._parents,n=this._groups;if(typeof t!=="function")t=YD(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new dU(a,r);a._enter=o;a._exit=l;return a}function KD(){return new dU(this._exit||this._groups.map(OD),this._parents)}function qD(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function jD(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new dU(a,this._parents)}function $D(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function ZD(t){if(!t)t=QD;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new dU(n,this._parents).order()}function QD(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function JD(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function tM(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function eM(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function iM(){var t=0;this.each((function(){++t}));return t}function rM(){return!this.node()}function nM(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function sM(t){return function(){this.removeAttribute(t)}}function aM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function oM(t,e){return function(){this.setAttribute(t,e)}}function lM(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function uM(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function hM(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function cM(t,e){var i=CD(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?aM:sM:typeof e==="function"?i.local?hM:uM:i.local?lM:oM)(i,e))}function dM(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function fM(t){return function(){this.style.removeProperty(t)}}function pM(t,e,i){return function(){this.style.setProperty(t,e,i)}}function yM(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function vM(t,e,i){return arguments.length>1?this.each((e==null?fM:typeof e==="function"?yM:pM)(t,e,i==null?"":i)):gM(this.node(),t)}function gM(t,e){return t.style.getPropertyValue(e)||dM(t).getComputedStyle(t,null).getPropertyValue(e)}function bM(t){return function(){delete this[t]}}function mM(t,e){return function(){this[t]=e}}function AM(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function wM(t,e){return arguments.length>1?this.each((e==null?bM:typeof e==="function"?AM:mM)(t,e)):this.node()[t]}function SM(t){return t.trim().split(/^|\s+/)}function xM(t){return t.classList||new kM(t)}function kM(t){this._node=t;this._names=SM(t.getAttribute("class")||"")}kM.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function LM(t,e){var i=xM(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function _M(t,e){var i=xM(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function CM(t){return function(){LM(this,t)}}function DM(t){return function(){_M(this,t)}}function MM(t,e){return function(){(e.apply(this,arguments)?LM:_M)(this,t)}}function UM(t,e){var i=SM(t+"");if(arguments.length<2){var r=xM(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?MM:e?CM:DM)(i,e))}function TM(){this.textContent=""}function EM(t){return function(){this.textContent=t}}function IM(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function NM(t){return arguments.length?this.each(t==null?TM:(typeof t==="function"?IM:EM)(t)):this.node().textContent}function WM(){this.innerHTML=""}function HM(t){return function(){this.innerHTML=t}}function GM(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function PM(t){return arguments.length?this.each(t==null?WM:(typeof t==="function"?GM:HM)(t)):this.node().innerHTML}function OM(){if(this.nextSibling)this.parentNode.appendChild(this)}function VM(){return this.each(OM)}function RM(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function YM(){return this.each(RM)}function zM(t){var e=typeof t==="function"?t:UD(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function XM(){return null}function FM(t,e){var i=typeof t==="function"?t:UD(t),r=e==null?XM:typeof e==="function"?e:ED(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function BM(){var t=this.parentNode;if(t)t.removeChild(this)}function KM(){return this.each(BM)}function qM(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function jM(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function $M(t){return this.select(t?jM:qM)}function ZM(t){return arguments.length?this.property("__data__",t):this.node().__data__}var QM={};var JM=null;if(typeof document!=="undefined"){var tU=document.documentElement;if(!("onmouseenter"in tU)){QM={mouseenter:"mouseover",mouseleave:"mouseout"}}}function eU(t,e,i){t=iU(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function iU(t,e,i){return function(r){var n=JM;JM=r;try{t.call(this,this.__data__,e,i)}finally{JM=n}}}function rU(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function nU(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function sU(t,e,i){var r=QM.hasOwnProperty(t.type)?eU:iU;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function aU(t,e,i){var r=rU(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?sU:nU;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function oU(t,e,i){var r=dM(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function lU(t,e){return function(){return oU(this,t,e)}}function uU(t,e){return function(){return oU(this,t,e.apply(this,arguments))}}function hU(t,e){return this.each((typeof e==="function"?uU:lU)(t,e))}var cU=[null];function dU(t,e){this._groups=t;this._parents=e}function fU(){return new dU([[document.documentElement]],cU)}dU.prototype=fU.prototype={constructor:dU,select:ID,selectAll:HD,filter:PD,data:BD,enter:VD,exit:KD,join:qD,merge:jD,order:$D,sort:ZD,call:JD,nodes:tM,node:eM,size:iM,empty:rM,each:nM,attr:cM,style:vM,property:wM,classed:UM,text:NM,html:PM,raise:VM,lower:YM,append:zM,insert:FM,remove:KM,clone:$M,datum:ZM,on:aU,dispatch:hU};function pU(t){return typeof t==="string"?new dU([[document.querySelector(t)]],[document.documentElement]):new dU([[t]],cU)}function yU(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function vU(t){if(t.length===1)t=gU(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function gU(t){return function(e,i){return yU(t(e),i)}}var bU=vU(yU);var mU=bU.right;function AU(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var wU=Math.sqrt(50),SU=Math.sqrt(10),xU=Math.sqrt(2);function kU(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=LU(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function LU(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=wU?10:s>=SU?5:s>=xU?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=wU?10:s>=SU?5:s>=xU?2:1)}function _U(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=wU)n*=10;else if(s>=SU)n*=5;else if(s>=xU)n*=2;return e<t?-n:n}function CU(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var DU="$";function MU(){}MU.prototype=UU.prototype={constructor:MU,has:function(t){return DU+t in this},get:function(t){return this[DU+t]},set:function(t,e){this[DU+t]=e;return this},remove:function(t){var e=DU+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===DU)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===DU)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===DU)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===DU)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===DU)++t;return t},empty:function(){for(var t in this)if(t[0]===DU)return false;return true},each:function(t){for(var e in this)if(e[0]===DU)t(this[e],e.slice(1),this)}};function UU(t,e){var i=new MU;if(t instanceof MU)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}var TU=Array.prototype;var EU=TU.map;var IU=TU.slice;var NU={name:"implicit"};function WU(){var t=UU(),e=[],i=[],r=NU;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==NU)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=UU();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=IU.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return WU(e,i).unknown(r)};CU.apply(n,arguments);return n}function HU(){var t=WU().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=AU(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return HU(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return CU.apply(h(),arguments)}function GU(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function PU(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function OU(){}var VU=.7;var RU=1/VU;var YU="\\s*([+-]?\\d+)\\s*",zU="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",XU="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",FU=/^#([0-9a-f]{3,8})$/,BU=new RegExp("^rgb\\("+[YU,YU,YU]+"\\)$"),KU=new RegExp("^rgb\\("+[XU,XU,XU]+"\\)$"),qU=new RegExp("^rgba\\("+[YU,YU,YU,zU]+"\\)$"),jU=new RegExp("^rgba\\("+[XU,XU,XU,zU]+"\\)$"),$U=new RegExp("^hsl\\("+[zU,XU,XU]+"\\)$"),ZU=new RegExp("^hsla\\("+[zU,XU,XU,zU]+"\\)$");var QU={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};GU(OU,iT,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:JU,formatHex:JU,formatHsl:tT,formatRgb:eT,toString:eT});function JU(){return this.rgb().formatHex()}function tT(){return dT(this).formatHsl()}function eT(){return this.rgb().formatRgb()}function iT(t){var e,i;t=(t+"").trim().toLowerCase();return(e=FU.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?rT(e):i===3?new oT(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?nT(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?nT(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=BU.exec(t))?new oT(e[1],e[2],e[3],1):(e=KU.exec(t))?new oT(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=qU.exec(t))?nT(e[1],e[2],e[3],e[4]):(e=jU.exec(t))?nT(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=$U.exec(t))?cT(e[1],e[2]/100,e[3]/100,1):(e=ZU.exec(t))?cT(e[1],e[2]/100,e[3]/100,e[4]):QU.hasOwnProperty(t)?rT(QU[t]):t==="transparent"?new oT(NaN,NaN,NaN,0):null}function rT(t){return new oT(t>>16&255,t>>8&255,t&255,1)}function nT(t,e,i,r){if(r<=0)t=e=i=NaN;return new oT(t,e,i,r)}function sT(t){if(!(t instanceof OU))t=iT(t);if(!t)return new oT;t=t.rgb();return new oT(t.r,t.g,t.b,t.opacity)}function aT(t,e,i,r){return arguments.length===1?sT(t):new oT(t,e,i,r==null?1:r)}function oT(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}GU(oT,aT,PU(OU,{brighter:function(t){t=t==null?RU:Math.pow(RU,t);return new oT(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?VU:Math.pow(VU,t);return new oT(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:lT,formatHex:lT,formatRgb:uT,toString:uT}));function lT(){return"#"+hT(this.r)+hT(this.g)+hT(this.b)}function uT(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function hT(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function cT(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new pT(t,e,i,r)}function dT(t){if(t instanceof pT)return new pT(t.h,t.s,t.l,t.opacity);if(!(t instanceof OU))t=iT(t);if(!t)return new pT;if(t instanceof pT)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new pT(a,o,l,t.opacity)}function fT(t,e,i,r){return arguments.length===1?dT(t):new pT(t,e,i,r==null?1:r)}function pT(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}GU(pT,fT,PU(OU,{brighter:function(t){t=t==null?RU:Math.pow(RU,t);return new pT(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?VU:Math.pow(VU,t);return new pT(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new oT(yT(t>=240?t-240:t+120,n,r),yT(t,n,r),yT(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function yT(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function vT(t){return function(){return t}}function gT(t,e){return function(i){return t+i*e}}function bT(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function mT(t){return(t=+t)===1?AT:function(e,i){return i-e?bT(e,i,t):vT(isNaN(e)?i:e)}}function AT(t,e){var i=e-t;return i?gT(t,i):vT(isNaN(t)?e:t)}var wT=function t(e){var i=mT(e);function r(t,e){var r=i((t=aT(t)).r,(e=aT(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=AT(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function ST(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function xT(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function kT(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=IT(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function LT(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function _T(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function CT(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=IT(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var DT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,MT=new RegExp(DT.source,"g");function UT(t){return function(){return t}}function TT(t){return function(e){return t(e)+""}}function ET(t,e){var i=DT.lastIndex=MT.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=DT.exec(t))&&(n=MT.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:_T(r,n)})}i=MT.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?TT(l[0].x):UT(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function IT(t,e){var i=typeof e,r;return e==null||i==="boolean"?vT(e):(i==="number"?_T:i==="string"?(r=iT(e))?(e=r,wT):ET:e instanceof iT?wT:e instanceof Date?LT:xT(e)?ST:Array.isArray(e)?kT:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?CT:_T)(t,e)}function NT(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var WT=180/Math.PI;var HT={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function GT(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*WT,skewX:Math.atan(l)*WT,scaleX:a,scaleY:o}}var PT,OT,VT,RT;function YT(t){if(t==="none")return HT;if(!PT)PT=document.createElement("DIV"),OT=document.documentElement,VT=document.defaultView;PT.style.transform=t;t=VT.getComputedStyle(OT.appendChild(PT),null).getPropertyValue("transform");OT.removeChild(PT);t=t.slice(7,-1).split(",");return GT(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function zT(t){if(t==null)return HT;if(!RT)RT=document.createElementNS("http://www.w3.org/2000/svg","g");RT.setAttribute("transform",t);if(!(t=RT.transform.baseVal.consolidate()))return HT;t=t.matrix;return GT(t.a,t.b,t.c,t.d,t.e,t.f)}function XT(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:_T(t,n)},{i:l-2,x:_T(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:_T(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:_T(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:_T(t,i)},{i:o-2,x:_T(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var FT=XT(YT,"px, ","px)","deg)");var BT=XT(zT,", ",")",")");function KT(t){return function(){return t}}function qT(t){return+t}var jT=[0,1];function $T(t){return t}function ZT(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:KT(isNaN(e)?NaN:.5)}function QT(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function JT(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=ZT(n,r),s=i(a,s);else r=ZT(r,n),s=i(s,a);return function(t){return s(r(t))}}function tE(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=ZT(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=mU(t,e,1,r)-1;return s[i](n[i](e))}}function eE(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function iE(){var t=jT,e=jT,i=IT,r,n,s,a=$T,o,l,u;function h(){o=Math.min(t.length,e.length)>2?tE:JT;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),_T)))(i)))};c.domain=function(e){return arguments.length?(t=EU.call(e,qT),a===$T||(a=QT(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=IU.call(t),h()):e.slice()};c.rangeRound=function(t){return e=IU.call(t),i=NT,h()};c.clamp=function(e){return arguments.length?(a=e?QT(t):$T,c):a!==$T};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function rE(t,e){return iE()(t,e)}function nE(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function sE(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function aE(t){return t=sE(Math.abs(t)),t?t[1]:NaN}function oE(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function lE(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var uE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hE(t){if(!(e=uE.exec(t)))throw new Error("invalid format: "+t);var e;return new cE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}hE.prototype=cE.prototype;function cE(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}cE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dE(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var fE;function pE(t,e){var i=sE(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(fE=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+sE(t,Math.max(0,e+s-1))[0]}function yE(t,e){var i=sE(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var vE={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:nE,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return yE(t*100,e)},r:yE,s:pE,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function gE(t){return t}var bE=Array.prototype.map,mE=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function AE(t){var e=t.grouping===undefined||t.thousands===undefined?gE:oE(bE.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?gE:lE(bE.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=hE(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!vE[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=vE[b],S=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function x(t){var i=m,r=A,a,d,x;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var k=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=dE(t);if(k&&+t===0&&c!=="+")k=false;i=(k?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?mE[8+fE/3]:"")+r+(k&&c==="("?")":"");if(S){a=-1,d=t.length;while(++a<d){if(x=t.charCodeAt(a),48>x||x>57){r=(x===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var L=i.length+t.length+r.length,_=L<p?new Array(p-L+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,L=_.length>>1)+i+t+r+_.slice(L);break;default:t=_+i+t+r;break}return s(t)}x.toString=function(){return t+""};return x}function h(t,e){var i=u((t=hE(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(aE(e)/3)))*3,n=Math.pow(10,-r),s=mE[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var wE;var SE;var xE;kE({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function kE(t){wE=AE(t);SE=wE.format;xE=wE.formatPrefix;return wE}function LE(t){return Math.max(0,-aE(Math.abs(t)))}function _E(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(aE(e)/3)))*3-aE(Math.abs(t)))}function CE(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,aE(e)-aE(t))+1}function DE(t,e,i,r){var n=_U(t,e,i),s;r=hE(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=_E(n,a)))r.precision=s;return xE(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=CE(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=LE(n)))r.precision=s-(r.type==="%")*2;break}}return SE(r)}function ME(t){var e=t.domain;t.ticks=function(t){var i=e();return kU(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return DE(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=LU(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=LU(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=LU(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function UE(){var t=rE($T,$T);t.copy=function(){return eE(t,UE())};CU.apply(t,arguments);return ME(t)}var TE={value:function(){}};function EE(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new IE(i)}function IE(t){this._=t}function NE(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}IE.prototype=EE.prototype={constructor:IE,on:function(t,e){var i=this._,r=NE(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=WE(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=HE(i[n],t.name,e);else if(e==null)for(n in i)i[n]=HE(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new IE(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function WE(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function HE(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=TE,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var GE=0,PE=0,OE=0,VE=1e3,RE,YE,zE=0,XE=0,FE=0,BE=typeof performance==="object"&&performance.now?performance:Date,KE=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function qE(){return XE||(KE(jE),XE=BE.now()+FE)}function jE(){XE=0}function $E(){this._call=this._time=this._next=null}$E.prototype=ZE.prototype={constructor:$E,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?qE():+i)+(e==null?0:+e);if(!this._next&&YE!==this){if(YE)YE._next=this;else RE=this;YE=this}this._call=t;this._time=i;iI()},stop:function(){if(this._call){this._call=null;this._time=Infinity;iI()}}};function ZE(t,e,i){var r=new $E;r.restart(t,e,i);return r}function QE(){qE();++GE;var t=RE,e;while(t){if((e=XE-t._time)>=0)t._call.call(null,e);t=t._next}--GE}function JE(){XE=(zE=BE.now())+FE;GE=PE=0;try{QE()}finally{GE=0;eI();XE=0}}function tI(){var t=BE.now(),e=t-zE;if(e>VE)FE-=e,zE=t}function eI(){var t,e=RE,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:RE=i}}YE=t;iI(r)}function iI(t){if(GE)return;if(PE)PE=clearTimeout(PE);var e=t-XE;if(e>24){if(t<Infinity)PE=setTimeout(JE,t-BE.now()-FE);if(OE)OE=clearInterval(OE)}else{if(!OE)zE=BE.now(),OE=setInterval(tI,VE);GE=1,KE(JE)}}function rI(t,e,i){var r=new $E;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var nI=EE("start","end","interrupt");var sI=[];var aI=0;var oI=1;var lI=2;var uI=3;var hI=4;var cI=5;var dI=6;function fI(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;gI(t,i,{name:e,index:r,group:n,on:nI,tween:sI,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:aI})}function pI(t,e){var i=vI(t,e);if(i.state>aI)throw new Error("too late; already scheduled");return i}function yI(t,e){var i=vI(t,e);if(i.state>lI)throw new Error("too late; already started");return i}function vI(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function gI(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=ZE(s,0,i.time);function s(t){i.state=oI;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==oI)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===uI)return rI(a);if(d.state===hI){d.state=dI;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=dI;d.timer.stop();delete r[u]}}rI((function(){if(i.state===uI){i.state=hI;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=lI;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==lI)return;i.state=uI;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=cI,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===cI){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=dI;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function bI(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>lI&&r.state<cI;r.state=dI;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function mI(t){return this.each((function(){bI(this,t)}))}function AI(t,e){var i,r;return function(){var n=yI(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function wI(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=yI(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function SI(t,e){var i=this._id;t+="";if(arguments.length<2){var r=vI(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?AI:wI)(i,t,e))}function xI(t,e,i){var r=t._id;t.each((function(){var t=yI(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return vI(t,r).value[e]}}function kI(t,e){var i;return(typeof e==="number"?_T:e instanceof iT?wT:(i=iT(e))?(e=i,wT):ET)(t,e)}function LI(t){return function(){this.removeAttribute(t)}}function _I(t){return function(){this.removeAttributeNS(t.space,t.local)}}function CI(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function DI(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function MI(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function UI(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function TI(t,e){var i=CD(t),r=i==="transform"?BT:kI;return this.attrTween(t,typeof e==="function"?(i.local?UI:MI)(i,r,xI(this,"attr."+t,e)):e==null?(i.local?_I:LI)(i):(i.local?DI:CI)(i,r,e+""))}function EI(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function II(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function NI(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=CD(t);return this.tween(i,(r.local?EI:II)(r,e))}function WI(t,e){return function(){pI(this,t).delay=+e.apply(this,arguments)}}function HI(t,e){return e=+e,function(){pI(this,t).delay=e}}function GI(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?WI:HI)(e,t)):vI(this.node(),e).delay}function PI(t,e){return function(){yI(this,t).duration=+e.apply(this,arguments)}}function OI(t,e){return e=+e,function(){yI(this,t).duration=e}}function VI(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?PI:OI)(e,t)):vI(this.node(),e).duration}function RI(t,e){if(typeof e!=="function")throw new Error;return function(){yI(this,t).ease=e}}function YI(t){var e=this._id;return arguments.length?this.each(RI(e,t)):vI(this.node(),e).ease}function zI(t){if(typeof t!=="function")t=GD(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new dN(r,this._parents,this._name,this._id)}function XI(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new dN(a,this._parents,this._name,this._id)}function FI(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function BI(t,e,i){var r,n,s=FI(e)?pI:yI;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function KI(t,e){var i=this._id;return arguments.length<2?vI(this.node(),i).on.on(t):this.each(BI(i,t,e))}function qI(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function jI(){return this.on("end.remove",qI(this._id))}function $I(t){var e=this._name,i=this._id;if(typeof t!=="function")t=ED(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;fI(u[d],e,i,d,u,vI(h,i))}}}return new dN(s,this._parents,e,i)}function ZI(t){var e=this._name,i=this._id;if(typeof t!=="function")t=WD(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=vI(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){fI(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new dN(s,a,e,i)}var QI=fU.prototype.constructor;function JI(){return new QI(this._groups,this._parents)}function tN(t,e){var i,r,n;return function(){var s=gM(this,t),a=(this.style.removeProperty(t),gM(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function eN(t){return function(){this.style.removeProperty(t)}}function iN(t,e,i){var r,n;return function(){var s=gM(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function rN(t,e,i){var r,n,s;return function(){var a=gM(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),gM(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function nN(t,e,i){var r=(t+="")==="transform"?FT:kI;return e==null?this.styleTween(t,tN(t,r)).on("end.style."+t,eN(t)):this.styleTween(t,typeof e==="function"?rN(t,r,xI(this,"style."+t,e)):iN(t,r,e+""),i)}function sN(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function aN(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,sN(t,e,i==null?"":i))}function oN(t){return function(){this.textContent=t}}function lN(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function uN(t){return this.tween("text",typeof t==="function"?lN(xI(this,"text",t)):oN(t==null?"":t+""))}function hN(){var t=this._name,e=this._id,i=pN();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=vI(l,e);fI(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new dN(r,this._parents,t,i)}var cN=0;function dN(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function fN(t){return fU().transition(t)}function pN(){return++cN}var yN=fU.prototype;dN.prototype=fN.prototype={constructor:dN,select:$I,selectAll:ZI,filter:zI,merge:XI,selection:JI,transition:hN,call:yN.call,nodes:yN.nodes,node:yN.node,size:yN.size,empty:yN.empty,each:yN.each,on:KI,attr:TI,attrTween:NI,style:nN,styleTween:aN,text:uN,remove:jI,tween:SI,delay:GI,duration:VI,ease:YI};function vN(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var gN={time:null,delay:0,duration:250,ease:vN};function bN(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return gN.time=qE(),gN}}return i}function mN(t){var e,i;if(t instanceof dN){e=t._id,t=t._name}else{e=pN(),(i=gN).time=qE(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){fI(l,t,e,u,a,i||bN(l,e))}}}return new dN(r,this._parents,t,e)}fU.prototype.interrupt=mI;fU.prototype.transition=mN;var AN=s.getLicenses,wN=s.drawTooltip,SN=s.initTooltipStyle;var xN=t("level_indicator_alternative",function(){function t(t){e(this,t);this.height=100;this.width=60;this.data=[{}];this.ordinalAccessor="label";this.valueAccessor="value";this.showHeader=true;this.showLabel=false;this.enableColor=true;this.dataFormat="0,0.00";this.threshold=.1;this.colors=["#180F58","#B7C9E7","#B7B7B7","#E2AEBC","#D60036"];this.indicatorLabels=["High","Above","Avg.","Below","Poor"];this.defaultColor=["#180F58"];this.wrapLabel=true;this.alignLabel="center";this.padding={top:this.height*.08,bottom:this.height*.25,right:this.width*.01,left:this.width*.01};this.indicatorWidth=this.height/4;this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.componentWillLoad=function(){this.innerHeight=this.height-this.padding.top-this.padding.bottom;this.innerWidth=this.width-this.padding.left-this.padding.right};t.prototype.componentWillUpdate=function(){this.drawChart()};t.prototype.componentDidLoad=function(){this.drawChart();this.setTooltipInitialStyle()};t.prototype.drawChart=function(){var t=this;this.reSetRoot();this.y=UE().domain([-this.threshold,this.threshold]).range([this.innerHeight-this.indicatorWidth/6,0]);this.x=HU().domain(this.data.map((function(e){return e[t.ordinalAccessor]}))).range([0,this.innerWidth]).padding(.2);if(this.showLabel){this.drawLabel()}this.drawIndicator()};t.prototype.reSetRoot=function(){if(this.svg){this.svg.remove()}this.svg=pU(this.indicatorChartEl).select("#visa-viz-d3-indicator-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.rootG=this.svg.append("g").attr("id","visa-viz-padding-container-g").attr("transform","translate("+this.padding.left+", "+this.padding.top+")").attr("class","indicator");this.tooltipG=pU(this.indicatorChartEl).select(".indicator-tooltip")};t.prototype.drawLabel=function(){var t=this;this.rootG.append("g").attr("class","indicator-label").attr("transform","translate(0, "+this.innerHeight+")").selectAll("text").data(this.data).enter().append("text").attr("dy","1.5em").attr("dx",(function(e){return t.x(e[t.ordinalAccessor])/2})).text((function(e){return t.getLabel(e[t.valueAccessor])}))};t.prototype.drawIndicator=function(){var t=this;var e=this.rootG.append("g").attr("class","indicator-chart").selectAll("g").data(this.data).enter().append("g");var i=[-2,-1,0,1,2];i.map((function(i){e.append("rect").attr("x",(function(e){return t.x(e[t.ordinalAccessor])})).attr("y",(function(){return t.y(t.threshold/2*i)-t.indicatorWidth/4})).attr("height",t.indicatorWidth/2).attr("width",t.indicatorWidth*.8).attr("fill","#E6E6E6")}));e.append("rect").attr("x",(function(e){return t.x(e[t.ordinalAccessor])-t.indicatorWidth*.1})).attr("y",(function(e){return t.y(t.getLevel(e[t.valueAccessor]))-t.indicatorWidth/4})).attr("height",this.indicatorWidth/2).attr("width",this.indicatorWidth).attr("fill",(function(e){return t.enableColor?t.getColor(e[t.valueAccessor]):t.defaultColor})).on("click",(function(e){return t.onClickHandler(e)})).on("mouseover",(function(e){return t.onHoverHandler(e)})).on("mouseout",(function(){return t.onMouseOutHandler()}))};t.prototype.getLevel=function(t){if(t>=this.threshold){return this.threshold}else if(t>=this.threshold/2){return this.threshold/2}else if(t>-this.threshold/2){return 0}else if(t>-this.threshold){return-this.threshold/2}else{return-this.threshold}};t.prototype.getLabel=function(t){if(t>=this.threshold){return this.indicatorLabels[0]}else if(t>=this.threshold/2){return this.indicatorLabels[1]}else if(t>-this.threshold/2){return this.indicatorLabels[2]}else if(t>-this.threshold){return this.indicatorLabels[3]}else{return this.indicatorLabels[4]}};t.prototype.getColor=function(t){if(t>=this.threshold){return this.colors[0]}else if(t>=this.threshold/2){return this.colors[1]}else if(t>-this.threshold/2){return this.colors[2]}else if(t>-this.threshold){return this.colors[3]}else{return this.colors[4]}};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){this.hoverFunc.emit(t);this.eventsTooltip({data:t,evt:JM,isToShow:true})};t.prototype.onMouseOutHandler=function(){this.mouseOutFunc.emit();this.eventsTooltip({isToShow:false})};t.prototype.setTooltipInitialStyle=function(){SN(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;wN({root:this.tooltipG,data:e,event:i,isToShow:r,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"bar"})};t.prototype.render=function(){return r("div",{class:"o-layout"},r("div",{class:"o-layout--chart"},r("div",{class:"visa-ui-text--body",style:{visibility:this.showHeader?"visible":"hidden",width:this.wrapLabel?""+this.indicatorWidth*1.5+"px":"auto",textAlign:this.alignLabel}},this.data[0][this.ordinalAccessor]),r("div",{class:"indicator-tooltip vcl-tooltip",style:{display:"block"}}),r("div",{id:"visa-viz-d3-indicator-container"})))};Object.defineProperty(t.prototype,"indicatorChartEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}.indicator .indicator-grid line{stroke:#767676;stroke-opacity:1}.indicator .indicator-grid path{stroke-width:0;stroke:#767676}.indicator .indicator-grid text{fill:#767676}.indicator .indicator-label{font-size:0.8em;fill:#767676;text-anchor:start}.indicator .indicator-chart{stroke:#767676}.indicator .indicator-chart rect{stroke:none}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=AN();var kN="http://www.w3.org/1999/xhtml";var LN={svg:"http://www.w3.org/2000/svg",xhtml:kN,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _N(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return LN.hasOwnProperty(e)?{space:LN[e],local:t}:t}function CN(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===kN&&e.documentElement.namespaceURI===kN?e.createElement(t):e.createElementNS(i,t)}}function DN(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function MN(t){var e=_N(t);return(e.local?DN:CN)(e)}function UN(){}function TN(t){return t==null?UN:function(){return this.querySelector(t)}}function EN(t){if(typeof t!=="function")t=TN(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new cH(r,this._parents)}function IN(){return[]}function NN(t){return t==null?IN:function(){return this.querySelectorAll(t)}}function WN(t){if(typeof t!=="function")t=NN(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new cH(r,n)}function HN(t){return function(){return this.matches(t)}}function GN(t){if(typeof t!=="function")t=HN(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new cH(r,this._parents)}function PN(t){return new Array(t.length)}function ON(){return new cH(this._enter||this._groups.map(PN),this._parents)}function VN(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}VN.prototype={constructor:VN,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function RN(t){return function(){return t}}var YN="$";function zN(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new VN(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function XN(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=YN+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=YN+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new VN(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function FN(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?XN:zN,r=this._parents,n=this._groups;if(typeof t!=="function")t=RN(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new cH(a,r);a._enter=o;a._exit=l;return a}function BN(){return new cH(this._exit||this._groups.map(PN),this._parents)}function KN(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function qN(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new cH(a,this._parents)}function jN(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function $N(t){if(!t)t=ZN;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new cH(n,this._parents).order()}function ZN(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function QN(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function JN(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function tW(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function eW(){var t=0;this.each((function(){++t}));return t}function iW(){return!this.node()}function rW(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function nW(t){return function(){this.removeAttribute(t)}}function sW(t){return function(){this.removeAttributeNS(t.space,t.local)}}function aW(t,e){return function(){this.setAttribute(t,e)}}function oW(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function lW(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function uW(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function hW(t,e){var i=_N(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?sW:nW:typeof e==="function"?i.local?uW:lW:i.local?oW:aW)(i,e))}function cW(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function dW(t){return function(){this.style.removeProperty(t)}}function fW(t,e,i){return function(){this.style.setProperty(t,e,i)}}function pW(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function yW(t,e,i){return arguments.length>1?this.each((e==null?dW:typeof e==="function"?pW:fW)(t,e,i==null?"":i)):vW(this.node(),t)}function vW(t,e){return t.style.getPropertyValue(e)||cW(t).getComputedStyle(t,null).getPropertyValue(e)}function gW(t){return function(){delete this[t]}}function bW(t,e){return function(){this[t]=e}}function mW(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function AW(t,e){return arguments.length>1?this.each((e==null?gW:typeof e==="function"?mW:bW)(t,e)):this.node()[t]}function wW(t){return t.trim().split(/^|\s+/)}function SW(t){return t.classList||new xW(t)}function xW(t){this._node=t;this._names=wW(t.getAttribute("class")||"")}xW.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function kW(t,e){var i=SW(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function LW(t,e){var i=SW(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function _W(t){return function(){kW(this,t)}}function CW(t){return function(){LW(this,t)}}function DW(t,e){return function(){(e.apply(this,arguments)?kW:LW)(this,t)}}function MW(t,e){var i=wW(t+"");if(arguments.length<2){var r=SW(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?DW:e?_W:CW)(i,e))}function UW(){this.textContent=""}function TW(t){return function(){this.textContent=t}}function EW(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function IW(t){return arguments.length?this.each(t==null?UW:(typeof t==="function"?EW:TW)(t)):this.node().textContent}function NW(){this.innerHTML=""}function WW(t){return function(){this.innerHTML=t}}function HW(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function GW(t){return arguments.length?this.each(t==null?NW:(typeof t==="function"?HW:WW)(t)):this.node().innerHTML}function PW(){if(this.nextSibling)this.parentNode.appendChild(this)}function OW(){return this.each(PW)}function VW(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function RW(){return this.each(VW)}function YW(t){var e=typeof t==="function"?t:MN(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function zW(){return null}function XW(t,e){var i=typeof t==="function"?t:MN(t),r=e==null?zW:typeof e==="function"?e:TN(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function FW(){var t=this.parentNode;if(t)t.removeChild(this)}function BW(){return this.each(FW)}function KW(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function qW(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function jW(t){return this.select(t?qW:KW)}function $W(t){return arguments.length?this.property("__data__",t):this.node().__data__}var ZW={};var QW=null;if(typeof document!=="undefined"){var JW=document.documentElement;if(!("onmouseenter"in JW)){ZW={mouseenter:"mouseover",mouseleave:"mouseout"}}}function tH(t,e,i){t=eH(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function eH(t,e,i){return function(r){var n=QW;QW=r;try{t.call(this,this.__data__,e,i)}finally{QW=n}}}function iH(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function rH(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function nH(t,e,i){var r=ZW.hasOwnProperty(t.type)?tH:eH;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function sH(t,e,i){var r=iH(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?nH:rH;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function aH(t,e,i){var r=cW(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function oH(t,e){return function(){return aH(this,t,e)}}function lH(t,e){return function(){return aH(this,t,e.apply(this,arguments))}}function uH(t,e){return this.each((typeof e==="function"?lH:oH)(t,e))}var hH=[null];function cH(t,e){this._groups=t;this._parents=e}function dH(){return new cH([[document.documentElement]],hH)}cH.prototype=dH.prototype={constructor:cH,select:EN,selectAll:WN,filter:GN,data:FN,enter:ON,exit:BN,join:KN,merge:qN,order:jN,sort:$N,call:QN,nodes:JN,node:tW,size:eW,empty:iW,each:rW,attr:hW,style:yW,property:AW,classed:MW,text:IW,html:GW,raise:OW,lower:RW,append:YW,insert:XW,remove:BW,clone:jW,datum:$W,on:sH,dispatch:uH};function fH(t){return typeof t==="string"?new cH([[document.querySelector(t)]],[document.documentElement]):new cH([[t]],hH)}function pH(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function yH(t){if(t.length===1)t=vH(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function vH(t){return function(e,i){return pH(t(e),i)}}var gH=yH(pH);var bH=gH.right;function mH(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var AH=Math.sqrt(50),wH=Math.sqrt(10),SH=Math.sqrt(2);function xH(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=kH(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function kH(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=AH?10:s>=wH?5:s>=SH?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=AH?10:s>=wH?5:s>=SH?2:1)}function LH(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=AH)n*=10;else if(s>=wH)n*=5;else if(s>=SH)n*=2;return e<t?-n:n}function _H(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function CH(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}var DH=new Date,MH=new Date;function UH(t,e,i,r){function n(e){return t(e=arguments.length===0?new Date:new Date(+e)),e}n.floor=function(e){return t(e=new Date(+e)),e};n.ceil=function(i){return t(i=new Date(i-1)),e(i,1),t(i),i};n.round=function(t){var e=n(t),i=n.ceil(t);return t-e<i-t?e:i};n.offset=function(t,i){return e(t=new Date(+t),i==null?1:Math.floor(i)),t};n.range=function(i,r,s){var a=[],o;i=n.ceil(i);s=s==null?1:Math.floor(s);if(!(i<r)||!(s>0))return a;do{a.push(o=new Date(+i)),e(i,s),t(i)}while(o<i&&i<r);return a};n.filter=function(i){return UH((function(e){if(e>=e)while(t(e),!i(e))e.setTime(e-1)}),(function(t,r){if(t>=t){if(r<0)while(++r<=0){while(e(t,-1),!i(t)){}}else while(--r>=0){while(e(t,+1),!i(t)){}}}}))};if(i){n.count=function(e,r){DH.setTime(+e),MH.setTime(+r);t(DH),t(MH);return Math.floor(i(DH,MH))};n.every=function(t){t=Math.floor(t);return!isFinite(t)||!(t>0)?null:!(t>1)?n:n.filter(r?function(e){return r(e)%t===0}:function(e){return n.count(0,e)%t===0})}}return n}var TH=1e3;var EH=6e4;var IH=36e5;var NH=864e5;var WH=6048e5;var HH=UH((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*TH-t.getMinutes()*EH)}),(function(t,e){t.setTime(+t+e*IH)}),(function(t,e){return(e-t)/IH}),(function(t){return t.getHours()}));var GH=UH((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*EH)/NH}),(function(t){return t.getDate()-1}));function PH(t){return UH((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7);e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e*7)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*EH)/WH}))}var OH=PH(0);var VH=PH(1);var RH=PH(2);var YH=PH(3);var zH=PH(4);var XH=PH(5);var FH=PH(6);var BH=UH((function(t){t.setDate(1);t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12}),(function(t){return t.getMonth()}));var KH=UH((function(t){t.setMonth(0,1);t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));KH.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:UH((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t);e.setMonth(0,1);e.setHours(0,0,0,0)}),(function(e,i){e.setFullYear(e.getFullYear()+i*t)}))};function qH(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var jH="$";function $H(){}$H.prototype=ZH.prototype={constructor:$H,has:function(t){return jH+t in this},get:function(t){return this[jH+t]},set:function(t,e){this[jH+t]=e;return this},remove:function(t){var e=jH+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===jH)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===jH)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===jH)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===jH)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===jH)++t;return t},empty:function(){for(var t in this)if(t[0]===jH)return false;return true},each:function(t){for(var e in this)if(e[0]===jH)t(this[e],e.slice(1),this)}};function ZH(t,e){var i=new $H;if(t instanceof $H)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}function QH(){var t=[],e=[],i,r,n;function s(e,n,a,o){if(n>=t.length){if(i!=null)e.sort(i);return r!=null?r(e):e}var l=-1,u=e.length,h=t[n++],c,d,f=ZH(),p,y=a();while(++l<u){if(p=f.get(c=h(d=e[l])+"")){p.push(d)}else{f.set(c,[d])}}f.each((function(t,e){o(y,e,s(t,n,a,o))}));return y}function a(i,n){if(++n>t.length)return i;var s,o=e[n-1];if(r!=null&&n>=t.length)s=i.entries();else s=[],i.each((function(t,e){s.push({key:e,values:a(t,n)})}));return o!=null?s.sort((function(t,e){return o(t.key,e.key)})):s}return n={object:function(t){return s(t,0,JH,tG)},map:function(t){return s(t,0,eG,iG)},entries:function(t){return a(s(t,0,eG,iG),0)},key:function(e){t.push(e);return n},sortKeys:function(i){e[t.length-1]=i;return n},sortValues:function(t){i=t;return n},rollup:function(t){r=t;return n}}}function JH(){return{}}function tG(t,e,i){t[e]=i}function eG(){return ZH()}function iG(t,e,i){t.set(e,i)}var rG=Array.prototype;var nG=rG.map;var sG=rG.slice;var aG={name:"implicit"};function oG(){var t=ZH(),e=[],i=[],r=aG;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==aG)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=ZH();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=sG.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return oG(e,i).unknown(r)};qH.apply(n,arguments);return n}function lG(){var t=oG().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=mH(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return lG(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return qH.apply(h(),arguments)}function uG(t){var e=t.copy;t.padding=t.paddingOuter;delete t.paddingInner;delete t.paddingOuter;t.copy=function(){return uG(e())};return t}function hG(){return uG(lG.apply(null,arguments).paddingInner(1))}function cG(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function dG(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function fG(){}var pG=.7;var yG=1/pG;var vG="\\s*([+-]?\\d+)\\s*",gG="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",bG="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",mG=/^#([0-9a-f]{3,8})$/,AG=new RegExp("^rgb\\("+[vG,vG,vG]+"\\)$"),wG=new RegExp("^rgb\\("+[bG,bG,bG]+"\\)$"),SG=new RegExp("^rgba\\("+[vG,vG,vG,gG]+"\\)$"),xG=new RegExp("^rgba\\("+[bG,bG,bG,gG]+"\\)$"),kG=new RegExp("^hsl\\("+[gG,bG,bG]+"\\)$"),LG=new RegExp("^hsla\\("+[gG,bG,bG,gG]+"\\)$");var _G={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cG(fG,UG,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:CG,formatHex:CG,formatHsl:DG,formatRgb:MG,toString:MG});function CG(){return this.rgb().formatHex()}function DG(){return VG(this).formatHsl()}function MG(){return this.rgb().formatRgb()}function UG(t){var e,i;t=(t+"").trim().toLowerCase();return(e=mG.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?TG(e):i===3?new WG(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?EG(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?EG(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=AG.exec(t))?new WG(e[1],e[2],e[3],1):(e=wG.exec(t))?new WG(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=SG.exec(t))?EG(e[1],e[2],e[3],e[4]):(e=xG.exec(t))?EG(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=kG.exec(t))?OG(e[1],e[2]/100,e[3]/100,1):(e=LG.exec(t))?OG(e[1],e[2]/100,e[3]/100,e[4]):_G.hasOwnProperty(t)?TG(_G[t]):t==="transparent"?new WG(NaN,NaN,NaN,0):null}function TG(t){return new WG(t>>16&255,t>>8&255,t&255,1)}function EG(t,e,i,r){if(r<=0)t=e=i=NaN;return new WG(t,e,i,r)}function IG(t){if(!(t instanceof fG))t=UG(t);if(!t)return new WG;t=t.rgb();return new WG(t.r,t.g,t.b,t.opacity)}function NG(t,e,i,r){return arguments.length===1?IG(t):new WG(t,e,i,r==null?1:r)}function WG(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}cG(WG,NG,dG(fG,{brighter:function(t){t=t==null?yG:Math.pow(yG,t);return new WG(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?pG:Math.pow(pG,t);return new WG(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:HG,formatHex:HG,formatRgb:GG,toString:GG}));function HG(){return"#"+PG(this.r)+PG(this.g)+PG(this.b)}function GG(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function PG(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function OG(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new YG(t,e,i,r)}function VG(t){if(t instanceof YG)return new YG(t.h,t.s,t.l,t.opacity);if(!(t instanceof fG))t=UG(t);if(!t)return new YG;if(t instanceof YG)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new YG(a,o,l,t.opacity)}function RG(t,e,i,r){return arguments.length===1?VG(t):new YG(t,e,i,r==null?1:r)}function YG(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}cG(YG,RG,dG(fG,{brighter:function(t){t=t==null?yG:Math.pow(yG,t);return new YG(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?pG:Math.pow(pG,t);return new YG(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new WG(zG(t>=240?t-240:t+120,n,r),zG(t,n,r),zG(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function zG(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function XG(t){return function(){return t}}function FG(t,e){return function(i){return t+i*e}}function BG(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function KG(t){return(t=+t)===1?qG:function(e,i){return i-e?BG(e,i,t):XG(isNaN(e)?i:e)}}function qG(t,e){var i=e-t;return i?FG(t,i):XG(isNaN(t)?e:t)}var jG=function t(e){var i=KG(e);function r(t,e){var r=i((t=NG(t)).r,(e=NG(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=qG(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function $G(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function ZG(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function QG(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=oP(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function JG(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function tP(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function eP(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=oP(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var iP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rP=new RegExp(iP.source,"g");function nP(t){return function(){return t}}function sP(t){return function(e){return t(e)+""}}function aP(t,e){var i=iP.lastIndex=rP.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=iP.exec(t))&&(n=rP.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:tP(r,n)})}i=rP.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?sP(l[0].x):nP(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function oP(t,e){var i=typeof e,r;return e==null||i==="boolean"?XG(e):(i==="number"?tP:i==="string"?(r=UG(e))?(e=r,jG):aP:e instanceof UG?jG:e instanceof Date?JG:ZG(e)?$G:Array.isArray(e)?QG:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?eP:tP)(t,e)}function lP(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var uP=180/Math.PI;var hP={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cP(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*uP,skewX:Math.atan(l)*uP,scaleX:a,scaleY:o}}var dP,fP,pP,yP;function vP(t){if(t==="none")return hP;if(!dP)dP=document.createElement("DIV"),fP=document.documentElement,pP=document.defaultView;dP.style.transform=t;t=pP.getComputedStyle(fP.appendChild(dP),null).getPropertyValue("transform");fP.removeChild(dP);t=t.slice(7,-1).split(",");return cP(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function gP(t){if(t==null)return hP;if(!yP)yP=document.createElementNS("http://www.w3.org/2000/svg","g");yP.setAttribute("transform",t);if(!(t=yP.transform.baseVal.consolidate()))return hP;t=t.matrix;return cP(t.a,t.b,t.c,t.d,t.e,t.f)}function bP(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:tP(t,n)},{i:l-2,x:tP(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:tP(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:tP(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:tP(t,i)},{i:o-2,x:tP(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var mP=bP(vP,"px, ","px)","deg)");var AP=bP(gP,", ",")",")");function wP(t){return function(){return t}}function SP(t){return+t}var xP=[0,1];function kP(t){return t}function LP(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:wP(isNaN(e)?NaN:.5)}function _P(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function CP(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=LP(n,r),s=i(a,s);else r=LP(r,n),s=i(s,a);return function(t){return s(r(t))}}function DP(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=LP(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=bH(t,e,1,r)-1;return s[i](n[i](e))}}function MP(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function UP(){var t=xP,e=xP,i=oP,r,n,s,a=kP,o,l,u;function h(){o=Math.min(t.length,e.length)>2?DP:CP;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),tP)))(i)))};c.domain=function(e){return arguments.length?(t=nG.call(e,SP),a===kP||(a=_P(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=sG.call(t),h()):e.slice()};c.rangeRound=function(t){return e=sG.call(t),i=lP,h()};c.clamp=function(e){return arguments.length?(a=e?_P(t):kP,c):a!==kP};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function TP(t,e){return UP()(t,e)}function EP(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function IP(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function NP(t){return t=IP(Math.abs(t)),t?t[1]:NaN}function WP(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function HP(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var GP=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function PP(t){if(!(e=GP.exec(t)))throw new Error("invalid format: "+t);var e;return new OP({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}PP.prototype=OP.prototype;function OP(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}OP.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function VP(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var RP;function YP(t,e){var i=IP(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(RP=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+IP(t,Math.max(0,e+s-1))[0]}function zP(t,e){var i=IP(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var XP={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:EP,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return zP(t*100,e)},r:zP,s:YP,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function FP(t){return t}var BP=Array.prototype.map,KP=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function qP(t){var e=t.grouping===undefined||t.thousands===undefined?FP:WP(BP.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?FP:HP(BP.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=PP(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!XP[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=XP[b],S=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function x(t){var i=m,r=A,a,d,x;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var k=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=VP(t);if(k&&+t===0&&c!=="+")k=false;i=(k?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?KP[8+RP/3]:"")+r+(k&&c==="("?")":"");if(S){a=-1,d=t.length;while(++a<d){if(x=t.charCodeAt(a),48>x||x>57){r=(x===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var L=i.length+t.length+r.length,_=L<p?new Array(p-L+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,L=_.length>>1)+i+t+r+_.slice(L);break;default:t=_+i+t+r;break}return s(t)}x.toString=function(){return t+""};return x}function h(t,e){var i=u((t=PP(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(NP(e)/3)))*3,n=Math.pow(10,-r),s=KP[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var jP;var $P;var ZP;QP({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function QP(t){jP=qP(t);$P=jP.format;ZP=jP.formatPrefix;return jP}function JP(t){return Math.max(0,-NP(Math.abs(t)))}function tO(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(NP(e)/3)))*3-NP(Math.abs(t)))}function eO(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,NP(e)-NP(t))+1}function iO(t,e,i,r){var n=LH(t,e,i),s;r=PP(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=tO(n,a)))r.precision=s;return ZP(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=eO(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=JP(n)))r.precision=s-(r.type==="%")*2;break}}return $P(r)}function rO(t){var e=t.domain;t.ticks=function(t){var i=e();return xH(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return iO(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=kH(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=kH(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=kH(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function nO(){var t=TP(kP,kP);t.copy=function(){return MP(t,nO())};qH.apply(t,arguments);return rO(t)}var sO=Math.PI,aO=2*sO,oO=1e-6,lO=aO-oO;function uO(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function hO(){return new uO}uO.prototype=hO.prototype={constructor:uO,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,i,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+r)},bezierCurveTo:function(t,e,i,r,n,s){this._+="C"+ +t+","+ +e+","+ +i+","+ +r+","+(this._x1=+n)+","+(this._y1=+s)},arcTo:function(t,e,i,r,n){t=+t,e=+e,i=+i,r=+r,n=+n;var s=this._x1,a=this._y1,o=i-t,l=r-e,u=s-t,h=a-e,c=u*u+h*h;if(n<0)throw new Error("negative radius: "+n);if(this._x1===null){this._+="M"+(this._x1=t)+","+(this._y1=e)}else if(!(c>oO));else if(!(Math.abs(h*o-l*u)>oO)||!n){this._+="L"+(this._x1=t)+","+(this._y1=e)}else{var d=i-s,f=r-a,p=o*o+l*l,y=d*d+f*f,v=Math.sqrt(p),g=Math.sqrt(c),b=n*Math.tan((sO-Math.acos((p+c-y)/(2*v*g)))/2),m=b/g,A=b/v;if(Math.abs(m-1)>oO){this._+="L"+(t+m*u)+","+(e+m*h)}this._+="A"+n+","+n+",0,0,"+ +(h*d>u*f)+","+(this._x1=t+A*o)+","+(this._y1=e+A*l)}},arc:function(t,e,i,r,n,s){t=+t,e=+e,i=+i,s=!!s;var a=i*Math.cos(r),o=i*Math.sin(r),l=t+a,u=e+o,h=1^s,c=s?r-n:n-r;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null){this._+="M"+l+","+u}else if(Math.abs(this._x1-l)>oO||Math.abs(this._y1-u)>oO){this._+="L"+l+","+u}if(!i)return;if(c<0)c=c%aO+aO;if(c>lO){this._+="A"+i+","+i+",0,1,"+h+","+(t-a)+","+(e-o)+"A"+i+","+i+",0,1,"+h+","+(this._x1=l)+","+(this._y1=u)}else if(c>oO){this._+="A"+i+","+i+",0,"+ +(c>=sO)+","+h+","+(this._x1=t+i*Math.cos(n))+","+(this._y1=e+i*Math.sin(n))}},rect:function(t,e,i,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +i+"v"+ +r+"h"+-i+"Z"},toString:function(){return this._}};function cO(t){return function e(){return t}}function dO(t){this._context=t}dO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(t,e){t=+t,e=+e;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function fO(t){return new dO(t)}function pO(t){return t[0]}function yO(t){return t[1]}function vO(){var t=pO,e=yO,i=cO(true),r=null,n=fO,s=null;function a(a){var o,l=a.length,u,h=false,c;if(r==null)s=n(c=hO());for(o=0;o<=l;++o){if(!(o<l&&i(u=a[o],o,a))===h){if(h=!h)s.lineStart();else s.lineEnd()}if(h)s.point(+t(u,o,a),+e(u,o,a))}if(c)return s=null,c+""||null}a.x=function(e){return arguments.length?(t=typeof e==="function"?e:cO(+e),a):t};a.y=function(t){return arguments.length?(e=typeof t==="function"?t:cO(+t),a):e};a.defined=function(t){return arguments.length?(i=typeof t==="function"?t:cO(!!t),a):i};a.curve=function(t){return arguments.length?(n=t,r!=null&&(s=n(r)),a):n};a.context=function(t){return arguments.length?(t==null?r=s=null:s=n(r=t),a):r};return a}var gO=s.propDefaultValues;var bO=function(){function t(){}return t}();bO.mainTitle="Parallel Plot Title";bO.subTitle="This is the parallel plot's subtitle";bO.height=300;bO.width=500;bO.margin={top:300*.01,bottom:300*.01,right:500*.01,left:500*.01};bO.padding={top:20,bottom:50,right:100,left:75};bO.ordinalAccessor="label";bO.valueAccessor="value";bO.seriesAccessor="series";bO.accessibility=gO.accessibility;bO.highestHeadingLevel=gO.highestHeadingLevel;bO.xAxis=gO.xAxis;bO.yAxis=gO.yAxis;bO.showBaselineX=gO.showBaselineFalse;bO.wrapLabel=gO.wrapLabel;bO.colorPalette=gO.colorPaletteCategorical;bO.hoverStyle=gO.hoverStyle;bO.clickStyle=gO.clickStyle;bO.referenceStyle=gO.referenceStyle;bO.strokeWidth=gO.strokeWidth1;bO.showDots=gO.showDots;bO.dotRadius=gO.dotRadius4;bO.hoverOpacity=gO.hoverOpacity;bO.cursor=gO.cursor;bO.dataLabel=gO.dataLabelBottomRight;bO.seriesLabel=gO.seriesLabel;bO.legend=gO.hiddenLegend;bO.tooltipLabel=gO.tooltipLabel;bO.secondaryLines=gO.secondaryLines;bO.showTooltip=gO.showTooltip;bO.suppressEvents=gO.suppressEvents;bO.referenceLines=gO.referenceLines;bO.annotations=gO.annotations;bO.clickHighlight=gO.clickHighlight;function mO(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function AO(t){return 1-Math.sqrt(1-t*t)}var wO={value:function(){}};function SO(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new xO(i)}function xO(t){this._=t}function kO(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}xO.prototype=SO.prototype={constructor:xO,on:function(t,e){var i=this._,r=kO(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=LO(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=_O(i[n],t.name,e);else if(e==null)for(n in i)i[n]=_O(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new xO(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function LO(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function _O(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=wO,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var CO=0,DO=0,MO=0,UO=1e3,TO,EO,IO=0,NO=0,WO=0,HO=typeof performance==="object"&&performance.now?performance:Date,GO=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function PO(){return NO||(GO(OO),NO=HO.now()+WO)}function OO(){NO=0}function VO(){this._call=this._time=this._next=null}VO.prototype=RO.prototype={constructor:VO,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?PO():+i)+(e==null?0:+e);if(!this._next&&EO!==this){if(EO)EO._next=this;else TO=this;EO=this}this._call=t;this._time=i;BO()},stop:function(){if(this._call){this._call=null;this._time=Infinity;BO()}}};function RO(t,e,i){var r=new VO;r.restart(t,e,i);return r}function YO(){PO();++CO;var t=TO,e;while(t){if((e=NO-t._time)>=0)t._call.call(null,e);t=t._next}--CO}function zO(){NO=(IO=HO.now())+WO;CO=DO=0;try{YO()}finally{CO=0;FO();NO=0}}function XO(){var t=HO.now(),e=t-IO;if(e>UO)WO-=e,IO=t}function FO(){var t,e=TO,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:TO=i}}EO=t;BO(r)}function BO(t){if(CO)return;if(DO)DO=clearTimeout(DO);var e=t-NO;if(e>24){if(t<Infinity)DO=setTimeout(zO,t-HO.now()-WO);if(MO)MO=clearInterval(MO)}else{if(!MO)IO=HO.now(),MO=setInterval(XO,UO);CO=1,GO(zO)}}function KO(t,e,i){var r=new VO;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var qO=SO("start","end","interrupt");var jO=[];var $O=0;var ZO=1;var QO=2;var JO=3;var tV=4;var eV=5;var iV=6;function rV(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;oV(t,i,{name:e,index:r,group:n,on:qO,tween:jO,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:$O})}function nV(t,e){var i=aV(t,e);if(i.state>$O)throw new Error("too late; already scheduled");return i}function sV(t,e){var i=aV(t,e);if(i.state>QO)throw new Error("too late; already started");return i}function aV(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function oV(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=RO(s,0,i.time);function s(t){i.state=ZO;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==ZO)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===JO)return KO(a);if(d.state===tV){d.state=iV;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=iV;d.timer.stop();delete r[u]}}KO((function(){if(i.state===JO){i.state=tV;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=QO;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==QO)return;i.state=JO;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=eV,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===eV){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=iV;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function lV(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>QO&&r.state<eV;r.state=iV;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function uV(t){return this.each((function(){lV(this,t)}))}function hV(t,e){var i,r;return function(){var n=sV(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function cV(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=sV(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function dV(t,e){var i=this._id;t+="";if(arguments.length<2){var r=aV(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?hV:cV)(i,t,e))}function fV(t,e,i){var r=t._id;t.each((function(){var t=sV(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return aV(t,r).value[e]}}function pV(t,e){var i;return(typeof e==="number"?tP:e instanceof UG?jG:(i=UG(e))?(e=i,jG):aP)(t,e)}function yV(t){return function(){this.removeAttribute(t)}}function vV(t){return function(){this.removeAttributeNS(t.space,t.local)}}function gV(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function bV(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function mV(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function AV(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function wV(t,e){var i=_N(t),r=i==="transform"?AP:pV;return this.attrTween(t,typeof e==="function"?(i.local?AV:mV)(i,r,fV(this,"attr."+t,e)):e==null?(i.local?vV:yV)(i):(i.local?bV:gV)(i,r,e+""))}function SV(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function xV(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function kV(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=_N(t);return this.tween(i,(r.local?SV:xV)(r,e))}function LV(t,e){return function(){nV(this,t).delay=+e.apply(this,arguments)}}function _V(t,e){return e=+e,function(){nV(this,t).delay=e}}function CV(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?LV:_V)(e,t)):aV(this.node(),e).delay}function DV(t,e){return function(){sV(this,t).duration=+e.apply(this,arguments)}}function MV(t,e){return e=+e,function(){sV(this,t).duration=e}}function UV(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?DV:MV)(e,t)):aV(this.node(),e).duration}function TV(t,e){if(typeof e!=="function")throw new Error;return function(){sV(this,t).ease=e}}function EV(t){var e=this._id;return arguments.length?this.each(TV(e,t)):aV(this.node(),e).ease}function IV(t){if(typeof t!=="function")t=HN(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new iR(r,this._parents,this._name,this._id)}function NV(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new iR(a,this._parents,this._name,this._id)}function WV(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function HV(t,e,i){var r,n,s=WV(e)?nV:sV;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function GV(t,e){var i=this._id;return arguments.length<2?aV(this.node(),i).on.on(t):this.each(HV(i,t,e))}function PV(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function OV(){return this.on("end.remove",PV(this._id))}function VV(t){var e=this._name,i=this._id;if(typeof t!=="function")t=TN(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;rV(u[d],e,i,d,u,aV(h,i))}}}return new iR(s,this._parents,e,i)}function RV(t){var e=this._name,i=this._id;if(typeof t!=="function")t=NN(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=aV(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){rV(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new iR(s,a,e,i)}var YV=dH.prototype.constructor;function zV(){return new YV(this._groups,this._parents)}function XV(t,e){var i,r,n;return function(){var s=vW(this,t),a=(this.style.removeProperty(t),vW(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function FV(t){return function(){this.style.removeProperty(t)}}function BV(t,e,i){var r,n;return function(){var s=vW(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function KV(t,e,i){var r,n,s;return function(){var a=vW(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),vW(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function qV(t,e,i){var r=(t+="")==="transform"?mP:pV;return e==null?this.styleTween(t,XV(t,r)).on("end.style."+t,FV(t)):this.styleTween(t,typeof e==="function"?KV(t,r,fV(this,"style."+t,e)):BV(t,r,e+""),i)}function jV(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function $V(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,jV(t,e,i==null?"":i))}function ZV(t){return function(){this.textContent=t}}function QV(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function JV(t){return this.tween("text",typeof t==="function"?QV(fV(this,"text",t)):ZV(t==null?"":t+""))}function tR(){var t=this._name,e=this._id,i=nR();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=aV(l,e);rV(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new iR(r,this._parents,t,i)}var eR=0;function iR(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function rR(t){return dH().transition(t)}function nR(){return++eR}var sR=dH.prototype;iR.prototype=rR.prototype={constructor:iR,select:VV,selectAll:RV,filter:IV,merge:NV,selection:zV,transition:tR,call:sR.call,nodes:sR.nodes,node:sR.node,size:sR.size,empty:sR.empty,each:sR.each,on:GV,attr:wV,attrTween:kV,style:qV,styleTween:$V,text:JV,remove:OV,tween:dV,delay:CV,duration:UV,ease:EV};var aR={time:null,delay:0,duration:250,ease:mO};function oR(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return aR.time=PO(),aR}}return i}function lR(t){var e,i;if(t instanceof iR){e=t._id,t=t._name}else{e=nR(),(i=aR).time=PO(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){rV(l,t,e,u,a,i||oR(l,e))}}}return new iR(r,this._parents,t,e)}dH.prototype.interrupt=uV;dH.prototype.transition=lR;var uR=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var hR=new Uint8Array(16);function cR(){if(!uR){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return uR(hR)}var dR=[];for(var fR=0;fR<256;++fR){dR[fR]=(fR+256).toString(16).substr(1)}function pR(t,e){var i=e||0;var r=dR;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function yR(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||cR)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||pR(n)}var vR=s.getAccessibleStrokes,gR=s.ensureTextContrast,bR=s.createTextStrokeFilter,mR=s.findTagLevel,AR=s.initializeDescriptionRoot,wR=s.initializeElementAccess,SR=s.setElementFocusHandler,xR=s.setElementAccessID,kR=s.setAccessibilityController,LR=s.hideNonessentialGroups,_R=s.setAccessTitle,CR=s.setAccessSubtitle,DR=s.setAccessLongDescription,MR=s.setAccessExecutiveSummary,UR=s.setAccessPurpose,TR=s.setAccessContext,ER=s.setAccessStatistics,IR=s.setAccessChartCounts,NR=s.setAccessXAxis,WR=s.setAccessYAxis,HR=s.setAccessStructure,GR=s.setAccessAnnotation,PR=s.retainAccessFocus,OR=s.checkAccessFocus,VR=s.setElementInteractionAccessState,RR=s.setAccessibilityDescriptionWidth,YR=s.annotate,zR=s.chartAccessors,XR=s.checkInteraction,FR=s.checkClicked,BR=s.checkHovered,KR=s.convertVisaColor,qR=s.drawAxis,jR=s.drawGrid,$R=s.drawLegend,ZR=s.setLegendInteractionState,QR=s.drawTooltip,JR=s.formatDataLabel,tY=s.getColors,eY=s.getLicenses,iY=s.getPadding,rY=s.getScopedData,nY=s.initTooltipStyle,sY=s.overrideTitleTooltip,aY=s.placeDataLabels,oY=s.resolveLines,lY=s.scopeDataKeys,uY=s.transitionEndAll,hY=s.visaColors,cY=s.validateAccessibilityProps;var dY=t("parallel_plot",function(){function t(t){var r=this;e(this,t);this.mainTitle=bO.mainTitle;this.subTitle=bO.subTitle;this.height=bO.height;this.width=bO.width;this.highestHeadingLevel=bO.highestHeadingLevel;this.margin=bO.margin;this.padding=bO.padding;this.ordinalAccessor=bO.ordinalAccessor;this.valueAccessor=bO.valueAccessor;this.seriesAccessor=bO.seriesAccessor;this.xAxis=bO.xAxis;this.yAxis=bO.yAxis;this.wrapLabel=bO.wrapLabel;this.showBaselineX=bO.showBaselineX;this.colorPalette=bO.colorPalette;this.hoverStyle=bO.hoverStyle;this.clickStyle=bO.clickStyle;this.referenceStyle=bO.referenceStyle;this.cursor=bO.cursor;this.hoverOpacity=bO.hoverOpacity;this.strokeWidth=bO.strokeWidth;this.showDots=bO.showDots;this.dotRadius=bO.dotRadius;this.dataLabel=bO.dataLabel;this.showTooltip=bO.showTooltip;this.tooltipLabel=bO.tooltipLabel;this.accessibility=bO.accessibility;this.legend=bO.legend;this.annotations=bO.annotations;this.seriesLabel=bO.seriesLabel;this.referenceLines=bO.referenceLines;this.secondaryLines=bO.secondaryLines;this.suppressEvents=bO.suppressEvents;this.clickHighlight=bO.clickHighlight;this.unitTest=false;this.shouldValidateAccessibility=true;this.updated=true;this.enterSize=0;this.exitSize=0;this.time={timehour:HH,timeday:GH,timeweek:OH,timemonth:BH,timeyear:KH};this.shouldUpdateXAxis=false;this.shouldUpdateYAxis=false;this.shouldUpdateXGrid=false;this.shouldUpdateYGrid=false;this.shouldValidate=false;this.shouldUpdateData=false;this.shouldSetDimensions=false;this.shouldUpdateScales=false;this.shouldUpdateTableData=false;this.shouldUpdateLabels=false;this.shouldUpdateAnnotations=false;this.shouldDrawInteractionState=false;this.shouldSetSelectionClass=false;this.shouldUpdateCursor=false;this.shouldSetColors=false;this.shouldUpdateLines=false;this.shouldUpdatePoints=false;this.shouldUpdateLegend=false;this.shouldUpdateReferenceLines=false;this.shouldBindInteractivity=false;this.shouldUpdateLegendInteractivity=false;this.shouldResetRoot=false;this.shouldUpdateBaseline=false;this.shouldValidateInteractionKeys=false;this.shouldEnterUpdateExit=false;this.shouldSetGlobalSelections=false;this.shouldSetTestingAttributes=false;this.shouldSetLabelOpacity=false;this.shouldSetSeriesLabelOpacity=false;this.shouldSetLegendCursor=false;this.shouldAddStrokeUnder=false;this.shouldValidateSeriesLabels=false;this.shouldUpdateSeriesLabels=false;this.shouldUpdateColors=false;this.shouldUpdateStrokeWidth=false;this.shouldUpdateInterpolationData=false;this.shouldSetScaleUsed=false;this.shouldUpdateDotRadius=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.shouldUpdateDashPatterns=false;this.topLevel="h2";this.bottomLevel="p";this.strokes={};this.b=",";this.short="2,2";this.med="4,2";this.long="8,2";this.dashPatterns=["",this.long,this.long+this.b+this.med,this.short+this.b+this.long+this.b+this.long,this.short+this.b+this.short+this.b+this.long];this.dynamicY=function(t){if(r.yAxis.scales==="individual"){return r.multiYScale[t[r.ordinalAccessor]].y(t[r.valueAccessor])}return r.y(t[r.valueAccessor])};this.interpolateDynamicY=function(t){if(r.yAxis.scales==="individual"){return r.interpolating.multiYScale[t[r.ordinalAccessor]].y(t[r.valueAccessor])}return r.interpolating.y(t[r.valueAccessor])};this.handleDotStroke=function(t,e,i){if(!r.accessibility.hideStrokes){var n=r.clickHighlight&&r.clickHighlight.length>0&&FR(t,r.clickHighlight,r.innerInteractionKeys);var s=r.hoverHighlight&&BR(t,r.hoverHighlight,r.innerInteractionKeys);var a=fH(i[e].parentNode).attr("fill");var o=n&&r.clickStyle.color?hY[r.clickStyle.color]||r.clickStyle.color:n?a:s&&r.hoverStyle.color?hY[r.hoverStyle.color]||r.hoverStyle.color:a;fH(i[e]).attr("stroke-width",r.calculateStrokeWidth(t));fH(i[e]).attr("fill",o);return r.strokes[o.toLowerCase()]}return null};this.handleLineStroke=function(t,e){var i=r.colorArr[e]||r.colorArr[0];var n=t.values[0];var s=FR(n,r.clickHighlight,r.innerInteractionKeys);var a=BR(n,r.hoverHighlight,r.innerInteractionKeys);return r.seriesInteraction?s&&r.clickStyle.color?r.strokes[(hY[r.clickStyle.color]||r.clickStyle.color).toLowerCase()]:s?i:a&&r.hoverStyle.color?r.strokes[(hY[r.hoverStyle.color]||r.hoverStyle.color).toLowerCase()]:i:i};this.handleSeriesTextFill=function(t,e){var i=r.rawColors[e]||r.rawColors[0];var n=t.values[0];var s=FR(n,r.clickHighlight,r.innerInteractionKeys);var a=BR(n,r.hoverHighlight,r.innerInteractionKeys);var o=r.seriesInteraction?s&&r.clickStyle.color?hY[r.clickStyle.color]||r.clickStyle.color:s?i:a&&r.hoverStyle.color?hY[r.hoverStyle.color]||r.hoverStyle.color:i:i;return r.textColors[o.toLowerCase()]};this.handleTextFill=function(t,e,i){var n=r.clickHighlight&&r.clickHighlight.length>0&&FR(t,r.clickHighlight,r.innerInteractionKeys);var s=r.hoverHighlight&&BR(t,r.hoverHighlight,r.innerInteractionKeys);var a=fH(i[e].parentNode).attr("fill");var o=n&&r.clickStyle.color?hY[r.clickStyle.color]||r.clickStyle.color:n?a:s&&r.hoverStyle.color?hY[r.hoverStyle.color]||r.hoverStyle.color:a;return r.textColors[o.toLowerCase()]};this.calculateStrokeWidth=function(t,e){var i=!e?t:t.values[0];return!e||r.seriesInteraction?FR(i,r.clickHighlight,r.innerInteractionKeys)?r.clickStyle.strokeWidth||r.strokeWidth:BR(i,r.hoverHighlight,r.innerInteractionKeys)?r.hoverStyle.strokeWidth||r.strokeWidth:!r.secondaryLines.keys.includes(i[r.seriesAccessor])?r.strokeWidth:1:!r.secondaryLines.keys.includes(i[r.seriesAccessor])?r.strokeWidth:1};this.handleStrokeDasharray=function(t,e){return r.secondaryLines.keys.includes(t.key)?r.short:!r.accessibility.hideTextures?r.dashPatterns[e]:""};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.dataWatcher=function(t,e){this.updated=true;this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateData=true;this.shouldUpdateInterpolationData=true;this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldUpdateDotRadius=true;this.shouldSetGlobalSelections=true;this.shouldSetTestingAttributes=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldValidate=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true};t.prototype.idWatcher=function(t,e){this.chartID=t;this.parallelChartEl.id=this.chartID;this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateLegend=true;this.shouldUpdateLegend=true;this.shouldAddStrokeUnder=true};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetAnnotationAccessibility=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.titleWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.subtitleWatcher=function(t,e){this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.dimensionWatcher=function(t,e){this.shouldSetDimensions=true;this.shouldResetRoot=true;this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true};t.prototype.seriesAccessorWatcher=function(t,e){this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateData=true;this.shouldUpdateInterpolationData=true;this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldValidate=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateTableData=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldUpdateLabels=true;this.shouldBindInteractivity=true;this.shouldUpdateCursor=true};t.prototype.ordinalAccessorWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldUpdateTableData=true;this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldSetGeometryAriaLabels=true;this.shouldUpdateStrokeWidth=true};t.prototype.valueAccessorWatcher=function(t,e){this.shouldUpdateTableData=true;this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldSetColors=true;this.shouldSetGlobalSelections=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGlobalSelections=true};t.prototype.xAxisWatcher=function(t,e){this.shouldUpdateXAxis=true;var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateXGrid=true}this.shouldSetXAxisAccessibility=true};t.prototype.yAxisWatcher=function(t,e){var i=t&&t.scales?t.scales:false;var r=e&&e.scales?e.scales:false;if(i!==r){this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateData=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true}this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;var n=t&&t.gridVisible;var s=e&&e.gridVisible;var a=t&&t.tickInterval?t.tickInterval:0;var o=e&&e.tickInterval?e.tickInterval:0;if(n!==s||a!==o){this.shouldUpdateYGrid=true}};t.prototype.wrapLabelWatcher=function(t,e){this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true};t.prototype.showBaselineXWatcher=function(t,e){this.shouldUpdateBaseline=true};t.prototype.paletteWatcher=function(t,e){this.shouldSetColors=true;this.shouldUpdateColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true};t.prototype.colorsWatcher=function(t,e){this.shouldSetColors=true;this.shouldUpdateColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true};t.prototype.clickStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldSetColors=true};t.prototype.hoverStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldSetColors=true};t.prototype.referenceWatcher=function(t,e){this.shouldUpdateReferenceLines=true};t.prototype.cursorWatcher=function(t,e){this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true};t.prototype.strokeWidthWatcher=function(t,e){this.shouldUpdateStrokeWidth=true};t.prototype.showDotsWatcher=function(t,e){this.shouldDrawInteractionState=true};t.prototype.dotRadiusWatcher=function(t,e){this.shouldUpdateDotRadius=true};t.prototype.hoverOpacityWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true};t.prototype.dataLabelWatcher=function(t,e){this.shouldUpdateLabels=true;this.shouldUpdateTableData=true;var i=t&&t.visible;var r=e&&e.visible;var n=t&&t.placement?t.placement:false;var s=e&&e.placement?e.placement:false;if(i!==r){this.shouldSetLabelOpacity=true}if(n!==s){this.shouldUpdateSeriesLabels=true}};t.prototype.seriesLabelWatcher=function(t,e){this.shouldUpdateSeriesLabels=true;this.shouldUpdateTableData=true;this.shouldValidateSeriesLabels=true;var i=t&&t.visible;var r=e&&e.visible;if(i!==r){this.shouldSetSeriesLabelOpacity=true}};t.prototype.tooltipLabelWatcher=function(t,e){this.shouldUpdateTableData=true};t.prototype.showTooltipWatcher=function(t,e){};t.prototype.accessibilityWatcher=function(t,e){this.shouldValidate=true;var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}var A=t&&t.showSmallLabels?t.showSmallLabels:false;var w=e&&e.showSmallLabels?e.showSmallLabels:false;if(A!==w){this.shouldSetLabelOpacity=true}var S=t&&t.hideStrokes?t.hideStrokes:false;var x=e&&e.hideStrokes?e.hideStrokes:false;if(S!==x){this.shouldUpdateStrokeWidth=true;this.shouldSetColors=true;this.shouldDrawInteractionState=true}var k=t&&t.hideTextures?t.hideTextures:false;var L=e&&e.hideTextures?e.hideTextures:false;if(k!==L){this.shouldUpdateDashPatterns=true;this.shouldUpdateLegend=true}var _=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;var C=e&&e.keyboardNavConfig&&e.keyboardNavConfig.disabled?e.keyboardNavConfig.disabled:false;var D=t&&t.elementsAreInterface?t.elementsAreInterface:false;var M=e&&e.elementsAreInterface?e.elementsAreInterface:false;if(_!==C||D!==M){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(D!==M){this.shouldSetSelectionClass=true}};t.prototype.legendWatcher=function(t,e){this.shouldUpdateLegend=true;var i=t&&t.interactive;var r=e&&e.interactive;if(i!==r){this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true}};t.prototype.annotationsWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateAnnotations=true};t.prototype.valueOverrideWatcher=function(t,e){this.shouldSetScaleUsed=true;this.shouldUpdateScales=true;this.shouldUpdateInterpolationData=true;this.shouldUpdateLines=true;this.shouldUpdatePoints=true;this.shouldUpdateYAxis=true;this.shouldUpdateYGrid=true;this.shouldUpdateSeriesLabels=true;this.shouldUpdateLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true};t.prototype.secondaryLinesWatcher=function(t,e){var i=t&&t.showDataLabel;var r=e&&e.showDataLabel;var n=t&&t.showSeriesLabel;var s=e&&e.showSeriesLabel;var a=t&&t.keys?t.keys:false;var o=e&&e.keys?e.keys:false;var l=t&&t.opacity?t.opacity:0;var u=e&&e.opacity?e.opacity:0;if(a!==o){this.shouldUpdateLines=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true}if(i!==r){this.shouldSetLabelOpacity=true}if(n!==s){this.shouldUpdateLabels=true}if(l!==u){this.shouldDrawInteractionState=true;this.shouldSetSeriesLabelOpacity=true}};t.prototype.clickWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true};t.prototype.hoverWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true};t.prototype.interactionWatcher=function(t,e){this.shouldValidateInteractionKeys=true;this.shouldDrawInteractionState=true;this.shouldUpdateDotRadius=true;this.shouldSetLabelOpacity=true;this.shouldSetSeriesLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateTableData=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateStrokeWidth=true;this.shouldUpdateColors=true;this.shouldBindInteractivity=true;this.shouldUpdateCursor=true};t.prototype.suppressWatcher=function(t,e){this.shouldBindInteractivity=true;this.shouldUpdateCursor=true;this.shouldSetLegendCursor=true;this.shouldUpdateLegendInteractivity=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.unitTestWatcher=function(t,e){this.shouldSetTestingAttributes=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.defaults=true;t.chartID=t.uniqueID||"parallel-plot-"+yR();t.parallelChartEl.id=t.chartID;t.setTagLevels();t.setDimensions();t.setScaleUsed();t.prepareScales();t.prepareData();t.updateInterpolationData();t.validateInteractionKeys();t.validateSeriesLabels();t.setTableData();t.shouldValidateAccessibilityProps();t.setColors();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.renderRootElements();t.renderChartRootElemets();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.drawXGrid();t.drawYGrid();t.setGlobalSelections();t.setTestingAttributes();t.drawXAxis();t.setXAxisAccessibility();t.enterYAxis();t.exitYAxis();t.drawYAxis();t.setYAxisAccessibility();t.enterChartLines();t.updateChartLines();t.exitChartLines();t.enterPoints();t.updatePoints();t.exitPoints();t.enterSeriesLabels();t.updateSeriesLabels();t.exitSeriesLabels();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.drawChartLines();t.drawPoints();t.setChartCountAccessibility();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.drawSeriesLabels();t.drawLegendElements();t.drawDataLabels();t.addStrokeUnder();t.drawReferenceLines();t.setSelectedClass();t.updateInteractionState();t.setLabelOpacity();t.setSeriesLabelOpacity();t.updateCursor();t.bindInteractivity();t.setLegendCursor();t.bindLegendInteractivity();t.drawBaseline();t.drawAnnotations();t.setAnnotationAccessibility();LR(t.root.node(),t.dotG.node());t.setGroupAccessibilityID();t.onChangeHandler();t.duration=750;t.defaults=false;e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}if(t.shouldResetRoot){t.reSetRoot();t.shouldResetRoot=false}if(t.shouldUpdateXGrid){t.drawXGrid();t.shouldUpdateXGrid=false}if(t.shouldUpdateYGrid){t.drawYGrid();t.shouldUpdateYGrid=false}if(t.shouldSetGlobalSelections){t.setGlobalSelections();t.shouldSetGlobalSelections=false}if(t.shouldSetTestingAttributes){t.setTestingAttributes();t.shouldSetTestingAttributes=false}if(t.shouldEnterUpdateExit){t.enterYAxis();t.exitYAxis();t.enterChartLines();t.updateChartLines();t.exitChartLines();t.enterPoints();t.updatePoints();t.exitPoints();t.enterSeriesLabels();t.updateSeriesLabels();t.exitSeriesLabels();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.shouldEnterUpdateExit=false}if(t.shouldUpdateXAxis){t.drawXAxis();t.shouldUpdateXAxis=false}if(t.shouldUpdateYAxis){t.drawYAxis();t.shouldUpdateYAxis=false}if(t.shouldSetXAxisAccessibility){t.setXAxisAccessibility();t.shouldSetXAxisAccessibility=false}if(t.shouldSetYAxisAccessibility){t.setYAxisAccessibility();t.shouldSetYAxisAccessibility=false}if(t.shouldUpdateLines){t.drawChartLines();t.shouldUpdateLines=false}if(t.shouldUpdatePoints){t.drawPoints();t.shouldUpdatePoints=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldUpdateSeriesLabels){t.drawSeriesLabels();t.shouldUpdateSeriesLabels=false}if(t.shouldUpdateColors){t.updateColors();t.shouldUpdateColors=false}if(t.shouldUpdateLegend){t.drawLegendElements();t.shouldUpdateLegend=false}if(t.shouldUpdateLabels){t.drawDataLabels();t.shouldUpdateLabels=false}if(t.addStrokeUnder){t.addStrokeUnder();t.shouldAddStrokeUnder=false}if(t.shouldUpdateReferenceLines){t.drawReferenceLines();t.shouldUpdateReferenceLines=false}if(t.shouldUpdateStrokeWidth){t.updateStrokeWidth();t.shouldUpdateStrokeWidth=false}if(t.shouldUpdateDotRadius){t.updateDotRadius();t.shouldUpdateDotRadius=false}if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldUpdateDashPatterns){t.updateStrokePattern();t.shouldUpdateDashPatterns=false}if(t.shouldSetLabelOpacity){t.setLabelOpacity();t.shouldSetLabelOpacity=false}if(t.shouldSetSeriesLabelOpacity){t.setSeriesLabelOpacity();t.shouldSetSeriesLabelOpacity=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}if(t.shouldUpdateLegendInteractivity){t.bindLegendInteractivity();t.shouldUpdateLegendInteractivity=false}if(t.shouldSetLegendCursor){t.setLegendCursor();t.shouldSetLegendCursor=false}if(t.shouldUpdateCursor){t.updateCursor();t.shouldUpdateCursor=false}if(t.shouldBindInteractivity){t.bindInteractivity();t.shouldBindInteractivity=false}if(t.shouldUpdateAnnotations){t.drawAnnotations();t.shouldUpdateAnnotations=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}if(t.shouldUpdateBaseline){t.drawBaseline();t.shouldUpdateBaseline=false}t.onChangeHandler();e("component did update")}))};t.prototype.shouldValidateAccessibilityProps=function(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;cY(this.chartID,Object.assign({},this.accessibility),{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:!this.suppressEvents?this.clickFunc.emit:undefined}})}};t.prototype.setDimensions=function(){this.padding=typeof this.padding==="string"?iY(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.validateInteractionKeys=function(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.seriesAccessor];this.seriesInteraction=this.innerInteractionKeys.length===1&&this.innerInteractionKeys[0]===this.seriesAccessor};t.prototype.setColors=function(){var t=this;this.rawColors=this.colors?KR(this.colors):tY(this.colorPalette,this.nest.length);this.textColors={};var e=this.rawColors;this.strokes={};if(!this.accessibility.hideStrokes){e=[]}this.rawColors.forEach((function(i){if(!t.accessibility.hideStrokes){var r=vR(i);var n=r.length===2?r[1]:r[0];t.strokes[i.toLowerCase()]=n;e.push(n)}t.textColors[i.toLowerCase()]=gR(i,"#ffffff",4.5)}));if(this.hoverStyle&&this.hoverStyle.color){if(!this.accessibility.hideStrokes){var i=vR(this.hoverStyle.color);var r=i.length===2?i[1]:i[0];this.strokes[this.hoverStyle.color.toLowerCase()]=r}this.textColors[this.hoverStyle.color.toLowerCase()]=gR(this.hoverStyle.color,"#ffffff",4.5)}if(this.clickStyle&&this.clickStyle.color){if(!this.accessibility.hideStrokes){var i=vR(this.clickStyle.color);var r=i.length===2?i[1]:i[0];this.strokes[this.clickStyle.color.toLowerCase()]=r}this.textColors[this.clickStyle.color.toLowerCase()]=gR(this.clickStyle.color,"#ffffff",4.5)}this.colorArr=e};t.prototype.setTableData=function(){var t=lY(this,zR,"parallel-plot");this.tableData=rY(this.data,t);this.tableColumns=Object.keys(t)};t.prototype.prepareData=function(){var t=this;this.multiYScale={};this.nest=QH().key((function(e){if(!t.multiYScale[e[t.ordinalAccessor]]){t.multiYScale[e[t.ordinalAccessor]]={min:Infinity,max:0}}if(t.multiYScale[e[t.ordinalAccessor]].min>e[t.valueAccessor]){t.multiYScale[e[t.ordinalAccessor]].min=e[t.valueAccessor]}if(t.multiYScale[e[t.ordinalAccessor]].max<e[t.valueAccessor]){t.multiYScale[e[t.ordinalAccessor]].max=e[t.valueAccessor]}return e[t.seriesAccessor]})).entries(this.data);this.map=QH().key((function(e){return e[t.seriesAccessor]})).map(this.data);var e=Object.keys(this.multiYScale);e.forEach((function(e){var i=t.multiYScale[e];var r=t.innerPaddedHeight*.05;i.y=nO().domain([t.minValueOverride||t.minValueOverride===0?t.minValueOverride:i.min,t.maxValueOverride||t.maxValueOverride===0?t.maxValueOverride:i.max]).range([t.innerPaddedHeight-r,0+r]);i.ticks=[i.y.invert(t.innerPaddedHeight),i.y.invert(0)]}))};t.prototype.updateInterpolationData=function(){var t=this;if(this.interpolating){var e=this.nest.length;this.nest.forEach((function(i){i.interpolate={};var r=t.interpolating.map.get(i.key);var n=i.values;if(!r){i.interpolate.start=n;i.interpolate.end=n}else{var s=oY(r,n,t.ordinalAccessor);if(!s.length){i.interpolate.start=r;i.interpolate.end=n;e--}else{i.interpolate.start=s[0];i.interpolate.end=s[1]}}}));if(!e&&this.nest.length===this.interpolating.length){this.interpolating=false}}};t.prototype.prepareScales=function(){var t=this;if(this.nest){this.interpolating=this.nest;var e=this.x.domain();var i=this.x.range();var r=this.y.domain();var n=this.y.range();this.interpolating.scales=this.scalesUsed;this.interpolating.multiYScale=Object.assign({},this.multiYScale);this.interpolating.x=this.x.domain(e).range(i);this.interpolating.y=nO().domain(r).range(n);this.interpolating.line=vO().x((function(e){return t.interpolating.x(e[t.ordinalAccessor])})).y((function(e){if(t.interpolating.scales==="individual"){return t.interpolating.multiYScale[e[t.ordinalAccessor]].y(e[t.valueAccessor])}return t.interpolating.y(e[t.valueAccessor])}));this.interpolating.map=this.map}this.extent={};this.extent.minValue=CH(this.data,(function(e){return parseFloat(e[t.valueAccessor])}));this.extent.maxValue=_H(this.data,(function(e){return parseFloat(e[t.valueAccessor])}));var s=0+this.innerPaddedHeight*.05;var a=this.innerPaddedHeight-this.innerPaddedHeight*.05;if(this.yAxis.scales==="preNormalized"){this.extent.minValue=0;this.extent.maxValue=1;s=0;a=this.innerPaddedHeight}this.extent.minValue=this.minValueOverride||this.minValueOverride===0?this.minValueOverride:this.extent.minValue;this.extent.maxValue=this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:this.extent.maxValue;s=this.minValueOverride||this.minValueOverride===0?this.minValueOverride:s;a=this.maxValueOverride||this.maxValueOverride===0?this.maxValueOverride:a;this.y=nO().domain([this.extent.minValue,this.extent.maxValue]).range([a,s]);this.x=hG().domain(this.data.map((function(e){return e[t.ordinalAccessor]}))).range([0,this.innerPaddedWidth]);this.line=vO().x((function(e){return t.x(e[t.ordinalAccessor])})).y((function(e){if(t.yAxis.scales==="individual"){return t.multiYScale[e[t.ordinalAccessor]].y(e[t.valueAccessor])}return t.y(e[t.valueAccessor])}))};t.prototype.validateSeriesLabels=function(){this.labelDetails=Object.assign({},this.seriesLabel);if(!this.labelDetails.placement){this.labelDetails.placement=""}if(!this.labelDetails.label||!this.labelDetails.label.length){this.labelDetails.label=""}this.isRight=this.labelDetails.placement.includes("right")};t.prototype.setScaleUsed=function(){this.scalesUsed=this.yAxis.scales};t.prototype.renderRootElements=function(){this.svg=fH(this.parallelChartEl).select(".visa-viz-d3-parallel-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.gridG=this.rootG.append("g").attr("class","grid-group");this.references=this.rootG.append("g").attr("class","parallel-reference-line-group")};t.prototype.renderChartRootElemets=function(){this.yGroup=this.rootG.append("g").attr("class","y-scales-group");this.parallelLineG=this.rootG.append("g").attr("class","parallel-group parallel-line-group");this.dotG=this.rootG.append("g").attr("class","parallel-group");this.seriesLabelG=this.rootG.append("g").attr("class","parallel-series-wrapper");this.labels=this.rootG.append("g").attr("class","parallel-dataLabel-group");this.legendG=fH(this.parallelChartEl).select(".parallel-legend").append("svg");this.tooltipG=fH(this.parallelChartEl).select(".parallel-tooltip");this.setTooltipInitialStyle()};t.prototype.reSetRoot=function(){this.svg.transition("root_reset").duration(this.duration).ease(AO).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root.transition("root_reset").duration(this.duration).ease(AO).attr("transform","translate("+this.margin.left+", "+this.margin.top+")");this.rootG.transition("root_reset").duration(this.duration).ease(AO).attr("transform","translate("+this.padding.left+", "+this.padding.top+")");RR(this.chartID,this.width)};t.prototype.setGlobalSelections=function(){var t=this;var e=Object.keys(this.multiYScale);var i=this.yGroup.selectAll(".y-wrapper").data(e,(function(t){return t}));this.yEnter=i.enter().append("g");this.yExit=i.exit();this.yUpdate=i.merge(this.yEnter);var r=this.parallelLineG.selectAll(".parallel-plot").data(this.nest,(function(t){return t.key}));this.enterLines=r.enter().append("path");this.exitLines=r.exit();this.updateLines=r.merge(this.enterLines);this.enterSize=this.enterLines.size();var n=this.dotG.selectAll(".parallel-dot-wrapper").data(this.nest,(function(t){return t.key}));this.enterDotWrappers=n.enter().append("g");this.exitDotWrappers=n.exit();this.updateDotWrappers=n.merge(this.enterDotWrappers);var s=this.seriesLabelG.selectAll(".parallel-series-label").data(this.nest,(function(t){return t.key}));this.seriesLabelEnter=s.enter().append("text");this.seriesLabelExit=s.exit();this.seriesLabelUpdate=s.merge(this.seriesLabelEnter);var a=this.labels.selectAll("g").data(this.nest,(function(t){return t.key}));this.enteringLabelGroups=a.enter().append("g");this.exitingLabelGroups=a.exit();this.updatingLabelGroups=a.merge(this.enteringLabelGroups);if(this.interpolating){this.updateDotWrappers.selectAll("circle").remove();var o=this.updateDotWrappers.selectAll("circle").data((function(t){return t.interpolate.start}));this.enterDots=o.enter().append("circle");this.exitDots=o.exit();this.updateDots=o.merge(this.enterDots);this.updatingLabelGroups.selectAll(".parallel-dataLabel").remove();var l=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data((function(t){return t.interpolate.start}));this.enteringLabels=l.enter().append("text");this.updatingLabels=l.merge(this.enteringLabels)}else{var o=this.updateDotWrappers.selectAll("circle").data((function(t){return t.values}));this.enterDots=o.enter().append("circle");this.exitDots=o.exit();this.updateDots=o.merge(this.enterDots);this.enterSize=this.enterDots.size();this.exitSize=this.exitDots.size();var l=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data((function(t){return t.values}),(function(e){return e[t.ordinalAccessor]}));this.enteringLabels=l.enter().append("text");this.exitingLabels=l.exit();this.updatingLabels=l.merge(this.enteringLabels)}};t.prototype.setTestingAttributes=function(){var t=this;if(this.unitTest){fH(this.parallelChartEl).select(".visa-viz-d3-parallel-container").attr("data-testid","chart-container");fH(this.parallelChartEl).select(".parallel-main-title").attr("data-testid","main-title");fH(this.parallelChartEl).select(".parallel-sub-title").attr("data-testid","sub-title");this.svg.attr("data-testid","root-svg");this.root.attr("data-testid","margin-container");this.rootG.attr("data-testid","padding-container");this.legendG.attr("data-testid","legend-container");this.tooltipG.attr("data-testid","tooltip-container");this.gridG.attr("data-testid","grid-group");this.references.attr("data-testid","reference-line-group");this.yGroup.attr("data-testid","y-scales-group");this.yUpdate.attr("data-testid","y-scale-wrapper");this.parallelLineG.attr("data-testid","parallel-line-group");this.updateLines.attr("data-testid","parallel-line").attr("data-id",(function(t){return"parallel-line-"+t.key}));this.seriesLabelG.attr("data-testid","parallel-series-label-container");this.seriesLabelUpdate.attr("data-testid","parallel-series-label").attr("data-id",(function(t){return"parallel-series-label-"+t.key}));this.dotG.attr("data-testid","marker-group");this.updateDotWrappers.attr("data-testid","marker-series-group").attr("data-id",(function(t){return"marker-series-"+t.key}));this.updateDots.attr("data-testid","marker").attr("data-id",(function(e){return"marker-"+e[t.seriesAccessor]+"-"+e[t.ordinalAccessor]}));this.labels.attr("data-testid","dataLabel-group-container");this.updatingLabelGroups.attr("data-testid","dataLabel-group").attr("data-id",(function(t){return"dataLabel-group-"+t.key}));this.updatingLabels.attr("data-testid","dataLabel").attr("data-id",(function(e){return"dataLabel-"+e[t.seriesAccessor]+"-"+e[t.ordinalAccessor]}));this.svg.select("defs").attr("data-testid","pattern-defs")}else{fH(this.parallelChartEl).select(".visa-viz-d3-parallel-container").attr("data-testid",null);fH(this.parallelChartEl).select(".parallel-main-title").attr("data-testid",null);fH(this.parallelChartEl).select(".parallel-sub-title").attr("data-testid",null);this.svg.attr("data-testid",null);this.root.attr("data-testid",null);this.rootG.attr("data-testid",null);this.legendG.attr("data-testid",null);this.tooltipG.attr("data-testid",null);this.gridG.attr("data-testid",null);this.references.attr("data-testid",null);this.yGroup.attr("data-testid",null);this.yUpdate.attr("data-testid",null);this.parallelLineG.attr("data-testid",null);this.updateLines.attr("data-testid",null).attr("data-id",null);this.seriesLabelG.attr("data-testid",null);this.seriesLabelUpdate.attr("data-testid",null).attr("data-id",null);this.dotG.attr("data-testid",null);this.updateDotWrappers.attr("data-testid",null).attr("data-id",null);this.updateDots.attr("data-testid",null).attr("data-id",null);this.labels.attr("data-testid",null);this.updatingLabelGroups.attr("data-testid",null).attr("data-id",null);this.updatingLabels.attr("data-testid",null).attr("data-id",null);this.svg.select("defs").attr("data-testid",null)}};t.prototype.drawXAxis=function(){var t=this.innerPaddedWidth/this.nest[0].values.length*.7;qR({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,wrapLabel:this.wrapLabel?t:"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.xAxis.visible,hidePath:true})};t.prototype.enterYAxis=function(){var t=this;this.yEnter.attr("class","y-wrapper").attr("transform",(function(e){return"translate("+t.x(e)+",0)"})).attr("opacity",0)};t.prototype.exitYAxis=function(){this.yExit.transition("exit").duration(this.duration).ease(AO).attr("opacity",0).remove()};t.prototype.drawYAxis=function(){var t=this;this.yUpdate.each((function(e,i,r){var n=t.yAxis.scales==="individual"?t.multiYScale[e].ticks:!t.yAxis.onlyTickExtents?t.yAxis.onlyTickExtents:[t.extent.minValue,t.extent.maxValue];var s=t.multiYScale[e].y.domain();var a=s[0]===s[1]?true:i===0||t.yAxis.scales==="individual"?!t.yAxis.visible:true;qR({root:fH(r[i]),height:t.innerPaddedHeight,width:t.innerPaddedWidth,axisScale:t.yAxis.scales==="individual"?t.multiYScale[e].y:t.y,left:true,wrapLabel:t.wrapLabel?t.padding.left:"",format:t.yAxis.format,tickInterval:n?1:t.yAxis.tickInterval,label:t.yAxis.scales==="individual"||a?"":t.yAxis.label,padding:t.padding,hide:a,hidePath:true,ticks:n})})).transition("update").duration(this.duration).ease(AO).attr("transform",(function(e){return"translate("+t.x(e)+",0)"})).attr("opacity",1)};t.prototype.setXAxisAccessibility=function(){NR({rootEle:this.parallelChartEl,hasXAxis:this.xAxis?this.xAxis.visible:false,xAxis:this.x?this.x:false,xAxisLabel:this.xAxis.label?this.xAxis.label:""})};t.prototype.setYAxisAccessibility=function(){WR({rootEle:this.parallelChartEl,hasYAxis:this.yAxis?this.yAxis.visible:false,yAxis:this.y?this.y:false,yAxisLabel:this.yAxis.label?this.yAxis.label:"",xAxisLabel:this.xAxis.label?this.xAxis.label:""})};t.prototype.drawBaseline=function(){qR({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,padding:this.padding,markOffset:this.y(0),hide:!this.showBaselineX})};t.prototype.drawXGrid=function(){jR(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,false,false,this.xAxis.tickInterval)};t.prototype.drawYGrid=function(){jR(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,true,!this.yAxis.gridVisible,this.yAxis.tickInterval)};t.prototype.enterChartLines=function(){var t=this;this.enterLines.interrupt();this.enterLines.attr("class","parallel-plot entering").attr("d",(function(e){return t.line(e.values)}));this.enterLines.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onClickHandler(e.values[0])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onHoverHandler(e.values[0])}}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr("stroke-dasharray",(function(t,e,i){t.linelength=i[e].getTotalLength();return t.linelength+" "+t.linelength})).attr("stroke",this.handleLineStroke).attr("fill","none").attr("stroke-width",.1)};t.prototype.updateChartLines=function(){var t=this;this.updateLines.interrupt();this.updateLines.transition().duration(this.duration).ease(AO).attr("stroke-dashoffset",0).attr("stroke-width",(function(e){return t.calculateStrokeWidth(e,true)})).call(uY,(function(){t.updateLines.attr("stroke-dasharray",t.handleStrokeDasharray)}));this.updateLines.transition("opacity").ease(AO).duration(this.duration).attr("opacity",(function(e){var i=t.secondaryLines.keys.includes(e.key)?t.secondaryLines.opacity:1;if(!t.seriesInteraction){return i}else if(t.secondaryLines.keys.includes(e.key)){return XR(e.values[0],t.secondaryLines.opacity,Math.min(t.secondaryLines.opacity,t.hoverOpacity),t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}else{return XR(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}}))};t.prototype.exitChartLines=function(){this.exitLines.interrupt();this.exitLines.attr("stroke-dasharray",(function(t,e,i){t.linelength=i[e].getTotalLength();return t.linelength+" "+t.linelength})).transition("exit").ease(AO).duration(this.duration).attr("opacity",0).attr("stroke-dashoffset",(function(t){return t.linelength})).attr("stroke-width",.1).remove()};t.prototype.drawChartLines=function(){var t=this;if(this.interpolating){this.updateLines.attr("d",(function(e,i,r){if(fH(r[i]).classed("entering")){return t.line(e.values)}return t.interpolating.line(e.interpolate.start)}))}this.updateLines.attr("stroke-width",(function(e){return t.calculateStrokeWidth(e,true)})).attr("stroke-dashoffset",(function(t){return t.linelength})).transition("update").ease(AO).duration(this.duration).attr("d",(function(e){return t.interpolating?t.line(e.interpolate.end):t.line(e.values)})).call(uY,(function(){t.updateLines.classed("entering",false).attr("d",(function(e){return t.line(e.values)})).attr("stroke-dasharray",t.handleStrokeDasharray)}))};t.prototype.enterPoints=function(){var t=this;this.enterDots.interrupt();this.enterDotWrappers.attr("class","parallel-dot-wrapper").attr("opacity",0).attr("fill",(function(e,i){return t.rawColors[i]||t.rawColors[0]})).each((function(t,e,i){wR(i[e])}));this.enterDots.each((function(t,e,i){wR(i[e])})).attr("stroke",this.handleDotStroke).attr("cursor",!this.suppressEvents?this.cursor:null).on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);if(this.interpolating){this.enterDots.attr("cx",(function(e){return t.interpolating.x(e[t.ordinalAccessor])})).attr("cy",this.interpolateDynamicY).attr("r",(function(e){return e.enter?0:FR(e,t.clickHighlight,t.innerInteractionKeys)?t.dotRadius+(t.clickStyle&&t.clickStyle.strokeWidth?parseFloat(""+t.clickStyle.strokeWidth)/2:1):BR(e,t.hoverHighlight,t.innerInteractionKeys)?t.dotRadius+(t.hoverStyle&&t.hoverStyle.strokeWidth?parseFloat(""+t.hoverStyle.strokeWidth)/2:1):t.secondaryLines.keys.includes(e[t.seriesAccessor])?t.dotRadius+.5:t.dotRadius+parseFloat(""+t.strokeWidth)/2})).attr("stroke-width",(function(e){return t.calculateStrokeWidth(e)}));this.enterDotWrappers.selectAll("circle").attr("r",0).attr("cx",(function(e){return t.x(e[t.ordinalAccessor])})).attr("cy",this.dynamicY).attr("opacity",0)}this.updateDotWrappers.order();this.updateDots.order()};t.prototype.updatePoints=function(){var t=this;this.updateDots.interrupt();var e=this.showDots?1:0;this.updateDots.attr("tabindex",(function(t,e){return e===0?"0":"-1"}));this.updateDotWrappers.attr("opacity",(function(i){var r=t.secondaryLines.keys.includes(i.key)?t.secondaryLines.opacity:e;return r}));if(this.interpolating){this.updateDots.attr("opacity",(function(e){t.exitSize+=e.exit?1:0;t.enterSize+=e.enter?1:0;return e.enter?0:1}));this.updateDots=this.updateDotWrappers.selectAll("circle").data((function(t){return t.interpolate.end})).classed("exiting",(function(t){return t.exit}));this.enterDotWrappers.selectAll("circle").each((function(t){t.enterWholeGroup=true}));this.updateDots.transition("opacity").ease(AO).duration((function(e){if(e.enterWholeGroup){return t.duration/2}return t.duration})).delay((function(e,i,r){if(e.enterWholeGroup){return t.duration*.75*(i/(r.length-1))}return 0})).attr("opacity",(function(i){return XR(i,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))}else{this.updateDots.transition("opacity").ease(AO).duration(this.duration).attr("opacity",(function(i){return XR(i,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))}};t.prototype.exitPoints=function(){var t=this;this.exitDots.interrupt();this.exitDots.transition("exit").ease(AO).duration(this.duration).attr("opacity",0).attr("r",0);this.exitDotWrappers.selectAll("circle").each((function(t){t.exitWholeGroup=true})).transition("exit").ease(AO).duration(this.duration/2).delay((function(e,i,r){return t.duration-t.duration*(i/(r.length-1))})).attr("opacity",0).attr("r",0);this.updateDots.transition("accessibilityAfterExit").duration(this.duration/2).delay((function(e,i,r){return t.duration-t.duration*(i/(r.length-1))})).ease(AO).call(uY,(function(){var e=OR(t.rootG.node());t.exitDots.remove();t.exitDotWrappers.remove();t.svg.selectAll(".exiting").remove();t.updateDots=t.updateDotWrappers.selectAll("circle");t.updatingLabels=t.updatingLabelGroups.selectAll(".parallel-dataLabel");t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();PR({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawPoints=function(){var t=this;var e;if(this.interpolating){e=this.updateDots.transition("update").ease(AO).duration((function(e){if(e.enterWholeGroup){return t.duration/2}return t.duration})).delay((function(e,i,r){if(e.enterWholeGroup){return t.duration*.75*(i/(r.length-1))}return 0})).attr("r",(function(e){return e.exit?0:FR(e,t.clickHighlight,t.innerInteractionKeys)?t.dotRadius+(t.clickStyle&&t.clickStyle.strokeWidth?parseFloat(""+t.clickStyle.strokeWidth)/2:1):BR(e,t.hoverHighlight,t.innerInteractionKeys)?t.dotRadius+(t.hoverStyle&&t.hoverStyle.strokeWidth?parseFloat(""+t.hoverStyle.strokeWidth)/2:1):t.secondaryLines.keys.includes(e[t.seriesAccessor])?t.dotRadius+.5:t.dotRadius+parseFloat(""+t.strokeWidth)/2})).attr("stroke-width",(function(e){return t.calculateStrokeWidth(e)}))}else{e=this.updateDots.attr("r",(function(e){return FR(e,t.clickHighlight,t.innerInteractionKeys)?t.dotRadius+(t.clickStyle&&t.clickStyle.strokeWidth?parseFloat(""+t.clickStyle.strokeWidth)/2:1):BR(e,t.hoverHighlight,t.innerInteractionKeys)?t.dotRadius+(t.hoverStyle&&t.hoverStyle.strokeWidth?parseFloat(""+t.hoverStyle.strokeWidth)/2:1):t.secondaryLines.keys.includes(e[t.seriesAccessor])?t.dotRadius+.5:t.dotRadius+parseFloat(""+t.strokeWidth)/2})).attr("stroke-width",(function(e){return t.calculateStrokeWidth(e)})).transition("update").ease(AO).duration(this.duration)}this.updateDots.attr("stroke",this.handleDotStroke);e.attr("cx",(function(e){return t.x(e[t.ordinalAccessor])})).attr("cy",this.dynamicY).call(uY,(function(){t.updateDots.each((function(t){t.enterWholeGroup=false;t.enter=false}));PR({parentGNode:t.rootG.node()})}))};t.prototype.enterSeriesLabels=function(){var t=this;this.seriesLabelEnter.interrupt();this.seriesLabelEnter.attr("class","parallel-series-label").attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null).on("click",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onClickHandler(e.values[0])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onSeriesHoverHandler(e.values[0])}}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr("fill",this.handleSeriesTextFill).attr("x",this.isRight?this.innerPaddedWidth:0).attr("y",(function(e){if(t.yAxis.scales==="individual"){return t.isRight?t.multiYScale[e.values[e.values.length-1][t.ordinalAccessor]].y(e.values[e.values.length-1][t.valueAccessor]):t.multiYScale[e.values[0][t.ordinalAccessor]].y(e.values[0][t.valueAccessor])}return t.isRight?t.y(e.values[e.values.length-1][t.valueAccessor]):t.y(e.values[0][t.valueAccessor])})).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&this.dataLabel.placement==="top-right"?"0.9em":"-0.1em").attr("opacity",0)};t.prototype.updateSeriesLabels=function(){var t=this;this.seriesLabelUpdate.interrupt();this.seriesLabelUpdate.transition("opacity").ease(AO).duration(this.duration).attr("opacity",(function(e){var i=!t.seriesLabel.visible?0:t.secondaryLines.keys.includes(e.key)?t.secondaryLines.opacity:1;if(!t.seriesInteraction){return i}else if(t.secondaryLines.keys.includes(e.key)){return XR(e.values[0],i,Math.min(t.secondaryLines.opacity,t.hoverOpacity),t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}else{return XR(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}}))};t.prototype.exitSeriesLabels=function(){this.seriesLabelExit.interrupt();this.seriesLabelExit.transition("update").ease(AO).duration(this.duration).attr("opacity",0).remove()};t.prototype.drawSeriesLabels=function(){var t=this;this.seriesLabelUpdate.attr("fill",this.handleSeriesTextFill).text((function(e,i){return t.secondaryLines.keys.includes(e.key)&&!t.secondaryLines.showSeriesLabel?"":t.labelDetails.label?t.labelDetails.label[i]:e.key})).transition("update").ease(AO).duration(this.duration).attr("text-anchor",this.isRight?"start":"end").attr("x",this.isRight?this.innerPaddedWidth:0).attr("y",(function(e){if(t.yAxis.scales==="individual"){return t.isRight?t.multiYScale[e.values[e.values.length-1][t.ordinalAccessor]].y(e.values[e.values.length-1][t.valueAccessor]):t.multiYScale[e.values[0][t.ordinalAccessor]].y(e.values[0][t.valueAccessor])}return t.isRight?t.y(e.values[e.values.length-1][t.valueAccessor]):t.y(e.values[0][t.valueAccessor])})).attr("dx",this.isRight?"0.3em":"-0.3em").attr("dy",this.dataLabel&&this.dataLabel.placement==="top-right"?"0.9em":"-0.1em")};t.prototype.enterDataLabels=function(){var t=this;this.enteringLabels.interrupt();this.enteringLabelGroups.attr("class","parallel-label-wrapper").attr("opacity",0).attr("fill",(function(e,i){return t.rawColors[i]||t.rawColors[0]}));this.enteringLabels.attr("opacity",0).attr("fill",this.handleTextFill).attr("class","parallel-dataLabel").attr("cursor",!this.suppressEvents?this.cursor:null).on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);if(this.interpolating){var e=this.enteringLabels.attr("class","parallel-dataLabel");aY({root:e,xScale:this.interpolating.x,yScale:this.interpolateDynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"});this.updatingLabels.attr("opacity",(function(t){return t.enter?0:1}));var i=this.enteringLabelGroups.selectAll(".parallel-dataLabel").attr("opacity",0);aY({root:i,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})}else{var e=this.enteringLabels.attr("opacity",0).attr("class","parallel-dataLabel");aY({root:e,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})}};t.prototype.updateDataLabels=function(){var t=this;this.updatingLabelGroups.interrupt();this.updatingLabelGroups.attr("opacity",(function(e){var i=!t.dataLabel.visible?0:t.secondaryLines.keys.includes(e.key)&&t.secondaryLines.showDataLabel?t.secondaryLines.opacity:t.secondaryLines.keys.includes(e.key)&&!t.secondaryLines.showDataLabel?0:1;return i}));if(this.interpolating){this.updatingLabels=this.updatingLabelGroups.selectAll(".parallel-dataLabel").data((function(t){return t.interpolate.end})).classed("exiting",(function(t){return t.exit}));this.enteringLabelGroups.each((function(t){return t.enterWholeGroup=true}));this.updatingLabels.transition("opacity").ease(AO).duration((function(e){if(e.enterWholeGroup){return t.duration/2}return t.duration})).delay((function(e,i,r){if(e.enterWholeGroup){return t.duration*.75*(i/(r.length-1))}return 0})).attr("opacity",(function(e){return e.exit?0:XR(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}))}else{this.updatingLabels.attr("opacity",(function(e){return XR(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}))}};t.prototype.exitDataLabels=function(){var t=this;this.exitingLabels.interrupt();this.exitingLabels.transition("exit").ease(AO).duration(this.duration).attr("opacity",0).remove();this.exitingLabelGroups.selectAll(".parallel-dataLabel").transition("exit").ease(AO).duration(this.duration/2).delay((function(e,i,r){return t.duration-t.duration*(i/(r.length-1))})).attr("opacity",0).call(uY,(function(){t.exitingLabelGroups.remove()}))};t.prototype.drawDataLabels=function(){var t=this;var e=this.updatingLabels.text((function(e){return JR(e,t.dataLabel.labelAccessor,t.dataLabel.format)}));if(this.interpolating){e=this.updatingLabels.transition("update").ease(AO).duration((function(e){if(e.enterWholeGroup){return t.duration/2}return t.duration})).delay((function(e,i,r){if(e.enterWholeGroup){return t.duration*.75*(i/(r.length-1))}return 0}))}else{e=this.updatingLabels.transition("update").ease(AO).duration(this.duration)}aY({root:e,xScale:this.x,yScale:this.dynamicY,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,chartType:"parallel"})};t.prototype.updateInteractionState=function(){var t=this;this.updateLines.interrupt("opacity");this.updateLines.attr("opacity",(function(e){var i=t.secondaryLines.keys.includes(e.key)?t.secondaryLines.opacity:1;if(!t.seriesInteraction){return i}else if(t.secondaryLines.keys.includes(e.key)){return XR(e.values[0],t.secondaryLines.opacity,Math.min(t.secondaryLines.opacity,t.hoverOpacity),t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}else{return XR(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}}));var e=this.showDots?1:0;this.updateDotWrappers.attr("opacity",(function(i){var r=t.secondaryLines.keys.includes(i.key)?t.secondaryLines.opacity:e;return r}));this.updateDots.each((function(i,r,n){if(!i.enter&&!i.enterWholeGroup&&!i.exit&&!i.exitWholeGroup){fH(n[r]).attr("opacity",(function(){return XR(i,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))}}));PR({parentGNode:this.rootG.node()});ZR({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.setSeriesLabelOpacity=function(){var t=this;this.seriesLabelUpdate.each((function(e,i,r){var n=fH(r[i]);if(!n.classed("entering")){n.attr("opacity",(function(){var i=(!t.seriesLabel.visible?0:t.secondaryLines.keys.includes(e.key)?t.secondaryLines.opacity:1)<1?0:1;if(!t.seriesInteraction){return i}else if(t.secondaryLines.keys.includes(e.key)){return XR(e.values[0],i,Math.min(t.secondaryLines.opacity,t.hoverOpacity),t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}else{return XR(e.values[0],i,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}}))}}))};t.prototype.setLabelOpacity=function(){var t=this;this.updatingLabelGroups.attr("opacity",(function(e){return(!t.dataLabel.visible?0:t.secondaryLines.keys.includes(e.key)&&t.secondaryLines.showDataLabel?t.secondaryLines.opacity:t.secondaryLines.keys.includes(e.key)&&!t.secondaryLines.showDataLabel?0:1)<1?0:1}));this.updatingLabels.each((function(e,i,r){if(!e.enter&&!e.enterWholeGroup&&!e.exit&&!e.exitWholeGroup){fH(r[i]).attr("opacity",(function(){return XR(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1}))}}))};t.prototype.bindInteractivity=function(){var t=this;this.updateLines.on("click",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onClickHandler(e.values[0])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onHoverHandler(e.values[0])}}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.updateDots.on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.seriesLabelUpdate.on("click",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onClickHandler(e.values[0])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction?function(e){if(e.values){t.onSeriesHoverHandler(e.values[0])}}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null);this.updatingLabels.on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.addStrokeUnder=function(){var t=bR({root:this.svg.node(),id:this.chartID,color:"#ffffff"});this.labels.attr("filter",t);this.seriesLabelG.attr("filter",t)};t.prototype.updateColors=function(){var t=this;this.updateDotWrappers.attr("fill",(function(e,i){return t.rawColors[i]||t.rawColors[0]}));this.updateDots.attr("stroke",this.handleDotStroke);this.updateLines.attr("stroke",this.handleLineStroke);this.seriesLabelUpdate.attr("fill",this.handleSeriesTextFill);this.updatingLabelGroups.attr("fill",(function(e,i){return t.rawColors[i]||t.rawColors[0]}));this.updatingLabels.attr("fill",this.handleTextFill)};t.prototype.updateCursor=function(){this.updateLines.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null);this.updateDots.attr("cursor",!this.suppressEvents?this.cursor:null);this.seriesLabelUpdate.attr("cursor",!this.suppressEvents&&this.seriesInteraction?this.cursor:null);this.updatingLabels.attr("cursor",!this.suppressEvents?this.cursor:null)};t.prototype.drawReferenceLines=function(){var t=this;var e=this.references.selectAll("g").data(this.referenceLines,(function(t){return t.label}));var i=e.enter().append("g").attr("class",".parallel-reference").attr("opacity",1);var r=i.append("line");r.attr("class","line-reference-line").attr("opacity",0);var n=i.append("text");n.attr("class","parallel-reference-line-label").attr("opacity",0);var s=e.merge(i);var a=s.selectAll(".parallel-reference-line").data((function(t){return[t]})).transition("merge").ease(AO).duration(this.duration);var o=s.selectAll(".parallel-reference-line-label").data((function(t){return[t]})).transition("merge").ease(AO).duration(this.duration).text((function(t){return t.label}));var l=e.exit();l.transition("exit").ease(AO).duration(this.duration).attr("opacity",0).remove();i.attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));s.transition("merge").ease(AO).duration(this.duration).attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));r.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);n.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);o.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.style("stroke",hY[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity);o.style("fill",hY[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)};t.prototype.updateStrokeWidth=function(){var t=this;this.updateLines.attr("stroke-width",(function(e){return t.calculateStrokeWidth(e,true)}));this.updateDots.attr("stroke",this.handleDotStroke)};t.prototype.updateStrokePattern=function(){this.updateLines.attr("stroke-dasharray",this.handleStrokeDasharray)};t.prototype.updateDotRadius=function(){var t=this;this.updateDots.each((function(e,i,r){var n=fH(r[i]);if(!e.enter&&!e.enterWholeGroup&&!n.classed("entering")&&!e.exit){n.attr("r",(function(){return FR(e,t.clickHighlight,t.innerInteractionKeys)?t.dotRadius+(t.clickStyle&&t.clickStyle.strokeWidth?parseFloat(""+t.clickStyle.strokeWidth)/2:1):BR(e,t.hoverHighlight,t.innerInteractionKeys)?t.dotRadius+(t.hoverStyle&&t.hoverStyle.strokeWidth?parseFloat(""+t.hoverStyle.strokeWidth)/2:1):t.secondaryLines.keys.includes(e[t.seriesAccessor])?t.dotRadius+.5:t.dotRadius+parseFloat(""+t.strokeWidth)/2}))}})).attr("stroke",this.handleDotStroke)};t.prototype.setSelectedClass=function(){var t=this;this.updateDots.classed("highlight",(function(e,i,r){var n=XR(e,true,false,"",t.clickHighlight,t.innerInteractionKeys);n=t.clickHighlight&&t.clickHighlight.length?n:false;var s=t.accessibility.elementsAreInterface;VR(r[i],n,s);return n}))};t.prototype.drawAnnotations=function(){YR({source:this.rootG.node(),data:this.annotations,xScale:this.x,xAccessor:this.ordinalAccessor,yScale:this.y,yAccessor:this.valueAccessor})};t.prototype.setAnnotationAccessibility=function(){GR(this.parallelChartEl,this.annotations)};t.prototype.setTagLevels=function(){this.topLevel=mR(this.highestHeadingLevel);this.bottomLevel=mR(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){AR({rootEle:this.parallelChartEl,geomType:"point",title:this.accessibility.title||this.mainTitle,chartTag:"parallel-plot",uniqueID:this.chartID,groupName:"line",highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){kR({node:this.svg.node(),chartTag:"parallel-plot",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"point",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:lY(this,zR,"parallel-plot"),groupAccessor:this.seriesAccessor,groupName:"line",disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})};t.prototype.setGeometryAccessibilityAttributes=function(){this.updateDots.each((function(t,e,i){wR(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=lY(this,zR,"parallel-plot");this.updateDots.each((function(i,r,n){SR({node:n[r],geomType:"point",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupName:"line",uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});xR({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityID=function(){var t=this;this.updateDotWrappers.each((function(e,i,r){xR({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartAccessibilityTitle=function(){_R(this.parallelChartEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){CR(this.parallelChartEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){DR(this.parallelChartEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){MR(this.parallelChartEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){UR(this.parallelChartEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){TR(this.parallelChartEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){ER(this.parallelChartEl,this.accessibility.statisticalNotes)};t.prototype.setChartCountAccessibility=function(){IR({rootEle:this.parallelChartEl,parentGNode:this.dotG.node(),chartTag:"parallel-plot",geomType:"point",groupName:"line"})};t.prototype.setChartAccessibilityStructureNotes=function(){HR(this.parallelChartEl,this.accessibility.structureNotes)};t.prototype.onChangeHandler=function(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){var t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.interpolating=false;this.updated=false;this.enterSize=0;this.exitSize=0};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){sY(this.chartID,true);this.hoverFunc.emit(t);if(this.showTooltip&&t[this.ordinalAccessor]){this.eventsTooltip({data:t,evt:QW,isToShow:true})}};t.prototype.onSeriesHoverHandler=function(t){this.hoverFunc.emit(t)};t.prototype.onMouseOutHandler=function(){sY(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){nY(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;QR({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,groupAccessor:this.seriesAccessor,chartType:"parallel"})};t.prototype.bindLegendInteractivity=function(){var t=this;fH(this.parallelChartEl).selectAll(".legend").on("click",!this.suppressEvents&&this.seriesInteraction&&this.legend.interactive?function(e){if(e.values){t.onClickHandler(e.values[0])}}:null).on("mouseover",!this.suppressEvents&&this.seriesInteraction&&this.legend.interactive?function(e){if(e.values){t.hoverFunc.emit(e.values[0])}}:null).on("mouseout",!this.suppressEvents&&this.legend.interactive?function(){return t.onMouseOutHandler()}:null)};t.prototype.setLegendCursor=function(){fH(this.parallelChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.seriesInteraction?this.cursor:null)};t.prototype.drawLegendElements=function(){$R({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,dashPatterns:!this.accessibility.hideTextures?this.dashPatterns:null,margin:this.margin,padding:this.padding,duration:this.duration,type:"parallel",secondary:this.secondaryLines.keys,fontSize:16,data:this.nest,label:this.legend.labels,hide:!(this.legend.visible||!this.legend),interactionKeys:this.innerInteractionKeys,groupAccessor:this.seriesAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.render=function(){this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldSetDimensions){this.setDimensions();this.shouldSetDimensions=false}if(this.shouldSetScaleUsed){this.setScaleUsed();this.shouldSetScaleUsed=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldUpdateInterpolationData){this.updateInterpolationData();this.shouldUpdateInterpolationData=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidate=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}if(this.shouldValidateSeriesLabels){this.validateSeriesLabels();this.shouldValidateSeriesLabels=false}return r("div",{class:"o-layout"},r("div",{class:"o-layout--chart"},r(this.topLevel,{class:"parallel-main-title vcl-main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions parallel-sub-title vcl-sub-title"},this.subTitle),r("div",{class:"parallel-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),r("div",{class:"visa-viz-d3-parallel-container"}),r("div",{class:"parallel-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("data-table",{uniqueID:this.chartID,isCompact:true,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton,unitTest:this.unitTest})))};t.prototype.init=function(){var t=Object.keys(bO);var e=0;var i={wrapLabel:{exception:false},strokeWidth:{exception:0},showDots:{exception:false},hoverOpacity:{exception:0},dotRadius:{exception:0},showTooltip:{exception:false},mainTitle:{exception:""},subTitle:{exception:""},showBaselineX:{exception:false}};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:bO[t[e]]}};Object.defineProperty(t.prototype,"parallelChartEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],seriesAccessor:["seriesAccessorWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],showBaselineX:["showBaselineXWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],clickStyle:["clickStyleWatcher"],hoverStyle:["hoverStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],strokeWidth:["strokeWidthWatcher"],showDots:["showDotsWatcher"],dotRadius:["dotRadiusWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["dataLabelWatcher"],seriesLabel:["seriesLabelWatcher"],tooltipLabel:["tooltipLabelWatcher"],showTooltip:["showTooltipWatcher"],accessibility:["accessibilityWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],secondaryLines:["secondaryLinesWatcher"],clickHighlight:["clickWatcher"],hoverHighlight:["hoverWatcher"],interactionKeys:["interactionWatcher"],suppressEvents:["suppressWatcher"],unitTest:["unitTestWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}parallel-plot{cursor:default}parallel-plot .annotations{pointer-events:none}parallel-plot .annotations .handle{pointer-events:all}parallel-plot .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}parallel-plot .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}parallel-plot .hidden{display:none}parallel-plot .axis{font-size:12px}parallel-plot .axis text{fill:#767676}parallel-plot .axis-label{text-anchor:middle;font:1rem sans-serif}parallel-plot .axis path{stroke:#767676}parallel-plot .grid line{stroke:#767676;shape-rendering:crispEdges}parallel-plot .grid path{stroke-width:0;stroke:#767676}parallel-plot .grid.left line{stroke-dasharray:4, 4;stroke-opacity:0.6}parallel-plot .parallel-group{-webkit-transition:opacity 0.5s linear;transition:opacity 0.5s linear}parallel-plot .parallel-group__inactive{opacity:0}parallel-plot .parallel-group .parallel-plot{fill:none}parallel-plot .parallel-group .dot{stroke:#ffffff}parallel-plot .parallel-group .parallel-series-label{font-size:1em}parallel-plot .parallel-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}parallel-plot .parallel-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=eY();var fY="http://www.w3.org/1999/xhtml";var pY={svg:"http://www.w3.org/2000/svg",xhtml:fY,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yY(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return pY.hasOwnProperty(e)?{space:pY[e],local:t}:t}function vY(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===fY&&e.documentElement.namespaceURI===fY?e.createElement(t):e.createElementNS(i,t)}}function gY(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function bY(t){var e=yY(t);return(e.local?gY:vY)(e)}function mY(){}function AY(t){return t==null?mY:function(){return this.querySelector(t)}}function wY(t){if(typeof t!=="function")t=AY(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new tX(r,this._parents)}function SY(){return[]}function xY(t){return t==null?SY:function(){return this.querySelectorAll(t)}}function kY(t){if(typeof t!=="function")t=xY(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new tX(r,n)}function LY(t){return function(){return this.matches(t)}}function _Y(t){if(typeof t!=="function")t=LY(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new tX(r,this._parents)}function CY(t){return new Array(t.length)}function DY(){return new tX(this._enter||this._groups.map(CY),this._parents)}function MY(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}MY.prototype={constructor:MY,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function UY(t){return function(){return t}}var TY="$";function EY(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new MY(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function IY(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=TY+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=TY+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new MY(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function NY(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?IY:EY,r=this._parents,n=this._groups;if(typeof t!=="function")t=UY(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new tX(a,r);a._enter=o;a._exit=l;return a}function WY(){return new tX(this._exit||this._groups.map(CY),this._parents)}function HY(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function GY(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new tX(a,this._parents)}function PY(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function OY(t){if(!t)t=VY;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new tX(n,this._parents).order()}function VY(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function RY(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function YY(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function zY(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function XY(){var t=0;this.each((function(){++t}));return t}function FY(){return!this.node()}function BY(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function KY(t){return function(){this.removeAttribute(t)}}function qY(t){return function(){this.removeAttributeNS(t.space,t.local)}}function jY(t,e){return function(){this.setAttribute(t,e)}}function $Y(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ZY(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function QY(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function JY(t,e){var i=yY(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?qY:KY:typeof e==="function"?i.local?QY:ZY:i.local?$Y:jY)(i,e))}function tz(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ez(t){return function(){this.style.removeProperty(t)}}function iz(t,e,i){return function(){this.style.setProperty(t,e,i)}}function rz(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function nz(t,e,i){return arguments.length>1?this.each((e==null?ez:typeof e==="function"?rz:iz)(t,e,i==null?"":i)):sz(this.node(),t)}function sz(t,e){return t.style.getPropertyValue(e)||tz(t).getComputedStyle(t,null).getPropertyValue(e)}function az(t){return function(){delete this[t]}}function oz(t,e){return function(){this[t]=e}}function lz(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function uz(t,e){return arguments.length>1?this.each((e==null?az:typeof e==="function"?lz:oz)(t,e)):this.node()[t]}function hz(t){return t.trim().split(/^|\s+/)}function cz(t){return t.classList||new dz(t)}function dz(t){this._node=t;this._names=hz(t.getAttribute("class")||"")}dz.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function fz(t,e){var i=cz(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function pz(t,e){var i=cz(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function yz(t){return function(){fz(this,t)}}function vz(t){return function(){pz(this,t)}}function gz(t,e){return function(){(e.apply(this,arguments)?fz:pz)(this,t)}}function bz(t,e){var i=hz(t+"");if(arguments.length<2){var r=cz(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?gz:e?yz:vz)(i,e))}function mz(){this.textContent=""}function Az(t){return function(){this.textContent=t}}function wz(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function Sz(t){return arguments.length?this.each(t==null?mz:(typeof t==="function"?wz:Az)(t)):this.node().textContent}function xz(){this.innerHTML=""}function kz(t){return function(){this.innerHTML=t}}function Lz(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function _z(t){return arguments.length?this.each(t==null?xz:(typeof t==="function"?Lz:kz)(t)):this.node().innerHTML}function Cz(){if(this.nextSibling)this.parentNode.appendChild(this)}function Dz(){return this.each(Cz)}function Mz(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Uz(){return this.each(Mz)}function Tz(t){var e=typeof t==="function"?t:bY(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function Ez(){return null}function Iz(t,e){var i=typeof t==="function"?t:bY(t),r=e==null?Ez:typeof e==="function"?e:AY(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function Nz(){var t=this.parentNode;if(t)t.removeChild(this)}function Wz(){return this.each(Nz)}function Hz(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Gz(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Pz(t){return this.select(t?Gz:Hz)}function Oz(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Vz={};var Rz=null;if(typeof document!=="undefined"){var Yz=document.documentElement;if(!("onmouseenter"in Yz)){Vz={mouseenter:"mouseover",mouseleave:"mouseout"}}}function zz(t,e,i){t=Xz(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function Xz(t,e,i){return function(r){var n=Rz;Rz=r;try{t.call(this,this.__data__,e,i)}finally{Rz=n}}}function Fz(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function Bz(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function Kz(t,e,i){var r=Vz.hasOwnProperty(t.type)?zz:Xz;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function qz(t,e,i){var r=Fz(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?Kz:Bz;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function jz(t,e,i){var r=tz(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function $z(t,e){return function(){return jz(this,t,e)}}function Zz(t,e){return function(){return jz(this,t,e.apply(this,arguments))}}function Qz(t,e){return this.each((typeof e==="function"?Zz:$z)(t,e))}var Jz=[null];function tX(t,e){this._groups=t;this._parents=e}function eX(){return new tX([[document.documentElement]],Jz)}tX.prototype=eX.prototype={constructor:tX,select:wY,selectAll:kY,filter:_Y,data:NY,enter:DY,exit:WY,join:HY,merge:GY,order:PY,sort:OY,call:RY,nodes:YY,node:zY,size:XY,empty:FY,each:BY,attr:JY,style:nz,property:uz,classed:bz,text:Sz,html:_z,raise:Dz,lower:Uz,append:Tz,insert:Iz,remove:Wz,clone:Pz,datum:Oz,on:qz,dispatch:Qz};function iX(t){return typeof t==="string"?new tX([[document.querySelector(t)]],[document.documentElement]):new tX([[t]],Jz)}function rX(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function nX(t){if(t.length===1)t=sX(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function sX(t){return function(e,i){return rX(t(e),i)}}var aX=nX(rX);var oX=aX.right;function lX(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var uX=Math.sqrt(50),hX=Math.sqrt(10),cX=Math.sqrt(2);function dX(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=fX(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function fX(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=uX?10:s>=hX?5:s>=cX?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=uX?10:s>=hX?5:s>=cX?2:1)}function pX(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=uX)n*=10;else if(s>=hX)n*=5;else if(s>=cX)n*=2;return e<t?-n:n}function yX(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function vX(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}function gX(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var bX="$";function mX(){}mX.prototype=AX.prototype={constructor:mX,has:function(t){return bX+t in this},get:function(t){return this[bX+t]},set:function(t,e){this[bX+t]=e;return this},remove:function(t){var e=bX+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===bX)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===bX)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===bX)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===bX)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===bX)++t;return t},empty:function(){for(var t in this)if(t[0]===bX)return false;return true},each:function(t){for(var e in this)if(e[0]===bX)t(this[e],e.slice(1),this)}};function AX(t,e){var i=new mX;if(t instanceof mX)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}var wX=Array.prototype;var SX=wX.map;var xX=wX.slice;var kX={name:"implicit"};function LX(){var t=AX(),e=[],i=[],r=kX;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==kX)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=AX();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=xX.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return LX(e,i).unknown(r)};gX.apply(n,arguments);return n}function _X(){var t=LX().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=lX(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return _X(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return gX.apply(h(),arguments)}function CX(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function DX(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function MX(){}var UX=.7;var TX=1/UX;var EX="\\s*([+-]?\\d+)\\s*",IX="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",NX="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",WX=/^#([0-9a-f]{3,8})$/,HX=new RegExp("^rgb\\("+[EX,EX,EX]+"\\)$"),GX=new RegExp("^rgb\\("+[NX,NX,NX]+"\\)$"),PX=new RegExp("^rgba\\("+[EX,EX,EX,IX]+"\\)$"),OX=new RegExp("^rgba\\("+[NX,NX,NX,IX]+"\\)$"),VX=new RegExp("^hsl\\("+[IX,NX,NX]+"\\)$"),RX=new RegExp("^hsla\\("+[IX,NX,NX,IX]+"\\)$");var YX={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};CX(MX,BX,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:zX,formatHex:zX,formatHsl:XX,formatRgb:FX,toString:FX});function zX(){return this.rgb().formatHex()}function XX(){return iF(this).formatHsl()}function FX(){return this.rgb().formatRgb()}function BX(t){var e,i;t=(t+"").trim().toLowerCase();return(e=WX.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?KX(e):i===3?new ZX(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?qX(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?qX(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=HX.exec(t))?new ZX(e[1],e[2],e[3],1):(e=GX.exec(t))?new ZX(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=PX.exec(t))?qX(e[1],e[2],e[3],e[4]):(e=OX.exec(t))?qX(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=VX.exec(t))?eF(e[1],e[2]/100,e[3]/100,1):(e=RX.exec(t))?eF(e[1],e[2]/100,e[3]/100,e[4]):YX.hasOwnProperty(t)?KX(YX[t]):t==="transparent"?new ZX(NaN,NaN,NaN,0):null}function KX(t){return new ZX(t>>16&255,t>>8&255,t&255,1)}function qX(t,e,i,r){if(r<=0)t=e=i=NaN;return new ZX(t,e,i,r)}function jX(t){if(!(t instanceof MX))t=BX(t);if(!t)return new ZX;t=t.rgb();return new ZX(t.r,t.g,t.b,t.opacity)}function $X(t,e,i,r){return arguments.length===1?jX(t):new ZX(t,e,i,r==null?1:r)}function ZX(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}CX(ZX,$X,DX(MX,{brighter:function(t){t=t==null?TX:Math.pow(TX,t);return new ZX(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?UX:Math.pow(UX,t);return new ZX(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:QX,formatHex:QX,formatRgb:JX,toString:JX}));function QX(){return"#"+tF(this.r)+tF(this.g)+tF(this.b)}function JX(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function tF(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function eF(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new nF(t,e,i,r)}function iF(t){if(t instanceof nF)return new nF(t.h,t.s,t.l,t.opacity);if(!(t instanceof MX))t=BX(t);if(!t)return new nF;if(t instanceof nF)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new nF(a,o,l,t.opacity)}function rF(t,e,i,r){return arguments.length===1?iF(t):new nF(t,e,i,r==null?1:r)}function nF(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}CX(nF,rF,DX(MX,{brighter:function(t){t=t==null?TX:Math.pow(TX,t);return new nF(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?UX:Math.pow(UX,t);return new nF(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new ZX(sF(t>=240?t-240:t+120,n,r),sF(t,n,r),sF(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function sF(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function aF(t){return function(){return t}}function oF(t,e){return function(i){return t+i*e}}function lF(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function uF(t){return(t=+t)===1?hF:function(e,i){return i-e?lF(e,i,t):aF(isNaN(e)?i:e)}}function hF(t,e){var i=e-t;return i?oF(t,i):aF(isNaN(t)?e:t)}var cF=function t(e){var i=uF(e);function r(t,e){var r=i((t=$X(t)).r,(e=$X(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=hF(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function dF(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function fF(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function pF(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=xF(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function yF(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function vF(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function gF(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=xF(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var bF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mF=new RegExp(bF.source,"g");function AF(t){return function(){return t}}function wF(t){return function(e){return t(e)+""}}function SF(t,e){var i=bF.lastIndex=mF.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=bF.exec(t))&&(n=mF.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:vF(r,n)})}i=mF.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?wF(l[0].x):AF(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function xF(t,e){var i=typeof e,r;return e==null||i==="boolean"?aF(e):(i==="number"?vF:i==="string"?(r=BX(e))?(e=r,cF):SF:e instanceof BX?cF:e instanceof Date?yF:fF(e)?dF:Array.isArray(e)?pF:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?gF:vF)(t,e)}function kF(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var LF=180/Math.PI;var _F={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function CF(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*LF,skewX:Math.atan(l)*LF,scaleX:a,scaleY:o}}var DF,MF,UF,TF;function EF(t){if(t==="none")return _F;if(!DF)DF=document.createElement("DIV"),MF=document.documentElement,UF=document.defaultView;DF.style.transform=t;t=UF.getComputedStyle(MF.appendChild(DF),null).getPropertyValue("transform");MF.removeChild(DF);t=t.slice(7,-1).split(",");return CF(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function IF(t){if(t==null)return _F;if(!TF)TF=document.createElementNS("http://www.w3.org/2000/svg","g");TF.setAttribute("transform",t);if(!(t=TF.transform.baseVal.consolidate()))return _F;t=t.matrix;return CF(t.a,t.b,t.c,t.d,t.e,t.f)}function NF(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:vF(t,n)},{i:l-2,x:vF(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:vF(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:vF(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:vF(t,i)},{i:o-2,x:vF(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var WF=NF(EF,"px, ","px)","deg)");var HF=NF(IF,", ",")",")");function GF(t){return function(){return t}}function PF(t){return+t}var OF=[0,1];function VF(t){return t}function RF(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:GF(isNaN(e)?NaN:.5)}function YF(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function zF(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=RF(n,r),s=i(a,s);else r=RF(r,n),s=i(s,a);return function(t){return s(r(t))}}function XF(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=RF(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=oX(t,e,1,r)-1;return s[i](n[i](e))}}function FF(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function BF(){var t=OF,e=OF,i=xF,r,n,s,a=VF,o,l,u;function h(){o=Math.min(t.length,e.length)>2?XF:zF;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),vF)))(i)))};c.domain=function(e){return arguments.length?(t=SX.call(e,PF),a===VF||(a=YF(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=xX.call(t),h()):e.slice()};c.rangeRound=function(t){return e=xX.call(t),i=kF,h()};c.clamp=function(e){return arguments.length?(a=e?YF(t):VF,c):a!==VF};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function KF(t,e){return BF()(t,e)}function qF(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function jF(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function $F(t){return t=jF(Math.abs(t)),t?t[1]:NaN}function ZF(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function QF(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var JF=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tB(t){if(!(e=JF.exec(t)))throw new Error("invalid format: "+t);var e;return new eB({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}tB.prototype=eB.prototype;function eB(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}eB.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function iB(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var rB;function nB(t,e){var i=jF(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(rB=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+jF(t,Math.max(0,e+s-1))[0]}function sB(t,e){var i=jF(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var aB={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:qF,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return sB(t*100,e)},r:sB,s:nB,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function oB(t){return t}var lB=Array.prototype.map,uB=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function hB(t){var e=t.grouping===undefined||t.thousands===undefined?oB:ZF(lB.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?oB:QF(lB.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=tB(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!aB[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=aB[b],S=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function x(t){var i=m,r=A,a,d,x;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var k=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=iB(t);if(k&&+t===0&&c!=="+")k=false;i=(k?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?uB[8+rB/3]:"")+r+(k&&c==="("?")":"");if(S){a=-1,d=t.length;while(++a<d){if(x=t.charCodeAt(a),48>x||x>57){r=(x===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var L=i.length+t.length+r.length,_=L<p?new Array(p-L+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,L=_.length>>1)+i+t+r+_.slice(L);break;default:t=_+i+t+r;break}return s(t)}x.toString=function(){return t+""};return x}function h(t,e){var i=u((t=tB(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor($F(e)/3)))*3,n=Math.pow(10,-r),s=uB[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var cB;var dB;var fB;pB({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function pB(t){cB=hB(t);dB=cB.format;fB=cB.formatPrefix;return cB}function yB(t){return Math.max(0,-$F(Math.abs(t)))}function vB(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($F(e)/3)))*3-$F(Math.abs(t)))}function gB(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,$F(e)-$F(t))+1}function bB(t,e,i,r){var n=pX(t,e,i),s;r=tB(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=vB(n,a)))r.precision=s;return fB(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=gB(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=yB(n)))r.precision=s-(r.type==="%")*2;break}}return dB(r)}function mB(t){var e=t.domain;t.ticks=function(t){var i=e();return dX(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return bB(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=fX(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=fX(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=fX(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function AB(){var t=KF(VF,VF);t.copy=function(){return FF(t,AB())};gX.apply(t,arguments);return mB(t)}var wB=Math.PI,SB=2*wB,xB=1e-6,kB=SB-xB;function LB(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function _B(){return new LB}LB.prototype=_B.prototype={constructor:LB,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,i,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+r)},bezierCurveTo:function(t,e,i,r,n,s){this._+="C"+ +t+","+ +e+","+ +i+","+ +r+","+(this._x1=+n)+","+(this._y1=+s)},arcTo:function(t,e,i,r,n){t=+t,e=+e,i=+i,r=+r,n=+n;var s=this._x1,a=this._y1,o=i-t,l=r-e,u=s-t,h=a-e,c=u*u+h*h;if(n<0)throw new Error("negative radius: "+n);if(this._x1===null){this._+="M"+(this._x1=t)+","+(this._y1=e)}else if(!(c>xB));else if(!(Math.abs(h*o-l*u)>xB)||!n){this._+="L"+(this._x1=t)+","+(this._y1=e)}else{var d=i-s,f=r-a,p=o*o+l*l,y=d*d+f*f,v=Math.sqrt(p),g=Math.sqrt(c),b=n*Math.tan((wB-Math.acos((p+c-y)/(2*v*g)))/2),m=b/g,A=b/v;if(Math.abs(m-1)>xB){this._+="L"+(t+m*u)+","+(e+m*h)}this._+="A"+n+","+n+",0,0,"+ +(h*d>u*f)+","+(this._x1=t+A*o)+","+(this._y1=e+A*l)}},arc:function(t,e,i,r,n,s){t=+t,e=+e,i=+i,s=!!s;var a=i*Math.cos(r),o=i*Math.sin(r),l=t+a,u=e+o,h=1^s,c=s?r-n:n-r;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null){this._+="M"+l+","+u}else if(Math.abs(this._x1-l)>xB||Math.abs(this._y1-u)>xB){this._+="L"+l+","+u}if(!i)return;if(c<0)c=c%SB+SB;if(c>kB){this._+="A"+i+","+i+",0,1,"+h+","+(t-a)+","+(e-o)+"A"+i+","+i+",0,1,"+h+","+(this._x1=l)+","+(this._y1=u)}else if(c>xB){this._+="A"+i+","+i+",0,"+ +(c>=wB)+","+h+","+(this._x1=t+i*Math.cos(n))+","+(this._y1=e+i*Math.sin(n))}},rect:function(t,e,i,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +i+"v"+ +r+"h"+-i+"Z"},toString:function(){return this._}};function CB(t){return function e(){return t}}function DB(t){this._context=t}DB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===1)this._context.closePath();this._line=1-this._line},point:function(t,e){t=+t,e=+e;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function MB(t){return new DB(t)}function UB(t){return t[0]}function TB(t){return t[1]}function EB(){var t=UB,e=TB,i=CB(true),r=null,n=MB,s=null;function a(a){var o,l=a.length,u,h=false,c;if(r==null)s=n(c=_B());for(o=0;o<=l;++o){if(!(o<l&&i(u=a[o],o,a))===h){if(h=!h)s.lineStart();else s.lineEnd()}if(h)s.point(+t(u,o,a),+e(u,o,a))}if(c)return s=null,c+""||null}a.x=function(e){return arguments.length?(t=typeof e==="function"?e:CB(+e),a):t};a.y=function(t){return arguments.length?(e=typeof t==="function"?t:CB(+t),a):e};a.defined=function(t){return arguments.length?(i=typeof t==="function"?t:CB(!!t),a):i};a.curve=function(t){return arguments.length?(n=t,r!=null&&(s=n(r)),a):n};a.context=function(t){return arguments.length?(t==null?r=s=null:s=n(r=t),a):r};return a}var IB=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var NB=new Uint8Array(16);function WB(){if(!IB){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return IB(NB)}var HB=[];for(var GB=0;GB<256;++GB){HB[GB]=(GB+256).toString(16).substr(1)}function PB(t,e){var i=e||0;var r=HB;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function OB(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||WB)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||PB(n)}var VB={value:function(){}};function RB(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new YB(i)}function YB(t){this._=t}function zB(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}YB.prototype=RB.prototype={constructor:YB,on:function(t,e){var i=this._,r=zB(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=XB(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=FB(i[n],t.name,e);else if(e==null)for(n in i)i[n]=FB(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new YB(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function XB(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function FB(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=VB,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var BB=0,KB=0,qB=0,jB=1e3,$B,ZB,QB=0,JB=0,tK=0,eK=typeof performance==="object"&&performance.now?performance:Date,iK=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function rK(){return JB||(iK(nK),JB=eK.now()+tK)}function nK(){JB=0}function sK(){this._call=this._time=this._next=null}sK.prototype=aK.prototype={constructor:sK,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?rK():+i)+(e==null?0:+e);if(!this._next&&ZB!==this){if(ZB)ZB._next=this;else $B=this;ZB=this}this._call=t;this._time=i;cK()},stop:function(){if(this._call){this._call=null;this._time=Infinity;cK()}}};function aK(t,e,i){var r=new sK;r.restart(t,e,i);return r}function oK(){rK();++BB;var t=$B,e;while(t){if((e=JB-t._time)>=0)t._call.call(null,e);t=t._next}--BB}function lK(){JB=(QB=eK.now())+tK;BB=KB=0;try{oK()}finally{BB=0;hK();JB=0}}function uK(){var t=eK.now(),e=t-QB;if(e>jB)tK-=e,QB=t}function hK(){var t,e=$B,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:$B=i}}ZB=t;cK(r)}function cK(t){if(BB)return;if(KB)KB=clearTimeout(KB);var e=t-JB;if(e>24){if(t<Infinity)KB=setTimeout(lK,t-eK.now()-tK);if(qB)qB=clearInterval(qB)}else{if(!qB)QB=eK.now(),qB=setInterval(uK,jB);BB=1,iK(lK)}}function dK(t,e,i){var r=new sK;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var fK=RB("start","end","interrupt");var pK=[];var yK=0;var vK=1;var gK=2;var bK=3;var mK=4;var AK=5;var wK=6;function SK(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;_K(t,i,{name:e,index:r,group:n,on:fK,tween:pK,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:yK})}function xK(t,e){var i=LK(t,e);if(i.state>yK)throw new Error("too late; already scheduled");return i}function kK(t,e){var i=LK(t,e);if(i.state>gK)throw new Error("too late; already started");return i}function LK(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function _K(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=aK(s,0,i.time);function s(t){i.state=vK;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==vK)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===bK)return dK(a);if(d.state===mK){d.state=wK;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=wK;d.timer.stop();delete r[u]}}dK((function(){if(i.state===bK){i.state=mK;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=gK;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==gK)return;i.state=bK;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=AK,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===AK){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=wK;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function CK(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>gK&&r.state<AK;r.state=wK;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function DK(t){return this.each((function(){CK(this,t)}))}function MK(t,e){var i,r;return function(){var n=kK(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function UK(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=kK(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function TK(t,e){var i=this._id;t+="";if(arguments.length<2){var r=LK(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?MK:UK)(i,t,e))}function EK(t,e,i){var r=t._id;t.each((function(){var t=kK(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return LK(t,r).value[e]}}function IK(t,e){var i;return(typeof e==="number"?vF:e instanceof BX?cF:(i=BX(e))?(e=i,cF):SF)(t,e)}function NK(t){return function(){this.removeAttribute(t)}}function WK(t){return function(){this.removeAttributeNS(t.space,t.local)}}function HK(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function GK(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function PK(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function OK(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function VK(t,e){var i=yY(t),r=i==="transform"?HF:IK;return this.attrTween(t,typeof e==="function"?(i.local?OK:PK)(i,r,EK(this,"attr."+t,e)):e==null?(i.local?WK:NK)(i):(i.local?GK:HK)(i,r,e+""))}function RK(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function YK(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function zK(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=yY(t);return this.tween(i,(r.local?RK:YK)(r,e))}function XK(t,e){return function(){xK(this,t).delay=+e.apply(this,arguments)}}function FK(t,e){return e=+e,function(){xK(this,t).delay=e}}function BK(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?XK:FK)(e,t)):LK(this.node(),e).delay}function KK(t,e){return function(){kK(this,t).duration=+e.apply(this,arguments)}}function qK(t,e){return e=+e,function(){kK(this,t).duration=e}}function jK(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?KK:qK)(e,t)):LK(this.node(),e).duration}function $K(t,e){if(typeof e!=="function")throw new Error;return function(){kK(this,t).ease=e}}function ZK(t){var e=this._id;return arguments.length?this.each($K(e,t)):LK(this.node(),e).ease}function QK(t){if(typeof t!=="function")t=LY(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new wq(r,this._parents,this._name,this._id)}function JK(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new wq(a,this._parents,this._name,this._id)}function tq(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function eq(t,e,i){var r,n,s=tq(e)?xK:kK;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function iq(t,e){var i=this._id;return arguments.length<2?LK(this.node(),i).on.on(t):this.each(eq(i,t,e))}function rq(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function nq(){return this.on("end.remove",rq(this._id))}function sq(t){var e=this._name,i=this._id;if(typeof t!=="function")t=AY(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;SK(u[d],e,i,d,u,LK(h,i))}}}return new wq(s,this._parents,e,i)}function aq(t){var e=this._name,i=this._id;if(typeof t!=="function")t=xY(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=LK(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){SK(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new wq(s,a,e,i)}var oq=eX.prototype.constructor;function lq(){return new oq(this._groups,this._parents)}function uq(t,e){var i,r,n;return function(){var s=sz(this,t),a=(this.style.removeProperty(t),sz(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function hq(t){return function(){this.style.removeProperty(t)}}function cq(t,e,i){var r,n;return function(){var s=sz(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function dq(t,e,i){var r,n,s;return function(){var a=sz(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),sz(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function fq(t,e,i){var r=(t+="")==="transform"?WF:IK;return e==null?this.styleTween(t,uq(t,r)).on("end.style."+t,hq(t)):this.styleTween(t,typeof e==="function"?dq(t,r,EK(this,"style."+t,e)):cq(t,r,e+""),i)}function pq(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function yq(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,pq(t,e,i==null?"":i))}function vq(t){return function(){this.textContent=t}}function gq(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function bq(t){return this.tween("text",typeof t==="function"?gq(EK(this,"text",t)):vq(t==null?"":t+""))}function mq(){var t=this._name,e=this._id,i=xq();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=LK(l,e);SK(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new wq(r,this._parents,t,i)}var Aq=0;function wq(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function Sq(t){return eX().transition(t)}function xq(){return++Aq}var kq=eX.prototype;wq.prototype=Sq.prototype={constructor:wq,select:sq,selectAll:aq,filter:QK,merge:JK,selection:lq,transition:mq,call:kq.call,nodes:kq.nodes,node:kq.node,size:kq.size,empty:kq.empty,each:kq.each,on:iq,attr:VK,attrTween:zK,style:fq,styleTween:yq,text:bq,remove:nq,tween:TK,delay:BK,duration:jK,ease:ZK};function Lq(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var _q={time:null,delay:0,duration:250,ease:Lq};function Cq(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return _q.time=rK(),_q}}return i}function Dq(t){var e,i;if(t instanceof wq){e=t._id,t=t._name}else{e=xq(),(i=_q).time=rK(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){SK(l,t,e,u,a,i||Cq(l,e))}}}return new wq(r,this._parents,t,e)}eX.prototype.interrupt=DK;eX.prototype.transition=Dq;var Mq=s.initTooltipStyle,Uq=s.drawAxis,Tq=s.drawGrid,Eq=s.drawTooltip,Iq=s.formatStats,Nq=s.getLicenses,Wq=s.checkInteraction,Hq=s.checkClicked,Gq=s.checkHovered,Pq=s.interactionStyle,Oq=s.getColors,Vq=s.outlineColor,Rq=s.visaColors;var Yq=t("pareto_chart",function(){function t(t){var r=this;e(this,t);this.height=400;this.width=800;this.showDataLabel=true;this.ordinalAccessor="label";this.valueAccessor="value";this.showTooltip=true;this.dataLabel={visible:true,placement:"top",content:"valueAccessor",format:"0,0.00"};this.referenceLines=[];this.layout="vertical";this.xAxis={visible:true,gridVisible:true,tickInterval:1};this.yAxis={visible:true,gridVisible:true,tickInterval:1};this.wrapLabel=false;this.colorPalette="single_blue";this.hoverOpacity=1;this.cursor="default";this.sortOrder="";this.roundedCorner=0;this.margin={top:this.height*.01,bottom:this.height*.01,right:this.width*.01,left:this.width*.01};this.padding={top:20,bottom:60,right:80,left:80};this.hideDataTable=false;this.paretoStroke="#767676";this.paretoHighlight="#15195A";this.paretoDot=3;this.clickHighlight=[];this.shouldUpdateChart=false;this.shouldUpdateBarStyle=false;this.placeDataLabels=function(t,e){var i;var n;var s;var a="0em";var o;if(r.layout==="vertical"){if((r.dataLabel.placement||"top")==="top"){i=r.x(t[r.ordinalAccessor])+r.x.bandwidth()/2;n=r.y(Math.max(0,t[r.valueAccessor]));s="-.3em";o="middle"}else if((r.dataLabel.placement||"top")==="bottom"){i=r.x(t[r.ordinalAccessor])+r.x.bandwidth()/2;n=r.y(0)-5;s="-.2em";o="middle"}}else if(r.layout==="horizontal"){if((r.dataLabel.placement||"top")==="top"){n=r.y(t[r.ordinalAccessor])+r.y.bandwidth()/2+4;i=r.x(t[r.valueAccessor])+4;s=".2em";o="start"}else if((r.dataLabel.placement||"top")==="bottom"){n=r.y(t[r.ordinalAccessor])+r.y.bandwidth()/2+4;i=r.x(0);s=".2em";o="start"}else if((r.dataLabel.placement||"top")==="bottomAbove"){n=r.y(t[r.ordinalAccessor]);i=r.x(0);s=".2em";a="-.2em";o="start"}else if((r.dataLabel.placement||"top")==="bottomBelow"){n=r.y(t[r.ordinalAccessor])+r.y.bandwidth();i=r.x(0);s=".2em";a="1em";o="start"}}if(e==="x"){return i}else if(e==="y"){return n}else if(e==="em"){return s}else if(e==="em2"){return a}else if(e==="anchor"){return o}else{return null}};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.idWatcher=function(t,e){this.chartID=t;this.barChartEl.id=this.chartID};t.prototype.dataWatcher=function(t,e){this.shouldUpdateChart=true};t.prototype.highlightWatcher=function(t,e){this.shouldUpdateBarStyle=true};t.prototype.componentWillLoad=function(){this.chartID=this.uniqueID||"bar-chart-"+OB();this.barChartEl.id=this.chartID;this.updateChartVariable()};t.prototype.componentDidLoad=function(){this.updateData();this.drawChart();this.setTooltipInitialStyle()};t.prototype.componentWillUpdate=function(){this.updateChartVariable()};t.prototype.componentDidUpdate=function(){var t=this;if(this.sortOrder==="asc"){this.data.sort((function(e,i){return Number(e[t.valueAccessor])-Number(i[t.valueAccessor])}))}else if(this.sortOrder==="desc"){this.data.sort((function(e,i){return Number(i[t.valueAccessor])-Number(e[t.valueAccessor])}))}if(this.shouldUpdateBarStyle){this.shouldUpdateBarStyle=false;this.updateBarSytle(this.bars)}else{this.shouldUpdateChart=false;this.updateData();this.drawChart()}};t.prototype.updateData=function(){var t=this;var e=0;this.data.map((function(i,r){i[t.valueAccessor]=parseFloat(i[t.valueAccessor]);i[t.valueAccessor]=+i[t.valueAccessor];e+=i[t.valueAccessor];i.CumulativeAmount=r===0?i[t.valueAccessor]:i[t.valueAccessor]+t.data[r-1].CumulativeAmount}));this.data.map((function(t){t.CumulativePercentage=t.CumulativeAmount/e}))};t.prototype.updateChartVariable=function(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!(this.layout==="vertical")&&this.xAxis.gridVisible});this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:this.layout==="vertical"&&this.yAxis.gridVisible});if(!this.innerXAxis.visible){this.padding.bottom=this.height*.05}if(!this.innerYAxis.visible){this.padding.left=this.width*.05}this.interactionKeys?"":this.interactionKeys=[this.groupAccessor||this.ordinalAccessor];this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.updateBarSytle=function(t){var e=this;t.attr("fill",(function(t){return e.clickHighlight.length>0&&Hq(t,e.clickHighlight,e.interactionKeys)&&e.clickStyle.color?Rq[e.clickStyle.color]||e.clickStyle.color:e.hoverHighlight&&Gq(t,e.hoverHighlight,e.interactionKeys)&&e.hoverStyle.color?Rq[e.hoverStyle.color]||e.hoverStyle.color:e.groupAccessor?e.colorArr(t[e.groupAccessor]):e.colorArr(t[e.valueAccessor])})).attr("style",(function(t){return Pq({data:t,clickHighlight:e.clickHighlight,hoverHighlight:e.hoverHighlight,clickStyle:e.clickStyle,hoverStyle:e.hoverStyle,interactionKeys:e.interactionKeys,defaultStroke:Vq(e.groupAccessor?e.colorArr(t[e.groupAccessor]):e.colorArr(t[e.valueAccessor])),defaultStrokeWidth:3})})).attr("opacity",(function(t){return Wq(t,1,e.hoverOpacity,e.hoverHighlight,e.clickHighlight,e.interactionKeys)}))};t.prototype.drawChart=function(){var t=this;this.reSetRoot();if(this.layout==="vertical"){this.y=AB().domain([0,this.maxValueOverride||yX(this.data,(function(e){return e[t.valueAccessor]}))]).range([this.innerPaddedHeight,0]);if(this.yAxis.gridVisible==true){var e=Math.ceil(yX(this.data,(function(e){return e[t.valueAccessor]}))*10)/10;this.y=AB().domain([0,e]).range([this.innerPaddedHeight,0])}this.x=_X().domain(this.data.map((function(e){return e[t.ordinalAccessor]}))).range([0,this.innerPaddedWidth]).padding(.2);this.yCum=AB().domain([0,1]).range([this.innerPaddedHeight,0])}else if(this.layout==="horizontal"){this.x=AB().domain([0,this.maxValueOverride||yX(this.data,(function(e){return e[t.valueAccessor]}))]).range([0,this.innerPaddedWidth]);this.y=_X().domain(this.data.map((function(e){return e[t.ordinalAccessor]}))).range([this.innerPaddedHeight,0]).padding(.2)}this.line=EB().x((function(e){return t.x(e[t.ordinalAccessor])+t.x.bandwidth()/2})).y((function(e){return t.yCum(e.CumulativePercentage)}));var i=vX(this.data,(function(e){return e[t.valueAccessor]}));var r=yX(this.data,(function(e){return e[t.valueAccessor]}));this.colorArr=this.groupAccessor?Oq(this.colors||this.colorPalette,LX().domain(this.data.map((function(e){return e[t.groupAccessor]}))).domain()):Oq(this.colors||this.colorPalette,[i,r]);this.hoverStyle=this.hoverStyle?this.hoverStyle:this.colorPalette.includes("single")?{color:"comp_blue",strokeWidth:3}:{strokeWidth:3};this.clickStyle=this.clickStyle?this.clickStyle:this.colorPalette.includes("single")?{color:"supp_purple",strokeWidth:3}:{strokeWidth:3};this.drawGrid();this.drawAxis();this.drawBars();if(this.line){this.drawLine()}this.drawDataLabels();this.drawReferenceLines()};t.prototype.reSetRoot=function(){if(this.svg){this.svg.remove()}this.svg=iX(this.barChartEl).select("#visa-viz-d3-pareto-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g").attr("transform","translate("+this.margin.left+", "+this.margin.top+")");this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g").attr("transform","translate("+this.padding.left+", "+this.padding.top+")");this.tooltipG=iX(this.barChartEl).select(".pareto-tooltip")};t.prototype.drawAxis=function(){Uq({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,wrapLabel:this.wrapLabel&&this.layout==="vertical"?this.x.bandwidth():"",format:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible});Uq({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible});Uq({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.yCum,right:true,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.formatCum||"0.0%",hide:!this.innerYAxis.visible})};t.prototype.formatDataLabel=function(t){if(this.dataLabel.content==="ordinalAccessor"){return t[this.ordinalAccessor]}else{if(this.dataLabel.format){return Iq(t[this.valueAccessor],this.dataLabel.format)}else{return t[this.valueAccessor]}}};t.prototype.drawDataLabels=function(){var t=this;if(this.dataLabel.visible){this.rootG.selectAll("text.dataLabel").remove();this.rootG.append("g").attr("class","bar-dataLabel-group").attr("id","bar-dataLabel-group").selectAll(".text").data(this.data).enter().append("text").attr("x",(function(e){return t.placeDataLabels(e,"x")})).attr("y",(function(e){return t.placeDataLabels(e,"y")})).attr(this.layout==="vertical"?"dy":"dx",(function(e){return t.placeDataLabels(e,"em")})).attr(this.layout==="vertical"?"dx":"dy",(function(e){return t.placeDataLabels(e,"em2")})).attr("text-anchor",(function(e){return t.placeDataLabels(e,"anchor")})).attr("class","bar-dataLabel-"+this.layout).text((function(e){return t.formatDataLabel(e)})).on("click",(function(e){return t.onClickHandler(e)})).on("mouseover",(function(e){return t.onHoverHandler(e)})).on("mouseout",(function(){return t.onMouseOutHandler()}))}};t.prototype.drawGrid=function(){Tq(this.rootG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,false,!this.innerXAxis.gridVisible,this.xAxis.tickInterval);Tq(this.rootG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,true,!this.innerYAxis.gridVisible,this.yAxis.tickInterval)};t.prototype.drawBars=function(){var t=this;if(this.layout==="vertical"){this.bars=this.rootG.append("g").attr("class","bar-group").selectAll(".bar").data(this.data).enter().append("rect").attr("class","bar").attr("tabindex",(function(t,e){return e===0?"0":"-1"})).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).attr("x",(function(e){return t.x(e[t.ordinalAccessor])})).attr("y",(function(e){return t.y(Math.max(0,e[t.valueAccessor]))})).attr("height",(function(e){return Math.abs(t.y(0)-t.y(e[t.valueAccessor]))})).attr("width",this.x.bandwidth()).attr("cursor",this.cursor).attr("fill",(function(e){return t.clickHighlight.length>0&&Hq(e,t.clickHighlight,t.interactionKeys)&&t.clickStyle.color?Rq[t.clickStyle.color]||t.clickStyle.color:t.hoverHighlight&&Gq(e,t.hoverHighlight,t.interactionKeys)&&t.hoverStyle.color?Rq[t.hoverStyle.color]||t.hoverStyle.color:t.groupAccessor?t.colorArr(e[t.groupAccessor]):t.colorArr(e[t.valueAccessor])})).attr("style",(function(e){return Pq({data:e,clickHighlight:t.clickHighlight,hoverHighlight:t.hoverHighlight,clickStyle:t.clickStyle,hoverStyle:t.hoverStyle,interactionKeys:t.interactionKeys,defaultStroke:Vq(t.groupAccessor?t.colorArr(e[t.groupAccessor]):t.colorArr(e[t.valueAccessor])),defaultStrokeWidth:3})})).attr("opacity",(function(e){return Wq(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.interactionKeys)})).on("click",(function(e){return t.onClickHandler(e)})).on("mouseover",(function(e){return t.onHoverHandler(e)})).on("mouseout",(function(){return t.onMouseOutHandler()}))}else if(this.layout==="horizontal"){this.bars=this.rootG.append("g").attr("class","bar-group").selectAll(".bar").data(this.data).enter().append("rect").attr("class",(function(e){return t.clickHighlight.includes(e[t.ordinalAccessor])?"bar highlight":"bar"})).attr("tabindex",(function(t,e){return e===0?"0":"-1"})).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner).attr("x",(function(e){return t.x(Math.min(0,e[t.valueAccessor]))})).attr("y",(function(e){return t.y(e[t.ordinalAccessor])})).attr("height",this.y.bandwidth()).attr("width",(function(e){return Math.abs(t.x(e[t.valueAccessor])-t.x(0))})).attr("cursor",this.cursor).attr("fill",(function(e){return t.clickHighlight.length>0&&Hq(e,t.clickHighlight,t.interactionKeys)&&t.clickStyle.color?Rq[t.clickStyle.color]||t.clickStyle.color:t.hoverHighlight&&Gq(e,t.hoverHighlight,t.interactionKeys)&&t.hoverStyle.color?Rq[t.hoverStyle.color]||t.hoverStyle.color:t.groupAccessor?t.colorArr(e[t.groupAccessor]):t.colorArr(e[t.valueAccessor])})).attr("style",(function(e){return Pq({data:e,clickHighlight:t.clickHighlight,hoverHighlight:t.hoverHighlight,clickStyle:t.clickStyle,hoverStyle:t.hoverStyle,interactionKeys:t.interactionKeys,defaultStroke:Vq(t.groupAccessor?t.colorArr(e[t.groupAccessor]):t.colorArr(e[t.valueAccessor])),defaultStrokeWidth:3})})).on("click",(function(e){return t.onClickHandler(e)})).on("mouseover",(function(e){return t.onHoverHandler(e)})).on("mouseout",(function(){return t.onMouseOutHandler()}))}};t.prototype.drawLine=function(){var t=this;var e=false;var i;for(var r=0;r<this.data.length;r++){if(!e&&this.data[r].CumulativePercentage>this.paretoThreshold){i=r;e=true}}var n=this.rootG.append("g").attr("class","pareto-line");n.append("path").datum(this.data).attr("d",this.line).attr("class","pareto-line-path").attr("x",this.x.bandwidth()/2).attr("fill","none").attr("stroke",this.paretoStroke).attr("stroke-width",1);n.selectAll(".pareto-background-dot").data([this.data[i]]).enter().append("circle").attr("class","pareto-background-dot").attr("fill","#fff").attr("stroke",this.paretoHighlight).attr("stroke-width","1px").attr("r",this.paretoDot+6).attr("cx",(function(e){return t.x(e[t.ordinalAccessor])+t.x.bandwidth()/2})).attr("cy",(function(e){return t.yCum(e.CumulativePercentage)}));n.selectAll(".pareto-dot").data(this.data).enter().append("circle").attr("class","pareto-dot").attr("fill",(function(e,r){if(r===i){return t.paretoHighlight}else{return t.paretoStroke}})).attr("r",(function(e,r){return i===r?t.paretoDot+3:t.paretoDot})).attr("cx",(function(e){return t.x(e[t.ordinalAccessor])+t.x.bandwidth()/2})).attr("cy",(function(e){return t.yCum(e.CumulativePercentage)}));n.selectAll("text").data(this.data).enter().append("text").attr("x",(function(e){return t.placeDataLabels(e,"x")})).attr("y",(function(e){return t.yCum(e.CumulativePercentage)})).attr("dy","-1em").attr("text-anchor","middle").attr("class","pareto-label").attr("fill",this.paretoHighlight).text((function(t,e){return i===e?Iq(t.CumulativePercentage,"0.0%"):""}))};t.prototype.drawReferenceLines=function(){var t=this;if(this.referenceLines.length>0){if(this.layout==="vertical"){this.rootG.append("g").attr("class","bar-reference-line-group").selectAll(".bar-reference-line").data(this.referenceLines).enter().append("line").attr("id",(function(t){return t.referenceID})).attr("class","bar-reference-line").attr("x1",0).attr("x2",this.innerPaddedWidth).attr("y1",(function(e){return t.y(e.referenceData.referenceValue)})).attr("y2",(function(e){return t.y(e.referenceData.referenceValue)})).style("stroke",(function(t){return t.referenceData.strokeColor})).style("stroke-width",(function(t){return t.referenceData.strokeWidth})).style("opacity",(function(t){return t.referenceData.strokeOpacity}));this.rootG.select(".bar-reference-line-group").selectAll(".bar-reference-line-label").data(this.referenceLines).enter().append("text").attr("id",(function(t){return t.referenceID+"-label"})).attr("class","bar-reference-line-label").attr("text-anchor",(function(t){return(t.referenceData.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.referenceData.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("dx",(function(t){return(t.referenceData.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("y",(function(e){return t.y(e.referenceData.referenceValue)})).attr("dy","0.3em").text((function(t){return t.referenceData.labelValue})).style("fill",(function(t){return t.referenceData.strokeColor}))}else if(this.layout==="horizontal"){this.rootG.append("g").attr("class","bar-reference-line-group").selectAll(".bar-reference-line").data(this.referenceLines).enter().append("line").attr("id",(function(t){return t.referenceID})).attr("class","bar-reference-line").attr("y1",0).attr("y2",this.innerPaddedHeight).attr("x1",(function(e){return t.x(e.referenceData.referenceValue)})).attr("x2",(function(e){return t.x(e.referenceData.referenceValue)})).style("stroke",(function(t){return t.referenceData.strokeColor})).style("stroke-width",(function(t){return t.referenceData.strokeWidth})).style("opacity",(function(t){return t.referenceData.strokeOpacity}));this.rootG.select(".bar-reference-line-group").selectAll(".bar-reference-line-label").data(this.referenceLines).enter().append("text").attr("id",(function(t){return t.referenceID+"-label"})).attr("class","bar-reference-line-label").attr("text-anchor","middle").attr("x",(function(e){return t.x(e.referenceData.referenceValue)})).attr("y",(function(e){return(e.referenceData.labelPlacementVertical||"top")==="top"?0:t.innerPaddedHeight})).attr("dy",(function(t){return(t.referenceData.labelPlacementVertical||"top")==="top"?"-0.3em":"1em"})).text((function(t){return t.referenceData.labelValue})).style("fill",(function(t){return t.referenceData.strokeColor}))}this.rootG.exit().remove()}};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){this.hoverFunc.emit(t);if(this.showTooltip){this.eventsTooltip({data:t,evt:Rz,isToShow:true})}};t.prototype.onMouseOutHandler=function(){this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){Mq(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;Eq({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:undefined,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,chartType:"bar"})};t.prototype.render=function(){var t="light";return r("div",{class:"o-layout is--"+this.layout+" "+t},r("div",{class:"o-layout--chart"},r("h1",{class:"visa-ui-header--4"},this.mainTitle),r("p",{class:"visa-ui-text--instructions"},this.subTitle),r("div",{class:"pareto-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("div",{id:"visa-viz-d3-pareto-container"})))};Object.defineProperty(t.prototype,"barChartEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{uniqueID:["idWatcher"],data:["dataWatcher"],hoverHighlight:["highlightWatcher"],clickHighlight:["highlightWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}pareto-chart .axis{font-size:12px}pareto-chart .axis text{font:0.65rem;fill:#767676}pareto-chart .axis-label{text-anchor:middle;font:1rem sans-serif}pareto-chart .axis path{stroke:#767676}pareto-chart .patero-line path{stroke:#767676}pareto-chart .patero-line .patero-highlight{fill:black}pareto-chart .grid line{stroke:#767676;stroke-opacity:0.6;shape-rendering:crispEdges;stroke-dasharray:4, 4}pareto-chart .grid path{stroke-width:0;stroke:#767676}pareto-chart .y.axis path{stroke:#767676;opacity:0}pareto-chart .x.axis path{stroke:#767676}pareto-chart .o-layout--chart .bar-dataLabel-vertical{fill:#767676;text-anchor:middle}pareto-chart .o-layout--chart .bar-dataLabel-horizontal{fill:#767676;text-anchor:start}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=Nq();var zq="http://www.w3.org/1999/xhtml";var Xq={svg:"http://www.w3.org/2000/svg",xhtml:zq,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fq(t){var e=t+="",i=e.indexOf(":");if(i>=0&&(e=t.slice(0,i))!=="xmlns")t=t.slice(i+1);return Xq.hasOwnProperty(e)?{space:Xq[e],local:t}:t}function Bq(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===zq&&e.documentElement.namespaceURI===zq?e.createElement(t):e.createElementNS(i,t)}}function Kq(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function qq(t){var e=Fq(t);return(e.local?Kq:Bq)(e)}function jq(){}function $q(t){return t==null?jq:function(){return this.querySelector(t)}}function Zq(t){if(typeof t!=="function")t=$q(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=new Array(a),l,u,h=0;h<a;++h){if((l=s[h])&&(u=t.call(l,l.__data__,h,s))){if("__data__"in l)u.__data__=l.__data__;o[h]=u}}}return new U$(r,this._parents)}function Qq(){return[]}function Jq(t){return t==null?Qq:function(){return this.querySelectorAll(t)}}function tj(t){if(typeof t!=="function")t=Jq(t);for(var e=this._groups,i=e.length,r=[],n=[],s=0;s<i;++s){for(var a=e[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){r.push(t.call(l,l.__data__,u,a));n.push(l)}}}return new U$(r,n)}function ej(t){return function(){return this.matches(t)}}function ij(t){if(typeof t!=="function")t=ej(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new U$(r,this._parents)}function rj(t){return new Array(t.length)}function nj(){return new U$(this._enter||this._groups.map(rj),this._parents)}function sj(t,e){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=e}sj.prototype={constructor:sj,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function aj(t){return function(){return t}}var oj="$";function lj(t,e,i,r,n,s){var a=0,o,l=e.length,u=s.length;for(;a<u;++a){if(o=e[a]){o.__data__=s[a];r[a]=o}else{i[a]=new sj(t,s[a])}}for(;a<l;++a){if(o=e[a]){n[a]=o}}}function uj(t,e,i,r,n,s,a){var o,l,u={},h=e.length,c=s.length,d=new Array(h),f;for(o=0;o<h;++o){if(l=e[o]){d[o]=f=oj+a.call(l,l.__data__,o,e);if(f in u){n[o]=l}else{u[f]=l}}}for(o=0;o<c;++o){f=oj+a.call(t,s[o],o,s);if(l=u[f]){r[o]=l;l.__data__=s[o];u[f]=null}else{i[o]=new sj(t,s[o])}}for(o=0;o<h;++o){if((l=e[o])&&u[d[o]]===l){n[o]=l}}}function hj(t,e){if(!t){f=new Array(this.size()),u=-1;this.each((function(t){f[++u]=t}));return f}var i=e?uj:lj,r=this._parents,n=this._groups;if(typeof t!=="function")t=aj(t);for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var h=r[u],c=n[u],d=c.length,f=t.call(h,h&&h.__data__,u,r),p=f.length,y=o[u]=new Array(p),v=a[u]=new Array(p),g=l[u]=new Array(d);i(h,c,y,v,g,f,e);for(var b=0,m=0,A,w;b<p;++b){if(A=y[b]){if(b>=m)m=b+1;while(!(w=v[m])&&++m<p);A._next=w||null}}}a=new U$(a,r);a._enter=o;a._exit=l;return a}function cj(){return new U$(this._exit||this._groups.map(rj),this._parents)}function dj(t,e,i){var r=this.enter(),n=this,s=this.exit();r=typeof t==="function"?t(r):r.append(t+"");if(e!=null)n=e(n);if(i==null)s.remove();else i(s);return r&&n?r.merge(n).order():n}function fj(t){for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new U$(a,this._parents)}function pj(){for(var t=this._groups,e=-1,i=t.length;++e<i;){for(var r=t[e],n=r.length-1,s=r[n],a;--n>=0;){if(a=r[n]){if(s&&a.compareDocumentPosition(s)^4)s.parentNode.insertBefore(a,s);s=a}}}return this}function yj(t){if(!t)t=vj;function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}for(var i=this._groups,r=i.length,n=new Array(r),s=0;s<r;++s){for(var a=i[s],o=a.length,l=n[s]=new Array(o),u,h=0;h<o;++h){if(u=a[h]){l[h]=u}}l.sort(e)}return new U$(n,this._parents).order()}function vj(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function gj(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this}function bj(){var t=new Array(this.size()),e=-1;this.each((function(){t[++e]=this}));return t}function mj(){for(var t=this._groups,e=0,i=t.length;e<i;++e){for(var r=t[e],n=0,s=r.length;n<s;++n){var a=r[n];if(a)return a}}return null}function Aj(){var t=0;this.each((function(){++t}));return t}function wj(){return!this.node()}function Sj(t){for(var e=this._groups,i=0,r=e.length;i<r;++i){for(var n=e[i],s=0,a=n.length,o;s<a;++s){if(o=n[s])t.call(o,o.__data__,s,n)}}return this}function xj(t){return function(){this.removeAttribute(t)}}function kj(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Lj(t,e){return function(){this.setAttribute(t,e)}}function _j(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Cj(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttribute(t);else this.setAttribute(t,i)}}function Dj(t,e){return function(){var i=e.apply(this,arguments);if(i==null)this.removeAttributeNS(t.space,t.local);else this.setAttributeNS(t.space,t.local,i)}}function Mj(t,e){var i=Fq(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((e==null?i.local?kj:xj:typeof e==="function"?i.local?Dj:Cj:i.local?_j:Lj)(i,e))}function Uj(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Tj(t){return function(){this.style.removeProperty(t)}}function Ej(t,e,i){return function(){this.style.setProperty(t,e,i)}}function Ij(t,e,i){return function(){var r=e.apply(this,arguments);if(r==null)this.style.removeProperty(t);else this.style.setProperty(t,r,i)}}function Nj(t,e,i){return arguments.length>1?this.each((e==null?Tj:typeof e==="function"?Ij:Ej)(t,e,i==null?"":i)):Wj(this.node(),t)}function Wj(t,e){return t.style.getPropertyValue(e)||Uj(t).getComputedStyle(t,null).getPropertyValue(e)}function Hj(t){return function(){delete this[t]}}function Gj(t,e){return function(){this[t]=e}}function Pj(t,e){return function(){var i=e.apply(this,arguments);if(i==null)delete this[t];else this[t]=i}}function Oj(t,e){return arguments.length>1?this.each((e==null?Hj:typeof e==="function"?Pj:Gj)(t,e)):this.node()[t]}function Vj(t){return t.trim().split(/^|\s+/)}function Rj(t){return t.classList||new Yj(t)}function Yj(t){this._node=t;this._names=Vj(t.getAttribute("class")||"")}Yj.prototype={add:function(t){var e=this._names.indexOf(t);if(e<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var e=this._names.indexOf(t);if(e>=0){this._names.splice(e,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function zj(t,e){var i=Rj(t),r=-1,n=e.length;while(++r<n)i.add(e[r])}function Xj(t,e){var i=Rj(t),r=-1,n=e.length;while(++r<n)i.remove(e[r])}function Fj(t){return function(){zj(this,t)}}function Bj(t){return function(){Xj(this,t)}}function Kj(t,e){return function(){(e.apply(this,arguments)?zj:Xj)(this,t)}}function qj(t,e){var i=Vj(t+"");if(arguments.length<2){var r=Rj(this.node()),n=-1,s=i.length;while(++n<s)if(!r.contains(i[n]))return false;return true}return this.each((typeof e==="function"?Kj:e?Fj:Bj)(i,e))}function jj(){this.textContent=""}function $j(t){return function(){this.textContent=t}}function Zj(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function Qj(t){return arguments.length?this.each(t==null?jj:(typeof t==="function"?Zj:$j)(t)):this.node().textContent}function Jj(){this.innerHTML=""}function t$(t){return function(){this.innerHTML=t}}function e$(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function i$(t){return arguments.length?this.each(t==null?Jj:(typeof t==="function"?e$:t$)(t)):this.node().innerHTML}function r$(){if(this.nextSibling)this.parentNode.appendChild(this)}function n$(){return this.each(r$)}function s$(){if(this.previousSibling)this.parentNode.insertBefore(this,this.parentNode.firstChild)}function a$(){return this.each(s$)}function o$(t){var e=typeof t==="function"?t:qq(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function l$(){return null}function u$(t,e){var i=typeof t==="function"?t:qq(t),r=e==null?l$:typeof e==="function"?e:$q(e);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))}function h$(){var t=this.parentNode;if(t)t.removeChild(this)}function c$(){return this.each(h$)}function d$(){var t=this.cloneNode(false),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function f$(){var t=this.cloneNode(true),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function p$(t){return this.select(t?f$:d$)}function y$(t){return arguments.length?this.property("__data__",t):this.node().__data__}var v$={};var g$=null;if(typeof document!=="undefined"){var b$=document.documentElement;if(!("onmouseenter"in b$)){v$={mouseenter:"mouseover",mouseleave:"mouseout"}}}function m$(t,e,i){t=A$(t,e,i);return function(e){var i=e.relatedTarget;if(!i||i!==this&&!(i.compareDocumentPosition(this)&8)){t.call(this,e)}}}function A$(t,e,i){return function(r){var n=g$;g$=r;try{t.call(this,this.__data__,e,i)}finally{g$=n}}}function w$(t){return t.trim().split(/^|\s+/).map((function(t){var e="",i=t.indexOf(".");if(i>=0)e=t.slice(i+1),t=t.slice(0,i);return{type:t,name:e}}))}function S$(t){return function(){var e=this.__on;if(!e)return;for(var i=0,r=-1,n=e.length,s;i<n;++i){if(s=e[i],(!t.type||s.type===t.type)&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r)e.length=r;else delete this.__on}}function x$(t,e,i){var r=v$.hasOwnProperty(t.type)?m$:A$;return function(n,s,a){var o=this.__on,l,u=r(e,s,a);if(o)for(var h=0,c=o.length;h<c;++h){if((l=o[h]).type===t.type&&l.name===t.name){this.removeEventListener(l.type,l.listener,l.capture);this.addEventListener(l.type,l.listener=u,l.capture=i);l.value=e;return}}this.addEventListener(t.type,u,i);l={type:t.type,name:t.name,value:e,listener:u,capture:i};if(!o)this.__on=[l];else o.push(l)}}function k$(t,e,i){var r=w$(t+""),n,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o)for(var l=0,u=o.length,h;l<u;++l){for(n=0,h=o[l];n<s;++n){if((a=r[n]).type===h.type&&a.name===h.name){return h.value}}}return}o=e?x$:S$;if(i==null)i=false;for(n=0;n<s;++n)this.each(o(r[n],e,i));return this}function L$(t,e,i){var r=Uj(t),n=r.CustomEvent;if(typeof n==="function"){n=new n(e,i)}else{n=r.document.createEvent("Event");if(i)n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail;else n.initEvent(e,false,false)}t.dispatchEvent(n)}function _$(t,e){return function(){return L$(this,t,e)}}function C$(t,e){return function(){return L$(this,t,e.apply(this,arguments))}}function D$(t,e){return this.each((typeof e==="function"?C$:_$)(t,e))}var M$=[null];function U$(t,e){this._groups=t;this._parents=e}function T$(){return new U$([[document.documentElement]],M$)}U$.prototype=T$.prototype={constructor:U$,select:Zq,selectAll:tj,filter:ij,data:hj,enter:nj,exit:cj,join:dj,merge:fj,order:pj,sort:yj,call:gj,nodes:bj,node:mj,size:Aj,empty:wj,each:Sj,attr:Mj,style:Nj,property:Oj,classed:qj,text:Qj,html:i$,raise:n$,lower:a$,append:o$,insert:u$,remove:c$,clone:p$,datum:y$,on:k$,dispatch:D$};function E$(t){return typeof t==="string"?new U$([[document.querySelector(t)]],[document.documentElement]):new U$([[t]],M$)}function I$(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function N$(t){if(t.length===1)t=W$(t);return{left:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)<0)r=s+1;else n=s}return r},right:function(e,i,r,n){if(r==null)r=0;if(n==null)n=e.length;while(r<n){var s=r+n>>>1;if(t(e[s],i)>0)n=s;else r=s+1}return r}}}function W$(t){return function(e,i){return I$(t(e),i)}}var H$=N$(I$);var G$=H$.right;function P$(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;var r=-1,n=Math.max(0,Math.ceil((e-t)/i))|0,s=new Array(n);while(++r<n){s[r]=t+r*i}return s}var O$=Math.sqrt(50),V$=Math.sqrt(10),R$=Math.sqrt(2);function Y$(t,e,i){var r,n=-1,s,a,o;e=+e,t=+t,i=+i;if(t===e&&i>0)return[t];if(r=e<t)s=t,t=e,e=s;if((o=z$(t,e,i))===0||!isFinite(o))return[];if(o>0){t=Math.ceil(t/o);e=Math.floor(e/o);a=new Array(s=Math.ceil(e-t+1));while(++n<s)a[n]=(t+n)*o}else{t=Math.floor(t*o);e=Math.ceil(e*o);a=new Array(s=Math.ceil(t-e+1));while(++n<s)a[n]=(t-n)/o}if(r)a.reverse();return a}function z$(t,e,i){var r=(e-t)/Math.max(0,i),n=Math.floor(Math.log(r)/Math.LN10),s=r/Math.pow(10,n);return n>=0?(s>=O$?10:s>=V$?5:s>=R$?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(s>=O$?10:s>=V$?5:s>=R$?2:1)}function X$(t,e,i){var r=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),s=r/n;if(s>=O$)n*=10;else if(s>=V$)n*=5;else if(s>=R$)n*=2;return e<t?-n:n}function F$(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&n>s){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&n>s){s=n}}}}}return s}function B$(t,e){var i=t.length,r=-1,n,s;if(e==null){while(++r<i){if((n=t[r])!=null&&n>=n){s=n;while(++r<i){if((n=t[r])!=null&&s>n){s=n}}}}}else{while(++r<i){if((n=e(t[r],r,t))!=null&&n>=n){s=n;while(++r<i){if((n=e(t[r],r,t))!=null&&s>n){s=n}}}}}return s}function K$(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}var q$="$";function j$(){}j$.prototype=$$.prototype={constructor:j$,has:function(t){return q$+t in this},get:function(t){return this[q$+t]},set:function(t,e){this[q$+t]=e;return this},remove:function(t){var e=q$+t;return e in this&&delete this[e]},clear:function(){for(var t in this)if(t[0]===q$)delete this[t]},keys:function(){var t=[];for(var e in this)if(e[0]===q$)t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)if(e[0]===q$)t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)if(e[0]===q$)t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)if(e[0]===q$)++t;return t},empty:function(){for(var t in this)if(t[0]===q$)return false;return true},each:function(t){for(var e in this)if(e[0]===q$)t(this[e],e.slice(1),this)}};function $$(t,e){var i=new j$;if(t instanceof j$)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var r=-1,n=t.length,s;if(e==null)while(++r<n)i.set(r,t[r]);else while(++r<n)i.set(e(s=t[r],r,t),s)}else if(t)for(var a in t)i.set(a,t[a]);return i}function Z$(){var t=[],e=[],i,r,n;function s(e,n,a,o){if(n>=t.length){if(i!=null)e.sort(i);return r!=null?r(e):e}var l=-1,u=e.length,h=t[n++],c,d,f=$$(),p,y=a();while(++l<u){if(p=f.get(c=h(d=e[l])+"")){p.push(d)}else{f.set(c,[d])}}f.each((function(t,e){o(y,e,s(t,n,a,o))}));return y}function a(i,n){if(++n>t.length)return i;var s,o=e[n-1];if(r!=null&&n>=t.length)s=i.entries();else s=[],i.each((function(t,e){s.push({key:e,values:a(t,n)})}));return o!=null?s.sort((function(t,e){return o(t.key,e.key)})):s}return n={object:function(t){return s(t,0,Q$,J$)},map:function(t){return s(t,0,tZ,eZ)},entries:function(t){return a(s(t,0,tZ,eZ),0)},key:function(e){t.push(e);return n},sortKeys:function(i){e[t.length-1]=i;return n},sortValues:function(t){i=t;return n},rollup:function(t){r=t;return n}}}function Q$(){return{}}function J$(t,e,i){t[e]=i}function tZ(){return $$()}function eZ(t,e,i){t.set(e,i)}var iZ=Array.prototype;var rZ=iZ.map;var nZ=iZ.slice;var sZ={name:"implicit"};function aZ(){var t=$$(),e=[],i=[],r=sZ;function n(n){var s=n+"",a=t.get(s);if(!a){if(r!==sZ)return r;t.set(s,a=e.push(n))}return i[(a-1)%i.length]}n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=$$();var r=-1,s=i.length,a,o;while(++r<s)if(!t.has(o=(a=i[r])+""))t.set(o,e.push(a));return n};n.range=function(t){return arguments.length?(i=nZ.call(t),n):i.slice()};n.unknown=function(t){return arguments.length?(r=t,n):r};n.copy=function(){return aZ(e,i).unknown(r)};K$.apply(n,arguments);return n}function oZ(){var t=aZ().unknown(undefined),e=t.domain,i=t.range,r=[0,1],n,s,a=false,o=0,l=0,u=.5;delete t.unknown;function h(){var t=e().length,h=r[1]<r[0],c=r[h-0],d=r[1-h];n=(d-c)/Math.max(1,t-o+l*2);if(a)n=Math.floor(n);c+=(d-c-n*(t-o))*u;s=n*(1-o);if(a)c=Math.round(c),s=Math.round(s);var f=P$(t).map((function(t){return c+n*t}));return i(h?f.reverse():f)}t.domain=function(t){return arguments.length?(e(t),h()):e()};t.range=function(t){return arguments.length?(r=[+t[0],+t[1]],h()):r.slice()};t.rangeRound=function(t){return r=[+t[0],+t[1]],a=true,h()};t.bandwidth=function(){return s};t.step=function(){return n};t.round=function(t){return arguments.length?(a=!!t,h()):a};t.padding=function(t){return arguments.length?(o=Math.min(1,l=+t),h()):o};t.paddingInner=function(t){return arguments.length?(o=Math.min(1,t),h()):o};t.paddingOuter=function(t){return arguments.length?(l=+t,h()):l};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),h()):u};t.copy=function(){return oZ(e(),r).round(a).paddingInner(o).paddingOuter(l).align(u)};return K$.apply(h(),arguments)}function lZ(t,e,i){t.prototype=e.prototype=i;i.constructor=t}function uZ(t,e){var i=Object.create(t.prototype);for(var r in e)i[r]=e[r];return i}function hZ(){}var cZ=.7;var dZ=1/cZ;var fZ="\\s*([+-]?\\d+)\\s*",pZ="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",yZ="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vZ=/^#([0-9a-f]{3,8})$/,gZ=new RegExp("^rgb\\("+[fZ,fZ,fZ]+"\\)$"),bZ=new RegExp("^rgb\\("+[yZ,yZ,yZ]+"\\)$"),mZ=new RegExp("^rgba\\("+[fZ,fZ,fZ,pZ]+"\\)$"),AZ=new RegExp("^rgba\\("+[yZ,yZ,yZ,pZ]+"\\)$"),wZ=new RegExp("^hsl\\("+[pZ,yZ,yZ]+"\\)$"),SZ=new RegExp("^hsla\\("+[pZ,yZ,yZ,pZ]+"\\)$");var xZ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lZ(hZ,CZ,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:kZ,formatHex:kZ,formatHsl:LZ,formatRgb:_Z,toString:_Z});function kZ(){return this.rgb().formatHex()}function LZ(){return GZ(this).formatHsl()}function _Z(){return this.rgb().formatRgb()}function CZ(t){var e,i;t=(t+"").trim().toLowerCase();return(e=vZ.exec(t))?(i=e[1].length,e=parseInt(e[1],16),i===6?DZ(e):i===3?new EZ(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):i===8?MZ(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):i===4?MZ(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gZ.exec(t))?new EZ(e[1],e[2],e[3],1):(e=bZ.exec(t))?new EZ(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=mZ.exec(t))?MZ(e[1],e[2],e[3],e[4]):(e=AZ.exec(t))?MZ(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=wZ.exec(t))?HZ(e[1],e[2]/100,e[3]/100,1):(e=SZ.exec(t))?HZ(e[1],e[2]/100,e[3]/100,e[4]):xZ.hasOwnProperty(t)?DZ(xZ[t]):t==="transparent"?new EZ(NaN,NaN,NaN,0):null}function DZ(t){return new EZ(t>>16&255,t>>8&255,t&255,1)}function MZ(t,e,i,r){if(r<=0)t=e=i=NaN;return new EZ(t,e,i,r)}function UZ(t){if(!(t instanceof hZ))t=CZ(t);if(!t)return new EZ;t=t.rgb();return new EZ(t.r,t.g,t.b,t.opacity)}function TZ(t,e,i,r){return arguments.length===1?UZ(t):new EZ(t,e,i,r==null?1:r)}function EZ(t,e,i,r){this.r=+t;this.g=+e;this.b=+i;this.opacity=+r}lZ(EZ,TZ,uZ(hZ,{brighter:function(t){t=t==null?dZ:Math.pow(dZ,t);return new EZ(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?cZ:Math.pow(cZ,t);return new EZ(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&(-.5<=this.g&&this.g<255.5)&&(-.5<=this.b&&this.b<255.5)&&(0<=this.opacity&&this.opacity<=1)},hex:IZ,formatHex:IZ,formatRgb:NZ,toString:NZ}));function IZ(){return"#"+WZ(this.r)+WZ(this.g)+WZ(this.b)}function NZ(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function WZ(t){t=Math.max(0,Math.min(255,Math.round(t)||0));return(t<16?"0":"")+t.toString(16)}function HZ(t,e,i,r){if(r<=0)t=e=i=NaN;else if(i<=0||i>=1)t=e=NaN;else if(e<=0)t=NaN;return new OZ(t,e,i,r)}function GZ(t){if(t instanceof OZ)return new OZ(t.h,t.s,t.l,t.opacity);if(!(t instanceof hZ))t=CZ(t);if(!t)return new OZ;if(t instanceof OZ)return t;t=t.rgb();var e=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(e,i,r),s=Math.max(e,i,r),a=NaN,o=s-n,l=(s+n)/2;if(o){if(e===s)a=(i-r)/o+(i<r)*6;else if(i===s)a=(r-e)/o+2;else a=(e-i)/o+4;o/=l<.5?s+n:2-s-n;a*=60}else{o=l>0&&l<1?0:a}return new OZ(a,o,l,t.opacity)}function PZ(t,e,i,r){return arguments.length===1?GZ(t):new OZ(t,e,i,r==null?1:r)}function OZ(t,e,i,r){this.h=+t;this.s=+e;this.l=+i;this.opacity=+r}lZ(OZ,PZ,uZ(hZ,{brighter:function(t){t=t==null?dZ:Math.pow(dZ,t);return new OZ(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?cZ:Math.pow(cZ,t);return new OZ(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*e,n=2*i-r;return new EZ(VZ(t>=240?t-240:t+120,n,r),VZ(t,n,r),VZ(t<120?t+240:t-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)},formatHsl:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function VZ(t,e,i){return(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)*255}function RZ(t){return function(){return t}}function YZ(t,e){return function(i){return t+i*e}}function zZ(t,e,i){return t=Math.pow(t,i),e=Math.pow(e,i)-t,i=1/i,function(r){return Math.pow(t+r*e,i)}}function XZ(t){return(t=+t)===1?FZ:function(e,i){return i-e?zZ(e,i,t):RZ(isNaN(e)?i:e)}}function FZ(t,e){var i=e-t;return i?YZ(t,i):RZ(isNaN(t)?e:t)}var BZ=function t(e){var i=XZ(e);function r(t,e){var r=i((t=TZ(t)).r,(e=TZ(e)).r),n=i(t.g,e.g),s=i(t.b,e.b),a=FZ(t.opacity,e.opacity);return function(e){t.r=r(e);t.g=n(e);t.b=s(e);t.opacity=a(e);return t+""}}r.gamma=t;return r}(1);function KZ(t,e){if(!e)e=[];var i=t?Math.min(e.length,t.length):0,r=e.slice(),n;return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function qZ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function jZ(t,e){var i=e?e.length:0,r=t?Math.min(i,t.length):0,n=new Array(r),s=new Array(i),a;for(a=0;a<r;++a)n[a]=nQ(t[a],e[a]);for(;a<i;++a)s[a]=e[a];return function(t){for(a=0;a<r;++a)s[a]=n[a](t);return s}}function $Z(t,e){var i=new Date;return t=+t,e=+e,function(r){return i.setTime(t*(1-r)+e*r),i}}function ZZ(t,e){return t=+t,e=+e,function(i){return t*(1-i)+e*i}}function QZ(t,e){var i={},r={},n;if(t===null||typeof t!=="object")t={};if(e===null||typeof e!=="object")e={};for(n in e){if(n in t){i[n]=nQ(t[n],e[n])}else{r[n]=e[n]}}return function(t){for(n in i)r[n]=i[n](t);return r}}var JZ=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tQ=new RegExp(JZ.source,"g");function eQ(t){return function(){return t}}function iQ(t){return function(e){return t(e)+""}}function rQ(t,e){var i=JZ.lastIndex=tQ.lastIndex=0,r,n,s,a=-1,o=[],l=[];t=t+"",e=e+"";while((r=JZ.exec(t))&&(n=tQ.exec(e))){if((s=n.index)>i){s=e.slice(i,s);if(o[a])o[a]+=s;else o[++a]=s}if((r=r[0])===(n=n[0])){if(o[a])o[a]+=n;else o[++a]=n}else{o[++a]=null;l.push({i:a,x:ZZ(r,n)})}i=tQ.lastIndex}if(i<e.length){s=e.slice(i);if(o[a])o[a]+=s;else o[++a]=s}return o.length<2?l[0]?iQ(l[0].x):eQ(e):(e=l.length,function(t){for(var i=0,r;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}function nQ(t,e){var i=typeof e,r;return e==null||i==="boolean"?RZ(e):(i==="number"?ZZ:i==="string"?(r=CZ(e))?(e=r,BZ):rQ:e instanceof CZ?BZ:e instanceof Date?$Z:qZ(e)?KZ:Array.isArray(e)?jZ:typeof e.valueOf!=="function"&&typeof e.toString!=="function"||isNaN(e)?QZ:ZZ)(t,e)}function sQ(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}}var aQ=180/Math.PI;var oQ={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function lQ(t,e,i,r,n,s){var a,o,l;if(a=Math.sqrt(t*t+e*e))t/=a,e/=a;if(l=t*i+e*r)i-=t*l,r-=e*l;if(o=Math.sqrt(i*i+r*r))i/=o,r/=o,l/=o;if(t*r<e*i)t=-t,e=-e,l=-l,a=-a;return{translateX:n,translateY:s,rotate:Math.atan2(e,t)*aQ,skewX:Math.atan(l)*aQ,scaleX:a,scaleY:o}}var uQ,hQ,cQ,dQ;function fQ(t){if(t==="none")return oQ;if(!uQ)uQ=document.createElement("DIV"),hQ=document.documentElement,cQ=document.defaultView;uQ.style.transform=t;t=cQ.getComputedStyle(hQ.appendChild(uQ),null).getPropertyValue("transform");hQ.removeChild(uQ);t=t.slice(7,-1).split(",");return lQ(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function pQ(t){if(t==null)return oQ;if(!dQ)dQ=document.createElementNS("http://www.w3.org/2000/svg","g");dQ.setAttribute("transform",t);if(!(t=dQ.transform.baseVal.consolidate()))return oQ;t=t.matrix;return lQ(t.a,t.b,t.c,t.d,t.e,t.f)}function yQ(t,e,i,r){function n(t){return t.length?t.pop()+" ":""}function s(t,r,n,s,a,o){if(t!==n||r!==s){var l=a.push("translate(",null,e,null,i);o.push({i:l-4,x:ZZ(t,n)},{i:l-2,x:ZZ(r,s)})}else if(n||s){a.push("translate("+n+e+s+i)}}function a(t,e,i,s){if(t!==e){if(t-e>180)e+=360;else if(e-t>180)t+=360;s.push({i:i.push(n(i)+"rotate(",null,r)-2,x:ZZ(t,e)})}else if(e){i.push(n(i)+"rotate("+e+r)}}function o(t,e,i,s){if(t!==e){s.push({i:i.push(n(i)+"skewX(",null,r)-2,x:ZZ(t,e)})}else if(e){i.push(n(i)+"skewX("+e+r)}}function l(t,e,i,r,s,a){if(t!==i||e!==r){var o=s.push(n(s)+"scale(",null,",",null,")");a.push({i:o-4,x:ZZ(t,i)},{i:o-2,x:ZZ(e,r)})}else if(i!==1||r!==1){s.push(n(s)+"scale("+i+","+r+")")}}return function(e,i){var r=[],n=[];e=t(e),i=t(i);s(e.translateX,e.translateY,i.translateX,i.translateY,r,n);a(e.rotate,i.rotate,r,n);o(e.skewX,i.skewX,r,n);l(e.scaleX,e.scaleY,i.scaleX,i.scaleY,r,n);e=i=null;return function(t){var e=-1,i=n.length,s;while(++e<i)r[(s=n[e]).i]=s.x(t);return r.join("")}}}var vQ=yQ(fQ,"px, ","px)","deg)");var gQ=yQ(pQ,", ",")",")");function bQ(t){return function(){return t}}function mQ(t){return+t}var AQ=[0,1];function wQ(t){return t}function SQ(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:bQ(isNaN(e)?NaN:.5)}function xQ(t){var e=t[0],i=t[t.length-1],r;if(e>i)r=e,e=i,i=r;return function(t){return Math.max(e,Math.min(i,t))}}function kQ(t,e,i){var r=t[0],n=t[1],s=e[0],a=e[1];if(n<r)r=SQ(n,r),s=i(a,s);else r=SQ(r,n),s=i(s,a);return function(t){return s(r(t))}}function LQ(t,e,i){var r=Math.min(t.length,e.length)-1,n=new Array(r),s=new Array(r),a=-1;if(t[r]<t[0]){t=t.slice().reverse();e=e.slice().reverse()}while(++a<r){n[a]=SQ(t[a],t[a+1]);s[a]=i(e[a],e[a+1])}return function(e){var i=G$(t,e,1,r)-1;return s[i](n[i](e))}}function _Q(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function CQ(){var t=AQ,e=AQ,i=nQ,r,n,s,a=wQ,o,l,u;function h(){o=Math.min(t.length,e.length)>2?LQ:kQ;l=u=null;return c}function c(n){return isNaN(n=+n)?s:(l||(l=o(t.map(r),e,i)))(r(a(n)))}c.invert=function(i){return a(n((u||(u=o(e,t.map(r),ZZ)))(i)))};c.domain=function(e){return arguments.length?(t=rZ.call(e,mQ),a===wQ||(a=xQ(t)),h()):t.slice()};c.range=function(t){return arguments.length?(e=nZ.call(t),h()):e.slice()};c.rangeRound=function(t){return e=nZ.call(t),i=sQ,h()};c.clamp=function(e){return arguments.length?(a=e?xQ(t):wQ,c):a!==wQ};c.interpolate=function(t){return arguments.length?(i=t,h()):i};c.unknown=function(t){return arguments.length?(s=t,c):s};return function(t,e){r=t,n=e;return h()}}function DQ(t,e){return CQ()(t,e)}function MQ(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function UQ(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,r=t.slice(0,i);return[r.length>1?r[0]+r.slice(2):r,+t.slice(i+1)]}function TQ(t){return t=UQ(Math.abs(t)),t?t[1]:NaN}function EQ(t,e){return function(i,r){var n=i.length,s=[],a=0,o=t[0],l=0;while(n>0&&o>0){if(l+o+1>r)o=Math.max(1,r-l);s.push(i.substring(n-=o,n+o));if((l+=o+1)>r)break;o=t[a=(a+1)%t.length]}return s.reverse().join(e)}}function IQ(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var NQ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function WQ(t){if(!(e=NQ.exec(t)))throw new Error("invalid format: "+t);var e;return new HQ({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}WQ.prototype=HQ.prototype;function HQ(t){this.fill=t.fill===undefined?" ":t.fill+"";this.align=t.align===undefined?">":t.align+"";this.sign=t.sign===undefined?"-":t.sign+"";this.symbol=t.symbol===undefined?"":t.symbol+"";this.zero=!!t.zero;this.width=t.width===undefined?undefined:+t.width;this.comma=!!t.comma;this.precision=t.precision===undefined?undefined:+t.precision;this.trim=!!t.trim;this.type=t.type===undefined?"":t.type+""}HQ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===undefined?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===undefined?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function GQ(t){t:for(var e=t.length,i=1,r=-1,n;i<e;++i){switch(t[i]){case".":r=n=i;break;case"0":if(r===0)r=i;n=i;break;default:if(!+t[i])break t;if(r>0)r=0;break}}return r>0?t.slice(0,r)+t.slice(n+1):t}var PQ;function OQ(t,e){var i=UQ(t,e);if(!i)return t+"";var r=i[0],n=i[1],s=n-(PQ=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+UQ(t,Math.max(0,e+s-1))[0]}function VQ(t,e){var i=UQ(t,e);if(!i)return t+"";var r=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+r:r.length>n+1?r.slice(0,n+1)+"."+r.slice(n+1):r+new Array(n-r.length+2).join("0")}var RQ={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:MQ,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return VQ(t*100,e)},r:VQ,s:OQ,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function YQ(t){return t}var zQ=Array.prototype.map,XQ=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function FQ(t){var e=t.grouping===undefined||t.thousands===undefined?YQ:EQ(zQ.call(t.grouping,Number),t.thousands+""),i=t.currency===undefined?"":t.currency[0]+"",r=t.currency===undefined?"":t.currency[1]+"",n=t.decimal===undefined?".":t.decimal+"",s=t.numerals===undefined?YQ:IQ(zQ.call(t.numerals,String)),a=t.percent===undefined?"%":t.percent+"",o=t.minus===undefined?"-":t.minus+"",l=t.nan===undefined?"NaN":t.nan+"";function u(t){t=WQ(t);var u=t.fill,h=t.align,c=t.sign,d=t.symbol,f=t.zero,p=t.width,y=t.comma,v=t.precision,g=t.trim,b=t.type;if(b==="n")y=true,b="g";else if(!RQ[b])v===undefined&&(v=12),g=true,b="g";if(f||u==="0"&&h==="=")f=true,u="0",h="=";var m=d==="$"?i:d==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",A=d==="$"?r:/[%p]/.test(b)?a:"";var w=RQ[b],S=/[defgprs%]/.test(b);v=v===undefined?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function x(t){var i=m,r=A,a,d,x;if(b==="c"){r=w(t)+r;t=""}else{t=+t;var k=t<0||1/t<0;t=isNaN(t)?l:w(Math.abs(t),v);if(g)t=GQ(t);if(k&&+t===0&&c!=="+")k=false;i=(k?c==="("?c:o:c==="-"||c==="("?"":c)+i;r=(b==="s"?XQ[8+PQ/3]:"")+r+(k&&c==="("?")":"");if(S){a=-1,d=t.length;while(++a<d){if(x=t.charCodeAt(a),48>x||x>57){r=(x===46?n+t.slice(a+1):t.slice(a))+r;t=t.slice(0,a);break}}}}if(y&&!f)t=e(t,Infinity);var L=i.length+t.length+r.length,_=L<p?new Array(p-L+1).join(u):"";if(y&&f)t=e(_+t,_.length?p-r.length:Infinity),_="";switch(h){case"<":t=i+t+r+_;break;case"=":t=i+_+t+r;break;case"^":t=_.slice(0,L=_.length>>1)+i+t+r+_.slice(L);break;default:t=_+i+t+r;break}return s(t)}x.toString=function(){return t+""};return x}function h(t,e){var i=u((t=WQ(t),t.type="f",t)),r=Math.max(-8,Math.min(8,Math.floor(TQ(e)/3)))*3,n=Math.pow(10,-r),s=XQ[8+r/3];return function(t){return i(n*t)+s}}return{format:u,formatPrefix:h}}var BQ;var KQ;var qQ;jQ({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function jQ(t){BQ=FQ(t);KQ=BQ.format;qQ=BQ.formatPrefix;return BQ}function $Q(t){return Math.max(0,-TQ(Math.abs(t)))}function ZQ(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(TQ(e)/3)))*3-TQ(Math.abs(t)))}function QQ(t,e){t=Math.abs(t),e=Math.abs(e)-t;return Math.max(0,TQ(e)-TQ(t))+1}function JQ(t,e,i,r){var n=X$(t,e,i),s;r=WQ(r==null?",f":r);switch(r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));if(r.precision==null&&!isNaN(s=ZQ(n,a)))r.precision=s;return qQ(r,a)}case"":case"e":case"g":case"p":case"r":{if(r.precision==null&&!isNaN(s=QQ(n,Math.max(Math.abs(t),Math.abs(e)))))r.precision=s-(r.type==="e");break}case"f":case"%":{if(r.precision==null&&!isNaN(s=$Q(n)))r.precision=s-(r.type==="%")*2;break}}return KQ(r)}function tJ(t){var e=t.domain;t.ticks=function(t){var i=e();return Y$(i[0],i[i.length-1],t==null?10:t)};t.tickFormat=function(t,i){var r=e();return JQ(r[0],r[r.length-1],t==null?10:t,i)};t.nice=function(i){if(i==null)i=10;var r=e(),n=0,s=r.length-1,a=r[n],o=r[s],l;if(o<a){l=a,a=o,o=l;l=n,n=s,s=l}l=z$(a,o,i);if(l>0){a=Math.floor(a/l)*l;o=Math.ceil(o/l)*l;l=z$(a,o,i)}else if(l<0){a=Math.ceil(a*l)/l;o=Math.floor(o*l)/l;l=z$(a,o,i)}if(l>0){r[n]=Math.floor(a/l)*l;r[s]=Math.ceil(o/l)*l;e(r)}else if(l<0){r[n]=Math.ceil(a*l)/l;r[s]=Math.floor(o*l)/l;e(r)}return t};return t}function eJ(){var t=DQ(wQ,wQ);t.copy=function(){return _Q(t,eJ())};K$.apply(t,arguments);return tJ(t)}function iJ(t,e){t=t.slice();var i=0,r=t.length-1,n=t[i],s=t[r],a;if(s<n){a=i,i=r,r=a;a=n,n=s,s=a}t[i]=e.floor(n);t[r]=e.ceil(s);return t}var rJ=new Date,nJ=new Date;function sJ(t,e,i,r){function n(e){return t(e=arguments.length===0?new Date:new Date(+e)),e}n.floor=function(e){return t(e=new Date(+e)),e};n.ceil=function(i){return t(i=new Date(i-1)),e(i,1),t(i),i};n.round=function(t){var e=n(t),i=n.ceil(t);return t-e<i-t?e:i};n.offset=function(t,i){return e(t=new Date(+t),i==null?1:Math.floor(i)),t};n.range=function(i,r,s){var a=[],o;i=n.ceil(i);s=s==null?1:Math.floor(s);if(!(i<r)||!(s>0))return a;do{a.push(o=new Date(+i)),e(i,s),t(i)}while(o<i&&i<r);return a};n.filter=function(i){return sJ((function(e){if(e>=e)while(t(e),!i(e))e.setTime(e-1)}),(function(t,r){if(t>=t){if(r<0)while(++r<=0){while(e(t,-1),!i(t)){}}else while(--r>=0){while(e(t,+1),!i(t)){}}}}))};if(i){n.count=function(e,r){rJ.setTime(+e),nJ.setTime(+r);t(rJ),t(nJ);return Math.floor(i(rJ,nJ))};n.every=function(t){t=Math.floor(t);return!isFinite(t)||!(t>0)?null:!(t>1)?n:n.filter(r?function(e){return r(e)%t===0}:function(e){return n.count(0,e)%t===0})}}return n}var aJ=sJ((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));aJ.every=function(t){t=Math.floor(t);if(!isFinite(t)||!(t>0))return null;if(!(t>1))return aJ;return sJ((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,i){e.setTime(+e+i*t)}),(function(e,i){return(i-e)/t}))};var oJ=1e3;var lJ=6e4;var uJ=36e5;var hJ=864e5;var cJ=6048e5;var dJ=sJ((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*oJ)}),(function(t,e){return(e-t)/oJ}),(function(t){return t.getUTCSeconds()}));var fJ=sJ((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*oJ)}),(function(t,e){t.setTime(+t+e*lJ)}),(function(t,e){return(e-t)/lJ}),(function(t){return t.getMinutes()}));var pJ=sJ((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*oJ-t.getMinutes()*lJ)}),(function(t,e){t.setTime(+t+e*uJ)}),(function(t,e){return(e-t)/uJ}),(function(t){return t.getHours()}));var yJ=sJ((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*lJ)/hJ}),(function(t){return t.getDate()-1}));function vJ(t){return sJ((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7);e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e*7)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*lJ)/cJ}))}var gJ=vJ(0);var bJ=vJ(1);var mJ=vJ(2);var AJ=vJ(3);var wJ=vJ(4);var SJ=vJ(5);var xJ=vJ(6);var kJ=sJ((function(t){t.setDate(1);t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12}),(function(t){return t.getMonth()}));var LJ=sJ((function(t){t.setMonth(0,1);t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));LJ.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:sJ((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t);e.setMonth(0,1);e.setHours(0,0,0,0)}),(function(e,i){e.setFullYear(e.getFullYear()+i*t)}))};var _J=sJ((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/hJ}),(function(t){return t.getUTCDate()-1}));function CJ(t){return sJ((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7);e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e*7)}),(function(t,e){return(e-t)/cJ}))}var DJ=CJ(0);var MJ=CJ(1);var UJ=CJ(2);var TJ=CJ(3);var EJ=CJ(4);var IJ=CJ(5);var NJ=CJ(6);var WJ=sJ((function(t){t.setUTCMonth(0,1);t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));WJ.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:sJ((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t);e.setUTCMonth(0,1);e.setUTCHours(0,0,0,0)}),(function(e,i){e.setUTCFullYear(e.getUTCFullYear()+i*t)}))};function HJ(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);e.setFullYear(t.y);return e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function GJ(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));e.setUTCFullYear(t.y);return e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function PJ(t,e,i){return{y:t,m:e,d:i,H:0,M:0,S:0,L:0}}function OJ(t){var e=t.dateTime,i=t.date,r=t.time,n=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths;var u=BJ(n),h=KJ(n),c=BJ(s),d=KJ(s),f=BJ(a),p=KJ(a),y=BJ(o),v=KJ(o),g=BJ(l),b=KJ(l);var m={a:I,A:N,b:W,B:H,c:null,d:p0,e:p0,f:m0,g:U0,G:E0,H:y0,I:v0,j:g0,L:b0,m:A0,M:w0,p:G,q:P,Q:e1,s:i1,S:S0,u:x0,U:k0,V:_0,w:C0,W:D0,x:null,X:null,y:M0,Y:T0,Z:I0,"%":t1};var A={a:O,A:V,b:R,B:Y,c:null,d:N0,e:N0,f:O0,g:$0,G:Q0,H:W0,I:H0,j:G0,L:P0,m:V0,M:R0,p:z,q:X,Q:e1,s:i1,S:Y0,u:z0,U:X0,V:B0,w:K0,W:q0,x:null,X:null,y:j0,Y:Z0,Z:J0,"%":t1};var w={a:_,A:C,b:D,B:M,c:U,d:n0,e:n0,f:h0,g:t0,G:JJ,H:a0,I:a0,j:s0,L:u0,m:r0,M:o0,p:L,q:i0,Q:d0,s:f0,S:l0,u:jJ,U:$J,V:ZJ,w:qJ,W:QJ,x:T,X:E,y:t0,Y:JJ,Z:e0,"%":c0};m.x=S(i,m);m.X=S(r,m);m.c=S(e,m);A.x=S(i,A);A.X=S(r,A);A.c=S(e,A);function S(t,e){return function(i){var r=[],n=-1,s=0,a=t.length,o,l,u;if(!(i instanceof Date))i=new Date(+i);while(++n<a){if(t.charCodeAt(n)===37){r.push(t.slice(s,n));if((l=VJ[o=t.charAt(++n)])!=null)o=t.charAt(++n);else l=o==="e"?" ":"0";if(u=e[o])o=u(i,l);r.push(o);s=n+1}}r.push(t.slice(s,n));return r.join("")}}function x(t,e){return function(i){var r=PJ(1900,undefined,1),n=k(r,t,i+="",0),s,a;if(n!=i.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(r.s*1e3+("L"in r?r.L:0));if(e&&!("Z"in r))r.Z=0;if("p"in r)r.H=r.H%12+r.p*12;if(r.m===undefined)r.m="q"in r?r.q:0;if("V"in r){if(r.V<1||r.V>53)return null;if(!("w"in r))r.w=1;if("Z"in r){s=GJ(PJ(r.y,0,1)),a=s.getUTCDay();s=a>4||a===0?MJ.ceil(s):MJ(s);s=_J.offset(s,(r.V-1)*7);r.y=s.getUTCFullYear();r.m=s.getUTCMonth();r.d=s.getUTCDate()+(r.w+6)%7}else{s=HJ(PJ(r.y,0,1)),a=s.getDay();s=a>4||a===0?bJ.ceil(s):bJ(s);s=yJ.offset(s,(r.V-1)*7);r.y=s.getFullYear();r.m=s.getMonth();r.d=s.getDate()+(r.w+6)%7}}else if("W"in r||"U"in r){if(!("w"in r))r.w="u"in r?r.u%7:"W"in r?1:0;a="Z"in r?GJ(PJ(r.y,0,1)).getUTCDay():HJ(PJ(r.y,0,1)).getDay();r.m=0;r.d="W"in r?(r.w+6)%7+r.W*7-(a+5)%7:r.w+r.U*7-(a+6)%7}if("Z"in r){r.H+=r.Z/100|0;r.M+=r.Z%100;return GJ(r)}return HJ(r)}}function k(t,e,i,r){var n=0,s=e.length,a=i.length,o,l;while(n<s){if(r>=a)return-1;o=e.charCodeAt(n++);if(o===37){o=e.charAt(n++);l=w[o in VJ?e.charAt(n++):o];if(!l||(r=l(t,i,r))<0)return-1}else if(o!=i.charCodeAt(r++)){return-1}}return r}function L(t,e,i){var r=u.exec(e.slice(i));return r?(t.p=h[r[0].toLowerCase()],i+r[0].length):-1}function _(t,e,i){var r=f.exec(e.slice(i));return r?(t.w=p[r[0].toLowerCase()],i+r[0].length):-1}function C(t,e,i){var r=c.exec(e.slice(i));return r?(t.w=d[r[0].toLowerCase()],i+r[0].length):-1}function D(t,e,i){var r=g.exec(e.slice(i));return r?(t.m=b[r[0].toLowerCase()],i+r[0].length):-1}function M(t,e,i){var r=y.exec(e.slice(i));return r?(t.m=v[r[0].toLowerCase()],i+r[0].length):-1}function U(t,i,r){return k(t,e,i,r)}function T(t,e,r){return k(t,i,e,r)}function E(t,e,i){return k(t,r,e,i)}function I(t){return a[t.getDay()]}function N(t){return s[t.getDay()]}function W(t){return l[t.getMonth()]}function H(t){return o[t.getMonth()]}function G(t){return n[+(t.getHours()>=12)]}function P(t){return 1+~~(t.getMonth()/3)}function O(t){return a[t.getUTCDay()]}function V(t){return s[t.getUTCDay()]}function R(t){return l[t.getUTCMonth()]}function Y(t){return o[t.getUTCMonth()]}function z(t){return n[+(t.getUTCHours()>=12)]}function X(t){return 1+~~(t.getUTCMonth()/3)}return{format:function(t){var e=S(t+="",m);e.toString=function(){return t};return e},parse:function(t){var e=x(t+="",false);e.toString=function(){return t};return e},utcFormat:function(t){var e=S(t+="",A);e.toString=function(){return t};return e},utcParse:function(t){var e=x(t+="",true);e.toString=function(){return t};return e}}}var VJ={"-":"",_:" ",0:"0"},RJ=/^\s*\d+/,YJ=/^%/,zJ=/[\\^$*+?|[\]().{}]/g;function XJ(t,e,i){var r=t<0?"-":"",n=(r?-t:t)+"",s=n.length;return r+(s<i?new Array(i-s+1).join(e)+n:n)}function FJ(t){return t.replace(zJ,"\\$&")}function BJ(t){return new RegExp("^(?:"+t.map(FJ).join("|")+")","i")}function KJ(t){var e={},i=-1,r=t.length;while(++i<r)e[t[i].toLowerCase()]=i;return e}function qJ(t,e,i){var r=RJ.exec(e.slice(i,i+1));return r?(t.w=+r[0],i+r[0].length):-1}function jJ(t,e,i){var r=RJ.exec(e.slice(i,i+1));return r?(t.u=+r[0],i+r[0].length):-1}function $J(t,e,i){var r=RJ.exec(e.slice(i,i+2));return r?(t.U=+r[0],i+r[0].length):-1}function ZJ(t,e,i){var r=RJ.exec(e.slice(i,i+2));return r?(t.V=+r[0],i+r[0].length):-1}function QJ(t,e,i){var r=RJ.exec(e.slice(i,i+2));return r?(t.W=+r[0],i+r[0].length):-1}function JJ(t,e,i){var r=RJ.exec(e.slice(i,i+4));return r?(t.y=+r[0],i+r[0].length):-1}function t0(t,e,i){var r=RJ.exec(e.slice(i,i+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),i+r[0].length):-1}function e0(t,e,i){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),i+r[0].length):-1}function i0(t,e,i){var r=RJ.exec(e.slice(i,i+1));return r?(t.q=r[0]*3-3,i+r[0].length):-1}function r0(t,e,i){var r=RJ.exec(e.slice(i,i+2));return r?(t.m=r[0]-1,i+r[0].length):-1}function n0(t,e,i){var r=RJ.exec(e.slice(i,i+2));return r?(t.d=+r[0],i+r[0].length):-1}function s0(t,e,i){var r=RJ.exec(e.slice(i,i+3));return r?(t.m=0,t.d=+r[0],i+r[0].length):-1}function a0(t,e,i){var r=RJ.exec(e.slice(i,i+2));return r?(t.H=+r[0],i+r[0].length):-1}function o0(t,e,i){var r=RJ.exec(e.slice(i,i+2));return r?(t.M=+r[0],i+r[0].length):-1}function l0(t,e,i){var r=RJ.exec(e.slice(i,i+2));return r?(t.S=+r[0],i+r[0].length):-1}function u0(t,e,i){var r=RJ.exec(e.slice(i,i+3));return r?(t.L=+r[0],i+r[0].length):-1}function h0(t,e,i){var r=RJ.exec(e.slice(i,i+6));return r?(t.L=Math.floor(r[0]/1e3),i+r[0].length):-1}function c0(t,e,i){var r=YJ.exec(e.slice(i,i+1));return r?i+r[0].length:-1}function d0(t,e,i){var r=RJ.exec(e.slice(i));return r?(t.Q=+r[0],i+r[0].length):-1}function f0(t,e,i){var r=RJ.exec(e.slice(i));return r?(t.s=+r[0],i+r[0].length):-1}function p0(t,e){return XJ(t.getDate(),e,2)}function y0(t,e){return XJ(t.getHours(),e,2)}function v0(t,e){return XJ(t.getHours()%12||12,e,2)}function g0(t,e){return XJ(1+yJ.count(LJ(t),t),e,3)}function b0(t,e){return XJ(t.getMilliseconds(),e,3)}function m0(t,e){return b0(t,e)+"000"}function A0(t,e){return XJ(t.getMonth()+1,e,2)}function w0(t,e){return XJ(t.getMinutes(),e,2)}function S0(t,e){return XJ(t.getSeconds(),e,2)}function x0(t){var e=t.getDay();return e===0?7:e}function k0(t,e){return XJ(gJ.count(LJ(t)-1,t),e,2)}function L0(t){var e=t.getDay();return e>=4||e===0?wJ(t):wJ.ceil(t)}function _0(t,e){t=L0(t);return XJ(wJ.count(LJ(t),t)+(LJ(t).getDay()===4),e,2)}function C0(t){return t.getDay()}function D0(t,e){return XJ(bJ.count(LJ(t)-1,t),e,2)}function M0(t,e){return XJ(t.getFullYear()%100,e,2)}function U0(t,e){t=L0(t);return XJ(t.getFullYear()%100,e,2)}function T0(t,e){return XJ(t.getFullYear()%1e4,e,4)}function E0(t,e){var i=t.getDay();t=i>=4||i===0?wJ(t):wJ.ceil(t);return XJ(t.getFullYear()%1e4,e,4)}function I0(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+XJ(e/60|0,"0",2)+XJ(e%60,"0",2)}function N0(t,e){return XJ(t.getUTCDate(),e,2)}function W0(t,e){return XJ(t.getUTCHours(),e,2)}function H0(t,e){return XJ(t.getUTCHours()%12||12,e,2)}function G0(t,e){return XJ(1+_J.count(WJ(t),t),e,3)}function P0(t,e){return XJ(t.getUTCMilliseconds(),e,3)}function O0(t,e){return P0(t,e)+"000"}function V0(t,e){return XJ(t.getUTCMonth()+1,e,2)}function R0(t,e){return XJ(t.getUTCMinutes(),e,2)}function Y0(t,e){return XJ(t.getUTCSeconds(),e,2)}function z0(t){var e=t.getUTCDay();return e===0?7:e}function X0(t,e){return XJ(DJ.count(WJ(t)-1,t),e,2)}function F0(t){var e=t.getUTCDay();return e>=4||e===0?EJ(t):EJ.ceil(t)}function B0(t,e){t=F0(t);return XJ(EJ.count(WJ(t),t)+(WJ(t).getUTCDay()===4),e,2)}function K0(t){return t.getUTCDay()}function q0(t,e){return XJ(MJ.count(WJ(t)-1,t),e,2)}function j0(t,e){return XJ(t.getUTCFullYear()%100,e,2)}function $0(t,e){t=F0(t);return XJ(t.getUTCFullYear()%100,e,2)}function Z0(t,e){return XJ(t.getUTCFullYear()%1e4,e,4)}function Q0(t,e){var i=t.getUTCDay();t=i>=4||i===0?EJ(t):EJ.ceil(t);return XJ(t.getUTCFullYear()%1e4,e,4)}function J0(){return"+0000"}function t1(){return"%"}function e1(t){return+t}function i1(t){return Math.floor(+t/1e3)}var r1;var n1;s1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function s1(t){r1=OJ(t);n1=r1.format;return r1}var a1=1e3,o1=a1*60,l1=o1*60,u1=l1*24,h1=u1*7,c1=u1*30,d1=u1*365;function f1(t){return new Date(t)}function p1(t){return t instanceof Date?+t:+new Date(+t)}function y1(t,e,i,r,n,s,a,o,l){var u=DQ(wQ,wQ),h=u.invert,c=u.domain;var d=l(".%L"),f=l(":%S"),p=l("%I:%M"),y=l("%I %p"),v=l("%a %d"),g=l("%b %d"),b=l("%B"),m=l("%Y");var A=[[a,1,a1],[a,5,5*a1],[a,15,15*a1],[a,30,30*a1],[s,1,o1],[s,5,5*o1],[s,15,15*o1],[s,30,30*o1],[n,1,l1],[n,3,3*l1],[n,6,6*l1],[n,12,12*l1],[r,1,u1],[r,2,2*u1],[i,1,h1],[e,1,c1],[e,3,3*c1],[t,1,d1]];function w(o){return(a(o)<o?d:s(o)<o?f:n(o)<o?p:r(o)<o?y:e(o)<o?i(o)<o?v:g:t(o)<o?b:m)(o)}function S(e,i,r,n){if(e==null)e=10;if(typeof e==="number"){var s=Math.abs(r-i)/e,a=N$((function(t){return t[2]})).right(A,s);if(a===A.length){n=X$(i/d1,r/d1,e);e=t}else if(a){a=A[s/A[a-1][2]<A[a][2]/s?a-1:a];n=a[1];e=a[0]}else{n=Math.max(X$(i,r,e),1);e=o}}return n==null?e:e.every(n)}u.invert=function(t){return new Date(h(t))};u.domain=function(t){return arguments.length?c(rZ.call(t,p1)):c().map(f1)};u.ticks=function(t,e){var i=c(),r=i[0],n=i[i.length-1],s=n<r,a;if(s)a=r,r=n,n=a;a=S(t,r,n,e);a=a?a.range(r,n+1):[];return s?a.reverse():a};u.tickFormat=function(t,e){return e==null?w:l(e)};u.nice=function(t,e){var i=c();return(t=S(t,i[0],i[i.length-1],e))?c(iJ(i,t)):u};u.copy=function(){return _Q(u,y1(t,e,i,r,n,s,a,o,l))};return u}function v1(){return K$.apply(y1(LJ,kJ,gJ,yJ,pJ,fJ,dJ,aJ,n1).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function g1(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function b1(t){return 1-Math.sqrt(1-t*t)}var m1={value:function(){}};function A1(){for(var t=0,e=arguments.length,i={},r;t<e;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new w1(i)}function w1(t){this._=t}function S1(t,e){return t.trim().split(/^|\s+/).map((function(t){var i="",r=t.indexOf(".");if(r>=0)i=t.slice(r+1),t=t.slice(0,r);if(t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}))}w1.prototype=A1.prototype={constructor:w1,on:function(t,e){var i=this._,r=S1(t+"",i),n,s=-1,a=r.length;if(arguments.length<2){while(++s<a)if((n=(t=r[s]).type)&&(n=x1(i[n],t.name)))return n;return}if(e!=null&&typeof e!=="function")throw new Error("invalid callback: "+e);while(++s<a){if(n=(t=r[s]).type)i[n]=k1(i[n],t.name,e);else if(e==null)for(n in i)i[n]=k1(i[n],t.name,null)}return this},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new w1(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,s;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,n=s.length;r<n;++r)s[r].value.apply(e,i)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,s=r.length;n<s;++n)r[n].value.apply(e,i)}};function x1(t,e){for(var i=0,r=t.length,n;i<r;++i){if((n=t[i]).name===e){return n.value}}}function k1(t,e,i){for(var r=0,n=t.length;r<n;++r){if(t[r].name===e){t[r]=m1,t=t.slice(0,r).concat(t.slice(r+1));break}}if(i!=null)t.push({name:e,value:i});return t}var L1=0,_1=0,C1=0,D1=1e3,M1,U1,T1=0,E1=0,I1=0,N1=typeof performance==="object"&&performance.now?performance:Date,W1=typeof window==="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function H1(){return E1||(W1(G1),E1=N1.now()+I1)}function G1(){E1=0}function P1(){this._call=this._time=this._next=null}P1.prototype=O1.prototype={constructor:P1,restart:function(t,e,i){if(typeof t!=="function")throw new TypeError("callback is not a function");i=(i==null?H1():+i)+(e==null?0:+e);if(!this._next&&U1!==this){if(U1)U1._next=this;else M1=this;U1=this}this._call=t;this._time=i;X1()},stop:function(){if(this._call){this._call=null;this._time=Infinity;X1()}}};function O1(t,e,i){var r=new P1;r.restart(t,e,i);return r}function V1(){H1();++L1;var t=M1,e;while(t){if((e=E1-t._time)>=0)t._call.call(null,e);t=t._next}--L1}function R1(){E1=(T1=N1.now())+I1;L1=_1=0;try{V1()}finally{L1=0;z1();E1=0}}function Y1(){var t=N1.now(),e=t-T1;if(e>D1)I1-=e,T1=t}function z1(){var t,e=M1,i,r=Infinity;while(e){if(e._call){if(r>e._time)r=e._time;t=e,e=e._next}else{i=e._next,e._next=null;e=t?t._next=i:M1=i}}U1=t;X1(r)}function X1(t){if(L1)return;if(_1)_1=clearTimeout(_1);var e=t-E1;if(e>24){if(t<Infinity)_1=setTimeout(R1,t-N1.now()-I1);if(C1)C1=clearInterval(C1)}else{if(!C1)T1=N1.now(),C1=setInterval(Y1,D1);L1=1,W1(R1)}}function F1(t,e,i){var r=new P1;e=e==null?0:+e;r.restart((function(i){r.stop();t(i+e)}),e,i);return r}var B1=A1("start","end","interrupt");var K1=[];var q1=0;var j1=1;var $1=2;var Z1=3;var Q1=4;var J1=5;var t2=6;function e2(t,e,i,r,n,s){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;s2(t,i,{name:e,index:r,group:n,on:B1,tween:K1,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:q1})}function i2(t,e){var i=n2(t,e);if(i.state>q1)throw new Error("too late; already scheduled");return i}function r2(t,e){var i=n2(t,e);if(i.state>$1)throw new Error("too late; already started");return i}function n2(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}function s2(t,e,i){var r=t.__transition,n;r[e]=i;i.timer=O1(s,0,i.time);function s(t){i.state=j1;i.timer.restart(a,i.delay,i.time);if(i.delay<=t)a(t-i.delay)}function a(s){var u,h,c,d;if(i.state!==j1)return l();for(u in r){d=r[u];if(d.name!==i.name)continue;if(d.state===Z1)return F1(a);if(d.state===Q1){d.state=t2;d.timer.stop();d.on.call("interrupt",t,t.__data__,d.index,d.group);delete r[u]}else if(+u<e){d.state=t2;d.timer.stop();delete r[u]}}F1((function(){if(i.state===Z1){i.state=Q1;i.timer.restart(o,i.delay,i.time);o(s)}}));i.state=$1;i.on.call("start",t,t.__data__,i.index,i.group);if(i.state!==$1)return;i.state=Z1;n=new Array(c=i.tween.length);for(u=0,h=-1;u<c;++u){if(d=i.tween[u].value.call(t,t.__data__,i.index,i.group)){n[++h]=d}}n.length=h+1}function o(e){var r=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(l),i.state=J1,1),s=-1,a=n.length;while(++s<a){n[s].call(null,r)}if(i.state===J1){i.on.call("end",t,t.__data__,i.index,i.group);l()}}function l(){i.state=t2;i.timer.stop();delete r[e];for(var n in r)return;delete t.__transition}}function a2(t,e){var i=t.__transition,r,n,s=true,a;if(!i)return;e=e==null?null:e+"";for(a in i){if((r=i[a]).name!==e){s=false;continue}n=r.state>$1&&r.state<J1;r.state=t2;r.timer.stop();if(n)r.on.call("interrupt",t,t.__data__,r.index,r.group);delete i[a]}if(s)delete t.__transition}function o2(t){return this.each((function(){a2(this,t)}))}function l2(t,e){var i,r;return function(){var n=r2(this,t),s=n.tween;if(s!==i){r=i=s;for(var a=0,o=r.length;a<o;++a){if(r[a].name===e){r=r.slice();r.splice(a,1);break}}}n.tween=r}}function u2(t,e,i){var r,n;if(typeof i!=="function")throw new Error;return function(){var s=r2(this,t),a=s.tween;if(a!==r){n=(r=a).slice();for(var o={name:e,value:i},l=0,u=n.length;l<u;++l){if(n[l].name===e){n[l]=o;break}}if(l===u)n.push(o)}s.tween=n}}function h2(t,e){var i=this._id;t+="";if(arguments.length<2){var r=n2(this.node(),i).tween;for(var n=0,s=r.length,a;n<s;++n){if((a=r[n]).name===t){return a.value}}return null}return this.each((e==null?l2:u2)(i,t,e))}function c2(t,e,i){var r=t._id;t.each((function(){var t=r2(this,r);(t.value||(t.value={}))[e]=i.apply(this,arguments)}));return function(t){return n2(t,r).value[e]}}function d2(t,e){var i;return(typeof e==="number"?ZZ:e instanceof CZ?BZ:(i=CZ(e))?(e=i,BZ):rQ)(t,e)}function f2(t){return function(){this.removeAttribute(t)}}function p2(t){return function(){this.removeAttributeNS(t.space,t.local)}}function y2(t,e,i){var r,n;return function(){var s=this.getAttribute(t);return s===i?null:s===r?n:n=e(r=s,i)}}function v2(t,e,i){var r,n;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?n:n=e(r=s,i)}}function g2(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttribute(t);a=this.getAttribute(t);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function b2(t,e,i){var r,n,s;return function(){var a,o=i(this);if(o==null)return void this.removeAttributeNS(t.space,t.local);a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function m2(t,e){var i=Fq(t),r=i==="transform"?gQ:d2;return this.attrTween(t,typeof e==="function"?(i.local?b2:g2)(i,r,c2(this,"attr."+t,e)):e==null?(i.local?p2:f2)(i):(i.local?v2:y2)(i,r,e+""))}function A2(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttributeNS(t.space,t.local,r(e))}}i._value=e;return i}function w2(t,e){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.setAttribute(t,r(e))}}i._value=e;return i}function S2(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=="function")throw new Error;var r=Fq(t);return this.tween(i,(r.local?A2:w2)(r,e))}function x2(t,e){return function(){i2(this,t).delay=+e.apply(this,arguments)}}function k2(t,e){return e=+e,function(){i2(this,t).delay=e}}function L2(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?x2:k2)(e,t)):n2(this.node(),e).delay}function _2(t,e){return function(){r2(this,t).duration=+e.apply(this,arguments)}}function C2(t,e){return e=+e,function(){r2(this,t).duration=e}}function D2(t){var e=this._id;return arguments.length?this.each((typeof t==="function"?_2:C2)(e,t)):n2(this.node(),e).duration}function M2(t,e){if(typeof e!=="function")throw new Error;return function(){r2(this,t).ease=e}}function U2(t){var e=this._id;return arguments.length?this.each(M2(e,t)):n2(this.node(),e).ease}function T2(t){if(typeof t!=="function")t=ej(t);for(var e=this._groups,i=e.length,r=new Array(i),n=0;n<i;++n){for(var s=e[n],a=s.length,o=r[n]=[],l,u=0;u<a;++u){if((l=s[u])&&t.call(l,l.__data__,u,s)){o.push(l)}}}return new t5(r,this._parents,this._name,this._id)}function E2(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,r=e.length,n=i.length,s=Math.min(r,n),a=new Array(r),o=0;o<s;++o){for(var l=e[o],u=i[o],h=l.length,c=a[o]=new Array(h),d,f=0;f<h;++f){if(d=l[f]||u[f]){c[f]=d}}}for(;o<r;++o){a[o]=e[o]}return new t5(a,this._parents,this._name,this._id)}function I2(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");if(e>=0)t=t.slice(0,e);return!t||t==="start"}))}function N2(t,e,i){var r,n,s=I2(e)?i2:r2;return function(){var a=s(this,t),o=a.on;if(o!==r)(n=(r=o).copy()).on(e,i);a.on=n}}function W2(t,e){var i=this._id;return arguments.length<2?n2(this.node(),i).on.on(t):this.each(N2(i,t,e))}function H2(t){return function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;if(e)e.removeChild(this)}}function G2(){return this.on("end.remove",H2(this._id))}function P2(t){var e=this._name,i=this._id;if(typeof t!=="function")t=$q(t);for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),h,c,d=0;d<l;++d){if((h=o[d])&&(c=t.call(h,h.__data__,d,o))){if("__data__"in h)c.__data__=h.__data__;u[d]=c;e2(u[d],e,i,d,u,n2(h,i))}}}return new t5(s,this._parents,e,i)}function O2(t){var e=this._name,i=this._id;if(typeof t!=="function")t=Jq(t);for(var r=this._groups,n=r.length,s=[],a=[],o=0;o<n;++o){for(var l=r[o],u=l.length,h,c=0;c<u;++c){if(h=l[c]){for(var d=t.call(h,h.__data__,c,l),f,p=n2(h,i),y=0,v=d.length;y<v;++y){if(f=d[y]){e2(f,e,i,y,d,p)}}s.push(d);a.push(h)}}}return new t5(s,a,e,i)}var V2=T$.prototype.constructor;function R2(){return new V2(this._groups,this._parents)}function Y2(t,e){var i,r,n;return function(){var s=Wj(this,t),a=(this.style.removeProperty(t),Wj(this,t));return s===a?null:s===i&&a===r?n:n=e(i=s,r=a)}}function z2(t){return function(){this.style.removeProperty(t)}}function X2(t,e,i){var r,n;return function(){var s=Wj(this,t);return s===i?null:s===r?n:n=e(r=s,i)}}function F2(t,e,i){var r,n,s;return function(){var a=Wj(this,t),o=i(this);if(o==null)o=(this.style.removeProperty(t),Wj(this,t));return a===o?null:a===r&&o===n?s:s=e(r=a,n=o)}}function B2(t,e,i){var r=(t+="")==="transform"?vQ:d2;return e==null?this.styleTween(t,Y2(t,r)).on("end.style."+t,z2(t)):this.styleTween(t,typeof e==="function"?F2(t,r,c2(this,"style."+t,e)):X2(t,r,e+""),i)}function K2(t,e,i){function r(){var r=this,n=e.apply(r,arguments);return n&&function(e){r.style.setProperty(t,n(e),i)}}r._value=e;return r}function q2(t,e,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!=="function")throw new Error;return this.tween(r,K2(t,e,i==null?"":i))}function j2(t){return function(){this.textContent=t}}function $2(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function Z2(t){return this.tween("text",typeof t==="function"?$2(c2(this,"text",t)):j2(t==null?"":t+""))}function Q2(){var t=this._name,e=this._id,i=i5();for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){var h=n2(l,e);e2(l,t,i,u,a,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}}}return new t5(r,this._parents,t,i)}var J2=0;function t5(t,e,i,r){this._groups=t;this._parents=e;this._name=i;this._id=r}function e5(t){return T$().transition(t)}function i5(){return++J2}var r5=T$.prototype;t5.prototype=e5.prototype={constructor:t5,select:P2,selectAll:O2,filter:T2,merge:E2,selection:R2,transition:Q2,call:r5.call,nodes:r5.nodes,node:r5.node,size:r5.size,empty:r5.empty,each:r5.each,on:W2,attr:m2,attrTween:S2,style:B2,styleTween:q2,text:Z2,remove:G2,tween:h2,delay:L2,duration:D2,ease:U2};var n5={time:null,delay:0,duration:250,ease:g1};function s5(t,e){var i;while(!(i=t.__transition)||!(i=i[e])){if(!(t=t.parentNode)){return n5.time=H1(),n5}}return i}function a5(t){var e,i;if(t instanceof t5){e=t._id,t=t._name}else{e=i5(),(i=n5).time=H1(),t=t==null?null:t+""}for(var r=this._groups,n=r.length,s=0;s<n;++s){for(var a=r[s],o=a.length,l,u=0;u<o;++u){if(l=a[u]){e2(l,t,e,u,a,i||s5(l,e))}}}return new t5(r,this._parents,t,e)}T$.prototype.interrupt=o2;T$.prototype.transition=a5;var o5=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);var l5=new Uint8Array(16);function u5(){if(!o5){throw new Error("uuid: This browser does not seem to support crypto.getRandomValues(). If you need to support this browser, please provide a custom random number generator through options.rng.")}return o5(l5)}var h5=[];for(var c5=0;c5<256;++c5){h5[c5]=(c5+256).toString(16).substr(1)}function d5(t,e){var i=e||0;var r=h5;return[r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],"-",r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]],r[t[i++]]].join("")}function f5(t,e,i){var r=e&&i||0;if(typeof t=="string"){e=t==="binary"?new Array(16):null;t=null}t=t||{};var n=t.random||(t.rng||u5)();n[6]=n[6]&15|64;n[8]=n[8]&63|128;if(e){for(var s=0;s<16;++s){e[r+s]=n[s]}}return e||d5(n)}var p5=s.propDefaultValues;var y5=function(){function t(){}return t}();y5.mainTitle="Stacked Bar Chart Title";y5.subTitle="This is the stacked bar chart's subtitle";y5.height=280;y5.width=700;y5.margin={top:400*.01,bottom:400*.01,right:400*.01,left:400*.01};y5.padding={top:20,bottom:50,right:50,left:50};y5.normalized=false;y5.showTotalValue=true;y5.showZeroLabels=false;y5.ordinalAccessor="label";y5.valueAccessor="value";y5.groupAccessor="item";y5.layout=p5.layout;y5.accessibility=p5.accessibility;y5.highestHeadingLevel=p5.highestHeadingLevel;y5.sortOrder=p5.sortOrder;y5.xAxis=p5.xAxis;y5.yAxis=p5.yAxis;y5.wrapLabel=p5.wrapLabel;y5.colorPalette=p5.colorPaletteCategorical;y5.hoverStyle=p5.hoverStyle;y5.clickStyle=p5.clickStyle;y5.referenceStyle=p5.referenceStyle;y5.cursor=p5.cursor;y5.roundedCorner=p5.roundedCorner;y5.barIntervalRatio=p5.barIntervalRatio;y5.hoverOpacity=p5.hoverOpacity;y5.dataLabel=p5.dataLabelMiddle;y5.legend=p5.categoryLegend;y5.tooltipLabel=p5.tooltipLabel;y5.showTooltip=p5.showTooltip;y5.suppressEvents=p5.suppressEvents;y5.referenceLines=p5.referenceLines;y5.annotations=p5.annotations;y5.clickHighlight=p5.clickHighlight;var v5=s.getBrowser,g5=s.verifyTextHasSpace,b5=s.checkAttributeTransitions,m5=s.createTextStrokeFilter,A5=s.drawHoverStrokes,w5=s.removeHoverStrokes,S5=s.buildStrokes,x5=s.convertColorsToTextures,k5=s.findTagLevel,L5=s.initializeDescriptionRoot,_5=s.initializeElementAccess,C5=s.setElementFocusHandler,D5=s.setElementAccessID,M5=s.setAccessibilityController,U5=s.hideNonessentialGroups,T5=s.setAccessTitle,E5=s.setAccessSubtitle,I5=s.setAccessLongDescription,N5=s.setAccessExecutiveSummary,W5=s.setAccessPurpose,H5=s.setAccessContext,G5=s.setAccessStatistics,P5=s.setAccessChartCounts,O5=s.setAccessXAxis,V5=s.setAccessYAxis,R5=s.setAccessStructure,Y5=s.setAccessAnnotation,z5=s.retainAccessFocus,X5=s.checkAccessFocus,F5=s.setElementInteractionAccessState,B5=s.setAccessibilityDescriptionWidth,K5=s.autoTextColor,q5=s.annotate,j5=s.chartAccessors,$5=s.checkInteraction,Z5=s.checkClicked,Q5=s.checkHovered,J5=s.convertVisaColor,t6=s.drawAxis,e6=s.drawGrid,i6=s.drawLegend,r6=s.setLegendInteractionState,n6=s.drawTooltip,s6=s.formatStats,a6=s.formatDate,o6=s.formatDataLabel,l6=s.getPadding,u6=s.getColors,h6=s.getLicenses,c6=s.getScopedData,d6=s.initTooltipStyle,f6=s.overrideTitleTooltip,p6=s.placeDataLabels,y6=s.transitionEndAll,v6=s.scopeDataKeys,g6=s.visaColors,b6=s.validateAccessibilityProps;var m6=t("stacked_bar_chart",function(){function t(t){var r=this;e(this,t);this.mainTitle=y5.mainTitle;this.subTitle=y5.subTitle;this.height=y5.height;this.width=y5.width;this.layout=y5.layout;this.highestHeadingLevel=y5.highestHeadingLevel;this.margin=y5.margin;this.padding=y5.padding;this.ordinalAccessor=y5.ordinalAccessor;this.valueAccessor=y5.valueAccessor;this.groupAccessor=y5.groupAccessor;this.sortOrder=y5.sortOrder;this.xAxis=y5.xAxis;this.yAxis=y5.yAxis;this.wrapLabel=y5.wrapLabel;this.normalized=y5.normalized;this.colorPalette=y5.colorPalette;this.hoverStyle=y5.hoverStyle;this.clickStyle=y5.clickStyle;this.referenceStyle=y5.referenceStyle;this.cursor=y5.cursor;this.roundedCorner=y5.roundedCorner;this.barIntervalRatio=y5.barIntervalRatio;this.hoverOpacity=y5.hoverOpacity;this.dataLabel=y5.dataLabel;this.showTotalValue=y5.showTotalValue;this.showTooltip=y5.showTooltip;this.tooltipLabel=y5.tooltipLabel;this.accessibility=y5.accessibility;this.legend=y5.legend;this.annotations=y5.annotations;this.showZeroLabels=y5.showZeroLabels;this.referenceLines=y5.referenceLines;this.suppressEvents=y5.suppressEvents;this.clickHighlight=y5.clickHighlight;this.shouldValidateAccessibility=true;this.series=[];this.extent=[];this.datakeys=[];this.updated=true;this.shouldValidateInteractionKeys=false;this.shouldValidate=false;this.shouldUpdateData=false;this.shouldSetDimensions=false;this.shouldUpdateTableData=false;this.shouldSetColors=false;this.shouldValidateAxes=false;this.shouldValidateClickHighlight=false;this.shouldUpdateScales=false;this.shouldUpdateAnnotations=false;this.shouldResetRoot=false;this.shouldEnterUpdateExit=false;this.shouldSetGlobalSelections=false;this.shouldUpdateGeometries=false;this.shouldCheckValueAxis=false;this.shouldCheckLabelAxis=false;this.shouldUpdateXAxis=false;this.shouldUpdateYAxis=false;this.shouldUpdateXGrid=false;this.shouldUpdateYGrid=false;this.shouldUpdateBaseline=false;this.shouldSetSelectionClass=false;this.shouldUpdateCursor=false;this.shouldUpdateCorners=false;this.shouldUpdateLegendData=false;this.shouldValidateLabelPlacement=false;this.shouldValidateDataLabelAccessor=false;this.shouldUpdateLegend=false;this.shouldUpdateLegendInteractivity=false;this.shouldUpdateReferenceLines=false;this.shouldDrawInteractionState=false;this.shouldBindInteractivity=false;this.shouldSetLabelOpacity=false;this.shouldUpdateLabels=false;this.shouldUpdateTotalLabels=false;this.shouldCheckLabelColor=false;this.shouldUpdateDescriptionWrapper=false;this.shouldSetChartAccessibilityTitle=false;this.shouldSetChartAccessibilitySubtitle=false;this.shouldSetChartAccessibilityLongDescription=false;this.shouldSetChartAccessibilityExecutiveSummary=false;this.shouldSetChartAccessibilityStatisticalNotes=false;this.shouldSetChartAccessibilityStructureNotes=false;this.shouldSetParentSVGAccessibility=false;this.shouldSetGeometryAccessibilityAttributes=false;this.shouldSetGeometryAriaLabels=false;this.shouldSetGroupAccessibilityLabel=false;this.shouldSetChartAccessibilityPurpose=false;this.shouldSetChartAccessibilityContext=false;this.shouldRedrawWrapper=false;this.shouldSetTagLevels=false;this.shouldSetChartAccessibilityCount=false;this.shouldSetYAxisAccessibility=false;this.shouldSetXAxisAccessibility=false;this.shouldSetAnnotationAccessibility=false;this.shouldSetTextures=false;this.shouldSetStrokes=false;this.isSafari=v5()==="Safari";this.strokes={};this.textStrokes={};this.topLevel="h2";this.bottomLevel="p";this.textTreatmentHandler=function(t,e,i){var n=E$(i[e]);var s=r.clickHighlight&&r.clickHighlight.length>0&&Z5(t,r.clickHighlight,r.innerInteractionKeys)&&r.clickStyle.color?g6[r.clickStyle.color]||r.clickStyle.color:r.hoverHighlight&&Q5(t,r.hoverHighlight,r.innerInteractionKeys)&&r.hoverStyle.color?g6[r.hoverStyle.color]||r.hoverStyle.color:r.preparedColors[e];var a=K5(s);if(!n.classed("textIsMoving")){var o=r.textStrokes[s];if(o!==n.attr("filter")){if(r.isSafari){n.attr("filter",null);setTimeout((function(){n.attr("filter",o)}),0)}else{n.attr("filter",o)}}}else{n.attr("filter",null)}return a};this.clickFunc=i(this,"clickFunc",7);this.hoverFunc=i(this,"hoverFunc",7);this.mouseOutFunc=i(this,"mouseOutFunc",7)}t.prototype.dataWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldValidateClickHighlight=true;this.shouldSetColors=true;this.shouldSetTextures=true;this.shouldDrawInteractionState=true;this.shouldUpdateScales=true;this.shouldUpdateTableData=true;this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateLegendData=true;this.shouldValidate=true;this.shouldUpdateGeometries=true;this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateLabels=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetStrokes=true};t.prototype.idWatcher=function(t,e){this.chartID=t;this.stackedBarChartEl.id=this.chartID;this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateLegend=true;this.shouldSetTextures=true;this.shouldCheckLabelColor=true;this.shouldDrawInteractionState=true;this.shouldSetStrokes=true};t.prototype.headingWatcher=function(t,e){this.shouldRedrawWrapper=true;this.shouldSetTagLevels=true;this.shouldSetChartAccessibilityCount=true;this.shouldSetYAxisAccessibility=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetAnnotationAccessibility=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.titleWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.subtitleWatcher=function(t,e){this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetParentSVGAccessibility=true};t.prototype.dimensionWatcher=function(t,e){this.shouldSetDimensions=true;this.shouldUpdateScales=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetLabelOpacity=true};t.prototype.layoutWatcher=function(t,e){this.interpolating=false;this.shouldValidateLabelPlacement=true;this.shouldUpdateScales=true;this.shouldValidateAxes=true;this.shouldResetRoot=true;this.shouldUpdateGeometries=true;this.shouldUpdateXGrid=true;this.shouldUpdateYGrid=true;this.shouldUpdateXAxis=true;this.shouldUpdateYAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateLegend=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetLabelOpacity=true};t.prototype.ordinalAccessorWatcher=function(t,e){this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldUpdateScales=true;this.shouldUpdateData=true;this.shouldUpdateTableData=true;this.shouldUpdateLegendData=true;this.shouldSetColors=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateLegend=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true;this.shouldSetTextures=true;this.shouldCheckValueAxis=true};t.prototype.valueAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldValidateClickHighlight=true;this.shouldUpdateScales=true;this.shouldSetColors=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldValidateDataLabelAccessor=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateTableData=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetStrokes=true;this.shouldSetTextures=true;this.shouldSetGlobalSelections=true;this.shouldCheckValueAxis=true};t.prototype.groupAccessorWatcher=function(t,e){this.shouldUpdateData=true;this.shouldValidateClickHighlight=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldCheckLabelAxis=true;this.shouldUpdateBaseline=true;this.shouldUpdateReferenceLines=true;if(!(this.interactionKeys&&this.interactionKeys.length)){this.shouldValidateInteractionKeys=true;this.shouldSetSelectionClass=true}this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldSetStrokes=true;this.shouldSetTextures=true};t.prototype.sortWatcher=function(t,e){this.updated=true;this.shouldUpdateData=true;this.shouldSetGlobalSelections=true;this.shouldEnterUpdateExit=true;this.shouldUpdateTableData=true;this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAccessibilityAttributes=true;this.shouldSetGeometryAriaLabels=true;this.shouldCheckLabelAxis=true};t.prototype.xAxisWatcher=function(t,e){this.shouldValidateAxes=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXAxis=true;var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateXGrid=true}};t.prototype.yAxisWatcher=function(t,e){this.shouldValidateAxes=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYAxis=true;var i=t&&t.gridVisible;var r=e&&e.gridVisible;var n=t&&t.tickInterval?t.tickInterval:0;var s=e&&e.tickInterval?e.tickInterval:0;if(i!==r||n!==s){this.shouldUpdateYGrid=true}};t.prototype.wrapLabelWatcher=function(t,e){this.shouldCheckLabelAxis=true};t.prototype.normalizedWatcher=function(t,e){this.shouldUpdateData=true;this.shouldValidateClickHighlight=true;this.shouldUpdateScales=true;this.shouldSetColors=true;this.shouldUpdateGeometries=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldCheckValueAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateTableData=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateAnnotations=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetGroupAccessibilityLabel=true};t.prototype.paletteWatcher=function(t,e){this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldCheckLabelColor=true;this.shouldSetStrokes=true;this.shouldSetTextures=true};t.prototype.colorsWatcher=function(t,e){this.shouldSetColors=true;this.shouldDrawInteractionState=true;this.shouldUpdateLegend=true;this.shouldCheckLabelColor=true;this.shouldSetStrokes=true;this.shouldSetTextures=true};t.prototype.hoverStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true};t.prototype.clickStyleWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldSetSelectionClass=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldSetStrokes=true};t.prototype.referenceWatcher=function(t,e){this.shouldUpdateReferenceLines=true};t.prototype.cursorWatcher=function(t,e){this.shouldUpdateCursor=true};t.prototype.cornerWatcher=function(t,e){this.shouldUpdateCorners=true};t.prototype.intervalRatioWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldUpdateGeometries=true;this.shouldSetLabelOpacity=true;this.shouldCheckLabelAxis=true;this.shouldUpdateLabels=true;this.shouldUpdateAnnotations=true};t.prototype.hoverOpacityWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true};t.prototype.labelWatcher=function(t,e){this.shouldUpdateLabels=true;this.shouldUpdateTableData=true;var i=t&&t.placement?t.placement:false;var r=e&&e.placement?e.placement:false;var n=t&&t.visible;var s=e&&e.visible;var a=t&&t.labelAccessor?t.labelAccessor:false;var o=e&&e.labelAccessor?e.labelAccessor:false;if(n!==s){this.shouldSetLabelOpacity=true}if(i!==r){this.shouldSetLabelOpacity=true;this.shouldValidateLabelPlacement=true;this.shouldCheckLabelColor=true}if(a!==o){this.shouldValidateDataLabelAccessor=true}};t.prototype.showTotalValueWatcher=function(t,e){this.shouldUpdateTotalLabels=true;this.shouldUpdateTableData=true;this.shouldSetGroupAccessibilityLabel=true;this.shouldSetParentSVGAccessibility=true;this.shouldSetGeometryAriaLabels=true};t.prototype.showTooltipWatcher=function(t,e){this.shouldDrawInteractionState=true};t.prototype.tooltipLabelWatcher=function(t,e){this.shouldUpdateTableData=true};t.prototype.accessibilityWatcher=function(t,e){this.shouldValidate=true;var i=t&&t.title?t.title:false;var r=e&&e.title?e.title:false;if(i!==r){this.shouldUpdateDescriptionWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetParentSVGAccessibility=true}var n=t&&t.executiveSummary?t.executiveSummary:false;var s=e&&e.executiveSummary?e.executiveSummary:false;if(n!==s){this.shouldSetChartAccessibilityExecutiveSummary=true}var a=t&&t.purpose?t.purpose:false;var o=e&&e.purpose?e.purpose:false;if(a!==o){this.shouldSetChartAccessibilityPurpose=true}var l=t&&t.longDescription?t.longDescription:false;var u=e&&e.longDescription?e.longDescription:false;if(l!==u){this.shouldSetChartAccessibilityLongDescription=true}var h=t&&t.contextExplanation?t.contextExplanation:false;var c=e&&e.contextExplanation?e.contextExplanation:false;if(h!==c){this.shouldSetChartAccessibilityContext=true}var d=t&&t.statisticalNotes?t.statisticalNotes:false;var f=e&&e.statisticalNotes?e.statisticalNotes:false;if(d!==f){this.shouldSetChartAccessibilityStatisticalNotes=true}var p=t&&t.structureNotes?t.structureNotes:false;var y=e&&e.structureNotes?e.structureNotes:false;if(p!==y){this.shouldSetChartAccessibilityStructureNotes=true}var v=t&&t.includeDataKeyNames;var g=e&&e.includeDataKeyNames;var b=t&&t.elementDescriptionAccessor?t.elementDescriptionAccessor:false;var m=e&&e.elementDescriptionAccessor?e.elementDescriptionAccessor:false;if(v!==g||b!==m){if(v!==g){this.shouldSetGroupAccessibilityLabel=true}this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true}var A=t&&t.hideTextures?t.hideTextures:false;var w=e&&e.hideTextures?e.hideTextures:false;if(A!==w){this.shouldSetTextures=true;this.shouldUpdateLegend=true;this.shouldDrawInteractionState=true}var S=t&&t.showSmallLabels?t.showSmallLabels:false;var x=e&&e.showSmallLabels?e.showSmallLabels:false;if(S!==x){this.shouldSetLabelOpacity=true}var k=t&&t.hideStrokes?t.hideStrokes:false;var L=e&&e.hideStrokes?e.hideStrokes:false;if(k!==L){this.shouldSetStrokes=true;this.shouldUpdateLegend=true;this.shouldDrawInteractionState=true}var _=t&&t.keyboardNavConfig&&t.keyboardNavConfig.disabled?t.keyboardNavConfig.disabled:false;var C=e&&e.keyboardNavConfig&&e.keyboardNavConfig.disabled?e.keyboardNavConfig.disabled:false;var D=t&&t.elementsAreInterface?t.elementsAreInterface:false;var M=e&&e.elementsAreInterface?e.elementsAreInterface:false;if(_!==C||D!==M){this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true}if(D!==M){this.shouldSetSelectionClass=true}};t.prototype.showZeroLabelsWatcher=function(t,e){this.shouldUpdateLabels=true};t.prototype.legendWatcher=function(t,e){this.shouldUpdateLegend=true;var i=t&&t.interactive;var r=e&&e.interactive;if(i!==r){this.shouldUpdateLegendInteractivity=true}};t.prototype.annotationsWatcher=function(t,e){this.shouldValidate=true;this.shouldUpdateAnnotations=true;this.shouldSetAnnotationAccessibility=true};t.prototype.valueOverrideWatcher=function(t,e){this.shouldUpdateScales=true;this.shouldCheckValueAxis=true;this.shouldUpdateGeometries=true;this.shouldUpdateLabels=true;this.shouldUpdateTotalLabels=true;this.shouldUpdateReferenceLines=true;this.shouldUpdateBaseline=true;this.shouldUpdateAnnotations=true};t.prototype.interactionWatcher=function(t,e){this.shouldValidateInteractionKeys=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true;this.shouldSetSelectionClass=true;this.shouldUpdateTableData=true;this.shouldSetGeometryAriaLabels=true};t.prototype.hoverWatcher=function(t,e){this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true};t.prototype.clickWatcher=function(t,e){this.shouldValidateClickHighlight=true;this.shouldDrawInteractionState=true;this.shouldCheckLabelColor=true;this.shouldSetLabelOpacity=true};t.prototype.suppressWatcher=function(t,e){this.shouldBindInteractivity=true;this.shouldUpdateCursor=true;this.shouldUpdateLegendInteractivity=true;this.shouldSetGeometryAriaLabels=true;this.shouldSetParentSVGAccessibility=true;this.shouldUpdateDescriptionWrapper=true;this.shouldRedrawWrapper=true;this.shouldValidate=true;this.shouldSetChartAccessibilityTitle=true;this.shouldSetChartAccessibilitySubtitle=true;this.shouldSetChartAccessibilityLongDescription=true;this.shouldSetChartAccessibilityContext=true;this.shouldSetChartAccessibilityExecutiveSummary=true;this.shouldSetChartAccessibilityPurpose=true;this.shouldSetChartAccessibilityStatisticalNotes=true;this.shouldSetChartAccessibilityStructureNotes=true};t.prototype.componentWillLoad=function(){var t=this;return new Promise((function(e){t.duration=0;t.defaults=true;t.chartID=t.uniqueID||"stacked-bar-chart-"+f5();t.stackedBarChartEl.id=t.chartID;t.setTagLevels();t.prepareData();t.prepareLegendData();t.setDimensions();t.prepareScales();t.validateClickHighlight();t.validateInteractionKeys();t.validateDataLabelAccessor();t.validateAxes();t.setTableData();t.shouldValidateAccessibilityProps();t.setColors();e("component will load")}))};t.prototype.componentWillUpdate=function(){return new Promise((function(t){t("component will update")}))};t.prototype.componentDidLoad=function(){var t=this;return new Promise((function(e){t.renderRootElements();t.setTooltipInitialStyle();t.setChartDescriptionWrapper();t.setChartAccessibilityTitle();t.setChartAccessibilitySubtitle();t.setChartAccessibilityLongDescription();t.setChartAccessibilityExecutiveSummary();t.setChartAccessibilityPurpose();t.setChartAccessibilityContext();t.setChartAccessibilityStatisticalNotes();t.setChartAccessibilityStructureNotes();t.setParentSVGAccessibility();t.reSetRoot();t.setTextures();t.setStrokes();t.drawXGrid();t.drawYGrid();t.setGlobalSelections();t.enterGeometries();t.updateGeometries();t.exitGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.enterTotalDataLabels();t.updateTotalDataLabels();t.exitTotalDataLabels();t.setRoundedCorners();t.drawGeometries();t.setChartCountAccessibility();t.setGeometryAccessibilityAttributes();t.setGeometryAriaLabels();t.drawLegendElements();t.bindLegendInteractivity();t.validateLabelPlacement();t.drawDataLabels();t.drawTotalDataLabels();t.drawReferenceLines();t.setSelectedClass();t.updateInteractionState();t.setLabelOpacity();t.checkLabelColorAgainstBackground();t.updateCursor();t.bindInteractivity();t.drawAnnotations();t.setAnnotationAccessibility();t.drawXAxis();t.setXAxisAccessibility();t.drawYAxis();t.setYAxisAccessibility();t.drawBaseline();U5(t.root.node(),t.barG.node());t.setGroupAccessibilityID();t.onChangeHandler();t.duration=750;t.defaults=false;e("component did load")}))};t.prototype.componentDidUpdate=function(){var t=this;return new Promise((function(e){if(t.shouldUpdateDescriptionWrapper){t.setChartDescriptionWrapper();t.shouldUpdateDescriptionWrapper=false}if(t.shouldSetChartAccessibilityCount){t.setChartCountAccessibility();t.shouldSetChartAccessibilityCount=false}if(t.shouldSetChartAccessibilityTitle){t.setChartAccessibilityTitle();t.shouldSetChartAccessibilityTitle=false}if(t.shouldSetChartAccessibilitySubtitle){t.setChartAccessibilitySubtitle();t.shouldSetChartAccessibilitySubtitle=false}if(t.shouldSetChartAccessibilityLongDescription){t.setChartAccessibilityLongDescription();t.shouldSetChartAccessibilityLongDescription=false}if(t.shouldSetChartAccessibilityExecutiveSummary){t.setChartAccessibilityExecutiveSummary();t.shouldSetChartAccessibilityExecutiveSummary=false}if(t.shouldSetChartAccessibilityPurpose){t.setChartAccessibilityPurpose();t.shouldSetChartAccessibilityPurpose=false}if(t.shouldSetChartAccessibilityContext){t.setChartAccessibilityContext();t.shouldSetChartAccessibilityContext=false}if(t.shouldSetChartAccessibilityStatisticalNotes){t.setChartAccessibilityStatisticalNotes();t.shouldSetChartAccessibilityStatisticalNotes=false}if(t.shouldSetChartAccessibilityStructureNotes){t.setChartAccessibilityStructureNotes();t.shouldSetChartAccessibilityStructureNotes=false}if(t.shouldSetParentSVGAccessibility){t.setParentSVGAccessibility();t.shouldSetParentSVGAccessibility=false}if(t.shouldResetRoot){t.reSetRoot();t.shouldResetRoot=false}if(t.shouldSetTextures){t.setTextures();t.shouldSetTextures=false}if(t.shouldSetStrokes){t.setStrokes();t.shouldSetStrokes=false}if(t.shouldSetGlobalSelections){t.setGlobalSelections();t.shouldSetGlobalSelections=false}if(t.shouldUpdateXGrid){t.drawXGrid();t.shouldUpdateXGrid=false}if(t.shouldUpdateYGrid){t.drawYGrid();t.shouldUpdateYGrid=false}if(t.shouldEnterUpdateExit){t.enterGeometries();t.updateGeometries();t.exitGeometries();t.enterDataLabels();t.updateDataLabels();t.exitDataLabels();t.enterTotalDataLabels();t.updateTotalDataLabels();t.exitTotalDataLabels();t.shouldEnterUpdateExit=false}if(t.shouldUpdateGeometries){t.drawGeometries();t.shouldUpdateGeometries=false}if(t.shouldSetGeometryAccessibilityAttributes){t.setGeometryAccessibilityAttributes();t.shouldSetGeometryAccessibilityAttributes=false}if(t.shouldSetGeometryAriaLabels){t.setGeometryAriaLabels();t.shouldSetGeometryAriaLabels=false}if(t.shouldSetGroupAccessibilityLabel){t.setGroupAccessibilityID();t.shouldSetGroupAccessibilityLabel=false}if(t.shouldUpdateCorners){t.setRoundedCorners();t.shouldUpdateCorners=false}if(t.shouldUpdateLegend){t.drawLegendElements();t.shouldUpdateLegend=false}if(t.shouldUpdateLabels){t.drawDataLabels();t.shouldUpdateLabels=false}if(t.shouldUpdateTotalLabels){t.drawTotalDataLabels();t.shouldUpdateTotalLabels=false}if(t.shouldUpdateReferenceLines){t.drawReferenceLines();t.shouldUpdateReferenceLines=false}if(t.shouldDrawInteractionState){t.updateInteractionState();t.shouldDrawInteractionState=false}if(t.shouldSetLabelOpacity){t.setLabelOpacity();t.shouldSetLabelOpacity=false}if(t.shouldCheckLabelColor){t.checkLabelColorAgainstBackground();t.shouldCheckLabelColor=false}if(t.shouldSetSelectionClass){t.setSelectedClass();t.shouldSetSelectionClass=false}if(t.shouldUpdateLegendInteractivity){t.bindLegendInteractivity();t.shouldUpdateLegendInteractivity=false}if(t.shouldUpdateCursor){t.updateCursor();t.shouldUpdateCursor=false}if(t.shouldBindInteractivity){t.bindInteractivity();t.shouldBindInteractivity=false}if(t.shouldUpdateAnnotations){t.drawAnnotations();t.shouldUpdateAnnotations=false}if(t.shouldSetAnnotationAccessibility){t.setAnnotationAccessibility();t.shouldSetAnnotationAccessibility=false}if(t.shouldUpdateXAxis){t.drawXAxis();t.shouldUpdateXAxis=false}if(t.shouldSetXAxisAccessibility){t.setXAxisAccessibility();t.shouldSetXAxisAccessibility=false}if(t.shouldUpdateYAxis){t.drawYAxis();t.shouldUpdateYAxis=false}if(t.shouldSetYAxisAccessibility){t.setYAxisAccessibility();t.shouldSetYAxisAccessibility=false}if(t.shouldUpdateBaseline){t.drawBaseline();t.shouldUpdateBaseline=false}t.onChangeHandler();e("component did update")}))};t.prototype.shouldValidateAccessibilityProps=function(){if(this.shouldValidateAccessibility&&!this.accessibility.disableValidation){this.shouldValidateAccessibility=false;b6(this.chartID,this.accessibility,{annotations:this.annotations,data:this.data,uniqueID:this.uniqueID,context:{mainTitle:this.mainTitle,onClickFunc:!this.suppressEvents?this.clickFunc.emit:undefined,tooltipLabel:this.tooltipLabel,dataLabel:this.dataLabel,valueAccessor:this.valueAccessor},misc:{normalized:this.normalized}})}};t.prototype.validateLabelPlacement=function(){if(this.layout==="vertical"){if(!(this.dataLabel.placement==="top"||this.dataLabel.placement==="middle"||this.dataLabel.placement==="bottom")){this.dataLabel.placement="middle"}}else{if(!(this.dataLabel.placement==="end"||this.dataLabel.placement==="middle"||this.dataLabel.placement==="base")){this.dataLabel.placement="middle"}}};t.prototype.validateInteractionKeys=function(){this.innerInteractionKeys=this.interactionKeys&&this.interactionKeys.length?this.interactionKeys:[this.ordinalAccessor]};t.prototype.validateDataLabelAccessor=function(){this.innerLabelAccessor=this.dataLabel.labelAccessor?this.dataLabel.labelAccessor:this.valueAccessor};t.prototype.validateAxes=function(){this.innerXAxis=Object.assign(Object.assign({},this.xAxis),{gridVisible:!(this.layout==="vertical")&&this.xAxis.gridVisible});this.innerYAxis=Object.assign(Object.assign({},this.yAxis),{gridVisible:this.layout==="vertical"&&this.yAxis.gridVisible})};t.prototype.setDimensions=function(){this.padding=typeof this.padding==="string"?l6(this.padding):this.padding;this.innerHeight=this.height-this.margin.top-this.margin.bottom;this.innerWidth=this.width-this.margin.left-this.margin.right;this.innerPaddedHeight=this.innerHeight-this.padding.top-this.padding.bottom;this.innerPaddedWidth=this.innerWidth-this.padding.left-this.padding.right};t.prototype.prepareData=function(){var t=this;this.extent=[0,0];var e=[];this.data.forEach((function(t){var i=Object.keys(t);var r={};i.forEach((function(e){r[e]=!(t[e]instanceof Date)?t[e]:new Date(t[e].getTime())}));e.push(r)}));var i=Z$().key((function(e){e[t.valueAccessor]=parseFloat(e[t.valueAccessor]);e[t.groupAccessor]=e[t.groupAccessor]instanceof Date?a6({date:e[t.groupAccessor],format:t.layout==="vertical"?t.xAxis.format:t.yAxis.format,offsetTimezone:true}):e[t.groupAccessor];return e[t.groupAccessor]})).entries(e);this.interpolating=this.series.length?this.series:"";if(this.interpolating){this.interpolating.stackOrder=this.stackOrder}var r={};var n=function(e){var i=0;var n=e.length;var s=[];t.stackOrder={};var a=function(){var n=Object.assign({},e[i]);var a=0;var o=0;var l=0;var u={positive:0,negative:0};var h=e[i].values;var c=h.length;n.values=[];var d=0;var f=function(){var e=Object.assign({},h[a]);var i=e[t.valueAccessor];if(i>=0){e.stackEnd=u.positive;u.positive+=i;e.stackStart=u.positive}else{e.stackStart=u.negative;u.negative+=i;e.stackEnd=u.negative}var s=t.stackOrder[e[t.groupAccessor]];if(!s){t.stackOrder[e[t.groupAccessor]]={};s=t.stackOrder[e[t.groupAccessor]]}if(!s[e[t.ordinalAccessor]]){s[e[t.ordinalAccessor]]={previous:d,value:i,stackStart:e.stackStart,stackEnd:e.stackEnd}}e.enteringStackStart=false;if(t.interpolating&&t.interpolating.stackOrder[e[t.groupAccessor]]){var c=t.interpolating.stackOrder[e[t.groupAccessor]];var f=function(t){if(t===0){return 0}else if(c[t]){if(i>=0&&c[t].value>=0){return c[t].stackStart}else if(i<0&&c[t].value<0){return c[t].stackEnd}}var e=s[t].previous;return f(e)};if(!c[e[t.ordinalAccessor]]){e.enteringStackStart=f(d)}}d=e[t.ordinalAccessor];e.getSum=function(){return n.sum};o+=i;if(i>0){l+=i}if(!r[e[t.ordinalAccessor]]){r[e[t.ordinalAccessor]]=1}n.values.push(e)};for(a=0;a<c;a++){f()}if(u.positive>t.extent[1]){t.extent[1]=u.positive}if(u.negative<t.extent[0]){t.extent[0]=u.negative}n.sum=o;n.sumMessage="Sum "+o;n.sumAboveZero=l;s.push(n)};for(i=0;i<n;i++){a()}return s};n(i);this.datakeys=Object.keys(r);this.series=n(i);if(this.sortOrder==="asc"){this.series=__spreadArrays(this.series).sort((function(t,e){return t.sum-e.sum}))}else if(this.sortOrder==="desc"){this.series=__spreadArrays(this.series).sort((function(t,e){return e.sum-t.sum}))}};t.prototype.prepareLegendData=function(){this.legendData=this.series[0].values};t.prototype.validateClickHighlight=function(){var t=this;this.clickHighlight.map((function(e){e[t.groupAccessor]=e[t.groupAccessor]instanceof Date?a6({date:e[t.groupAccessor],format:t.layout==="vertical"?t.xAxis.format:t.yAxis.format,offsetTimezone:true}):e[t.groupAccessor]}))};t.prototype.setTableData=function(){var t=[];this.series.forEach((function(e){e.values.forEach((function(e){t.push(e)}))}));var e=v6(this,j5,"stacked-bar-chart");this.tableData=c6(t,e);this.tableColumns=Object.keys(e)};t.prototype.setColors=function(){this.preparedColors=this.colors?J5(this.colors):u6(this.colorPalette,this.datakeys.length)};t.prototype.setTextures=function(){var t=this.preparedColors.range?this.preparedColors.range():this.preparedColors;if(this.accessibility.hideTextures||t.length>6){this.colorArr=this.preparedColors}else{var e=t;var i=x5({colors:e,rootSVG:this.svg.node(),id:this.chartID,scheme:"categorical"});this.colorArr=this.preparedColors.range?this.preparedColors.copy().range(i):i}};t.prototype.setStrokes=function(){var t=this;var e=this.preparedColors.range?this.preparedColors.range():this.preparedColors;this.strokes=S5({root:this.svg.node(),id:this.chartID,colors:e,clickStyle:this.clickStyle,hoverStyle:this.hoverStyle,stacked:true});this.textStrokes={};e.forEach((function(e){t.textStrokes[e]=m5({root:t.svg.node(),id:t.chartID,color:e})}));if(this.clickStyle&&this.clickStyle.color){this.textStrokes[this.clickStyle.color]=m5({root:this.svg.node(),id:this.chartID,color:this.clickStyle.color})}if(this.hoverStyle&&this.hoverStyle.color){this.textStrokes[this.hoverStyle.color]=m5({root:this.svg.node(),id:this.chartID,color:this.hoverStyle.color})}};t.prototype.prepareScales=function(){var t=this.minValueOverride&&this.minValueOverride<this.extent[0]?this.minValueOverride:this.extent[0];var e=this.maxValueOverride||this.extent[1];var i=this.normalized?[0,1]:[t,e];if(this.interpolating){this.interpolating.oldXDomain=this.x.domain();this.interpolating.oldXRange=this.x.range();this.interpolating.oldYDomain=this.y.domain();this.interpolating.oldYRange=this.y.range()}if(this.layout==="vertical"){if(this.interpolating){this.interpolating.padding=this.x.padding();this.interpolating.x=oZ().domain(this.interpolating.oldXDomain).range(this.interpolating.oldXRange).padding(this.interpolating.padding);this.interpolating.y=eJ().domain(this.interpolating.oldYDomain).range(this.interpolating.oldYRange)}this.y=eJ().domain(i).range([this.innerPaddedHeight,0]);this.x=oZ().domain(this.series.map((function(t){return t.key}))).range([0,this.innerPaddedWidth]).padding(this.barIntervalRatio)}else if(this.layout==="horizontal"){if(this.interpolating){this.interpolating.padding=this.y.padding();this.interpolating.x=eJ().domain(this.interpolating.oldXDomain).range(this.interpolating.oldXRange);this.interpolating.y=oZ().domain(this.interpolating.oldYDomain).range(this.interpolating.oldYRange).padding(this.interpolating.padding)}this.x=eJ().domain(i).range([0,this.innerPaddedWidth]);this.y=oZ().domain(this.series.map((function(t){return t.key}))).range([0,this.innerPaddedHeight]).padding(this.barIntervalRatio)}};t.prototype.renderRootElements=function(){this.svg=E$(this.stackedBarChartEl).select(".visa-viz-d3-stacked-bar-container").append("svg").attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root=this.svg.append("g").attr("id","visa-viz-margin-container-g-"+this.chartID);this.rootG=this.root.append("g").attr("id","visa-viz-padding-container-g-"+this.chartID);this.gridG=this.rootG.append("g").attr("class","grid-group");this.barG=this.rootG.append("g").attr("class","stacked-bar-group");this.labelG=this.rootG.append("g").attr("class","stacked-bar-dataLabel-group");this.totalLabels=this.rootG.append("g").attr("class","bar-dataLabel-group");this.legendG=E$(this.stackedBarChartEl).select(".stacked-bar-legend").append("svg");this.tooltipG=E$(this.stackedBarChartEl).select(".stacked-bar-tooltip")};t.prototype.reSetRoot=function(){this.svg.transition("root_reset").duration(this.duration).ease(b1).attr("width",this.width).attr("height",this.height).attr("viewBox","0 0 "+this.width+" "+this.height);this.root.transition("root_reset").duration(this.duration).ease(b1).attr("transform","translate("+this.margin.left+", "+this.margin.top+")");this.rootG.transition("root_reset").duration(this.duration).ease(b1).attr("transform","translate("+this.padding.left+", "+this.padding.top+")");B5(this.chartID,this.width)};t.prototype.drawXAxis=function(){t6({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,wrapLabel:this.wrapLabel&&this.layout==="vertical"?this.x.bandwidth():"",format:this.xAxis.format,dateFormat:this.xAxis.format,tickInterval:this.xAxis.tickInterval,label:this.xAxis.label,padding:this.padding,hide:!this.innerXAxis.visible})};t.prototype.drawYAxis=function(){t6({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,wrapLabel:this.wrapLabel?this.padding.left||100:"",format:this.yAxis.format,dateFormat:this.yAxis.format,tickInterval:this.yAxis.tickInterval,label:this.yAxis.label,padding:this.padding,hide:!this.innerYAxis.visible})};t.prototype.setXAxisAccessibility=function(){O5({rootEle:this.stackedBarChartEl,hasXAxis:this.innerXAxis?this.innerXAxis.visible:false,xAxis:this.layout==="vertical"?this.x||false:this.y||false,xAxisLabel:this.xAxis.label?this.xAxis.label:""})};t.prototype.setYAxisAccessibility=function(){V5({rootEle:this.stackedBarChartEl,hasYAxis:this.innerYAxis?this.innerYAxis.visible:false,yAxis:this.layout==="vertical"?this.y||false:this.x||false,yAxisLabel:this.yAxis.label?this.yAxis.label:""})};t.prototype.drawBaseline=function(){if(this.layout==="vertical"){t6({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.x,left:false,padding:this.padding,markOffset:this.y(0)||-1})}if(this.layout==="horizontal"){t6({root:this.rootG,height:this.innerPaddedHeight,width:this.innerPaddedWidth,axisScale:this.y,left:true,padding:this.padding,markOffset:this.x(0)||-1})}};t.prototype.drawXGrid=function(){e6(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.x,false,!this.innerXAxis.gridVisible,this.xAxis.tickInterval)};t.prototype.drawYGrid=function(){e6(this.gridG,this.innerPaddedHeight,this.innerPaddedWidth,this.y,true,!this.innerYAxis.gridVisible,this.yAxis.tickInterval)};t.prototype.setGlobalSelections=function(){var t=this;var e=this.barG.selectAll(".stacked-bar-series").data(this.series,(function(t){return t.key}));this.enterBarWrappers=e.enter().append("g");this.exitBarWrappers=e.exit();this.updateBarWrappers=e.merge(this.enterBarWrappers);var i=this.updateBarWrappers.selectAll(".stacked-bar").data((function(t){return t.values}),(function(e){return e[t.ordinalAccessor]}));this.enter=i.enter().append("rect");this.exit=i.exit();this.update=i.merge(this.enter);this.exitSize=this.exit.size();this.enterSize=this.enter.size();var r=this.labelG.selectAll(".stacked-bar-dataLabel-series").data(this.series,(function(t){return t.key}));this.enterLabelWrappers=r.enter().append("g");this.exitLabelWrappers=r.exit();this.updateLabelWrappers=r.merge(this.enterLabelWrappers);var n=this.updateLabelWrappers.selectAll(".stacked-bar-dataLabel").data((function(t){return t.values}),(function(e){return e[t.ordinalAccessor]}));this.enterLabels=n.enter().append("text");this.exitLabels=n.exit();this.updateLabels=n.merge(this.enterLabels);var s=this.totalLabels.selectAll(".bar-dataLabel-group text").data(this.series,(function(t){return t.key}));this.enterTotalLabels=s.enter().append("text");this.exitTotalLabels=s.exit();this.updateTotalLabels=s.merge(this.enterTotalLabels)};t.prototype.enterGeometries=function(){var t=this;this.enter.interrupt();var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r=this.layout==="vertical"?"y":"x";var n=this.layout==="vertical"?"height":"width";var s=this.layout==="vertical"?"innerPaddedWidth":"innerPaddedHeight";this.enter.attr("class","stacked-bar").attr("cursor",!this.suppressEvents?this.cursor:null).each((function(t,e,i){_5(i[e])})).on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null).attr(r,(function(e){var i=t[r];if(t.interpolating){i=t.interpolating[r]}var n=e.stackEnd;if(e.stackEnd<0){n=e.stackStart}if(typeof e.enteringStackStart==="number"){n=e.enteringStackStart}var s=!t.normalized?1:e.getSum();return i(n/s)})).attr(n,0).attr(e,(function(i){var r=t[e];if(t.interpolating){r=t.interpolating[e]}return r(i[t.groupAccessor])})).attr(i,(function(){var i=t[e];if(t.interpolating){i=t.interpolating[e]}return i.bandwidth()}));this.enterBarWrappers.attr("class","stacked-bar-series entering").each((function(t,e,i){_5(i[e])})).selectAll(".stacked-bar").attr(n,(function(e){var i=!t.normalized?1:e.getSum();return t.layout==="vertical"?t.y(e.stackEnd/i)-t.y(e.stackStart/i):t.x(e.stackStart/i)-t.x(e.stackEnd/i)}));if(this.defaults){this.enter.attr("opacity",(function(e){return $5(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)}))}else{this.enter.attr("opacity",0);this.enterBarWrappers.selectAll(".stacked-bar").attr(r,(function(e){var i=!t.normalized?1:e.getSum();return t.layout==="vertical"?t.y(e.stackStart/i):t.x(e.stackEnd/i)})).attr(e,(function(i){var r=t[e](i[t.groupAccessor])+t[e].bandwidth()/2;r=t[e](i[t.groupAccessor])+t[e].bandwidth()/2*(r/(t[s]/2));return r})).attr(i,0)}this.enterBarWrappers.order();this.enter.order()};t.prototype.updateGeometries=function(){var t=this;this.update.interrupt();this.update.transition("opacity").duration((function(e,i,r){if(E$(r[i]).classed("entering")){E$(r[i]).classed("entering",false);return t.duration}return 0})).ease(b1).attr("opacity",(function(e){return $5(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)})).call(y6,(function(){t.update.classed("entering",false)}))};t.prototype.exitGeometries=function(){var t=this;this.exit.interrupt();var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r=this.layout==="vertical"?"y":"x";var n=this.layout==="vertical"?"height":"width";var s=this.layout==="vertical"?"innerPaddedWidth":"innerPaddedHeight";this.exit.attr("filter",null).transition("exit").duration(this.duration).ease(b1).attr(n,0).attr(r,(function(e){var i=e.stackEnd;if(e.stackEnd<0){i=e.stackStart}var n=!t.normalized?1:e.getSum();return t[r](i/n)})).attr(e,(function(i){return t[e](i[t.groupAccessor])}));this.exitBarWrappers.selectAll(".stacked-bar").attr("filter",null).transition("exit").duration(this.duration).ease(b1).attr("opacity",0).attr(r,(function(t,e,i){return E$(i[e]).attr(r)})).attr(e,(function(r,n,a){var o=E$(a[n]);var l=+o.attr(e)+ +o.attr(i)/2;l=+o.attr(e)+ +o.attr(i)/2*(l/(t[s]/2));return l})).attr(n,(function(t,e,i){return E$(i[e]).attr(n)})).attr(i,0);this.update.transition("accessibilityAfterExit").duration(this.duration).ease(b1).call(y6,(function(){var e=X5(t.rootG.node());t.exit.remove();t.exitBarWrappers.remove();t.setChartCountAccessibility();t.setGroupAccessibilityID();t.setGeometryAriaLabels();z5({parentGNode:t.rootG.node(),focusDidExist:e})}))};t.prototype.drawGeometries=function(){var t=this;var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"width":"height";var r=this.layout==="vertical"?"y":"x";var n=this.layout==="vertical"?"height":"width";this.updateBarWrappers.transition("update").duration(this.duration).ease(b1).call(y6,(function(){t.updateBarWrappers.classed("entering",false)}));this.update.classed("geometryIsMoving",(function(s,a,o){var l=!t.normalized?1:s.getSum();var u=b5(E$(o[a]),[{attr:e,numeric:true,newValue:t[e](s[t.groupAccessor])},{attr:i,numeric:true,newValue:t[e].bandwidth()},{attr:r,numeric:true,newValue:t.layout==="vertical"?t.y(s.stackStart/l):t.x(s.stackEnd/l)},{attr:n,numeric:true,newValue:t.layout==="vertical"?t.y(s.stackEnd/l)-t.y(s.stackStart/l):t.x(s.stackStart/l)-t.x(s.stackEnd/l)}]);return u})).transition("update").duration(this.duration).ease(b1).attr(r,(function(e){var i=!t.normalized?1:e.getSum();return t.layout==="vertical"?t.y(e.stackStart/i):t.x(e.stackEnd/i)})).attr(n,(function(e){var i=!t.normalized?1:e.getSum();return t.layout==="vertical"?t.y(e.stackEnd/i)-t.y(e.stackStart/i):t.x(e.stackStart/i)-t.x(e.stackEnd/i)})).attr(e,(function(i){return t[e](i[t.groupAccessor])})).attr(i,this[e].bandwidth()).call(y6,(function(){setTimeout((function(){t.update.classed("geometryIsMoving",false);t.updateInteractionState();t.updateLabels.classed("textIsMoving",false);t.checkLabelColorAgainstBackground()}),0);z5({parentGNode:t.rootG.node()})}))};t.prototype.updateInteractionState=function(){var t=this;w5(this.svg.node());this.update.interrupt("opacity");this.updateLabels.interrupt("opacity");this.update.attr("opacity",(function(e){return $5(e,1,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)})).attr("fill",(function(e,i){var r=t.clickHighlight&&t.clickHighlight.length>0&&Z5(e,t.clickHighlight,t.innerInteractionKeys);var n=t.hoverHighlight&&Q5(e,t.hoverHighlight,t.innerInteractionKeys);var s=t.colorArr[i];return r&&t.clickStyle.color?g6[t.clickStyle.color]||t.clickStyle.color:r?s:n&&t.hoverStyle.color?g6[t.hoverStyle.color]||t.hoverStyle.color:s})).each((function(e,i,r){var n=E$(r[i]);if(!t.accessibility.hideStrokes&&!n.classed("geometryIsMoving")){var s=t.clickHighlight&&t.clickHighlight.length>0&&Z5(e,t.clickHighlight,t.innerInteractionKeys);var a=t.hoverHighlight&&Q5(e,t.hoverHighlight,t.innerInteractionKeys);var o=t.preparedColors[i];var l=s?"click":a?"hover":"rest";var u=s&&t.clickStyle.color?g6[t.clickStyle.color]||t.clickStyle.color:s?o:a&&t.hoverStyle.color?g6[t.hoverStyle.color]||t.hoverStyle.color:o;if(l==="hover"){A5({inputElement:r[i],id:t.chartID,key:e[t.ordinalAccessor]+e[t.groupAccessor],strokeWidth:t.hoverStyle.strokeWidth,fill:u})}var h=t.strokes[l+u];if(h!==n.attr("filter")){if(t.isSafari){n.attr("filter",null);setTimeout((function(){n.attr("filter",h)}),0)}else{n.attr("filter",h)}}}else{n.attr("filter",null)}}));z5({parentGNode:this.rootG.node()});r6({root:this.legendG,uniqueID:this.chartID,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.setLabelOpacity=function(){this.processLabelOpacity(this.updateLabels);this.updateTotalLabels.attr("opacity",this.showTotalValue&&!this.normalized?1:0)};t.prototype.processLabelOpacity=function(t){var e=this;var i=this.dataLabel.visible?1:0;var r=this.layout==="vertical"?"x":"y";var n=this.layout==="vertical"?"width":"height";var s=this.layout==="vertical"?"height":"width";t.attr("opacity",(function(t){var a=!e.normalized?1:t.getSum();var o={};o[n]=e[r].bandwidth();o[s]=e.layout==="vertical"?e.y(t.stackEnd/a)-e.y(t.stackStart/a):e.x(t.stackStart/a)-e.x(t.stackEnd/a);var l=e.accessibility.showSmallLabels||g5({text:o6(t,e.innerLabelAccessor,e.dataLabel.format,e.normalized),dimensions:o,fontSize:14});return l?$5(t,i,e.hoverOpacity,e.hoverHighlight,e.clickHighlight,e.innerInteractionKeys)<1?0:1:0}))};t.prototype.checkLabelColorAgainstBackground=function(){var t=this;this.updateLabels.attr("fill",(function(e,i,r){return t.textTreatmentHandler(e,i,r)}))};t.prototype.bindInteractivity=function(){var t=this;this.update.on("click",!this.suppressEvents?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents?function(e){return t.onHoverHandler(e)}:null).on("mouseout",!this.suppressEvents?function(){return t.onMouseOutHandler()}:null)};t.prototype.setRoundedCorners=function(){this.update.transition("shared_update").duration(this.duration).ease(b1).attr("rx",this.roundedCorner).attr("ry",this.roundedCorner)};t.prototype.setSelectedClass=function(){var t=this;this.update.classed("highlight",(function(e,i,r){var n=$5(e,true,false,"",t.clickHighlight,t.innerInteractionKeys);n=t.clickHighlight&&t.clickHighlight.length?n:false;var s=t.accessibility.elementsAreInterface;F5(r[i],n,s);return n}))};t.prototype.updateCursor=function(){this.update.attr("cursor",!this.suppressEvents?this.cursor:null);E$(this.stackedBarChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?this.cursor:null)};t.prototype.enterDataLabels=function(){this.enterLabelWrappers.attr("class","stacked-bar-dataLabel-series entering");this.enterLabels.attr("class","stacked-bar-dataLabel entering").style("pointer-events","none").classed("stacked-bar-dataLabel-"+this.layout,true).attr("opacity",0).attr("fill",this.textTreatmentHandler);p6({root:this.enterLabels,xScale:this.x,yScale:this.y,ordinalAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"stacked",normalized:this.normalized})};t.prototype.updateDataLabels=function(){var t=this;this.updateLabels.interrupt();var e=this.dataLabel.visible?1:0;this.updateLabelWrappers.transition("update").duration(this.duration).ease(b1).call(y6,(function(){t.updateLabelWrappers.classed("entering",false)}));this.updateLabels.transition("opacity").ease(b1).duration((function(e,i,r){if(E$(r[i]).classed("entering")){E$(r[i]).classed("entering",false);return t.duration}return 0})).attr("opacity",(function(i){return $5(i,e,t.hoverOpacity,t.hoverHighlight,t.clickHighlight,t.innerInteractionKeys)<1?0:1})).call(y6,(function(){t.updateLabels.classed("entering",false)}))};t.prototype.exitDataLabels=function(){var t=this;this.exitLabelWrappers.selectAll("text").attr("filter",null).transition("exit").ease(b1).duration(this.duration/2).attr("opacity",0).call(y6,(function(){t.exitLabelWrappers.remove()}));this.exitLabels.attr("filter",null).transition("exit").ease(b1).duration(this.duration/2).attr("opacity",0).remove()};t.prototype.drawDataLabels=function(){var t=this;this.updateLabels.classed("stacked-bar-dataLabel-horizontal",false).classed("stacked-bar-dataLabel-vertical",false).classed("stacked-bar-dataLabel-"+this.layout,true).text((function(e){if(e[t.valueAccessor]===0&&!t.showZeroLabels){return""}return o6(e,t.innerLabelAccessor,t.dataLabel.format,t.normalized)}));this.updateLabelWrappers.transition("update").duration(this.duration).ease(b1).call(y6,(function(){t.updateLabelWrappers.classed("entering",false)}));var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"y":"x";var r=this.layout==="vertical"?"stackStart":"stackEnd";var n=this.updateLabels.classed("textIsMoving",(function(n){if(!t.interpolating){return false}var s=!t.normalized?1:n.getSum();var a=t.interpolating[e](n[t.groupAccessor])!==t[e](n[t.groupAccessor])||t.interpolating[i](n[r]/s)!==t[i](n[r]/s);return a})).transition("update").ease(b1).duration(this.duration);p6({root:n,xScale:this.x,yScale:this.y,ordinalAccessor:this.groupAccessor,valueAccessor:this.valueAccessor,placement:this.dataLabel.placement,layout:this.layout,chartType:"stacked",normalized:this.normalized})};t.prototype.enterTotalDataLabels=function(){var t=this;var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"y":"x";this.enterTotalLabels.attr("class","bar-dataLabel-"+this.layout).attr("opacity",0).attr("fill",g6.dark_text).attr(e,(function(i){return t[e](i.key)+t[e].bandwidth()/2})).attr(i,(function(e){return t[i](e.sumAboveZero)+4}))};t.prototype.updateTotalDataLabels=function(){var t=this.showTotalValue&&!this.normalized?1:0;this.updateTotalLabels.transition("total_opacity").ease(b1).duration(this.duration).attr("opacity",t)};t.prototype.exitTotalDataLabels=function(){this.exitTotalLabels.transition("exit").ease(b1).duration(this.duration/2).attr("opacity",0).remove()};t.prototype.drawTotalDataLabels=function(){var t=this;var e=this.layout==="vertical"?"x":"y";var i=this.layout==="vertical"?"y":"x";var r=this.showTotalValue&&!this.normalized?1:0;this.updateTotalLabels.text((function(e){return s6(e.sum,t.dataLabel.format)})).attr("text-anchor",this.layout==="vertical"?"middle":"start");this.updateTotalLabels.classed("bar-dataLabel-horizontal",false).classed("bar-dataLabel-vertical",false).classed("bar-dataLabel-"+this.layout,true).transition("update").ease(b1).duration(this.duration).attr("opacity",r).attr(e,(function(i){return t[e](i.key)+t[e].bandwidth()/2})).attr(i,(function(e){return t[i](e.sumAboveZero)})).attr("dx",this.layout==="vertical"?"0":"0.3em").attr("dy",this.layout==="vertical"?"-0.3em":".3em")};t.prototype.drawReferenceLines=function(){var t=this;if(!this.references){this.references=this.rootG.append("g").attr("class","stacked-bar-reference-line-group")}var e=this.references.selectAll("g").data(this.referenceLines,(function(t){return t.label}));var i=e.enter().append("g").attr("class",".stacked-bar-reference").attr("opacity",1);var r=i.append("line");r.attr("class","stacked-bar-reference-line").attr("opacity",0);var n=i.append("text");n.attr("class","stacked-bar-reference-line-label").attr("opacity",0);var s=e.merge(i);var a=s.selectAll(".stacked-bar-reference-line").data((function(t){return[t]})).transition("merge").ease(b1).duration(this.duration);var o=s.selectAll(".stacked-bar-reference-line-label").data((function(t){return[t]})).transition("merge").ease(b1).duration(this.duration).text((function(t){return t.label}));var l=e.exit();l.transition("exit").ease(b1).duration(this.duration).attr("opacity",0).remove();if(this.layout==="vertical"){i.attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));s.transition("merge").ease(b1).duration(this.duration).attr("transform",(function(e){return"translate(0,"+t.y(e.value)+")"}));r.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);n.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em");a.attr("x1",0).attr("y1",0).attr("y2",0).attr("x2",this.innerPaddedWidth);o.attr("text-anchor",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"start":"end"})).attr("x",(function(e){return(e.labelPlacementHorizontal||"right")==="right"?t.innerPaddedWidth:0})).attr("y",0).attr("dx",(function(t){return(t.labelPlacementHorizontal||"right")==="right"?"0.1em":"-0.1em"})).attr("dy","0.3em")}else if(this.layout==="horizontal"){i.attr("transform",(function(e){return"translate("+t.x(e.value)+",0)"}));s.transition("merge").ease(b1).duration(this.duration).attr("transform",(function(e){return"translate("+t.x(e.value)+",0)"}));r.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0);a.attr("x1",0).attr("y1",this.innerPaddedHeight).attr("x2",0).attr("y2",0);n.attr("text-anchor","middle").attr("x",0).attr("y",(function(e){return(e.labelPlacementVertical||"top")==="top"?0:t.innerPaddedHeight})).attr("dx",0).attr("dy",(function(t){return(t.labelPlacementVertical||"top")==="top"?"-0.3em":"1em"}));o.attr("text-anchor","middle").attr("x",0).attr("y",(function(e){return(e.labelPlacementVertical||"top")==="top"?0:t.innerPaddedHeight})).attr("dx",0).attr("dy",(function(t){return(t.labelPlacementVertical||"top")==="top"?"-0.3em":"1em"}))}a.style("stroke",g6[this.referenceStyle.color]||this.referenceStyle.color).style("stroke-width",this.referenceStyle.strokeWidth).attr("stroke-dasharray",this.referenceStyle.dashed?this.referenceStyle.dashed:"").attr("opacity",this.referenceStyle.opacity);o.style("fill",g6[this.referenceStyle.color]||this.referenceStyle.color).attr("opacity",1)};t.prototype.drawAnnotations=function(){var t=this;var e=this.layout!=="horizontal"?this.x:this.y;var i=this.layout!=="horizontal"?this.y:this.x;if(this.data[0][this.groupAccessor]instanceof Date){var r=F$(this.data,(function(e){return e[t.groupAccessor]}));var n=B$(this.data,(function(e){return e[t.groupAccessor]}));var s=this.layout!=="horizontal"?[0,this.innerPaddedWidth]:[this.innerPaddedHeight,0];e=v1().domain([n,r]).range(s)}q5({source:this.rootG.node(),data:this.annotations,xScale:this.layout!=="horizontal"?e:i,xAccessor:this.layout!=="horizontal"?this.groupAccessor:this.valueAccessor,yScale:this.layout!=="horizontal"?i:e,yAccessor:this.layout!=="horizontal"?this.valueAccessor:this.groupAccessor})};t.prototype.setAnnotationAccessibility=function(){Y5(this.stackedBarChartEl,this.annotations)};t.prototype.drawLegendElements=function(){i6({root:this.legendG,uniqueID:this.chartID,width:this.innerPaddedWidth,height:this.margin.top+20,colorArr:this.colorArr,baseColorArr:this.preparedColors,hideStrokes:this.accessibility.hideStrokes,margin:this.margin,padding:this.padding,duration:this.duration,type:"bar",fontSize:16,data:this.legendData,labelKey:this.ordinalAccessor,label:this.legend.labels,hide:!this.legend.visible,interactionKeys:this.innerInteractionKeys,groupAccessor:this.ordinalAccessor,hoverHighlight:this.hoverHighlight,clickHighlight:this.clickHighlight,hoverStyle:this.hoverStyle,clickStyle:this.clickStyle,hoverOpacity:this.hoverOpacity})};t.prototype.bindLegendInteractivity=function(){var t=this;E$(this.stackedBarChartEl).selectAll(".legend").style("cursor",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?this.cursor:null).on("click",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?function(e){return t.onClickHandler(e)}:null).on("mouseover",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?function(e){return t.hoverFunc.emit(e)}:null).on("mouseout",!this.suppressEvents&&this.legend.interactive&&this.legend.visible?function(){return t.onMouseOutHandler()}:null)};t.prototype.setTagLevels=function(){this.topLevel=k5(this.highestHeadingLevel);this.bottomLevel=k5(this.highestHeadingLevel,3)};t.prototype.setChartDescriptionWrapper=function(){L5({rootEle:this.stackedBarChartEl,geomType:"bar",title:this.accessibility.title||this.mainTitle,chartTag:"stacked-bar-chart",uniqueID:this.chartID,groupName:"stack",highestHeadingLevel:this.highestHeadingLevel,redraw:this.shouldRedrawWrapper,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled});this.shouldRedrawWrapper=false};t.prototype.setParentSVGAccessibility=function(){M5({node:this.svg.node(),chartTag:"stacked-bar-chart",title:this.accessibility.title||this.mainTitle,description:this.subTitle,uniqueID:this.chartID,geomType:"bar",includeKeyNames:this.accessibility.includeDataKeyNames,dataKeys:v6(this,j5,"stacked-bar-chart"),groupAccessor:this.groupAccessor,groupName:"stack",groupKeys:this.showTotalValue?["sumMessage"]:false,disableKeyNav:this.suppressEvents&&this.accessibility.elementsAreInterface===false&&this.accessibility.keyboardNavConfig&&this.accessibility.keyboardNavConfig.disabled})};t.prototype.setGeometryAccessibilityAttributes=function(){this.update.each((function(t,e,i){_5(i[e])}))};t.prototype.setGeometryAriaLabels=function(){var t=this;var e=v6(this,j5,"stacked-bar-chart");this.update.each((function(i,r,n){C5({node:n[r],geomType:"bar",includeKeyNames:t.accessibility.includeDataKeyNames,dataKeys:e,groupKeys:t.showTotalValue?["sumMessage"]:false,groupName:"stack",uniqueID:t.chartID,disableKeyNav:t.suppressEvents&&t.accessibility.elementsAreInterface===false&&t.accessibility.keyboardNavConfig&&t.accessibility.keyboardNavConfig.disabled});D5({node:n[r],uniqueID:t.chartID})}))};t.prototype.setGroupAccessibilityID=function(){var t=this;this.updateBarWrappers.each((function(e,i,r){D5({node:r[i],uniqueID:t.chartID})}))};t.prototype.setChartAccessibilityTitle=function(){T5(this.stackedBarChartEl,this.accessibility.title||this.mainTitle)};t.prototype.setChartAccessibilitySubtitle=function(){E5(this.stackedBarChartEl,this.subTitle)};t.prototype.setChartAccessibilityLongDescription=function(){I5(this.stackedBarChartEl,this.accessibility.longDescription)};t.prototype.setChartAccessibilityExecutiveSummary=function(){N5(this.stackedBarChartEl,this.accessibility.executiveSummary)};t.prototype.setChartAccessibilityPurpose=function(){W5(this.stackedBarChartEl,this.accessibility.purpose)};t.prototype.setChartAccessibilityContext=function(){H5(this.stackedBarChartEl,this.accessibility.contextExplanation)};t.prototype.setChartAccessibilityStatisticalNotes=function(){G5(this.stackedBarChartEl,this.accessibility.statisticalNotes)};t.prototype.setChartCountAccessibility=function(){P5({rootEle:this.stackedBarChartEl,parentGNode:this.barG.node(),chartTag:"stacked-bar-chart",geomType:"bar",groupName:"stack"})};t.prototype.setChartAccessibilityStructureNotes=function(){R5(this.stackedBarChartEl,this.accessibility.structureNotes)};t.prototype.onChangeHandler=function(){if(this.accessibility&&typeof this.accessibility.onChangeFunc==="function"){var t={updated:this.updated,added:this.enterSize,removed:this.exitSize};this.accessibility.onChangeFunc(t)}this.updated=false;this.enterSize=0;this.exitSize=0};t.prototype.onClickHandler=function(t){this.clickFunc.emit(t)};t.prototype.onHoverHandler=function(t){f6(this.chartID,true);this.hoverFunc.emit(t);if(this.showTooltip&&t){this.eventsTooltip({data:t,evt:g$,isToShow:true})}};t.prototype.onMouseOutHandler=function(){f6(this.chartID,false);this.mouseOutFunc.emit();if(this.showTooltip){this.eventsTooltip({isToShow:false})}};t.prototype.setTooltipInitialStyle=function(){d6(this.tooltipG)};t.prototype.eventsTooltip=function(t){var e=t.data,i=t.evt,r=t.isToShow;n6({root:this.tooltipG,data:e,event:i,isToShow:r,tooltipLabel:this.tooltipLabel,xAxis:this.xAxis,yAxis:this.yAxis,dataLabel:this.dataLabel,layout:this.layout,ordinalAccessor:this.groupAccessor,groupAccessor:this.ordinalAccessor,valueAccessor:this.valueAccessor,normalized:this.normalized,chartType:"stacked"})};t.prototype.render=function(){var t="light";this.init();if(this.shouldSetTagLevels){this.setTagLevels();this.shouldSetTagLevels=false}if(this.shouldCheckValueAxis){if(this.layout==="horizontal"){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true;this.shouldUpdateXGrid=true}else if(this.layout==="vertical"){this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true;this.shouldUpdateYGrid=true}this.shouldCheckValueAxis=false}if(this.shouldCheckLabelAxis){if(this.layout==="vertical"){this.shouldUpdateXAxis=true;this.shouldSetXAxisAccessibility=true}else if(this.layout==="horizontal"){this.shouldUpdateYAxis=true;this.shouldSetYAxisAccessibility=true}this.shouldCheckLabelAxis=false}if(this.shouldUpdateData){this.prepareData();this.shouldUpdateData=false}if(this.shouldUpdateLegendData){this.prepareLegendData();this.shouldUpdateLegendData=false}if(this.shouldSetDimensions){this.setDimensions();this.shouldSetDimensions=false}if(this.shouldUpdateScales){this.prepareScales();this.shouldUpdateScales=false}if(this.shouldValidateClickHighlight){this.validateClickHighlight();this.shouldValidateClickHighlight=false}if(this.shouldValidateInteractionKeys){this.validateInteractionKeys();this.shouldValidateInteractionKeys=false}if(this.shouldValidateDataLabelAccessor){this.validateDataLabelAccessor();this.shouldValidateDataLabelAccessor=false}if(this.shouldValidateAxes){this.validateAxes();this.shouldValidateAxes=false}if(this.shouldUpdateTableData){this.setTableData();this.shouldUpdateTableData=false}if(this.shouldValidate){this.shouldValidateAccessibilityProps();this.shouldValidate=false}if(this.shouldSetColors){this.setColors();this.shouldSetColors=false}if(this.shouldValidateLabelPlacement){this.validateLabelPlacement();this.shouldValidateLabelPlacement=false}return r("div",{class:"o-layout is--"+this.layout+" "+t},r("div",{class:"o-layout--chart"},r(this.topLevel,{"data-testid":"main-title"},this.mainTitle),r(this.bottomLevel,{class:"visa-ui-text--instructions","data-testid":"sub-title"},this.subTitle),r("div",{class:"stacked-bar-legend vcl-legend",style:{display:this.legend.visible?"block":"none"}}),r("div",{class:"visa-viz-d3-stacked-bar-container"}),r("div",{class:"stacked-bar-tooltip vcl-tooltip",style:{display:this.showTooltip?"block":"none"}}),r("data-table",{uniqueID:this.chartID,isCompact:true,tableColumns:this.tableColumns,data:this.tableData,padding:this.padding,margin:this.margin,hideDataTable:this.accessibility.hideDataTableButton})))};t.prototype.init=function(){var t=Object.keys(y5);var e=0;var i={mainTitle:{exception:""},subTitle:{exception:""},showTooltip:{exception:false},wrapLabel:{exception:false},showTotalValue:{exception:false},barIntervalRatio:{exception:0},hoverOpacity:{exception:0}};for(e=0;e<t.length;e++){var r=!i[t[e]]?false:this[t[e]]===i[t[e]].exception;this[t[e]]=this[t[e]]||r?this[t[e]]:y5[t[e]]}};Object.defineProperty(t.prototype,"stackedBarChartEl",{get:function(){return n(this)},enumerable:true,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{data:["dataWatcher"],uniqueID:["idWatcher"],highestHeadingLevel:["headingWatcher"],mainTitle:["titleWatcher"],subTitle:["subtitleWatcher"],height:["dimensionWatcher"],width:["dimensionWatcher"],padding:["dimensionWatcher"],margin:["dimensionWatcher"],layout:["layoutWatcher"],ordinalAccessor:["ordinalAccessorWatcher"],valueAccessor:["valueAccessorWatcher"],groupAccessor:["groupAccessorWatcher"],sortOrder:["sortWatcher"],xAxis:["xAxisWatcher"],yAxis:["yAxisWatcher"],wrapLabel:["wrapLabelWatcher"],normalized:["normalizedWatcher"],colorPalette:["paletteWatcher"],colors:["colorsWatcher"],hoverStyle:["hoverStyleWatcher"],clickStyle:["clickStyleWatcher"],referenceLines:["referenceWatcher"],referenceStyle:["referenceWatcher"],cursor:["cursorWatcher"],roundedCorner:["cornerWatcher"],barIntervalRatio:["intervalRatioWatcher"],hoverOpacity:["hoverOpacityWatcher"],dataLabel:["labelWatcher"],showTotalValue:["showTotalValueWatcher"],showTooltip:["showTooltipWatcher"],tooltipLabel:["tooltipLabelWatcher"],accessibility:["accessibilityWatcher"],showZeroLabels:["showZeroLabelsWatcher"],legend:["legendWatcher"],annotations:["annotationsWatcher"],maxValueOverride:["valueOverrideWatcher"],minValueOverride:["valueOverrideWatcher"],interactionKeys:["interactionWatcher"],hoverHighlight:["hoverWatcher"],clickHighlight:["clickWatcher"],suppressEvents:["suppressWatcher"]}},enumerable:true,configurable:true});Object.defineProperty(t,"style",{get:function(){return".o-layout{width:100%;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.o-layout--chart{width:100%}.is--vertical .o-layout--chart{width:90%}stacked-bar-chart{cursor:default}stacked-bar-chart .annotations{pointer-events:none}stacked-bar-chart .annotations .handle{pointer-events:all}stacked-bar-chart .screen-reader-info{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}stacked-bar-chart .data-table-link{color:#767676;text-decoration:none;font-size:12px;margin-left:5%}stacked-bar-chart .hidden{display:none}stacked-bar-chart #visa-viz-d3-stacked-bar-container{clear:both}stacked-bar-chart .stacked-bar-legend{font-size:1em;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap}stacked-bar-chart .stacked-bar-legend .legend{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:start;justify-content:flex-start;margin-right:10px}stacked-bar-chart .stacked-bar-legend .key-dot{margin:3px 8px}stacked-bar-chart .light .grid line{stroke:#767676;stroke-opacity:1;stroke-width:0.8;stroke-dasharray:4, 4}stacked-bar-chart .light .grid path{stroke-width:0}stacked-bar-chart .light .axis{font-size:12px}stacked-bar-chart .light .axis .tick text{fill:#767676}stacked-bar-chart .light .axis .tick line{stroke:#767676}stacked-bar-chart .light .axis-label{text-anchor:middle;font:1rem sans-serif}stacked-bar-chart .light .y.axis path{stroke:#767676;opacity:0}stacked-bar-chart .light .x.axis path{stroke:#767676}stacked-bar-chart .light .o-layout--chart .bar-dataLabel-vertical{font-size:1rem;fill:#767676;font-weight:550}stacked-bar-chart .light .o-layout--chart .bar-dataLabel-horizontal{font-size:1rem;fill:#767676;font-weight:550}stacked-bar-chart .dark .grid line{stroke:lightgrey;stroke-opacity:0.7;shape-rendering:crispEdges}stacked-bar-chart .dark .grid path{stroke-width:0}stacked-bar-chart .dark .axis{font-size:12px}stacked-bar-chart .dark .axis .tick line{stroke:lightgrey}stacked-bar-chart .dark .axis .tick text{fill:grey}stacked-bar-chart .dark .axis path{stroke:black}stacked-bar-chart .dark .axis-label{text-anchor:middle;font:1rem sans-serif}stacked-bar-chart .dark .o-layout--chart svg{background:black}stacked-bar-chart .dark .o-layout--chart svg .bar-dataLabel-vertical{fill:#767676;text-anchor:middle}stacked-bar-chart .dark .o-layout--chart svg .bar-dataLabel-horizontal{fill:#767676;text-anchor:start}"},enumerable:true,configurable:true});return t}());window["VisaChartsLibOSSLicenses"]=h6()}}}));